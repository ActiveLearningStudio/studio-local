{"version":3,"sources":["components/ActivityPreviewCard/ActivityPreviewCardDropdown.js","containers/Preview/PlaylistPreview/components/ActivitiesDropdown.js","containers/Preview/PlaylistPreview/LtiPlaylistPreview.js","containers/Preview/PlaylistPreview/LtiPlaylistPreviewShared.js","containers/LtiPreviewPage.js","helpers/xapi.js","store/actions/ui.js","components/Unauthorized.js","components/ResourceCard/shareResource.js","assets/images/project_icon.svg","containers/Preview/PlaylistPreview/components/PreviousLink.js","containers/Preview/PlaylistPreview/components/NextLink.js","services/metrics.service.js","store/actions/metrics.js","containers/Preview/PlaylistPreview/components/ActivitiesList.js","components/ActivityPreviewCard/index.js","components/ResourceCard/dropdown.js","containers/Preview/PlaylistPreview/ActivityShared.js"],"names":["ActivityPreviewCardDropdown","props","showLti","shared","activity","projectId","playlistId","Dropdown","Item","as","Link","style","borderBottom","padding","to","id","className","icon","whiteSpace","title","defaultProps","ActivitiesDropdown","activities","length","role","map","H5PPreview","React","lazy","LtiPlaylistPreview","playlist","activityId","loadLtiPlaylist","loadProjectPlaylists","setCollapsed","collapsed","useEffect","window","scrollTo","selectedPlaylist","project_id","isNonAvailablePlaylist","fontSize","currentActivity","allPlaylists","playlists","currentActivityId","previousResource","nextResource","undefined","find","f","index","findIndex","act","src","projectIcon","alt","project","name","localStorage","getItem","PreviousLink","NextLink","onClick","fallback","showLtiPreview","Tabs","defaultActiveKey","Tab","eventKey","connect","state","ui","sideBarCollapsed","dispatch","loadLtiPlaylistAction","loadProjectPlaylistsAction","collapsedSideBar","LtiPlaylistPreviewShared","history","loading","loadSharedPlaylist","Unauthorized","text","console","log","toUpperCase","showButton","goBack","Toggle","Menu","ActivitiesList","withRouter","loadSharedPlaylistAction","LtiPreviewPage","this","match","previewType","logActivityView","logPlaylistView","params","content","projId","parseInt","plyId","actId","ActivityShared","embed","Header","Component","showCreateProjectModal","showCreateProjectModalAction","loadMyProjects","loadMyProjectsAction","createProject","description","thumbUrl","createProjectAction","logActivityViewAction","logPlaylistViewAction","isxAPINeeded","currentRoute","includes","extendStatement","h5pObj","statement","skipped","path","submissionId","attemptId","studentId","courseId","homepage","toolPlatform","activeCourse","customCourseName","customApiDomainUrl","customCourseCode","platform","el","statementExtended","other","objectType","location","origin","push","object","definition","extensions","alternateLink","actor","account","homePage","context","contextActivities","verb","display","result","score","min","max","interactionType","interactiveBookObject","libraryInfo","machineName","parent","chapterIndex","getActiveChapter","chapters","extendSharedActivityStatement","fakeSubId","Math","floor","random","toString","fakeAttemptId","fakeCourseId","document","referrer","showDeletePopup","deleteType","type","SHOW_DELETE_POPUP","showDeletePopupAction","a","hideDeletePopupAction","HIDE_DELETE_POPUP","SIDE_BAR_COLLAPSE_TOGGLE","loadHP","std","show","LoadHP","ResourceCardDropdownShare","resource","shareActivity","protocol","href","split","confirmAlert","customUI","onClose","target","rel","value","host","copyText","getElementById","focus","select","execCommand","Swal","fire","showCancelButton","showConfirmButton","timer","allowOutsideClick","organization","useSelector","currentPlaylistIndex","p","prevPlaylist","prevLink","currentOrganization","domain","backgroundImage","thumb_url","global","config","resourceUrl","confirmButtonColor","cancelButtonColor","confirmButtonText","then","nextPlaylist","nextLink","cancelButtonText","apiVersion","httpService","get","metricsService","ACTIVITY_VIEWED","PLAYLIST_VIEWED","logProjectViewAction","PROJECT_VIEWED","teamPermission","ActivityPreviewCard","deleteResource","deleteResourceAction","permission","Object","keys","Team","Activity","showLoading","cloneActivity","e","preventDefault","showDenyButton","denyButtonText","isConfirmed","counter","lrs","lrsEndpoint","URLSearchParams","search","lrsAuth","lrsRegistration","useState","authorized","setAuthorized","useDispatch","h5pInsertion","data","H5PIntegration","h5p","settings","innerHTML","embed_code","trim","newCss","core","styles","concat","loadedCss","Promise","all","link","createElement","head","appendChild","scripts","loadedJs","forEach","script","async","body","TinCan","LRS","endpoint","auth","allowFail","loadH5pResourceSettingsEmbed","embedSettings","catch","loadH5pResourceSettingsShared","checkXapi","setInterval","x","getElementsByClassName","contentWindow","H5P","externalDispatcher","xAPIHelper","stopXapi","on","event","extendedStatement","loadH5pResourceXapi","JSON","stringify","doceboStatement","Statement","mbox","registration","saveStatement","callback","err","xhr","responseText","status","clearInterval","charset","color","width","gifloader"],"mappings":"oUAQMA,EAA8B,SAACC,GACnC,IACEC,EAKED,EALFC,QACAC,EAIEF,EAJFE,OACAC,EAGEH,EAHFG,SACAC,EAEEJ,EAFFI,UACAC,EACEL,EADFK,WAGF,OACE,cAACC,EAAA,EAASC,KAAV,CACEC,GAAIC,IACJC,MAAO,CAAEC,aAAc,iBAAkBC,QAAS,QAClDC,GACEX,EAAM,0BACiBE,EADjB,qBACuCC,EADvC,qBAC8DF,EAASW,GADvE,mBAGFb,EAAO,2BACiBI,EADjB,qBACwCF,EAASW,GADjD,0CAEgBV,EAFhB,qBAEsCC,EAFtC,qBAE6DF,EAASW,GAFtE,YAPf,SAaE,sBAAKC,UAAU,4BAAf,UACE,cAAC,IAAD,CAAiBC,KAAK,gBACtB,qBAAKD,UAAU,aAAaL,MAAO,CAAEO,WAAY,UAAjD,SAA8Dd,EAASe,cAc/EnB,EAA4BoB,aAAe,CACzClB,SAAS,EACTC,QAAQ,EACRE,UAAW,MAGEL,QChDf,SAASqB,EAAmBpB,GAC1B,IACEC,EAKED,EALFC,QACAC,EAIEF,EAJFE,OACAE,EAGEJ,EAHFI,UACAC,EAEEL,EAFFK,WACAgB,EACErB,EADFqB,WAGF,OAA0B,IAAtBA,EAAWC,OAEX,qBAAKP,UAAU,YAAf,SACE,qBAAKA,UAAU,mBAAmBQ,KAAK,QAAvC,sDAOCF,EAAWG,KAAI,SAACrB,GAAD,OACpB,cAAC,EAAD,CAEEF,QAASA,EACTC,OAAQA,EACRE,UAAWA,EACXC,WAAYA,EACZF,SAAUA,GALLA,EAASW,OAkBpBM,EAAmBD,aAAe,CAChClB,SAAS,EACTC,QAAQ,EACRE,UAAW,KACXiB,WAAY,IAGCD,QCnCTK,G,OAAaC,IAAMC,MAAK,kBAAM,mCAEpC,SAASC,EAAmB5B,GAC1B,IACE6B,EAQE7B,EARF6B,SACAxB,EAOEL,EAPFK,WACAyB,EAME9B,EANF8B,WACA7B,EAKED,EALFC,QACA8B,EAIE/B,EAJF+B,gBACAC,EAGEhC,EAHFgC,qBACAC,EAEEjC,EAFFiC,aACAC,EACElC,EADFkC,UAGFC,qBAAU,WACRC,OAAOC,SAAS,EAAG,GAEnBN,EAAgB1B,KACf,CAACA,EAAYyB,EAAYC,IAE5B,IAAMO,EAAqBT,EAArBS,iBAUN,GATAH,qBAAU,WACJG,GACFN,EAAqBM,EAAiBC,cAEvC,CAACD,IACAA,GAAoBA,EAAiBxB,KAAOT,IAC9CiC,EAAmB,MAGjBT,EAASW,uBACX,OACE,qBACEzB,UAAU,qBACVQ,KAAK,QACLb,MAAO,CAAE+B,SAAU,SAHrB,wCAUJ,IAAKH,EACH,OACE,qBAAKvB,UAAU,mBAAmBQ,KAAK,QAAvC,wBAMJ,IAGImB,EAHEC,EAAed,EAASe,UAE1BC,EAAoBf,EAEpBgB,EAAmB,KACnBC,EAAe,KAEnB,GAAIT,EAAiBjB,YAAciB,EAAiBjB,WAAWC,OAAS,IAC5C,OAAtBuB,QAAoDG,IAAtBH,IAChCA,EAAoBP,EAAiBjB,WAAW,GAAGP,IAGrD4B,EAAkBJ,EAAiBjB,WAAW4B,MAAK,SAACC,GAAD,OAAOA,EAAEpC,KAAO+B,MAE9C,CACnB,IAAMM,EAAQb,EAAiBjB,WAAW+B,WAAU,SAACC,GAAD,OAASA,EAAIvC,KAAO4B,EAAgB5B,MACpFqC,EAAQ,IACVL,EAAmBR,EAAiBjB,WAAW8B,EAAQ,IAErDA,EAAQb,EAAiBjB,WAAWC,OAAS,IAC/CyB,EAAeT,EAAiBjB,WAAW8B,EAAQ,IAKzD,OACE,0BAASpC,UAAU,mDAAnB,UACE,sBAAKA,UAAU,uBAAf,UACE,sBAAKA,UAAU,SAAf,UACE,cAAC,IAAD,UACE,sBAAKA,UAAU,gBAAf,UACE,qBAAKuC,IAAKC,IAAaC,IAAI,KAD7B,mBAEelB,EAAiBmB,QAAQC,WAG1C,cAAC,IAAD,UACE,sBAAK3C,UAAU,gBAAf,UACE,qBAAKuC,IAAKC,IAAaC,IAAI,KAD7B,oBAEgBlB,EAAiBpB,eAIM,UAAzCyC,aAAaC,QAAQ,iBACvB,cAAC,IAAD,CAAM/C,GAAE,0BAAqByB,EAAiBmB,QAAQ3C,GAA9C,WAAR,SACE,cAAC,IAAD,CAAiBE,KAAK,eAI1B,sBAAKD,UAAU,0BAAf,UACE,sBAAKA,UAAS,8BAAyBmB,EAAY,aAAe,IAAlE,UACE,sBAAKnB,UAAU,yBAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,qBAAKA,UAAU,kBAAf,SACE,qBAAKA,UAAU,eAAf,SACG2B,GACC,gDAGE,+BACGA,EAAgBxB,iBAQ7B,qBAAKH,UAAU,4BAAf,SACE,sBAAKA,UAAU,aAAf,UACE,cAAC8C,EAAA,EAAD,CACE5D,QAASA,EACTI,WAAYA,EACZyC,iBAAkBA,EAClBH,aAAcA,EACdvC,UAAWkC,EAAiBC,aAE9B,cAACuB,EAAA,EAAD,CACE7D,QAASA,EACTI,WAAYA,EACZ0C,aAAcA,EACdJ,aAAcA,EACdvC,UAAWkC,EAAiBC,kBAIlC,mBACEwB,QAAS,kBAAM9B,KACflB,UAAS,6BAAwBmB,EAAY,aAAe,IAF9D,SAIE,cAAC,IAAD,CAAiBlB,KAAK,qBAI1B,qBAAKD,UAAU,oBAAf,SACE,qBAAKA,UAAU,iBAAf,SACG2B,GACC,cAAC,WAAD,CAAUsB,SAAU,0CAApB,SACE,cAACvC,EAAD,CAAYwC,gBAAc,EAACnC,WAAYY,EAAgB5B,cAMjE,qBAAKC,UAAS,6BAAwBmB,EAAY,aAAe,IAAjE,SACE,cAACgC,EAAA,EAAD,CAAMC,iBAAiB,OAAOrD,GAAG,2BAAjC,SACE,cAACsD,EAAA,EAAD,CAAKC,SAAS,OAAOnD,MAAM,aAA3B,SACE,qBAAKH,UAAU,qBAAf,SACE,cAAC,EAAD,CACEd,SAAO,EACPI,WAAYA,EACZgB,WAAYiB,EAAiBjB,2BAgC/CO,EAAmBT,aAAe,CAChClB,SAAS,EACT6B,gBAAYkB,GAGd,IAWesB,eALS,SAACC,GAAD,MAAY,CAClC1C,SAAU0C,EAAM1C,SAChBK,UAAWqC,EAAMC,GAAGC,qBARK,SAACC,GAAD,MAAe,CACxC3C,gBAAiB,SAAC1B,GAAD,OAAgBqE,EAASC,YAAsBtE,KAChE2B,qBAAsB,SAAC5B,GAAD,OAAesE,EAASE,YAA2BxE,KACzE6B,aAAc,kBAAMyC,EAASG,mBAQhBP,CAA6C1C,G,kBC9MtDH,EAAaC,IAAMC,MAAK,kBAAM,kCAEpC,SAASmD,EAAyB9E,GAChC,IACE+E,EAOE/E,EAPF+E,QACAlD,EAME7B,EANF6B,SACAzB,EAKEJ,EALFI,UACAC,EAIEL,EAJFK,WACAyB,EAGE9B,EAHF8B,WACAkD,EAEEhF,EAFFgF,QACAC,EACEjF,EADFiF,mBAGF9C,qBAAU,WACRC,OAAOC,SAAS,EAAG,GAEnB4C,EAAmB7E,EAAWC,KAC7B,CAACD,EAAWC,EAAYyB,EAAYmD,IAEvC,IAAM3C,EAAqBT,EAArBS,iBACN,GAAyB,UAArBA,EACF,OAAO,cAAC4C,EAAA,EAAD,CAAcC,KAAK,2BAO5B,GAJI7C,GAAoBA,EAAiBxB,KAAOT,IAC9CiC,EAAmB,OAGhBA,EACH,OACE,qBAAKvB,UAAU,mBAAmBQ,KAAK,QAAvC,wBAMJ,IAGImB,EAHEC,EAAeL,EAAiBmB,QAAQb,UAE1CC,EAAoBf,EAEpBgB,EAAmB,KACnBC,EAAe,KAEnB,GAAIT,EAAiBjB,YAAciB,EAAiBjB,WAAWC,OAAS,IAC5C,OAAtBuB,QAAoDG,IAAtBH,IAChCA,EAAoBP,EAAiBjB,WAAW,GAAGP,IAGrD4B,EAAkBJ,EAAiBjB,WAAW4B,MAAK,SAACC,GAAD,OAAOA,EAAEpC,KAAO+B,MAE9C,CACnB,IAAMM,EAAQb,EAAiBjB,WAAW+B,WAAU,SAACC,GAAD,OAASA,EAAIvC,KAAO4B,EAAgB5B,MACpFqC,EAAQ,IACVL,EAAmBR,EAAiBjB,WAAW8B,EAAQ,IAErDA,EAAQb,EAAiBjB,WAAWC,OAAS,IAC/CyB,EAAeT,EAAiBjB,WAAW8B,EAAQ,IAOzD,OAFAiC,QAAQC,IAAI/C,GAGV,mCACG0C,EACC,qBAAKjE,UAAU,mBAAf,SACe,eAAZiE,EACC,cAACE,EAAA,EAAD,CAAcC,KAAMH,EAAQM,gBAE5B,cAACJ,EAAA,EAAD,CAAcK,YAAU,EAACJ,KAAK,2CAIlC,0BAASpE,UAAU,4BAAnB,UACE,qBAAKA,UAAU,uBAAf,SACGuB,EAAiBmB,SAChB,qCACE,cAAC,IAAD,CAAM5C,GAAG,IAAIkD,QAASgB,EAAQS,OAA9B,SACE,sBAAKzE,UAAU,gBAAf,UACE,qBAAKuC,IAAKC,IAAaC,IAAI,KAD7B,mBAEelB,EAAiBmB,QAAQC,WAI1C,cAAC,IAAD,CAAM7C,GAAE,0BAAqByB,EAAiBmB,QAAQ3C,IAAtD,SACE,cAAC,IAAD,CAAiBE,KAAK,iBAM9B,sBAAKD,UAAU,iBAAf,UACE,sBAAKA,UAAU,uBAAf,UACE,sBAAKA,UAAU,yBAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,qBAAKA,UAAU,kBAAf,SACE,qBAAKA,UAAU,eAAf,SAGG2B,GAAmBA,EAAgBxB,YAW1C,qBAAKH,UAAU,4BAAf,SACE,sBAAKA,UAAU,aAAf,UACE,cAAC8C,EAAA,EAAD,CACE3D,QAAM,EACNE,UAAWA,EACXC,WAAYA,EACZyC,iBAAkBA,EAClBH,aAAcA,IAEhB,cAACmB,EAAA,EAAD,CACE5D,QAAM,EACNE,UAAWA,EACXC,WAAYA,EACZ0C,aAAcA,EACdJ,aAAcA,YAMtB,qBAAK5B,UAAU,oBAAf,SACE,qBAAKA,UAAU,iBAAf,SAEG2B,GACC,cAAC,WAAD,CAAUsB,SAAU,0CAApB,SACE,cAAC,EAAD,CAAYC,gBAAc,EAACnC,WAAYY,EAAgB5B,cAcjE,sBAAKC,UAAU,sBAAf,UACE,sBAAKA,UAAU,cAAf,UACE,8BACE,eAAC,IAAD,CACEF,GAAG,IACHE,UAAU,yBACVgD,QAASgB,EAAQS,OAHnB,UAKE,cAAC,IAAD,CAAiBxE,KAAK,OAAOD,UAAU,SALzC,uBAUF,eAACT,EAAA,EAAD,CAAUS,UAAU,kCAApB,UACE,cAACT,EAAA,EAASmF,OAAV,CAAiB1E,UAAU,wBAA3B,SACE,cAAC,IAAD,CAAiBC,KAAK,iBAExB,cAACV,EAAA,EAASoF,KAAV,UACE,cAAC,EAAD,CACExF,QAAM,EACNE,UAAWA,EACXC,WAAYA,EACZgB,WAAYiB,EAAiBjB,qBAMrC,sBAAKN,UAAU,iBAAf,UACE,sBAAKA,UAAU,UAAf,kCAEG,IACD,+BACGuB,EAAiBpB,WAGtB,oBAAIH,UAAU,qBAAd,SACE,cAAC4E,EAAA,EAAD,CACEzF,QAAM,EACNE,UAAWA,EACXC,WAAYA,EACZgB,WAAYiB,EAAiBjB,6BAsBjDyD,EAAyB3D,aAAe,CACtC6D,QAAS,IAGX,IAQeY,cACbtB,aALsB,SAACC,GAAD,MAAY,CAClC1C,SAAU0C,EAAM1C,aALS,SAAC6C,GAAD,MAAe,CACxCO,mBAAoB,SAAC7E,EAAWC,GAAZ,OAA2BqE,EAASmB,YAAyBzF,EAAWC,QAQ5FiE,CAA6CQ,ICpOzCgB,E,uKACJ,WAEE1D,OAAOC,SAAS,EAAG,GAEnB,MAEI0D,KAAK/F,MADPgG,EADF,EACEA,MAAOC,EADT,EACSA,YAAaC,EADtB,EACsBA,gBAAiBC,EADvC,EACuCA,gBAEvC,EAAmCH,EAAMI,OAAjC/F,EAAR,EAAQA,WAAYyB,EAApB,EAAoBA,WAEA,mBAAhBmE,EAAoCC,EAAgBpE,GAAwC,mBAAhBmE,IAC9EE,EAAgB9F,GAChB6F,EAAgBpE,M,oBAIpB,WACE,IAQIuE,EARJ,EAAgDN,KAAK/F,MAA7CgG,EAAR,EAAQA,MAAOC,EAAf,EAAeA,YAAaC,EAA5B,EAA4BA,gBAE5B,EAA8CF,EAAMI,OAA5ChG,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,WAAYyB,EAA/B,EAA+BA,WAEzBwE,EAAwB,OAAdlG,QAAoC4C,IAAd5C,EAA2BmG,SAASnG,EAAW,IAAM,KACrFoG,EAAQD,SAASlG,EAAY,IAC7BoG,EAAwB,OAAf3E,QAAsCkB,IAAflB,EAA4ByE,SAASzE,EAAY,IAAM,KA+B7F,MA5BoB,mBAAhBmE,EACFI,EACE,cAAC,EAAD,CACEjG,UAAWkG,EACXjG,WAAYmG,EACZ1E,WAAY2E,IAGS,mBAAhBR,GACTC,EAAgBF,EAAMI,OAAOtE,YAC7BuE,EACE,cAACK,EAAA,EAAD,KAEuB,wBAAhBT,GACTC,EAAgBF,EAAMI,OAAOtE,YAC7BuE,EACE,cAACK,EAAA,EAAD,CAAgBC,OAAK,KAGvBN,EACE,cAAC,EAAD,CACEpG,SAAO,EACPI,WAAYmG,EACZ1E,WAAY2E,IAMhB,iCACIR,GAAe,cAACW,EAAA,EAAD,eAAYb,KAAK/F,QAEjCqG,S,GA1DoB3E,IAAMmF,WAwEnCf,EAAe3E,aAAe,CAC5B8E,YAAa,MAaAL,sBACbtB,YAAQ,MAXiB,SAACI,GAAD,MAAe,CACxCoC,uBAAwB,kBAAMpC,EAASqC,gBACvCC,eAAgB,kBAAMtC,EAASuC,gBAC/BC,cAAe,SAACxD,EAAMyD,EAAaC,GAApB,OAAiC1C,EAAS2C,YAAoB3D,EAAMyD,EAAaC,KAGhGlB,gBAAiB,SAACpE,GAAD,OAAgB4C,EAAS4C,YAAsBxF,KAChEqE,gBAAiB,SAAC9F,GAAD,OAAgBqE,EAAS6C,YAAsBlH,QAIhEiE,CAAkCwB,K,kJCjF7B,SAAS0B,EAAaC,GAC3B,MArBO,CACL,4DACA,kCACA,+BACA,0HAiB8BC,SAASD,GAGpC,SAASE,EAAgBC,EAAQC,EAAWzB,GAA0B,IAAD,IAAjB0B,EAAiB,wDAExEC,EAYE3B,EAZF2B,KACAjG,EAWEsE,EAXFtE,WACAkG,EAUE5B,EAVF4B,aACAC,EASE7B,EATF6B,UACAC,EAQE9B,EARF8B,UACAC,EAOE/B,EAPF+B,SACAC,EAMEhC,EANFgC,SACAC,EAKEjC,EALFiC,aACAC,EAIElC,EAJFkC,aACAC,EAGEnC,EAHFmC,iBACAC,EAEEpC,EAFFoC,mBACAC,EACErC,EADFqC,iBAGIC,EA9BC,CACL,CAAE,wEAAyE,iBAC3E,CAAE,+BAAgC,iBAClC,CAAE,4DAA6D,oBAC/D,CAAE,kCAAmC,cACrC,CAAE,yHAA0H,eAyB/EzF,MAAK,SAAC0F,GAAD,OAAQA,EAAGZ,MAC/D,QAAiB/E,IAAb0F,EAAJ,CAEA,IAwBqD,IAxB/CE,EAAiB,eAAQf,GACzBgB,EAAQ,CACZ,CACEC,WAAY,WACZhI,GAAG,GAAD,OAAKsB,OAAO2G,SAASC,OAArB,qBAAwClH,EAAxC,uBAAiEkG,EAAjE,YAAiFC,IAErF,CACEa,WAAY,WACZhI,GAAG,GAAD,OAAKsB,OAAO2G,SAASC,OAArB,qBAAwClH,EAAxC,uBAAiEkG,KAIhD,qBAAnBU,EAASX,KACXc,EAAMI,KAAK,CACTH,WAAY,WACZhI,GAAG,GAAD,OAAKsB,OAAO2G,SAASC,OAArB,mBAAsCb,KAGtCS,EAAkBM,QAAUN,EAAkBM,OAAOC,YAAcP,EAAkBM,OAAOC,WAAWC,aACzGR,EAAkBM,OAAOC,WAAWC,WAAW,6DAA+Dd,EAAae,cAC3HT,EAAkBM,OAAOC,WAAWC,WAAW,8CAAgDd,EAAa5E,OAI5GgF,EAASX,GACXc,EAAMI,KAAK,CACTH,WAAY,WACZhI,GAAG,GAAD,OAAKsB,OAAO2G,SAASC,OAArB,gBAAmCb,MAGvC,OAAIS,QAAJ,IAAIA,GAAJ,UAAIA,EAAmBM,cAAvB,iBAAI,EAA2BC,kBAA/B,aAAI,EAAuCC,cACzCR,EAAkBM,OAAOC,WAAWC,WAAW,kDAAoDb,EACnGK,EAAkBM,OAAOC,WAAWC,WAAW,iDAAmDZ,EAClGI,EAAkBM,OAAOC,WAAWC,WAAW,kDAAoDX,GAIvG,IAAMa,EAAQ,CACZR,WAAY,QACZS,QAAS,CACPC,SAAUpB,GAAY,+BACtB1E,KAAMwE,IAINU,EAAkBa,UACG,eAAnBf,EAASX,GACXa,EAAkBa,QAAQf,SAAWL,EAErCO,EAAkBa,QAAQf,SAAWA,EAASX,GAGhDa,EAAkBa,QAAQC,kBAAkBb,MAAQA,GAGtDD,EAAkBU,MAAQA,EAGtBxB,IACFc,EAAkBe,KAAO,CACvB7I,GAAI,yCACJ8I,QAAS,CACP,QAAS,YAOXhB,EAAkBiB,QACfjB,EAAkBiB,OAAOC,OACzBlB,EAAkBiB,OAAOC,MAAMC,MAAQnB,EAAkBiB,OAAOC,MAAME,MAEzEpB,EAAkBiB,OAAOC,MAAME,KAAO,IAKtCpB,EAAkBM,QAAkE,aAAxDN,EAAkBM,OAAOC,WAAWc,kBAClErB,EAAkBM,OAAOC,WAAWc,gBAAkB,UASxD,IAFA,IAAIC,EAAwBtC,EAErBsC,GAA6E,yBAA/B,QAArB,EAAAA,SAAA,mBAAuBC,mBAAvB,eAAoCC,cAAuC,CAAC,IAAD,IACzGF,EAAwBA,EAAsBG,OAGhD,GAAwD,yBAA/B,QAArB,EAAAH,SAAA,mBAAuBC,mBAAvB,eAAoCC,aAAuC,CAC7E,IAAME,EAAeJ,EAAsBK,mBAC3C3B,EAAkBM,OAAOC,WAAWC,WAAW,mDAAqDc,EAAsBM,SAASF,GAAcpJ,MAGnJ,OAAO0H,GAKF,SAAS6B,EAA8B7C,EAAQC,EAAWzB,GAAS,IAAD,EAErE2B,EAEE3B,EAFF2B,KACAjG,EACEsE,EADFtE,WAEI8G,EAAiB,eAAQf,GAGzB6C,EAAYC,KAAKC,MAAsB,IAAhBD,KAAKE,UAAmBC,WAC/CC,EAAgBJ,KAAKC,MAAsB,IAAhBD,KAAKE,UAAmBC,WACnDE,EAAeL,KAAKC,MAAsB,IAAhBD,KAAKE,UAAmBC,WAElDjC,EAAQ,CACZ,CACEC,WAAY,WACZhI,GAAG,GAAD,OAAKsB,OAAO2G,SAASC,OAArB,qBAAwClH,EAAxC,uBAAiE4I,EAAjE,YAA8EK,IAElF,CACEjC,WAAY,WACZhI,GAAG,GAAD,OAAKsB,OAAO2G,SAASC,OAArB,qBAAwClH,EAAxC,uBAAiE4I,IAErE,CACE5B,WAAY,WACZhI,GAAG,GAAD,OAAKsB,OAAO2G,SAASC,OAArB,mBAAsCgC,KAItCtC,EAlKC,CACL,CAAE,wEAAyE,iBAC3E,CAAE,+BAAgC,iBAClC,CAAE,4DAA6D,oBAC/D,CAAE,kCAAmC,cACrC,CAAE,yHAA0H,eA6J/EzF,MAAK,SAAC0F,GAAD,OAAQA,EAAGZ,MAC/D,QAAiB/E,IAAb0F,EASJ,OAPA,OAAIE,QAAJ,IAAIA,GAAJ,UAAIA,EAAmBa,eAAvB,aAAI,EAA4BC,qBAC9Bd,EAAkBa,QAAQf,SAAWA,EAASX,GAC9Ca,EAAkBa,QAAQC,kBAAkBb,MAAQA,GAGtDD,EAAkBM,OAAOC,WAAWC,WAAW,8CAAgD6B,SAASC,SAAWD,SAASC,SAAW9I,OAAO2G,SAASC,OAEhJJ,I,yKClLIuC,EAAkB,SAACrK,EAAII,EAAOkK,GAAZ,MAA4B,CACzDC,KAAMC,KACNxK,KACAI,QACAkK,eAIWG,EAAwB,SAACzK,EAAII,EAAOkK,GAAZ,8CAA2B,WAAO1G,GAAP,SAAA8G,EAAA,sDAC9D9G,EAASyG,EAAgBrK,EAAII,EAAOkK,IAD0B,2CAA3B,uDASxBK,EAAwB,yDAAM,WAAO/G,GAAP,SAAA8G,EAAA,sDACzC9G,EANoC,CACpC2G,KAAMK,OAImC,2CAAN,uDAIxB7G,EAAmB,yDAAM,WAAOH,GAAP,SAAA8G,EAAA,sDACpC9G,EAAS,CAAE2G,KAAMM,OADmB,2CAAN,wD,uDC3BhC,0DAQA,SAASzG,EAAalF,GACpB,IAAQmF,EAA6BnF,EAA7BmF,KAAMI,EAAuBvF,EAAvBuF,WAAYqG,EAAW5L,EAAX4L,OAE1B,OACE,qBAAK7K,UAAU,mBAAf,SACE,sBAAKA,UAAU,mBAAf,UACE,qBAAKuC,IAAKuI,IAAKrI,IAAI,KAEnB,6BAAK2B,IAEJI,EACC,eAAC,IAAD,CACE1E,GAAG,UACHkD,QAAS,WACP6H,EAAO,eAHX,UAMG,IANH,yBAUA,eAAC,IAAD,CACE/K,GAAG,UACHkD,QAAS,WACP6H,EAAO,eAHX,UAMG,IANH,kBAqBV1G,EAAa/D,aAAe,CAC1BoE,YAAY,GAOCK,gBACbtB,YAAQ,MALiB,SAACI,GAAD,MAAe,CACxCkH,OAAQ,SAACE,GAAD,OAAUpH,EAASqH,YAAOD,QAIlCxH,CAAkCY,K,yEC3DpC,iEA0Fe8G,IAhFmB,SAAChM,GACjC,IAAQiM,EAAajM,EAAbiM,SAER,OACE,eAAC,IAAS1L,KAAV,CACEwD,QAAS,WACPmI,YAAcD,EAASnL,IACvB,IAAMqL,EAAQ,UAAM/J,OAAO2G,SAASqD,KAAKC,MAAM,KAAK,GAAtC,MACdC,uBAAa,CACXC,SAAU,gBAAGC,EAAH,EAAGA,QAAH,OACR,sBAAKzL,UAAU,gDAAf,UACE,uBACA,4DAEG,IACD,iCAASkL,EAAS/K,QAClB,uBAJF,0DAQA,mBACEuL,OAAO,SACPL,KAAI,2BAAsBH,EAASnL,GAA/B,WACJ4L,IAAI,sBAHN,SAKE,uBACE5L,GAAG,eACH6L,MAAK,UAAKR,EAAW/J,OAAO2G,SAAS6D,KAAhC,4BAAwDX,EAASnL,GAAjE,eAIT,sBACEI,MAAM,oBACN,cAAY,OACZ6C,QAAS,WAEP,IAAM8I,EAAW5B,SAAS6B,eAAe,gBAGzCD,EAASE,QACTF,EAASG,SAIT/B,SAASgC,YAAY,QAGrBC,IAAKC,KAAK,CACRjM,MAAO,cACPkM,kBAAkB,EAClBC,mBAAmB,EACnBC,MAAO,KACPC,mBAAmB,KArBzB,SAyBE,cAAC,IAAD,CAAiBvM,KAAK,gBAExB,uBAEA,qBAAKD,UAAU,YAAf,SACE,wBAAQsK,KAAK,SAAStH,QAASyI,EAA/B,yBAzDZ,UAkEE,cAAC,IAAD,CAAiBxL,KAAK,QAAQD,UAAU,SAlE1C,a,uDCdW,QAA0B,0C,kCCAzC,4EAQA,SAAS8C,EAAa7D,GACpB,IAwBS,EAvBP+E,EAOE/E,EAPF+E,QACA9E,EAMED,EANFC,QACAC,EAKEF,EALFE,OACAE,EAIEJ,EAJFI,UACAC,EAGEL,EAHFK,WACAyC,EAEE9C,EAFF8C,iBACAH,EACE3C,EADF2C,aAEI6K,EAAeC,aAAY,SAAClJ,GAAD,OAAWA,EAAMiJ,gBAC5CE,EAAuB/K,EAAaS,WAAU,SAACuK,GAAD,OAAQA,EAAE7M,KAAOT,KAC/DuN,EAAeF,EAAuB,EACxC/K,EAAa+K,EAAuB,GACpC,KAEAG,EAAW,KACX/K,EACF+K,EAAQ,oBAAgBxN,EAAhB,qBAAuCyC,EAAiBhC,GAAxD,YACC8M,IACTC,EAAQ,oBAAgBD,EAAa9M,GAA7B,aAEO,MAAb+M,KACE5N,EACF4N,GAAY,eAEZA,EAAQ,gCAAkBL,EAAaM,2BAA/B,aAAkB,EAAkCC,OAApD,oBAAsE3N,GAAtE,OAAkFyN,GAEtF3N,IACF2N,GAAY,oBAKlB,OACE,sBAAK9M,UAAU,uBAAf,UACE,cAAC,IAAD,CAAMF,GAAIgN,EAAV,SACE,cAAC,IAAD,CAAiB7M,KAAK,mBAGxB,qBAAKD,UAAS,8CAAyC+B,EAAmB,GAAK,iBAA/E,SACGA,EACC,eAAC,IAAD,CAAMjC,GAAIgN,EAAV,UACE,qBACE9M,UAAU,eACVL,MAAO,CACLsN,gBAAiBlL,EAAiBmL,UAC9BnL,EAAiBmL,UAAUvG,SAAS,cAApC,cACS5E,EAAiBmL,UAD1B,mBAESC,EAAOC,OAAOC,aAFvB,OAEqCtL,EAAiBmL,UAFtD,KAGA,sqEAGR,+BAAOnL,EAAiB5B,WAG1B,sBAAKH,UAAU,aAAf,UACE,oFACA,eAAC,IAAD,CACEF,GAAIgN,EACJ9J,QAAS,WACF6J,GACHV,IAAKC,KAAK,CACRhI,KAAM,6FACNiI,kBAAkB,EAClBiB,mBAAoB,UACpBC,kBAAmB,OACnBC,kBAAmB,QAElBC,MAAK,SAAC3E,GAIK,IAAD,EAHLA,EAAO8C,QACL1M,EACF8E,EAAQkE,KAAR,0BAAgC7I,EAAhC,YAEA2E,EAAQkE,KAAR,gCAA4BuE,EAAaM,2BAAzC,aAA4B,EAAkCC,OAA9D,oBAAgF3N,EAAhF,kBAhBd,UAuBE,cAAC,IAAD,CAAiBY,KAAK,eAAeD,UAAU,SAvBjD,yCA2CZ8C,EAAa1C,aAAe,CAC1BlB,SAAS,EACTC,QAAQ,EACRE,UAAW,KACX0C,iBAAkB,KAClBH,aAAc,IAGDiD,gBAAW/B,K,oDCrH1B,4EAQA,SAASC,EAAS9D,GAChB,IAwBS,EAvBP+E,EAOE/E,EAPF+E,QACA9E,EAMED,EANFC,QACAC,EAKEF,EALFE,OACAE,EAIEJ,EAJFI,UACAC,EAGEL,EAHFK,WACA0C,EAEE/C,EAFF+C,aACAJ,EACE3C,EADF2C,aAGI+K,EAAuB/K,EAAaS,WAAU,SAACuK,GAAD,OAAQA,EAAE7M,KAAOT,KAC/DoO,EAAef,EAAuB/K,EAAarB,OAAS,EAC9DqB,EAAa+K,EAAuB,GACpC,KACEF,EAAeC,aAAY,SAAClJ,GAAD,OAAWA,EAAMiJ,gBAC9CkB,EAAW,KACX3L,EACF2L,EAAQ,oBAAgBrO,EAAhB,qBAAuC0C,EAAajC,GAApD,YACC2N,IACTC,EAAQ,oBAAgBD,EAAa3N,GAA7B,aAEO,MAAb4N,KACEzO,EACFyO,GAAY,eAEZA,EAAQ,gCAAkBlB,EAAaM,2BAA/B,aAAkB,EAAkCC,OAApD,oBAAsE3N,GAAtE,OAAkFsO,GAEtFxO,IACFwO,GAAY,oBAKlB,OACE,sBAAK3N,UAAU,uBAAf,UACE,cAAC,IAAD,CAAMF,GAAI6N,EAAV,SACE,cAAC,IAAD,CAAiB1N,KAAK,oBAGxB,qBAAKD,UAAS,8CAAyCgC,EAAe,GAAK,YAA3E,SACGA,EACC,eAAC,IAAD,CAAMlC,GAAI6N,EAAV,UACE,qBACE3N,UAAU,eACVL,MAAO,CACLsN,gBAAiBjL,EAAakL,UAC1BlL,EAAakL,UAAUvG,SAAS,cAAhC,cACS3E,EAAakL,UADtB,mBAESC,EAAOC,OAAOC,aAFvB,OAEqCrL,EAAakL,UAFlD,KAGA,sqEAGR,+BAAOlL,EAAa7B,WAGtB,sBAAKH,UAAU,aAAf,UACE,mGACA,eAAC,IAAD,CACEF,GAAI6N,EACJ3K,QAAS,WACF0K,GACHvB,IAAKC,KAAK,CACRhI,KAAM,uFACNiI,kBAAkB,EAClBiB,mBAAoB,UACpBC,kBAAmB,OACnBK,iBAAkB,KAClBJ,kBAAmB,QAElBC,MAAK,SAAC3E,GAIK,IAAD,EAHLA,EAAO8C,QACL1M,EACF8E,EAAQkE,KAAR,0BAAgC7I,EAAhC,YAEA2E,EAAQkE,KAAR,gCAA4BuE,EAAaM,2BAAzC,aAA4B,EAAkCC,OAA9D,oBAAgF3N,EAAhF,kBAjBd,oCAyBE,cAAC,IAAD,CAAiBY,KAAK,gBAAgBD,UAAU,oBAmB9D+C,EAAS3C,aAAe,CACtBlB,SAAS,EACTC,QAAQ,EACRE,UAAW,KACX2C,aAAc,KACdJ,aAAc,IAGDiD,gBAAW9B,K,yNCnHlB8K,EAAeT,IAAfS,WAwBO,EAZS,SAAC9M,GAAD,OAAgB+M,IACrCC,IADqC,WAC7BF,EAD6B,uBACJ9M,EADI,eAYzB,EATS,SAACzB,GAAD,OAAgBwO,IACrCC,IADqC,WAC7BF,EAD6B,sBACLvO,EADK,eASzB,EANQ,SAACD,GAAD,OAAeyO,IACnCC,IADmC,WAC3BF,EAD2B,qBACJxO,EADI,e,OCIzBkH,EAAwB,SAACxF,GAAD,8CAAgB,WAAO4C,GAAP,SAAA8G,EAAA,sDACnDuD,EAA+BjN,GAC/B4C,EAAS,CAAE2G,KAAM2D,MAFkC,2CAAhB,uDAKxBzH,EAAwB,SAAClH,GAAD,8CAAgB,WAAOqE,GAAP,SAAA8G,EAAA,sDACnDuD,EAA+B1O,GAC/BqE,EAAS,CAAE2G,KAAM4D,OAFkC,2CAAhB,uDAKxBC,EAAuB,SAAC9O,GAAD,8CAAe,WAAOsE,GAAP,SAAA8G,EAAA,sDACjDuD,EAA8B3O,GAC9BsE,EAAS,CAAE2G,KAAM8D,OAFgC,2CAAf,wD,iCCnCpC,yBAKA,SAASxJ,EAAe3F,GACtB,IACEC,EAOED,EAPFC,QACAC,EAMEF,EANFE,OACAE,EAKEJ,EALFI,UACAC,EAIEL,EAJFK,WACAgB,EAGErB,EAHFqB,WACAQ,EAEE7B,EAFF6B,SACAuN,EACEpP,EADFoP,eAGF,OAA0B,IAAtB/N,EAAWC,OAEX,qBAAKP,UAAU,YAAf,SACE,qBAAKA,UAAU,mBAAmBQ,KAAK,QAAvC,sDAOCF,EAAWG,KAAI,SAACrB,GAAD,OACpB,cAAC,IAAD,CAEEF,QAASA,EACTC,OAAQA,EACRE,UAAWA,EACXC,WAAYA,EACZF,SAAUA,EACV0B,SAAUA,EACVuN,eAAgBA,GAAkB,IAP7BjP,EAASW,OAsBpB6E,EAAexE,aAAe,CAC5BlB,SAAS,EACTC,QAAQ,EACRE,UAAW,KACXiB,WAAY,IAGCsE,O,kCCzDf,8DAQM0J,EAAsB,SAACrP,GAAW,IAAD,EAEnCC,EAOED,EAPFC,QACAC,EAMEF,EANFE,OACAC,EAKEH,EALFG,SACAC,EAIEJ,EAJFI,UACAC,EAGEL,EAHFK,WACAwB,EAEE7B,EAFF6B,SACAuN,EACEpP,EADFoP,eAEI5B,EAAeC,aAAY,SAAClJ,GAAD,OAAWA,EAAMiJ,gBAClD,OACE,sBAAKzM,UAAU,4BAAf,UACE,cAAC,IAAD,CACEF,GACEX,EAAM,mBACUE,EADV,qBACgCC,EADhC,qBACuDF,EAASW,GADhE,mBAGFb,EAAO,oBACUI,EADV,qBACiCF,EAASW,GAD1C,gDAEY0M,EAAaM,2BAFzB,aAEY,EAAkCC,OAF9C,oBAEgE3N,EAFhE,qBAEsFC,EAFtF,qBAE6GF,EAASW,GAFtH,YALf,SAWE,qBAAIC,UAAU,QAAd,UACGZ,EAAS8N,WACR,qBACElN,UAAU,eACVL,MAAO,CACLsN,gBAAiB7N,EAAS8N,UAAUvG,SAAS,cAA5B,cACNvH,EAAS8N,UADH,mBAENC,EAAOC,OAAOC,aAFR,OAEsBjO,EAAS8N,UAF/B,QAMvB,8BACE,qBAAKlN,UAAU,QAAf,SAAwBZ,EAASe,gBAIrCjB,GAEA,cAAC,IAAD,CACEgM,SAAU9L,EACV0B,SAAUA,EACVuN,eAAgBA,GAAkB,SAiB5CC,EAAoBlO,aAAe,CACjClB,SAAS,EACTC,QAAQ,EACRE,UAAW,MAGEiP,Q,mDC5Ef,0GAuGezJ,gBAAWtB,YAAQ,MAJP,SAACI,GAAD,MAAe,CACxC4K,eAAgB,SAACxN,EAAYzB,GAAb,OAA4BqE,EAAS6K,YAAqBzN,EAAYzB,QAG9DiE,EAzFG,SAACtE,GAAW,IAAD,sBAEpCiM,EAKEjM,EALFiM,SACAqD,EAIEtP,EAJFsP,eACAzN,EAGE7B,EAHF6B,SACAmE,EAEEhG,EAFFgG,MACAoJ,EACEpP,EADFoP,eAEI5B,EAAeC,aAAY,SAAClJ,GAAD,OAAWA,EAAMiJ,gBAC1CgC,EAAehC,EAAfgC,WAgBR,OACE,eAAC,IAAD,CAAUzO,UAAU,qCAApB,UACE,cAAC,IAAS0E,OAAV,CAAiB1E,UAAU,wBAA3B,SACE,cAAC,IAAD,CAAiBC,KAAK,iBAGxB,eAAC,IAAS0E,KAAV,YACI+J,OAAOC,KAAKN,GAAgB9N,OAA5B,OAAqC8N,QAArC,IAAqCA,GAArC,UAAqCA,EAAgBO,YAArD,aAAqC,EAAsBjI,SAAS,sBAApE,OAA4F8H,QAA5F,IAA4FA,GAA5F,UAA4FA,EAAYI,gBAAxG,aAA4F,EAAsBlI,SAAS,mBAC3H,eAAC,IAASnH,KAAV,CACEC,GAAIC,IACJI,GAAE,gCAAiB2M,EAAaM,2BAA9B,aAAiB,EAAkCC,OAAnD,oBAAqE/H,EAAMI,OAAOhG,UAAlF,qBAAwGyB,EAASf,GAAjH,qBAAgImL,EAASnL,GAAzI,YAFJ,UAIE,cAAC,IAAD,CAAiBE,KAAK,MAAMD,UAAU,SAJxC,cAQA0O,OAAOC,KAAKN,GAAgB9N,OAA5B,OAAqC8N,QAArC,IAAqCA,GAArC,UAAqCA,EAAgBO,YAArD,aAAqC,EAAsBjI,SAAS,sBAApE,OAA4F8H,QAA5F,IAA4FA,GAA5F,UAA4FA,EAAYI,gBAAxG,aAA4F,EAAsBlI,SAAS,mBAC3H,eAAC,IAASnH,KAAV,CACEC,GAAIC,IACJI,GAAE,gCAAiB2M,EAAaM,2BAA9B,aAAiB,EAAkCC,OAAnD,oBAAqE/H,EAAMI,OAAOhG,UAAlF,qBAAwGyB,EAASf,GAAjH,qBAAgImL,EAASnL,GAAzI,SAFJ,UAIE,cAAC,IAAD,CAAiBE,KAAK,MAAMD,UAAU,SAJxC,WAQS,OAAVyO,QAAU,IAAVA,GAAA,UAAAA,EAAYI,gBAAZ,eAAsBlI,SAAS,wBAC9B,eAAC,IAASnH,KAAV,CACEM,GAAG,IACHkD,QAAS,WACPmJ,IAAK2C,cACLC,YAAcjO,EAASf,GAAImL,EAASnL,KAJxC,UAOE,cAAC,IAAD,CAAiBE,KAAK,QAAQD,UAAU,SAP1C,gBAWA0O,OAAOC,KAAKN,GAAgB9N,OAA5B,OAAqC8N,QAArC,IAAqCA,GAArC,UAAqCA,EAAgBO,YAArD,aAAqC,EAAsBjI,SAAS,uBAApE,OAA6F8H,QAA7F,IAA6FA,GAA7F,UAA6FA,EAAYI,gBAAzG,aAA6F,EAAsBlI,SAAS,oBAC5H,cAAC,IAAD,CAA2BuE,SAAUA,KAErCwD,OAAOC,KAAKN,GAAgB9N,OAA5B,OAAqC8N,QAArC,IAAqCA,GAArC,UAAqCA,EAAgBO,YAArD,aAAqC,EAAsBjI,SAAS,wBAApE,OAA8F8H,QAA9F,IAA8FA,GAA9F,UAA8FA,EAAYI,gBAA1G,aAA8F,EAAsBlI,SAAS,qBAC7H,eAAC,IAASnH,KAAV,CAAewD,QAxDF,SAACgM,GACpBA,EAAEC,iBACF9C,IAAKC,KAAK,CACRjM,MAAO,iDACP+O,gBAAgB,EAChB7C,kBAAkB,EAClBmB,kBAAmB,MACnB2B,eAAgB,OACf1B,MAAK,SAAC3E,GACHA,EAAOsG,aACTb,EAAerD,EAASnL,GAAIe,EAASf,QA8CnC,UACE,cAAC,IAAD,CAAiBE,KAAK,eAAeD,UAAU,SADjD,uB,uKCnENqP,EAAU,EACVC,EAAM,KAkMKzK,iBAhMQ,SAAC5F,GACtB,IAAQgG,EAAiBhG,EAAjBgG,MAAOW,EAAU3G,EAAV2G,MACT2J,EAAc,IAAIC,gBAAgBnO,OAAO2G,SAASyH,QAAQ1B,IAAI,YAC9D2B,EAAU,IAAIF,gBAAgBnO,OAAO2G,SAASyH,QAAQ1B,IAAI,QAC1D4B,EAAkB,IAAIH,gBAAgBnO,OAAO2G,SAASyH,QAAQ1B,IAAI,gBACxE,EAAoC6B,oBAAS,GAA7C,mBAAOC,EAAP,KAAmBC,EAAnB,KAGMnM,EAAWoM,cAEXC,EAAY,uCAAG,WAAOC,GAAP,eAAAxF,EAAA,6DACnBpJ,OAAO6O,eAAiBD,EAAKE,IAAIC,SACdlG,SAAS6B,eAAe,uBAChCsE,UAAYJ,EAAKE,IAAIG,WAAWC,OACrCC,EAASP,EAAKE,IAAIC,SAASK,KAAKC,OAAOC,OAC3CV,EAAKE,IAAIC,SAASQ,WALD,SAQbC,QAAQC,IACZN,EAAO/P,KAAI,SAACmL,GACV,IAAMmF,EAAO7G,SAAS8G,cAAc,QAKpC,OAJAD,EAAK1F,KAAOO,EACZmF,EAAKzG,KAAO,WACZyG,EAAKpF,IAAM,aACXzB,SAAS+G,KAAKC,YAAYH,IACnB,MAfQ,OAmBAd,EAAKE,IAAIC,SAASK,KAAKU,QAAQR,OAChDV,EAAKE,IAAIC,SAASgB,UAGTC,SAAQ,SAACzF,GAClB,IAAM0F,EAASpH,SAAS8G,cAAc,UACtCM,EAAO/O,IAAMqJ,EACb0F,EAAOC,OAAQ,EACfrH,SAASsH,KAAKN,YAAYI,MA3BT,2CAAH,sDAsIlB,OAtGAlQ,qBAAU,YACHmO,GAAgBG,GAAmB,OAARJ,KAEhCA,EAAM,IAAImC,IAAOC,IAAI,CACnBC,SAAUpC,EACVqC,KAAMlC,EACNmC,WAAW,OAEZ,CAACtC,EAAaG,IAEjBtO,qBAAU,WAGR,GAFAC,OAAOC,SAAS,EAAG,GAEf2D,EAAMI,OAAOtE,WAAY,CACvB6E,EACFkM,YAA6B7M,EAAMI,OAAOtE,YACvC0M,KADH,uCACQ,WAAOwC,GAAP,eAAAxF,EAAA,uDACEsH,EAAgB,IACR5B,IAAMF,EACpBD,EAAa+B,GAHT,2CADR,uDAMGC,OAAM,WACLlC,GAAc,MAGlBmC,YAA8BhN,EAAMI,OAAOtE,YACxC0M,KADH,uCACQ,WAAOwC,GAAP,SAAAxF,EAAA,sDACJuF,EAAaC,GADT,2CADR,uDAIG+B,OAAM,WACLlC,GAAc,MAIpB,IAAMoC,EAAYC,aAAY,WAC5B,IACE,IAAMC,EAAIlI,SAASmI,uBAAuB,cAAc,GAAGC,cACvDF,EAAEG,KACAH,EAAEG,IAAIC,oBAAsBC,IAAwBxT,EAAMgG,MAAM+B,QAElE0L,IAEAN,EAAEG,IAAIC,mBAAmBG,GAAG,QAAQ,SAACC,GACnC,GAAIvD,EAAU,EAAG,CACf,IAAMwD,EAAoBJ,I,UAExBG,EAAM3C,KAAKnJ,UACX,CAAEE,KAAM/B,EAAM+B,KAAMjG,WAAYkE,EAAMI,OAAOtE,aAI/C,GAFA4C,EAASmP,YAAoBC,KAAKC,UAAUH,KAExCvD,EAAK,CAEP,IAAM2D,EAAkB,IAAIxB,IAAOyB,UAAU,CACvC3K,MAAM,2BACDsK,EAAkBtK,OADlB,IAEH4K,KAAM,kCAERvK,KAAMiK,EAAkBjK,KACxBF,QAAQ,2BACHmK,EAAkBnK,SADhB,IAEL0K,aAAczD,IAEhBxH,OAAQ0K,EAAkB1K,SAGhCmH,EAAI+D,cACFJ,EACA,CACEK,SAAU,SAACC,EAAKC,GACZ,GAAY,OAARD,EACA,OAAY,OAARC,OACAnP,QAAQC,IAAR,oCAAyCkP,EAAIC,aAA7C,aAA8DD,EAAIE,OAAlE,WAKJrP,QAAQC,IAAR,oCAAyCiP,IAK7ClP,QAAQC,IAAI,uBAOxB+K,GAAW,MAIjB,MAAOL,GACP3K,QAAQC,IAAI0K,OAIV0D,EAAW,kBAAMiB,cAAczB,OAEtC,CAACvO,EAAUiC,EAAOX,EAAMI,OAAOtE,aAGhC,mCACE,0BAASf,UAAW4F,EAAQ,iFAC1B,2EADF,YAGKA,GACD,cAAC,IAAD,UACE,wBAAQrD,IAAI,2EAA2EqR,QAAQ,YAInG,qBAAK5T,UAAU,0BAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,qBAAKA,UAAU,iCAAf,SACE,qBAAKA,UAAU,iBAAf,SACG6P,EACC,qBAAK9P,GAAG,sBAAR,SACE,qBAAKC,UAAU,aAAaL,MAAO,CAAEkU,MAAO,SAA5C,wCAKF,qBAAK9T,GAAG,sBAAR,SACE,qBAAKC,UAAU,aAAf,SACE,qBAAKL,MAAO,CAAEmU,MAAO,QAAUvR,IAAKwR,IAAWtR,IAAI","file":"static/js/23.b9b6e76b.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { Dropdown } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport './style.scss';\n\nconst ActivityPreviewCardDropdown = (props) => {\n  const {\n    showLti,\n    shared,\n    activity,\n    projectId,\n    playlistId,\n  } = props;\n\n  return (\n    <Dropdown.Item\n      as={Link}\n      style={{ borderBottom: '1px solid #eee', padding: '10px' }}\n      to={\n        shared\n          ? `/studio/project/${projectId}/playlist/${playlistId}/activity/${activity.id}/preview/shared`\n          : (\n            showLti\n              ? `/studio/playlist/${playlistId}/activity/${activity.id}/preview/lti`\n              : `/studio/project/${projectId}/playlist/${playlistId}/activity/${activity.id}/preview`\n          )\n      }\n    >\n      <div className=\"d-flex align-items-center\">\n        <FontAwesomeIcon icon=\"play-circle\" />\n        <div className=\"ml-2 title\" style={{ whiteSpace: 'normal' }}>{activity.title}</div>\n      </div>\n    </Dropdown.Item>\n  );\n};\n\nActivityPreviewCardDropdown.propTypes = {\n  showLti: PropTypes.bool,\n  shared: PropTypes.bool,\n  activity: PropTypes.object.isRequired,\n  projectId: PropTypes.number,\n  playlistId: PropTypes.number.isRequired,\n};\n\nActivityPreviewCardDropdown.defaultProps = {\n  showLti: false,\n  shared: false,\n  projectId: null,\n};\n\nexport default ActivityPreviewCardDropdown;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ActivityPreviewCardDropdown from 'components/ActivityPreviewCard/ActivityPreviewCardDropdown';\n\nfunction ActivitiesDropdown(props) {\n  const {\n    showLti,\n    shared,\n    projectId,\n    playlistId,\n    activities,\n  } = props;\n\n  if (activities.length === 0) {\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"alert alert-info\" role=\"alert\">\n          No activity defined for this playlist.\n        </div>\n      </div>\n    );\n  }\n\n  return activities.map((activity) => (\n    <ActivityPreviewCardDropdown\n      key={activity.id}\n      showLti={showLti}\n      shared={shared}\n      projectId={projectId}\n      playlistId={playlistId}\n      activity={activity}\n    />\n  ));\n}\n\nActivitiesDropdown.propTypes = {\n  showLti: PropTypes.bool,\n  shared: PropTypes.bool,\n  projectId: PropTypes.number,\n  playlistId: PropTypes.number.isRequired,\n  activities: PropTypes.array,\n};\n\nActivitiesDropdown.defaultProps = {\n  showLti: false,\n  shared: false,\n  projectId: null,\n  activities: [],\n};\n\nexport default ActivitiesDropdown;\n","import React, { Suspense, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Link } from 'react-router-dom';\nimport { Tab, Tabs } from 'react-bootstrap';\n\nimport { collapsedSideBar } from 'store/actions/ui';\nimport projectIcon from 'assets/images/project_icon.svg';\nimport { loadLtiPlaylistAction, loadProjectPlaylistsAction } from 'store/actions/playlist';\nimport PreviousLink from './components/PreviousLink';\nimport NextLink from './components/NextLink';\nimport ActivitiesDropdown from './components/ActivitiesDropdown';\n\nimport './style.scss';\n\nconst H5PPreview = React.lazy(() => import('../../H5PPreview'));\n\nfunction LtiPlaylistPreview(props) {\n  const {\n    playlist,\n    playlistId,\n    activityId,\n    showLti,\n    loadLtiPlaylist,\n    loadProjectPlaylists,\n    setCollapsed,\n    collapsed,\n  } = props;\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n\n    loadLtiPlaylist(playlistId);\n  }, [playlistId, activityId, loadLtiPlaylist]);\n\n  let { selectedPlaylist } = playlist;\n  useEffect(() => {\n    if (selectedPlaylist) {\n      loadProjectPlaylists(selectedPlaylist.project_id);\n    }\n  }, [selectedPlaylist]);\n  if (selectedPlaylist && selectedPlaylist.id !== playlistId) {\n    selectedPlaylist = null;\n  }\n\n  if (playlist.isNonAvailablePlaylist) {\n    return (\n      <div\n        className=\"alert alert-danger\"\n        role=\"alert\"\n        style={{ fontSize: '1.5em' }}\n      >\n        Playlist is not available.\n      </div>\n    );\n  }\n\n  if (!selectedPlaylist) {\n    return (\n      <div className=\"alert alert-info\" role=\"alert\">\n        Loading...\n      </div>\n    );\n  }\n\n  const allPlaylists = playlist.playlists;\n\n  let currentActivityId = activityId;\n  let currentActivity;\n  let previousResource = null;\n  let nextResource = null;\n\n  if (selectedPlaylist.activities && selectedPlaylist.activities.length > 0) {\n    if (currentActivityId === null || currentActivityId === undefined) {\n      currentActivityId = selectedPlaylist.activities[0].id;\n    }\n\n    currentActivity = selectedPlaylist.activities.find((f) => f.id === currentActivityId);\n\n    if (currentActivity) {\n      const index = selectedPlaylist.activities.findIndex((act) => act.id === currentActivity.id);\n      if (index > 0) {\n        previousResource = selectedPlaylist.activities[index - 1];\n      }\n      if (index < selectedPlaylist.activities.length - 1) {\n        nextResource = selectedPlaylist.activities[index + 1];\n      }\n    }\n  }\n\n  return (\n    <section className=\"main-page-content preview iframe-height-resource\">\n      <div className=\"container-flex-upper\">\n        <div className=\"both-p\">\n          <Link>\n            <div className=\"project-title\">\n              <img src={projectIcon} alt=\"\" />\n              {`Project: ${selectedPlaylist.project.name}`}\n            </div>\n          </Link>\n          <Link>\n            <div className=\"project-title\">\n              <img src={projectIcon} alt=\"\" />\n              {`Playlist: ${selectedPlaylist.title}`}\n            </div>\n          </Link>\n        </div>\n        { localStorage.getItem('lti_activity') === 'false' && (\n        <Link to={`/studio/project/${selectedPlaylist.project.id}/shared`}>\n          <FontAwesomeIcon icon=\"times\" />\n        </Link>\n        )}\n      </div>\n      <div className=\"flex-container previews\">\n        <div className={`activity-bg left-vdo${collapsed ? ' collapsed' : ''}`}>\n          <div className=\"flex-container-preview\">\n            <div className=\"act-top-header\">\n              <div className=\"heading-wrapper\">\n                <div className=\"main-heading\">\n                  {currentActivity && (\n                    <h3>\n                      Activity:\n                      &nbsp;\n                      <span>\n                        {currentActivity.title}\n                      </span>\n                    </h3>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"right-control vd-controls\">\n              <div className=\"slider-btn\">\n                <PreviousLink\n                  showLti={showLti}\n                  playlistId={playlistId}\n                  previousResource={previousResource}\n                  allPlaylists={allPlaylists}\n                  projectId={selectedPlaylist.project_id}\n                />\n                <NextLink\n                  showLti={showLti}\n                  playlistId={playlistId}\n                  nextResource={nextResource}\n                  allPlaylists={allPlaylists}\n                  projectId={selectedPlaylist.project_id}\n                />\n              </div>\n            </div>\n            <a\n              onClick={() => setCollapsed()}\n              className={`btn-expand-collapse${collapsed ? ' collapsed' : ''}`}\n            >\n              <FontAwesomeIcon icon=\"align-right\" />\n            </a>\n          </div>\n\n          <div className=\"main-item-wrapper\">\n            <div className=\"item-container\">\n              {currentActivity && (\n                <Suspense fallback={<div>Loading</div>}>\n                  <H5PPreview showLtiPreview activityId={currentActivity.id} />\n                </Suspense>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className={`right-sidegolf-info${collapsed ? ' collapsed' : ''}`}>\n          <Tabs defaultActiveKey=\"home\" id=\"uncontrolled-tab-example\">\n            <Tab eventKey=\"home\" title=\"Activities\">\n              <div className=\"all-laylist-oracle\">\n                <ActivitiesDropdown\n                  showLti\n                  playlistId={playlistId}\n                  activities={selectedPlaylist.activities}\n                />\n              </div>\n            </Tab>\n            {/* <Tab eventKey=\"contact\" title=\"About\">\n              <div className=\"descr-\">\n                <div className=\"tti\">\n                  description\n                </div>\n                <p>\n                  {selectedPlaylist.project.description}\n                </p>\n              </div>\n            </Tab> */}\n          </Tabs>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nLtiPlaylistPreview.propTypes = {\n  playlist: PropTypes.object.isRequired,\n  playlistId: PropTypes.number.isRequired,\n  activityId: PropTypes.number,\n  showLti: PropTypes.bool,\n  loadLtiPlaylist: PropTypes.func.isRequired,\n  loadProjectPlaylists: PropTypes.func.isRequired,\n  collapsed: PropTypes.bool.isRequired,\n  setCollapsed: PropTypes.func.isRequired,\n};\n\nLtiPlaylistPreview.defaultProps = {\n  showLti: false,\n  activityId: undefined,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  loadLtiPlaylist: (playlistId) => dispatch(loadLtiPlaylistAction(playlistId)),\n  loadProjectPlaylists: (projectId) => dispatch(loadProjectPlaylistsAction(projectId)),\n  setCollapsed: () => dispatch(collapsedSideBar()),\n});\n\nconst mapStateToProps = (state) => ({\n  playlist: state.playlist,\n  collapsed: state.ui.sideBarCollapsed,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LtiPlaylistPreview);\n","/* eslint-disable max-len */\nimport React, { Suspense, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Dropdown } from 'react-bootstrap';\n\nimport projectIcon from 'assets/images/project_icon.svg';\nimport { loadSharedPlaylistAction } from 'store/actions/playlist';\nimport Unauthorized from 'components/Unauthorized';\nimport PreviousLink from './components/PreviousLink';\nimport NextLink from './components/NextLink';\nimport ActivitiesDropdown from './components/ActivitiesDropdown';\nimport ActivitiesList from './components/ActivitiesList';\n\nimport './style.scss';\n\nconst H5PPreview = React.lazy(() => import('../../H5PPreview'));\n\nfunction LtiPlaylistPreviewShared(props) {\n  const {\n    history,\n    playlist,\n    projectId,\n    playlistId,\n    activityId,\n    loading,\n    loadSharedPlaylist,\n  } = props;\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n\n    loadSharedPlaylist(projectId, playlistId);\n  }, [projectId, playlistId, activityId, loadSharedPlaylist]);\n\n  let { selectedPlaylist } = playlist;\n  if (selectedPlaylist === 'error') {\n    return <Unauthorized text=\"Project is not public.\" />;\n  }\n\n  if (selectedPlaylist && selectedPlaylist.id !== playlistId) {\n    selectedPlaylist = null;\n  }\n\n  if (!selectedPlaylist) {\n    return (\n      <div className=\"alert alert-info\" role=\"alert\">\n        Loading...\n      </div>\n    );\n  }\n\n  const allPlaylists = selectedPlaylist.project.playlists;\n\n  let currentActivityId = activityId;\n  let currentActivity;\n  let previousResource = null;\n  let nextResource = null;\n\n  if (selectedPlaylist.activities && selectedPlaylist.activities.length > 0) {\n    if (currentActivityId === null || currentActivityId === undefined) {\n      currentActivityId = selectedPlaylist.activities[0].id;\n    }\n\n    currentActivity = selectedPlaylist.activities.find((f) => f.id === currentActivityId);\n\n    if (currentActivity) {\n      const index = selectedPlaylist.activities.findIndex((act) => act.id === currentActivity.id);\n      if (index > 0) {\n        previousResource = selectedPlaylist.activities[index - 1];\n      }\n      if (index < selectedPlaylist.activities.length - 1) {\n        nextResource = selectedPlaylist.activities[index + 1];\n      }\n    }\n  }\n\n  console.log(selectedPlaylist);\n\n  return (\n    <>\n      {loading ? (\n        <div className=\"loading-phf-data\">\n          {loading === 'loading...' ? (\n            <Unauthorized text={loading.toUpperCase()} />\n          ) : (\n            <Unauthorized showButton text=\"You are unauthorized to access this!\" />\n          )}\n        </div>\n      ) : (\n        <section className=\"main-page-content preview\">\n          <div className=\"container-flex-upper\">\n            {selectedPlaylist.project && (\n              <>\n                <Link to=\"#\" onClick={history.goBack}>\n                  <div className=\"project-title\">\n                    <img src={projectIcon} alt=\"\" />\n                    {`Project: ${selectedPlaylist.project.name}`}\n                  </div>\n                </Link>\n\n                <Link to={`/studio/project/${selectedPlaylist.project.id}`}>\n                  <FontAwesomeIcon icon=\"times\" />\n                </Link>\n              </>\n            )}\n          </div>\n\n          <div className=\"flex-container\">\n            <div className=\"activity-bg left-vdo\">\n              <div className=\"flex-container-preview\">\n                <div className=\"act-top-header\">\n                  <div className=\"heading-wrapper\">\n                    <div className=\"main-heading\">\n                      {/* <span>You are Watching:</span> */}\n\n                      {currentActivity && currentActivity.title}\n                    </div>\n                    {/*\n                    <div className=\"sub-heading\">\n                      <span>From the playlist:</span>\n                      {selectedPlaylist ? selectedPlaylist.title : \"\"}\n                    </div>\n                    */}\n                  </div>\n                </div>\n\n                <div className=\"right-control vd-controls\">\n                  <div className=\"slider-btn\">\n                    <PreviousLink\n                      shared\n                      projectId={projectId}\n                      playlistId={playlistId}\n                      previousResource={previousResource}\n                      allPlaylists={allPlaylists}\n                    />\n                    <NextLink\n                      shared\n                      projectId={projectId}\n                      playlistId={playlistId}\n                      nextResource={nextResource}\n                      allPlaylists={allPlaylists}\n                    />\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"main-item-wrapper\">\n                <div className=\"item-container\">\n                  {/* <img src=\"/images/video-thumbnail.jpg\" alt=\"video-thumbnail\" /> */}\n                  {currentActivity && (\n                    <Suspense fallback={<div>Loading</div>}>\n                      <H5PPreview showLtiPreview activityId={currentActivity.id} />\n                    </Suspense>\n                  )}\n                  {/*\n                  <div className=\"item-caption-bottom\">\n                    <p>\n                      {currentActivity && currentActivity.title}\n                    </p>\n                  </div>\n                  */}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"right-sidegolf-info\">\n              <div className=\"back-header\">\n                <div>\n                  <Link\n                    to=\"#\"\n                    className=\"go-back-button-preview\"\n                    onClick={history.goBack}\n                  >\n                    <FontAwesomeIcon icon=\"undo\" className=\"mr-2\" />\n                    Back to Project\n                  </Link>\n                </div>\n\n                <Dropdown className=\"ml-auto playlist-dropdown check\">\n                  <Dropdown.Toggle className=\"playlist-dropdown-btn\">\n                    <FontAwesomeIcon icon=\"ellipsis-v\" />\n                  </Dropdown.Toggle>\n                  <Dropdown.Menu>\n                    <ActivitiesDropdown\n                      shared\n                      projectId={projectId}\n                      playlistId={playlistId}\n                      activities={selectedPlaylist.activities}\n                    />\n                  </Dropdown.Menu>\n                </Dropdown>\n              </div>\n\n              <div className=\"scrollDiv long\">\n                <div className=\"watcher\">\n                  You are watching from\n                  {' '}\n                  <span>\n                    {selectedPlaylist.title}\n                  </span>\n                </div>\n                <ul className=\"slider-scroll-auto\">\n                  <ActivitiesList\n                    shared\n                    projectId={projectId}\n                    playlistId={playlistId}\n                    activities={selectedPlaylist.activities}\n                  />\n                </ul>\n              </div>\n            </div>\n          </div>\n        </section>\n      )}\n    </>\n  );\n}\n\nLtiPlaylistPreviewShared.propTypes = {\n  history: PropTypes.object.isRequired,\n  playlist: PropTypes.object.isRequired,\n  projectId: PropTypes.number.isRequired,\n  playlistId: PropTypes.number.isRequired,\n  activityId: PropTypes.number.isRequired,\n  loading: PropTypes.string,\n  loadSharedPlaylist: PropTypes.func.isRequired,\n};\n\nLtiPlaylistPreviewShared.defaultProps = {\n  loading: '',\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  loadSharedPlaylist: (projectId, playlistId) => dispatch(loadSharedPlaylistAction(projectId, playlistId)),\n});\n\nconst mapStateToProps = (state) => ({\n  playlist: state.playlist,\n});\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(LtiPlaylistPreviewShared),\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nimport {\n  showCreateProjectModalAction,\n  createProjectAction,\n  loadMyProjectsAction,\n} from 'store/actions/project';\nimport { logActivityViewAction, logPlaylistViewAction } from 'store/actions/metrics';\nimport Header from 'components/Header';\nimport ActivityShared from 'containers/Preview/PlaylistPreview/ActivityShared';\nimport LtiPlaylistPreview from 'containers/Preview/PlaylistPreview/LtiPlaylistPreview';\nimport LtiPlaylistPreviewShared from 'containers/Preview/PlaylistPreview/LtiPlaylistPreviewShared';\n\nclass LtiPreviewPage extends React.Component {\n  componentDidMount() {\n    // scroll to top\n    window.scrollTo(0, 0);\n    // Logging the view for metrics\n    const {\n      match, previewType, logActivityView, logPlaylistView,\n    } = this.props;\n    const { playlistId, activityId } = match.params;\n\n    if (previewType === 'activityShared') { logActivityView(activityId); } else if (previewType === 'playlistShared') {\n      logPlaylistView(playlistId);\n      logActivityView(activityId);\n    }\n  }\n\n  render() {\n    const { match, previewType, logActivityView } = this.props;\n\n    const { projectId, playlistId, activityId } = match.params;\n\n    const projId = (projectId !== null && projectId !== undefined) ? parseInt(projectId, 10) : null;\n    const plyId = parseInt(playlistId, 10);\n    const actId = (activityId !== null && activityId !== undefined) ? parseInt(activityId, 10) : null;\n\n    let content;\n    if (previewType === 'playlistShared') {\n      content = (\n        <LtiPlaylistPreviewShared\n          projectId={projId}\n          playlistId={plyId}\n          activityId={actId}\n        />\n      );\n    } else if (previewType === 'activityShared') {\n      logActivityView(match.params.activityId);\n      content = (\n        <ActivityShared />\n      );\n    } else if (previewType === 'activitySharedEmbed') {\n      logActivityView(match.params.activityId);\n      content = (\n        <ActivityShared embed />\n      );\n    } else {\n      content = (\n        <LtiPlaylistPreview\n          showLti\n          playlistId={plyId}\n          activityId={actId}\n        />\n      );\n    }\n\n    return (\n      <div>\n        {!previewType && <Header {...this.props} /> }\n\n        {content}\n      </div>\n    );\n  }\n}\n\nLtiPreviewPage.propTypes = {\n  match: PropTypes.object.isRequired,\n  previewType: PropTypes.string,\n  loadMyProjects: PropTypes.func.isRequired,\n  logActivityView: PropTypes.func.isRequired,\n  logPlaylistView: PropTypes.func.isRequired,\n};\n\nLtiPreviewPage.defaultProps = {\n  previewType: null,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  showCreateProjectModal: () => dispatch(showCreateProjectModalAction()),\n  loadMyProjects: () => dispatch(loadMyProjectsAction()),\n  createProject: (name, description, thumbUrl) => dispatch(createProjectAction(name, description, thumbUrl)),\n  // hideCreateProjectModal: () => dispatch(hideCreateProjectModalAction()),\n\n  logActivityView: (activityId) => dispatch(logActivityViewAction(activityId)),\n  logPlaylistView: (playlistId) => dispatch(logPlaylistViewAction(playlistId)),\n});\n\nexport default withRouter(\n  connect(null, mapDispatchToProps)(LtiPreviewPage),\n);\n","// list of H5P activities links (react routes) where xAPI dispatch need to initialized\nexport function allowedH5PActvityPaths() {\n  return [\n    '/gclass/launch/:userId/:courseId/:activityId/:classworkId',\n    '/lti-tools/activity/:activityId',\n    '/activity/:activityId/shared',\n    '/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId',\n  ];\n}\n\n// map H5P activities links (react routes) to supported Platforms\nexport function H5PActvityPathMapToPlatform() {\n  return [\n    { '/project/:projectId/playlist/:playlistId/activity/:activityId/preview': 'CurrikiStudio' },\n    { '/activity/:activityId/shared': 'CurrikiStudio' },\n    { '/gclass/launch/:userId/:courseId/:activityId/:classworkId': 'Google Classroom' },\n    { '/lti-tools/activity/:activityId': 'LTI client' },\n    { '/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId': 'GenericLMS' },\n  ];\n}\n\n// check if xAPI need to initialized for H5P Activity link (react route)\nexport function isxAPINeeded(currentRoute) {\n  return allowedH5PActvityPaths().includes(currentRoute);\n}\n\nexport function extendStatement(h5pObj, statement, params, skipped = false) {\n  const {\n    path,\n    activityId,\n    submissionId,\n    attemptId,\n    studentId,\n    courseId, // LMS course id\n    homepage,\n    toolPlatform,\n    activeCourse,\n    customCourseName,\n    customApiDomainUrl,\n    customCourseCode,\n  } = params;\n\n  const platform = H5PActvityPathMapToPlatform().find((el) => el[path]);\n  if (platform === undefined) return;\n\n  const statementExtended = { ...statement };\n  const other = [\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${submissionId}/${attemptId}`,\n    },\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${submissionId}`,\n    },\n  ];\n\n  if (platform[path] === 'Google Classroom') {\n    other.push({\n      objectType: 'Activity',\n      id: `${window.location.origin}/gclass/${courseId}`,\n    });\n\n    if (statementExtended.object && statementExtended.object.definition && statementExtended.object.definition.extensions) {\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/gclass-alternate-course-id'] = activeCourse.alternateLink;\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/course-name'] = activeCourse.name;\n    }\n  }\n\n  if (platform[path] === 'LTI client' || 'GenericLMS') {\n    other.push({\n      objectType: 'Activity',\n      id: `${window.location.origin}/lti/${courseId}`,\n    });\n\n    if (statementExtended?.object?.definition?.extensions) {\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/lms-course-name'] = customCourseName;\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/lms-domain-url'] = customApiDomainUrl;\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/lms-course-code'] = customCourseCode;\n    }\n  }\n\n  const actor = {\n    objectType: 'Agent',\n    account: {\n      homePage: homepage || 'https://classroom.google.com',\n      name: studentId,\n    },\n  };\n\n  if (statementExtended.context) {\n    if (platform[path] === 'LTI client') {\n      statementExtended.context.platform = toolPlatform;\n    } else {\n      statementExtended.context.platform = platform[path];\n    }\n\n    statementExtended.context.contextActivities.other = other;\n  }\n\n  statementExtended.actor = actor;\n\n  // If the statement is marked as skipped, we supply the proper verb\n  if (skipped) {\n    statementExtended.verb = {\n      id: 'http://adlnet.gov/expapi/verbs/skipped',\n      display: {\n        'en-US': 'skipped',\n      },\n    };\n\n    // Some skipped statements come with score.min = 0 and score.max = 0\n    // This causes an error in the backend\n    if (\n      statementExtended.result\n      && statementExtended.result.score\n      && statementExtended.result.score.min === statementExtended.result.score.max\n    ) {\n      statementExtended.result.score.max += 1;\n    }\n  }\n\n  // Some H5Ps provide incompatible interaction types. Mapping those to valid ones here\n  if (statementExtended.object && statementExtended.object.definition.interactionType === 'compound') {\n    statementExtended.object.definition.interactionType = 'choice';\n  }\n\n  // We need page information for InteractiveBook statements but the children objects are agnostic to where\n  // they're being used.\n  // Here we crawl up through their heritage to see if they belong to an InteractiveBook, if they do, we\n  // add the page info to the statement.\n  let interactiveBookObject = h5pObj;\n\n  while (interactiveBookObject && interactiveBookObject?.libraryInfo?.machineName !== 'H5P.InteractiveBook') {\n    interactiveBookObject = interactiveBookObject.parent;\n  }\n\n  if (interactiveBookObject?.libraryInfo?.machineName === 'H5P.InteractiveBook') {\n    const chapterIndex = interactiveBookObject.getActiveChapter();\n    statementExtended.object.definition.extensions['http://currikistudio.org/x-api/h5p-chapter-name'] = interactiveBookObject.chapters[chapterIndex].title;\n  }\n\n  return statementExtended;\n}\n\n// Extends the xAPI statements for activities being directly shared through studio\n// instead of published to an LMS\nexport function extendSharedActivityStatement(h5pObj, statement, params) {\n  const {\n    path,\n    activityId,\n  } = params;\n  const statementExtended = { ...statement };\n\n  // We fake these values for reporting features on anonymous routes\n  const fakeSubId = Math.floor(Math.random() * 100000).toString();\n  const fakeAttemptId = Math.floor(Math.random() * 100000).toString();\n  const fakeCourseId = Math.floor(Math.random() * 100000).toString();\n\n  const other = [\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${fakeSubId}/${fakeAttemptId}`,\n    },\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${fakeSubId}`,\n    },\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/gclass/${fakeCourseId}`,\n    },\n  ];\n\n  const platform = H5PActvityPathMapToPlatform().find((el) => el[path]);\n  if (platform === undefined) return;\n\n  if (statementExtended?.context?.contextActivities) {\n    statementExtended.context.platform = platform[path];\n    statementExtended.context.contextActivities.other = other;\n  }\n\n  statementExtended.object.definition.extensions['http://id.tincanapi.com/extension/referrer'] = document.referrer ? document.referrer : window.location.origin;\n\n  return statementExtended;\n}\n","import {\n  SHOW_DELETE_POPUP,\n  HIDE_DELETE_POPUP,\n  SIDE_BAR_COLLAPSE_TOGGLE,\n} from '../actionTypes';\n\nexport const showDeletePopup = (id, title, deleteType) => ({\n  type: SHOW_DELETE_POPUP,\n  id,\n  title,\n  deleteType,\n});\n\n// shows the delete popup on activities, project, playlists\nexport const showDeletePopupAction = (id, title, deleteType) => async (dispatch) => {\n  dispatch(showDeletePopup(id, title, deleteType));\n};\n\nexport const hideDeletePopup = () => ({\n  type: HIDE_DELETE_POPUP,\n});\n\n// hides the delete popup on activities, project, playlists\nexport const hideDeletePopupAction = () => async (dispatch) => {\n  dispatch(hideDeletePopup());\n};\n\nexport const collapsedSideBar = () => async (dispatch) => {\n  dispatch({ type: SIDE_BAR_COLLAPSE_TOGGLE });\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport std from 'assets/images/terms.png';\nimport { LoadHP } from 'store/actions/playlist';\n\nfunction Unauthorized(props) {\n  const { text, showButton, loadHP } = props;\n\n  return (\n    <div className=\"whole-authorized\">\n      <div className=\"box-unauthorized\">\n        <img src={std} alt=\"\" />\n\n        <h3>{text}</h3>\n\n        {showButton ? (\n          <Link\n            to=\"/studio\"\n            onClick={() => {\n              loadHP('Loading...');\n            }}\n          >\n            {' '}\n            Go Back to Projects\n          </Link>\n        ) : (\n          <Link\n            to=\"/studio\"\n            onClick={() => {\n              loadHP('Loading...');\n            }}\n          >\n            {' '}\n            Go Back\n          </Link>\n        )}\n      </div>\n    </div>\n  );\n}\n\nUnauthorized.propTypes = {\n  text: PropTypes.string.isRequired,\n  showButton: PropTypes.bool,\n  loadHP: PropTypes.func.isRequired,\n};\n\nUnauthorized.defaultProps = {\n  showButton: false,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  loadHP: (show) => dispatch(LoadHP(show)),\n});\n\nexport default withRouter(\n  connect(null, mapDispatchToProps)(Unauthorized),\n);\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Swal from 'sweetalert2';\nimport { confirmAlert } from 'react-confirm-alert';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Dropdown } from 'react-bootstrap';\n\nimport { shareActivity } from 'store/actions/resource';\n\nconst ResourceCardDropdownShare = (props) => {\n  const { resource } = props;\n\n  return (\n    <Dropdown.Item\n      onClick={() => {\n        shareActivity(resource.id);\n        const protocol = `${window.location.href.split('/')[0]}//`;\n        confirmAlert({\n          customUI: ({ onClose }) => (\n            <div className=\"share-project-preview-url project-share-check\">\n              <br />\n              <h3>\n                You can now share Activity\n                {' '}\n                <strong>{resource.title}</strong>\n                <br />\n                Anyone with the link below can access your activity:\n              </h3>\n\n              <a\n                target=\"_blank\"\n                href={`/studio/activity/${resource.id}/shared`}\n                rel=\"noopener noreferrer\"\n              >\n                <input\n                  id=\"urllink_clip\"\n                  value={`${protocol + window.location.host}/studio/activity/${resource.id}/shared`}\n                />\n              </a>\n\n              <span\n                title=\"copy to clipboard\"\n                aria-hidden=\"true\"\n                onClick={() => {\n                  /* Get the text field */\n                  const copyText = document.getElementById('urllink_clip');\n\n                  /* Select the text field */\n                  copyText.focus();\n                  copyText.select();\n                  // copyText.setSelectionRange(0, 99999); /*For mobile devices*/\n\n                  /* Copy the text inside the text field */\n                  document.execCommand('copy');\n\n                  /* Alert the copied text */\n                  Swal.fire({\n                    title: 'Link Copied',\n                    showCancelButton: false,\n                    showConfirmButton: false,\n                    timer: 1500,\n                    allowOutsideClick: false,\n                  });\n                }}\n              >\n                <FontAwesomeIcon icon=\"clipboard\" />\n              </span>\n              <br />\n\n              <div className=\"close-btn\">\n                <button type=\"button\" onClick={onClose}>\n                  Ok\n                </button>\n              </div>\n            </div>\n          ),\n        });\n      }}\n    >\n      <FontAwesomeIcon icon=\"share\" className=\"mr-2\" />\n      Share\n    </Dropdown.Item>\n  );\n};\n\nResourceCardDropdownShare.propTypes = {\n  resource: PropTypes.object.isRequired,\n};\n\nexport default ResourceCardDropdownShare;\n","export default __webpack_public_path__ + \"static/media/project_icon.6cb7f972.svg\";","/* eslint-disable max-len */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Swal from 'sweetalert2';\nimport { useSelector } from 'react-redux';\n\nfunction PreviousLink(props) {\n  const {\n    history,\n    showLti,\n    shared,\n    projectId,\n    playlistId,\n    previousResource,\n    allPlaylists,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n  const currentPlaylistIndex = allPlaylists.findIndex((p) => (p.id === playlistId));\n  const prevPlaylist = currentPlaylistIndex > 0\n    ? allPlaylists[currentPlaylistIndex - 1]\n    : null;\n\n  let prevLink = '#';\n  if (previousResource) {\n    prevLink = `/playlist/${playlistId}/activity/${previousResource.id}/preview`;\n  } else if (prevPlaylist) {\n    prevLink = `/playlist/${prevPlaylist.id}/preview`;\n  }\n  if (prevLink !== '#') {\n    if (showLti) {\n      prevLink += '/studio/lti';\n    } else {\n      prevLink = `/studio/org/${organization.currentOrganization?.domain}/project/${projectId}${prevLink}`;\n\n      if (shared) {\n        prevLink += '/studio/shared';\n      }\n    }\n  }\n\n  return (\n    <div className=\"slider-hover-section\">\n      <Link to={prevLink}>\n        <FontAwesomeIcon icon=\"chevron-left\" />\n      </Link>\n\n      <div className={`hover-control-caption pointer-cursor${previousResource ? '' : ' no-data prev'}`}>\n        {previousResource ? (\n          <Link to={prevLink}>\n            <div\n              className=\"img-in-hover\"\n              style={{\n                backgroundImage: previousResource.thumb_url\n                  ? previousResource.thumb_url.includes('pexels.com')\n                    ? `url(${previousResource.thumb_url})`\n                    : `url(${global.config.resourceUrl}${previousResource.thumb_url})`\n                  : 'url(data:image/jpeg;base64,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)',\n              }}\n            />\n            <span>{previousResource.title}</span>\n          </Link>\n        ) : (\n          <div className=\"slider-end\">\n            <p>Welcome! You are at the beginning of this playlist.</p>\n            <Link\n              to={prevLink}\n              onClick={() => {\n                if (!prevPlaylist) {\n                  Swal.fire({\n                    text: 'You are at the beginning of this project. Would you like to return to the project preview?',\n                    showCancelButton: true,\n                    confirmButtonColor: '#3085d6',\n                    cancelButtonColor: '#d33',\n                    confirmButtonText: 'Yes',\n                  })\n                    .then((result) => {\n                      if (result.value) {\n                        if (showLti) {\n                          history.push(`/studio/project/${projectId}/shared`);\n                        } else {\n                          history.push(`/studio/org/${organization.currentOrganization?.domain}/project/${projectId}/preview`);\n                        }\n                      }\n                    });\n                }\n              }}\n            >\n              <FontAwesomeIcon icon=\"chevron-left\" className=\"mr-2\" />\n              Switch to previous playlist\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nPreviousLink.propTypes = {\n  history: PropTypes.object.isRequired,\n  showLti: PropTypes.bool,\n  shared: PropTypes.bool,\n  projectId: PropTypes.number,\n  playlistId: PropTypes.number.isRequired,\n  previousResource: PropTypes.object,\n  allPlaylists: PropTypes.array,\n};\n\nPreviousLink.defaultProps = {\n  showLti: false,\n  shared: false,\n  projectId: null,\n  previousResource: null,\n  allPlaylists: [],\n};\n\nexport default withRouter(PreviousLink);\n","/* eslint-disable max-len */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Swal from 'sweetalert2';\nimport { useSelector } from 'react-redux';\n\nfunction NextLink(props) {\n  const {\n    history,\n    showLti,\n    shared,\n    projectId,\n    playlistId,\n    nextResource,\n    allPlaylists,\n  } = props;\n\n  const currentPlaylistIndex = allPlaylists.findIndex((p) => (p.id === playlistId));\n  const nextPlaylist = currentPlaylistIndex < allPlaylists.length - 1\n    ? allPlaylists[currentPlaylistIndex + 1]\n    : null;\n  const organization = useSelector((state) => state.organization);\n  let nextLink = '#';\n  if (nextResource) {\n    nextLink = `/playlist/${playlistId}/activity/${nextResource.id}/preview`;\n  } else if (nextPlaylist) {\n    nextLink = `/playlist/${nextPlaylist.id}/preview`;\n  }\n  if (nextLink !== '#') {\n    if (showLti) {\n      nextLink += '/studio/lti';\n    } else {\n      nextLink = `/studio/org/${organization.currentOrganization?.domain}/project/${projectId}${nextLink}`;\n\n      if (shared) {\n        nextLink += '/studio/shared';\n      }\n    }\n  }\n\n  return (\n    <div className=\"slider-hover-section\">\n      <Link to={nextLink}>\n        <FontAwesomeIcon icon=\"chevron-right\" />\n      </Link>\n\n      <div className={`hover-control-caption pointer-cursor${nextResource ? '' : ' no-data'}`}>\n        {nextResource ? (\n          <Link to={nextLink}>\n            <div\n              className=\"img-in-hover\"\n              style={{\n                backgroundImage: nextResource.thumb_url\n                  ? nextResource.thumb_url.includes('pexels.com')\n                    ? `url(${nextResource.thumb_url})`\n                    : `url(${global.config.resourceUrl}${nextResource.thumb_url})`\n                  : 'url(data:image/jpeg;base64,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)',\n              }}\n            />\n            <span>{nextResource.title}</span>\n          </Link>\n        ) : (\n          <div className=\"slider-end\">\n            <p>Hooray! You did it! There are no more activities in this playlist.</p>\n            <Link\n              to={nextLink}\n              onClick={() => {\n                if (!nextPlaylist) {\n                  Swal.fire({\n                    text: 'You are at the end of this project. Would you like to return to the project preview?',\n                    showCancelButton: true,\n                    confirmButtonColor: '#4646c4',\n                    cancelButtonColor: '#d33',\n                    cancelButtonText: 'No',\n                    confirmButtonText: 'Yes',\n                  })\n                    .then((result) => {\n                      if (result.value) {\n                        if (showLti) {\n                          history.push(`/studio/project/${projectId}/shared`);\n                        } else {\n                          history.push(`/studio/org/${organization.currentOrganization?.domain}/project/${projectId}/preview`);\n                        }\n                      }\n                    });\n                }\n              }}\n            >\n              Switch to next playlist\n              <FontAwesomeIcon icon=\"chevron-right\" className=\"ml-2\" />\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nNextLink.propTypes = {\n  history: PropTypes.object.isRequired,\n  showLti: PropTypes.bool,\n  shared: PropTypes.bool,\n  projectId: PropTypes.number,\n  playlistId: PropTypes.number.isRequired,\n  nextResource: PropTypes.object,\n  allPlaylists: PropTypes.array,\n};\n\nNextLink.defaultProps = {\n  showLti: false,\n  shared: false,\n  projectId: null,\n  nextResource: null,\n  allPlaylists: [],\n};\n\nexport default withRouter(NextLink);\n","import config from 'config';\nimport httpService from './http.service';\n\nconst { apiVersion } = config;\n\nconst getUserMetrics = (userId) => httpService\n  .get(`/${apiVersion}/users/${userId}/metrics`)\n  .then(({ data }) => data)\n  .catch((err) => Promise.reject(err.response.data));\n\nconst getUserMembership = (userId) => httpService\n  .get(`/${apiVersion}/users/${userId}/membership`)\n  .then(({ data }) => data)\n  .catch((err) => Promise.reject(err.response.data));\n\nconst logActivityView = (activityId) => httpService\n  .get(`/${apiVersion}/activities/${activityId}/log-view`);\n\nconst logPlaylistView = (playlistId) => httpService\n  .get(`/${apiVersion}/playlists/${playlistId}/log-view`);\n\nconst logProjectView = (projectId) => httpService\n  .get(`/${apiVersion}/projects/${projectId}/log-view`);\n\nconst redeemOffer = (offer) => httpService\n  .get(`/${apiVersion}/users/me/redeem/${offer}`);\n\nexport default {\n  getUserMetrics,\n  getUserMembership,\n  logActivityView,\n  logPlaylistView,\n  logProjectView,\n  redeemOffer,\n};\n","import metricsService from 'services/metrics.service';\nimport {\n  GET_USER_METRICS,\n  GET_USER_MEMBERSHIP,\n  ACTIVITY_VIEWED,\n  PLAYLIST_VIEWED,\n  PROJECT_VIEWED,\n} from '../actionTypes';\n\nexport const getUserMetricsAction = (userId) => async (dispatch) => {\n  const { metrics } = await metricsService.getUserMetrics(userId);\n  dispatch({\n    type: GET_USER_METRICS,\n    metrics,\n  });\n};\n\nexport const getUserMembershipAction = (userId) => async (dispatch) => {\n  const { membership } = await metricsService.getUserMembership(userId);\n  dispatch({\n    type: GET_USER_MEMBERSHIP,\n    membership,\n  });\n};\n\nexport const logActivityViewAction = (activityId) => async (dispatch) => {\n  metricsService.logActivityView(activityId);\n  dispatch({ type: ACTIVITY_VIEWED });\n};\n\nexport const logPlaylistViewAction = (playlistId) => async (dispatch) => {\n  metricsService.logPlaylistView(playlistId);\n  dispatch({ type: PLAYLIST_VIEWED });\n};\n\nexport const logProjectViewAction = (projectId) => async (dispatch) => {\n  metricsService.logProjectView(projectId);\n  dispatch({ type: PROJECT_VIEWED });\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ActivityPreviewCard from 'components/ActivityPreviewCard';\n\nfunction ActivitiesList(props) {\n  const {\n    showLti,\n    shared,\n    projectId,\n    playlistId,\n    activities,\n    playlist,\n    teamPermission,\n  } = props;\n\n  if (activities.length === 0) {\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"alert alert-info\" role=\"alert\">\n          No activity defined for this playlist.\n        </div>\n      </div>\n    );\n  }\n\n  return activities.map((activity) => (\n    <ActivityPreviewCard\n      key={activity.id}\n      showLti={showLti}\n      shared={shared}\n      projectId={projectId}\n      playlistId={playlistId}\n      activity={activity}\n      playlist={playlist}\n      teamPermission={teamPermission || {}}\n    />\n  ));\n}\n\nActivitiesList.propTypes = {\n  showLti: PropTypes.bool,\n  shared: PropTypes.bool,\n  projectId: PropTypes.number,\n  playlistId: PropTypes.number.isRequired,\n  activities: PropTypes.array,\n  playlist: PropTypes.object.isRequired,\n  teamPermission: PropTypes.object.isRequired,\n};\n\nActivitiesList.defaultProps = {\n  showLti: false,\n  shared: false,\n  projectId: null,\n  activities: [],\n};\n\nexport default ActivitiesList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport DropdownActivity from 'components/ResourceCard/dropdown';\n\nimport './style.scss';\nimport { useSelector } from 'react-redux';\n\nconst ActivityPreviewCard = (props) => {\n  const {\n    showLti,\n    shared,\n    activity,\n    projectId,\n    playlistId,\n    playlist,\n    teamPermission,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n  return (\n    <div className=\"preview-activity-dropdown\">\n      <Link\n        to={\n          shared\n            ? `/project/${projectId}/playlist/${playlistId}/activity/${activity.id}/preview/shared`\n            : (\n              showLti\n                ? `/playlist/${playlistId}/activity/${activity.id}/preview/lti`\n                : `/studio/org/${organization.currentOrganization?.domain}/project/${projectId}/playlist/${playlistId}/activity/${activity.id}/preview`\n            )\n        }\n      >\n        <li className=\"check\">\n          {activity.thumb_url && (\n            <div\n              className=\"bg-thumbnail\"\n              style={{\n                backgroundImage: activity.thumb_url.includes('pexels.com')\n                  ? `url(${activity.thumb_url})`\n                  : `url(${global.config.resourceUrl}${activity.thumb_url})`,\n              }}\n            />\n          )}\n          <div>\n            <div className=\"title\">{activity.title}</div>\n          </div>\n        </li>\n      </Link>\n      {!showLti\n        && (\n        <DropdownActivity\n          resource={activity}\n          playlist={playlist}\n          teamPermission={teamPermission || {}}\n        />\n        )}\n    </div>\n  );\n};\n\nActivityPreviewCard.propTypes = {\n  showLti: PropTypes.bool,\n  shared: PropTypes.bool,\n  activity: PropTypes.object.isRequired,\n  projectId: PropTypes.number,\n  playlistId: PropTypes.number.isRequired,\n  playlist: PropTypes.object.isRequired,\n  teamPermission: PropTypes.object.isRequired,\n};\n\nActivityPreviewCard.defaultProps = {\n  showLti: false,\n  shared: false,\n  projectId: null,\n};\n\nexport default ActivityPreviewCard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, useSelector } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Dropdown } from 'react-bootstrap';\n\nimport { deleteResourceAction } from 'store/actions/resource';\nimport { cloneActivity } from 'store/actions/search';\nimport ResourceCardDropdownShare from './shareResource';\n\nimport './style.scss';\n\nconst ResourceCardDropdown = (props) => {\n  const {\n    resource,\n    deleteResource,\n    playlist,\n    match,\n    teamPermission,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n  const { permission } = organization;\n  const handleDelete = (e) => {\n    e.preventDefault();\n    Swal.fire({\n      title: 'Are you sure you want to delete this activity?',\n      showDenyButton: true,\n      showCancelButton: true,\n      confirmButtonText: 'Yes',\n      denyButtonText: 'No',\n    }).then((result) => {\n      if (result.isConfirmed) {\n        deleteResource(resource.id, playlist.id);\n      }\n    });\n  };\n\n  return (\n    <Dropdown className=\"pull-right resource-dropdown check\">\n      <Dropdown.Toggle className=\"resource-dropdown-btn\">\n        <FontAwesomeIcon icon=\"ellipsis-v\" />\n      </Dropdown.Toggle>\n\n      <Dropdown.Menu>\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:view-activity') : permission?.Activity?.includes('activity:view')) && (\n          <Dropdown.Item\n            as={Link}\n            to={`/studio/org/${organization.currentOrganization?.domain}/project/${match.params.projectId}/playlist/${playlist.id}/activity/${resource.id}/preview`}\n          >\n            <FontAwesomeIcon icon=\"eye\" className=\"mr-2\" />\n            Preview\n          </Dropdown.Item>\n        )}\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:edit-activity') : permission?.Activity?.includes('activity:edit')) && (\n          <Dropdown.Item\n            as={Link}\n            to={`/studio/org/${organization.currentOrganization?.domain}/project/${match.params.projectId}/playlist/${playlist.id}/activity/${resource.id}/edit`}\n          >\n            <FontAwesomeIcon icon=\"pen\" className=\"mr-2\" />\n            Edit\n          </Dropdown.Item>\n        )}\n        {permission?.Activity?.includes('activity:duplicate') && (\n          <Dropdown.Item\n            to=\"#\"\n            onClick={() => {\n              Swal.showLoading();\n              cloneActivity(playlist.id, resource.id);\n            }}\n          >\n            <FontAwesomeIcon icon=\"clone\" className=\"mr-2\" />\n            Duplicate\n          </Dropdown.Item>\n        )}\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:share-activity') : permission?.Activity?.includes('activity:share')) && (\n          <ResourceCardDropdownShare resource={resource} />\n        )}\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:delete-activity') : permission?.Activity?.includes('activity:delete')) && (\n          <Dropdown.Item onClick={handleDelete}>\n            <FontAwesomeIcon icon=\"times-circle\" className=\"mr-2\" />\n            Delete\n          </Dropdown.Item>\n        )}\n\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n};\n\nResourceCardDropdown.propTypes = {\n  resource: PropTypes.object.isRequired,\n  playlist: PropTypes.object.isRequired,\n  match: PropTypes.object.isRequired,\n  deleteResource: PropTypes.func.isRequired,\n  teamPermission: PropTypes.object.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  deleteResource: (activityId, playlistId) => dispatch(deleteResourceAction(activityId, playlistId)),\n});\n\nexport default withRouter(connect(null, mapDispatchToProps)(ResourceCardDropdown));\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport { Helmet } from 'react-helmet';\nimport { useDispatch } from 'react-redux';\nimport TinCan from 'tincanjs';\n// import { Alert } from 'react-bootstrap';\nimport gifloader from 'assets/images/dotsloader.gif';\nimport { loadH5pResourceSettingsShared, loadH5pResourceSettingsEmbed, loadH5pResourceXapi } from 'store/actions/resource';\nimport * as xAPIHelper from 'helpers/xapi';\n\nimport './style.scss';\n\nlet counter = 1;\nlet lrs = null;\n\nconst ActivityShared = (props) => {\n  const { match, embed } = props;\n  const lrsEndpoint = new URLSearchParams(window.location.search).get('endpoint');\n  const lrsAuth = new URLSearchParams(window.location.search).get('auth');\n  const lrsRegistration = new URLSearchParams(window.location.search).get('registration');\n  const [authorized, setAuthorized] = useState(false);\n  // const [lrs, setLrs] = useState(null);\n  // const { orientation } = useSelector((state) => state.ui);\n  const dispatch = useDispatch();\n\n  const h5pInsertion = async (data) => {\n    window.H5PIntegration = data.h5p.settings;\n    const h5pWrapper = document.getElementById('curriki-h5p-wrapper');\n    h5pWrapper.innerHTML = data.h5p.embed_code.trim();\n    const newCss = data.h5p.settings.core.styles.concat(\n      data.h5p.settings.loadedCss,\n    );\n\n    await Promise.all(\n      newCss.map((value) => {\n        const link = document.createElement('link');\n        link.href = value;\n        link.type = 'text/css';\n        link.rel = 'stylesheet';\n        document.head.appendChild(link);\n        return true;\n      }),\n    );\n\n    const newScripts = data.h5p.settings.core.scripts.concat(\n      data.h5p.settings.loadedJs,\n    );\n\n    newScripts.forEach((value) => {\n      const script = document.createElement('script');\n      script.src = value;\n      script.async = false;\n      document.body.appendChild(script);\n    });\n  };\n\n  // Checking if in a tincan env\n  useEffect(() => {\n    if (!lrsEndpoint && !lrsAuth && lrs === null) return;\n\n    lrs = new TinCan.LRS({\n      endpoint: lrsEndpoint,\n      auth: lrsAuth,\n      allowFail: true,\n    });\n  }, [lrsEndpoint, lrsAuth]);\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n\n    if (match.params.activityId) {\n      if (embed) {\n        loadH5pResourceSettingsEmbed(match.params.activityId)\n          .then(async (data) => {\n            const embedSettings = {};\n            embedSettings.h5p = data;\n            h5pInsertion(embedSettings);\n          })\n          .catch(() => {\n            setAuthorized(true);\n          });\n      } else {\n        loadH5pResourceSettingsShared(match.params.activityId)\n          .then(async (data) => {\n            h5pInsertion(data);\n          })\n          .catch(() => {\n            setAuthorized(true);\n          });\n      }\n\n      const checkXapi = setInterval(() => {\n        try {\n          const x = document.getElementsByClassName('h5p-iframe')[0].contentWindow;\n          if (x.H5P) {\n            if (x.H5P.externalDispatcher && xAPIHelper.isxAPINeeded(props.match.path)) {\n              // eslint-disable-next-line no-use-before-define\n              stopXapi();\n\n              x.H5P.externalDispatcher.on('xAPI', (event) => {\n                if (counter > 0) {\n                  const extendedStatement = xAPIHelper.extendSharedActivityStatement(\n                    this,\n                    event.data.statement,\n                    { path: match.path, activityId: match.params.activityId },\n                  );\n                  dispatch(loadH5pResourceXapi(JSON.stringify(extendedStatement)));\n\n                  if (lrs) {\n                  // If an lrs has been defined, send tincanjs statement\n                    const doceboStatement = new TinCan.Statement({\n                          actor: {\n                            ...extendedStatement.actor,\n                            mbox: 'mailto:info@currikistudio.org',\n                          },\n                          verb: extendedStatement.verb,\n                          context: {\n                            ...extendedStatement.context,\n                            registration: lrsRegistration,\n                          },\n                          object: extendedStatement.object,\n                    });\n\n                    lrs.saveStatement(\n                      doceboStatement,\n                      {\n                        callback: (err, xhr) => {\n                            if (err !== null) {\n                                if (xhr !== null) {\n                                    console.log(`Failed to save statement: ${xhr.responseText} (${xhr.status})`);\n                                    // TODO: do something with error, didn't save statement\n                                    return;\n                                }\n\n                                console.log(`Failed to save statement: ${err}`);\n                                // TODO: do something with error, didn't save statement\n                                return;\n                            }\n\n                            console.log('Statement saved');\n                            // TOOO: do something with success (possibly ignore)\n                        },\n                      },\n                    );\n                  }\n                }\n                counter += 1;\n              });\n            }\n          }\n        } catch (e) {\n          console.log(e);\n        }\n      });\n\n      const stopXapi = () => clearInterval(checkXapi);\n    }\n  }, [dispatch, embed, match.params.activityId]);\n\n  return (\n    <>\n      <section className={embed ? 'embed main-page-content preview iframe-height-resource-shared defaultcontainer'\n      : 'main-page-content preview iframe-height-resource-shared defaultcontainer'}\n      >\n        {!!embed && (\n          <Helmet>\n            <script src=\"https://dev.currikistudio.org/api/storage/h5p/h5p-core/js/h5p-resizer.js\" charset=\"UTF-8\" />\n          </Helmet>\n        )}\n\n        <div className=\"flex-container previews\">\n          <div className=\"activity-bg left-vdo\">\n            <div className=\"main-item-wrapper desktop-view\">\n              <div className=\"item-container\">\n                {authorized ? (\n                  <div id=\"curriki-h5p-wrapper\">\n                    <div className=\"loader_gif\" style={{ color: 'black' }}>\n                      Activity is not sharable\n                    </div>\n                  </div>\n                ) : (\n                  <div id=\"curriki-h5p-wrapper\">\n                    <div className=\"loader_gif\">\n                      <img style={{ width: '50px' }} src={gifloader} alt=\"\" />\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n      {/* {(orientation >= 90)\n      && (\n      <div className=\"coverallareas\">\n        <Alert variant=\"warning\">Please use Portrait mode!</Alert>\n      </div>\n      )} */}\n    </>\n  );\n};\n\nActivityShared.propTypes = {\n  match: PropTypes.object.isRequired,\n  embed: PropTypes.string.isRequired,\n};\n\nexport default withRouter(ActivityShared);\n"],"sourceRoot":""}