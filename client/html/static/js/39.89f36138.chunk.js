(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[39],{392:function(t,n,e){"use strict";e.d(n,"h",(function(){return k})),e.d(n,"b",(function(){return O})),e.d(n,"f",(function(){return S})),e.d(n,"g",(function(){return A})),e.d(n,"k",(function(){return _})),e.d(n,"j",(function(){return C})),e.d(n,"c",(function(){return N})),e.d(n,"i",(function(){return T})),e.d(n,"d",(function(){return E})),e.d(n,"l",(function(){return U})),e.d(n,"e",(function(){return B})),e.d(n,"a",(function(){return H}));var r=e(0),c=e(4),i=e.n(c),o=e(6),a=e(8),u=e.n(a),s=e(59),d=e(44),l=e.n(d),p=e(25),f=e(5),v=p.a.apiVersion,h="https://classroom.googleapis.com/v1",m=function(t){return l()({method:"get",url:"".concat(h,"/userProfiles/me"),headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return t}))},y=function(t){return l()({method:"get",url:"".concat(h,"/courses"),params:{courseStates:"ACTIVE"},headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return t}))},g=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return f.a.get("/".concat(v,"/google-classroom/activities/").concat(t,"/h5p-resource-settings"),{},{gcuid:n,submissionid:e}).then((function(t){return t.data})).catch((function(t){Promise.reject(t.response.data),u.a.fire({title:"Error",icon:"error",html:t.message||"Something went wrong! We are unable to load activity."})}))},b=function(t,n,e){return f.a.post("/".concat(v,"/google-classroom/classwork/").concat(t,"/submission"),{course_id:n,access_token:e}).then((function(t){return t.data})).catch((function(t){return Promise.reject(t.response.data)}))},j=function(t,n,e){return f.a.post("/".concat(v,"/google-classroom/turnin/").concat(t),{course_id:n,access_token:e}).then((function(t){return t.data})).catch((function(t){return Promise.reject(t.response.data)}))},x=function(t,n,e,r){return f.a.post("/".concat(v,"/google-classroom/validate-summary-access"),{course_id:n,access_token:t,gc_classwork_id:e,gc_submission_id:r}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},w=function(t,n){return f.a.post("/".concat(v,"/outcome/summary"),{actor:t,activity:n}).then((function(t){return t.data})).catch((function(t){return t&&t.response&&t.response.data&&t.response.data.errors?t.response.data:(console.log("Unexpected error in summary endpoint:"),console.log(t),null)}))},I=e(1),k=function(t){return{type:I.rc,value:t}},O=function(){},S=function(t){return function(){var n=Object(o.a)(i.a.mark((function n(e){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e(k(!0)),n.prev=1,n.next=4,s.a.googleShareToken(JSON.stringify(t.tokenObj));case 4:return n.next=6,s.a.getCourses();case 6:r=n.sent,e({type:I.z,payload:r.courses}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(t){return n.apply(this,arguments)}}()},P=function(t){return{type:I.qc,id:t}},A=function(t){return function(){var n=Object(o.a)(i.a.mark((function n(e){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(k("close")),e((r=t,{type:I.pc,id:r}));try{u.a.fire({confirmButtonColor:"#5952c6",icon:"error",text:t.error.replace(/_/g," ")}),e(P(t))}catch(c){console.log(c)}case 3:case"end":return n.stop()}var r}),n)})));return function(t){return n.apply(this,arguments)}}()},_=function(t){return function(){var n=Object(o.a)(i.a.mark((function n(e){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m(t.accessToken);case 2:r=n.sent,e({type:I.Ce,studentData:{auth:t,profile:r}});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},C=function(t){return function(){var n=Object(o.a)(i.a.mark((function n(e){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e({type:I.De,newToken:Object(r.a)({},t)});case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},N=function(t){return function(){var n=Object(o.a)(i.a.mark((function n(e){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y(t);case 2:r=n.sent,e({type:I.bc,coursesResponse:r});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},T=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(){var r=Object(o.a)(i.a.mark((function r(c){var o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g(t,n,e);case 2:o=r.sent,c({type:I.Rb,h5pSettings:o});case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()},E=function(t,n,e){return function(){var r=Object(o.a)(i.a.mark((function r(c){var o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b(t,n,JSON.stringify(e.tokenObj)).catch((function(t){return t}));case 2:o=r.sent,c({type:I.cc,submission:o});case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()},U=function(t,n,e){return function(){var r=Object(o.a)(i.a.mark((function r(c){var o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,j(t,n,JSON.stringify(e.tokenObj));case 2:o=r.sent,c({type:I.ef,turnedIn:o});case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()},B=function(t,n,e,r){return function(){var c=Object(o.a)(i.a.mark((function c(o){var a;return i.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,x(JSON.stringify(t.tokenObj),n,e,r);case 2:a=c.sent,o({type:I.dc,summaryAuth:a});case 4:case"end":return c.stop()}}),c)})));return function(t){return c.apply(this,arguments)}}()},H=function(t,n){return function(){var e=Object(o.a)(i.a.mark((function e(r){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,n);case 2:c=e.sent,r({type:I.Xb,outcomeSummary:c});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},411:function(t,n,e){"use strict";e.d(n,"c",(function(){return c})),e.d(n,"b",(function(){return i})),e.d(n,"a",(function(){return o}));var r=e(0);function c(t){return["/gclass/launch/:userId/:courseId/:activityId/:classworkId","/lti-tools/activity/:activityId","/activity/:activityId/shared","/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId"].includes(t)}function i(t,n,e){var c,i,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.path,u=e.activityId,s=e.submissionId,d=e.attemptId,l=e.studentId,p=e.courseId,f=e.homepage,v=e.toolPlatform,h=e.activeCourse,m=e.customCourseName,y=e.customApiDomainUrl,g=e.customCourseCode,b=[{"/project/:projectId/playlist/:playlistId/activity/:activityId/preview":"CurrikiStudio"},{"/activity/:activityId/shared":"CurrikiStudio"},{"/gclass/launch/:userId/:courseId/:activityId/:classworkId":"Google Classroom"},{"/lti-tools/activity/:activityId":"LTI client"},{"/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId":"GenericLMS"}].find((function(t){return t[a]}));if(void 0!==b){var j,x,w=Object(r.a)({},n),I=[{objectType:"Activity",id:"".concat(window.location.origin,"/activity/").concat(u,"/submission/").concat(s,"/").concat(d)},{objectType:"Activity",id:"".concat(window.location.origin,"/activity/").concat(u,"/submission/").concat(s)}];"Google Classroom"===b[a]&&(I.push({objectType:"Activity",id:"".concat(window.location.origin,"/gclass/").concat(p)}),w.object&&w.object.definition&&w.object.definition.extensions&&(w.object.definition.extensions["http://currikistudio.org/x-api/gclass-alternate-course-id"]=h.alternateLink,w.object.definition.extensions["http://currikistudio.org/x-api/course-name"]=h.name)),b[a],I.push({objectType:"Activity",id:"".concat(window.location.origin,"/lti/").concat(p)}),(null===w||void 0===w||null===(j=w.object)||void 0===j||null===(x=j.definition)||void 0===x?void 0:x.extensions)&&(w.object.definition.extensions["http://currikistudio.org/x-api/lms-course-name"]=m,w.object.definition.extensions["http://currikistudio.org/x-api/lms-domain-url"]=y,w.object.definition.extensions["http://currikistudio.org/x-api/lms-course-code"]=g);var k={objectType:"Agent",account:{homePage:f||"https://classroom.google.com",name:l}};w.context&&("LTI client"===b[a]?w.context.platform=v:w.context.platform=b[a],w.context.contextActivities.other=I),w.actor=k,o&&(w.verb={id:"http://adlnet.gov/expapi/verbs/skipped",display:{"en-US":"skipped"}},w.result&&w.result.score&&w.result.score.min===w.result.score.max&&(w.result.score.max+=1)),w.object&&"compound"===w.object.definition.interactionType&&(w.object.definition.interactionType="choice");for(var O=t;O&&"H5P.InteractiveBook"!==(null===(S=O)||void 0===S||null===(P=S.libraryInfo)||void 0===P?void 0:P.machineName);){var S,P;O=O.parent}if("H5P.InteractiveBook"===(null===(c=O)||void 0===c||null===(i=c.libraryInfo)||void 0===i?void 0:i.machineName)){var A=O.getActiveChapter();w.object.definition.extensions["http://currikistudio.org/x-api/h5p-chapter-name"]=O.chapters[A].title}return w}}function o(t,n,e){var c,i=e.path,o=e.activityId,a=Object(r.a)({},n),u=Math.floor(1e5*Math.random()).toString(),s=Math.floor(1e5*Math.random()).toString(),d=Math.floor(1e5*Math.random()).toString(),l=[{objectType:"Activity",id:"".concat(window.location.origin,"/activity/").concat(o,"/submission/").concat(u,"/").concat(s)},{objectType:"Activity",id:"".concat(window.location.origin,"/activity/").concat(o,"/submission/").concat(u)},{objectType:"Activity",id:"".concat(window.location.origin,"/gclass/").concat(d)}],p=[{"/project/:projectId/playlist/:playlistId/activity/:activityId/preview":"CurrikiStudio"},{"/activity/:activityId/shared":"CurrikiStudio"},{"/gclass/launch/:userId/:courseId/:activityId/:classworkId":"Google Classroom"},{"/lti-tools/activity/:activityId":"LTI client"},{"/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId":"GenericLMS"}].find((function(t){return t[i]}));if(void 0!==p)return(null===a||void 0===a||null===(c=a.context)||void 0===c?void 0:c.contextActivities)&&(a.context.platform=p[i],a.context.contextActivities.other=l),a.object.definition.extensions["http://id.tincanapi.com/extension/referrer"]=document.referrer?document.referrer:window.location.origin,a}},509:function(t,n,e){"use strict";e.d(n,"c",(function(){return j})),e.d(n,"k",(function(){return x})),e.d(n,"m",(function(){return w})),e.d(n,"b",(function(){return I})),e.d(n,"p",(function(){return k})),e.d(n,"l",(function(){return O})),e.d(n,"d",(function(){return S})),e.d(n,"j",(function(){return P})),e.d(n,"i",(function(){return A})),e.d(n,"o",(function(){return _})),e.d(n,"n",(function(){return C})),e.d(n,"e",(function(){return N})),e.d(n,"h",(function(){return T})),e.d(n,"a",(function(){return E})),e.d(n,"f",(function(){return U})),e.d(n,"g",(function(){return B}));var r=e(4),c=e.n(r),i=e(6),o=e(0),a=e(44),u=e.n(a),s=e(25),d=e(5),l=s.a.apiVersion,p=s.a.tsugiBaseUrl,f=function(t){return d.a.post("/".concat(l,"/go/lms/projects"),Object(o.a)({},t)).then((function(t){return t.data})).catch((function(t){return Promise.reject(t.response.data)}))},v=function(t){return d.a.post("/".concat(l,"/go/lms/projects"),Object(o.a)({},t)).then((function(t){return t.data})).catch((function(t){return Promise.reject(t.response.data)}))},h=function(t){return d.a.get("/".concat(l,"/go/lms/project/").concat(t)).then((function(t){return t.data})).catch((function(t){return Promise.reject(t.response.data)}))},m=function(t){return d.a.get("/".concat(l,"/google-classroom/activities/").concat(t,"/h5p-resource-settings")).then((function(t){return t.data})).catch((function(t){return Promise.reject(t.response.data)}))},y=function(t,n,e){return u()({method:"post",url:p,params:{PHPSESSID:t,gpb:n,final_grade:e}}).then((function(t){return t}))},g=function(t,n){return d.a.post("/".concat(l,"/outcome/summary"),{actor:t,activity:n}).then((function(t){return t.data})).catch((function(t){return t&&t.response&&t.response.data&&t.response.data.errors?t.response.data:(console.log("Unexpected error in summary endpoint:"),console.log(t),null)}))},b=e(1),j=function(t){return function(){var n=Object(i.a)(c.a.mark((function n(e){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f(t);case 2:r=n.sent,e({type:b.Cb,results:r});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},x=function(t){return function(){var n=Object(i.a)(c.a.mark((function n(e){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(t);case 2:r=n.sent,e({type:b.Db,results:r});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},w=function(){return function(){var t=Object(i.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:b.Ue});case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},I=function(){return function(){var t=Object(i.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:b.B});case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},k=function(t){return function(){var n=Object(i.a)(c.a.mark((function n(e){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e({type:b.lf,params:t});case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},O=function(t){return function(){var n=Object(i.a)(c.a.mark((function n(e){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e({type:b.Be,activity:t});case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},S=function(){return function(){var t=Object(i.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:b.P});case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},P=function(){return function(){var t=Object(i.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:b.yd});case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},A=function(){return function(){var t=Object(i.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:b.td});case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},_=function(t){return function(){var n=Object(i.a)(c.a.mark((function n(e){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h(t.id);case 2:r=n.sent,e({type:b.We,project:r.project});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},C=function(t){return function(){var n=Object(i.a)(c.a.mark((function n(e){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e({type:b.Ve,playlist:t});case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},N=function(t){return function(){var n=Object(i.a)(c.a.mark((function n(e){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m(t);case 2:r=n.sent,e({type:b.Rb,h5pSettings:r});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},T=function(t,n,e,r){return function(){var o=Object(i.a)(c.a.mark((function i(o){return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(o({type:b.sc}),!r){c.next=4;break}return c.next=4,y(t,n,e);case 4:case"end":return c.stop()}}),i)})));return function(t){return o.apply(this,arguments)}}()},E=function(){return function(){var t=Object(i.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:b.pd});case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},U=function(t,n){return function(){var e=Object(i.a)(c.a.mark((function e(r){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t,n);case 2:i=e.sent,r({type:b.Ub,summary:i});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B=function(t){return function(){var n=Object(i.a)(c.a.mark((function n(e){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m(t);case 2:r=n.sent,e({type:b.Vb,summaryActivityInfo:r});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}},657:function(t,n,e){"use strict";e.d(n,"a",(function(){return p}));var r=e(4),c=e.n(r),i=e(6),o=e(697),a=e.n(o),u=e(44),s=e.n(u),d=function(t,n){return s.a.post("https://api.v10.learnsafe.com/accounts/".concat(t,"/integrators/auth/token"),null,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},l=function(t,n,e,r,c,i,o,a,u){return s.a.post("https://api.v10.learnsafe.com/accounts/".concat(n,"/integrators/content/check"),{userName:a,workstationName:u,reportedAt:o,applicationName:r,ipAddress:"0.0.0.0",unitPath:e,image:c,content:i},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},p=function(t,n,e,r){return function(){var o=Object(i.a)(c.a.mark((function i(o){var u,s,p,f,v,h,m,y,g,b,j,x;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!((null===(h=JSON.parse(n))||void 0===h||null===(u=h.result)||void 0===u?void 0:u.response)&&"interacted"===(null===h||void 0===h||null===(s=h.verb)||void 0===s?void 0:s.display["en-US"])&&"http://h5p.org/libraries/H5P.OpenEndedQuestion-1.0"===(null===h||void 0===h||null===(p=h.context)||void 0===p||null===(f=p.contextActivities)||void 0===f||null===(v=f.category[0])||void 0===v?void 0:v.id)&&t.account_id&&t.api_key&&t.unit_path&&t.name)){c.next=10;break}return c.next=4,d(t.account_id,t.api_key);case 4:j=c.sent,(x=document.createElement("div")).setAttribute("id","specfic-detail-safe-learn"),x.innerHTML="\n      <div>\n        <h3>".concat(null===h||void 0===h||null===(m=h.object)||void 0===m||null===(y=m.definition)||void 0===y||null===(g=y.description)||void 0===g?void 0:g["en-US"],"</h3>\n        <hr />\n        <h4>").concat(null===h||void 0===h||null===(b=h.result)||void 0===b?void 0:b.response,"</h4>\n      </div>"),document.body.prepend(x),a()(x,{scrollY:-window.scrollY}).then((function(n){var c;null===(c=document.getElementById("specfic-detail-safe-learn"))||void 0===c||c.remove();var i=n.toDataURL("image/png");if(j.data){var o,a=new Date;l(j.data.token,t.account_id,t.unit_path,t.name,i,null===h||void 0===h||null===(o=h.result)||void 0===o?void 0:o.response,a.getTime(),r,e)}})).catch((function(t){return console.log(t)}));case 10:o({type:"SAFELEARN_ACTION"});case 11:case"end":return c.stop()}}),i)})));return function(t){return o.apply(this,arguments)}}()}},964:function(t,n,e){},994:function(t,n,e){"use strict";e.r(n);var r=e(27),c=e(3),i=e(12),o=e(24),a=e(8),u=e.n(a),s=e(30),d=e(134),l=e(411),p=e(72),f=e(392),v=e(509),h=e(657),m=(e(964),e(2)),y=function(t,n){return"set"===n.type?n.intervalId:"clear"===n.type?(clearInterval(t),null):void 0},g=function(t){var n=t.match,e=t.h5pSettings,i=t.ltiFinished,o=t.attemptId,a=t.loadH5pSettings,p=t.sendStatement,f=t.gradePassBack,v=t.activityInit,h=t.sendScreenshot,g=n.params.activityId,b=new URLSearchParams(window.location.search),j=b.get("PHPSESSID"),x=b.get("user_id"),w=b.get("submission_id"),I=b.get("homepage"),k=""!==b.get("is_learner"),O=b.get("course_id"),S=b.get("tool_platform"),P=b.get("custom_course_name"),A=b.get("custom_api_domain_url"),_=b.get("custom_course_code"),C=Object(c.useState)(!1),N=Object(r.a)(C,2),T=N[0],E=N[1],U=Object(c.useReducer)(y,0),B=Object(r.a)(U,2),H=B[0],D=B[1],L=Object(c.useState)(!1),J=Object(r.a)(L,2),M=J[0],R=J[1];return Object(c.useEffect)((function(){window.scrollTo(0,0),a(n.params.activityId),v()}),[g]),Object(c.useEffect)((function(){if(null!==e){window.H5PIntegration=e.h5p.settings,document.getElementById("curriki-h5p-wrapper").innerHTML=e.h5p.embed_code.trim();var t=e.h5p.settings.core.styles.concat(e.h5p.settings.loadedCss);Promise.all(t.map((function(t){var n=document.createElement("link");return n.href=t,n.type="text/css",n.rel="stylesheet",document.head.appendChild(n),!0}))),e.h5p.settings.core.scripts.concat(e.h5p.settings.loadedJs).forEach((function(t){var n=document.createElement("script");n.src=t,n.async=!1,document.body.appendChild(n)}))}}),[e]),Object(c.useEffect)((function(){var t=setInterval((function(){var t,n,e=null===(t=document.getElementsByClassName("h5p-iframe")[0])||void 0===t?void 0:t.contentWindow;(null===e||void 0===e||null===(n=e.H5P)||void 0===n?void 0:n.externalDispatcher)&&(console.log("H5P dispatcher found"),E(!0),console.log("Clearing interval ".concat(H)),D({type:"clear"}))}),500);D({type:"set",intervalId:t})}),[]),Object(c.useEffect)((function(){var t;if(console.log("Patching into xAPI event dispatcher"),T&&k&&!M){var r=null===(t=document.getElementsByClassName("h5p-iframe")[0])||void 0===t?void 0:t.contentWindow;r.H5P.externalDispatcher&&!1!==l.c(n.path)?(r.H5P.externalDispatcher.on("xAPI",(function(t){var r=this;console.log("Running xAPI listener callback");var c={path:n.path,studentId:x,activityId:g,submissionId:w,attemptId:o,homepage:I,courseId:O,toolPlatform:S,customCourseName:P,customApiDomainUrl:A,customCourseCode:_},i=l.b(this,t.data.statement,c);if("submitted-curriki"===t.data.statement.verb.display["en-US"])void 0===this.parent&&this.interactions&&this.interactions.forEach((function(t){if(!t.getLastXAPIVerb()){var n=t.getXAPIData();if(n){var e=JSON.stringify(l.b(r,n.statement,c,!0));p(e)}}}),this),p(JSON.stringify(i)),u.a.fire({title:"Turn in results?",confirmButtonText:"OK"}).then((function(){var t=i.result.score.scaled;f(j,1,t,k),u.a.fire("Saved!","","success")}));else{var a,s=JSON.stringify(i);p(s),(null===e||void 0===e||null===(a=e.organization)||void 0===a?void 0:a.api_key)&&h(e.organization,s,e.activity.title,c.studentId)}})),console.log("Patched into xAPI event dispatcher"),R(!0)):console.log("Missing H5P event dispatcher")}else console.log("Abort patching into xAPI event dispatcher")}),[T]),Object(m.jsxs)("div",{children:[i&&Object(m.jsxs)("div",{className:"p-5 text-center finished-div",children:[Object(m.jsx)("h1",{children:"You have completed this activity!"}),Object(m.jsx)(s.a,{icon:"thumbs-o-up",className:"action-icon ml-1"})]}),!i&&Object(m.jsx)("div",{id:"curriki-h5p-wrapper",className:"added-middle-height-width",children:Object(m.jsx)("div",{className:"loader_gif",children:Object(m.jsx)("img",{style:{width:"50px"},src:d.a,alt:""})})})]})};g.defaultProps={h5pSettings:null,attemptId:null};n.default=Object(o.h)(Object(i.b)((function(t){return{h5pSettings:t.gapi.h5pSettings,ltiFinished:t.canvas.ltiFinished,attemptId:t.canvas.attemptId}}),(function(t){return{loadH5pSettings:function(n){return t(Object(f.i)(n))},sendStatement:function(n){return t(Object(p.t)(n))},gradePassBack:function(n,e,r,c){return t(Object(v.h)(n,e,r,c))},activityInit:function(){return t(Object(v.a)())},sendScreenshot:function(n,e,r,c){return t(Object(h.a)(n,e,r,c))}}}))(g))}}]);
//# sourceMappingURL=39.89f36138.chunk.js.map