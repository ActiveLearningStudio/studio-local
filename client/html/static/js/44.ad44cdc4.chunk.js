(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[44],{1013:function(e,t,n){"use strict";n.r(t);var r=n(23),a=n(27),c=n(3),i=n(12),u=n(30),o=n(8),s=n.n(o),d=n(950),p=n.n(d),l=n(382),f=n(2);function v(e){var t=e.teamId,n=e.authUser,r=e.removingUserId,a=e.selected,i=e.hideRemove,o=e.chosen,d=e.user,p=d.id,l=d.first_name,v=d.last_name,m=d.role,b=d.projects,j=void 0===b?[]:b,h=e.selectMe,x=e.deselectMe,O=e.removeMember,y=e.trigger,w=Object(c.useCallback)((function(){O(t,p).catch((function(){s.a.fire({icon:"error",title:"Error",text:"Failed to remove user."})}))}),[t,p,O]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"col-md-12 member-item",children:[Object(f.jsx)("div",{className:"member-name-mark".concat(o?" active":""),onClick:y,children:Object(f.jsx)("span",{children:"".concat(l[0]).concat(v[0])})}),Object(f.jsxs)("div",{className:"member-info",children:[Object(f.jsx)("h2",{className:"member-name",children:"".concat(l," ").concat(v)}),Object(f.jsxs)("div",{className:"member-data d-flex align-items-center",children:[Object(f.jsxs)("h2",{className:"m-0",children:["owner"===m&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{children:"Admin"}),Object(f.jsx)("span",{style:{margin:"0 9px"},children:"\u25cf"})]}),"Assigned to ".concat(j.length," Projects")]}),j.length>0&&Object(f.jsx)("div",{className:"collapse-btn",onClick:a?x:h,children:Object(f.jsx)("button",{type:"button",children:Object(f.jsx)(u.a,{icon:a?"caret-up":"caret-down",className:"mr-2"})})})]})]}),"owner"===n.role&&n.id!==p&&!i&&Object(f.jsx)("div",{className:"button-container",children:Object(f.jsxs)("button",{type:"button",className:"eliminate-btn",disabled:r,onClick:w,children:[Object(f.jsx)(u.a,{icon:"plus",className:"mr-2"}),Object(f.jsx)("span",{children:n.id===p?"Leave":"Remove"}),r===p&&Object(f.jsx)(u.a,{icon:"spinner",className:"spinner"})]})})]}),a&&Object(f.jsxs)("div",{className:"member-project-dialog",onBlur:x,children:[Object(f.jsx)("div",{onClick:x,children:Object(f.jsx)(u.a,{icon:"plus",className:"mr-2"})}),j.map((function(e,t){return Object(f.jsx)("h2",{className:"".concat(t>0?"border-top":""),children:e.name},e.id)}))]})]})}v.defaultProps={selected:!1,removingUserId:null,hideRemove:!1};var m=v;n(951);function b(e){var t=e.removingUserId,n=e.user,o=e.computedMatch.params,d=o.teamId,v=o.projectId,b=e.team,j=b.selectedTeam,h=j.id,x=j.users,O=j.projects,y=b.isLoading,w=e.removeMember,g=e.addMembers,k=e.loadTeam,N=Object(c.useState)(""),z=Object(a.a)(N,2),M=z[0],I=z[1],C=Object(c.useState)([]),S=Object(a.a)(C,2),P=S[0],U=S[1],F=Object(i.d)((function(e){return e.organization})),A=Object(i.d)((function(e){return e.team})).teamPermission,T=Object(i.c)(),E=Object(c.useCallback)((function(e){I(e.target.value)}),[]);Object(c.useEffect)((function(){k(d)}),[k,d]),Object(c.useEffect)((function(){var e,t;0===Object.keys(A).length&&(null===F||void 0===F||null===(e=F.currentOrganization)||void 0===e?void 0:e.id)&&h&&T(Object(l.g)(null===F||void 0===F||null===(t=F.currentOrganization)||void 0===t?void 0:t.id,h))}),[A]);var R=Object(c.useCallback)((function(){g(h,v,P).then((function(){I("")})).catch((function(){s.a.fire({icon:"error",title:"Error",text:"Failed to add member."})}))}),[g,P,h,v]),L=Object(c.useState)(null),_=Object(a.a)(L,2),B=_[0],J=_[1];if(!O)return Object(f.jsx)(f.Fragment,{});var G=O.find((function(e){return e.id===parseInt(v,10)})).users,q=p.a.filter(x,(function(e){return-1===(G||[]).findIndex((function(t){return e.id===t.id}))}));q=q?q.filter((function(e){return"".concat(e.first_name," ").concat(e.last_name).toLowerCase().indexOf(M.toLowerCase())>-1})):[];var D=x?x.find((function(e){return e.id===n.id})):[],H=function(){return Object(f.jsxs)("button",{type:"button",className:"create-team-submit-btn",disabled:y,onClick:R,children:["Add",y&&Object(f.jsx)(u.a,{icon:"spinner"})]})};return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:"teams-page",children:Object(f.jsx)("div",{className:"content-wrapper",children:Object(f.jsx)("div",{className:"content",children:Object(f.jsxs)("div",{className:"member-add",children:[Object(f.jsxs)("div",{className:"title-box",children:[Object(f.jsx)("h2",{className:"title",children:"Assign Members"}),Object(f.jsx)("div",{className:"title-cross"})]}),Object(f.jsxs)("div",{className:"team-information",children:[Object(f.jsxs)("div",{className:"member-management-wrapper",children:[Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col-md-12",children:Object(f.jsxs)("div",{className:"search-box",children:[Object(f.jsx)("input",{type:"text",placeholder:"Filter by name",value:M,onChange:E}),H()]})})}),Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("div",{className:"col-md-12",children:Object(f.jsx)("div",{className:"member-list",children:q.map((function(e){return Object(f.jsx)("div",{children:Object(f.jsx)(m,{teamId:h,authUser:D,removingUserId:t,selected:B===e.id,user:e,hideRemove:!0,selectMe:function(){return J(e.id)},deselectMe:function(){return J(null)},removeMember:w,chosen:P.indexOf(e.id)>-1,trigger:function(){return function(e){var t=P.indexOf(e),n=P;U(t>-1?[].concat(Object(r.a)(n.slice(0,t)),Object(r.a)(n.slice(t+1,n.length))):[].concat(Object(r.a)(n),[e]))}(e.id)}})},e.id)}))})})})]}),H()]})]})})})})})}b.defaultProps={removingUserId:null};t.default=Object(i.b)((function(e){return{removingUserId:e.team.removingUserId,user:e.auth.user,team:e.team}}),(function(e){return{removeMember:function(t,n){return e(Object(l.o)(t,n))},loadTeam:function(t){return e(Object(l.m)(t))},addMembers:function(t,n,r){return e(Object(l.b)(t,n,r))}}}))(b)},382:function(e,t,n){"use strict";n.d(t,"r",(function(){return p})),n.d(t,"w",(function(){return l})),n.d(t,"u",(function(){return f})),n.d(t,"v",(function(){return v})),n.d(t,"t",(function(){return m})),n.d(t,"n",(function(){return b})),n.d(t,"l",(function(){return j})),n.d(t,"e",(function(){return h})),n.d(t,"m",(function(){return x})),n.d(t,"x",(function(){return O})),n.d(t,"f",(function(){return y})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return g})),n.d(t,"i",(function(){return k})),n.d(t,"o",(function(){return N})),n.d(t,"c",(function(){return z})),n.d(t,"q",(function(){return M})),n.d(t,"b",(function(){return I})),n.d(t,"p",(function(){return C})),n.d(t,"a",(function(){return S})),n.d(t,"g",(function(){return P})),n.d(t,"h",(function(){return U})),n.d(t,"d",(function(){return F})),n.d(t,"s",(function(){return A}));var r=n(4),a=n.n(r),c=n(6),i=n(142),u=n(8),o=n.n(u),s=n(1),d=n(15),p=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:s.Zd});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:s.zf,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:s.Le});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:s.Oe});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:s.Ge});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.a.getState(),r=n.organization.activeOrganization,e.prev=2,t({type:s.ud}),e.next=6,i.a.getAll(null===r||void 0===r?void 0:r.id);case 6:c=e.sent,u=c.teams,t({type:s.hd,payload:{teams:u}}),t({type:s.vd}),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(2),t({type:s.vd}),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},j=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.a.getState(),r=n.organization.activeOrganization,e.prev=2,t({type:s.ud}),e.next=6,i.a.getAllSubOrganizationTeams(null===r||void 0===r?void 0:r.id);case 6:c=e.sent,u=c.teams,t({type:s.hd,payload:{teams:u}}),t({type:s.vd}),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(2),t({type:s.vd}),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c,u,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.a.getState(),c=r.organization.activeOrganization,t.prev=2,n({type:s.eb}),t.next=6,i.a.create(e,null===c||void 0===c?void 0:c.id);case 6:return u=t.sent,o=u.team,n({type:s.fb,payload:{team:o}}),t.abrupt("return",o);case 12:throw t.prev=12,t.t0=t.catch(2),n({type:s.db}),t.t0;case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c,u,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.a.getState(),c=r.organization.activeOrganization,t.prev=2,n({type:s.jd}),t.next=6,i.a.get(e,null===c||void 0===c?void 0:c.id);case 6:u=t.sent,o=u.team,n({type:s.kd,payload:{team:o}}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),n({type:s.id});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},O=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c,u,o,p;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=d.a.getState(),u=c.organization.activeOrganization,n.prev=2,r({type:s.Bf}),n.next=6,i.a.update(e,t,null===u||void 0===u?void 0:u.id);case 6:o=n.sent,p=o.team,r({type:s.Cf,payload:{team:p}}),n.next=15;break;case 11:throw n.prev=11,n.t0=n.catch(2),r({type:s.Af}),n.t0;case 15:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(e){return n.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.a.getState(),c=r.organization.activeOrganization,t.prev=2,n({type:s.yb}),t.next=6,i.a.remove(e,null===c||void 0===c?void 0:c.id);case 6:n({type:s.zb,payload:{teamId:e}}),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(2),n({type:s.xb}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:s.Dc}),t.next=4,i.a.inviteConfirm(e);case 4:return r=t.sent,c=r.invited,n(c?{type:s.Ec,payload:{users:[e]}}:{type:s.Cc}),t.abrupt("return",c);case 10:throw t.prev=10,t.t0=t.catch(0),n({type:s.Cc}),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:s.Ec,payload:{users:e}});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(e,t,n){return function(){var r=Object(c.a)(a.a.mark((function r(c){var u,o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=d.a.getState(),o=u.organization.activeOrganization,r.prev=2,c({type:s.Ac}),r.next=6,i.a.inviteMembers(e,t,n,null===o||void 0===o?void 0:o.id);case 6:c({type:s.Bc}),c(x(e)),r.next=14;break;case 10:throw r.prev=10,r.t0=r.catch(2),c({type:s.zc}),r.t0;case 14:case"end":return r.stop()}}),r,null,[[2,10]])})));return function(e){return r.apply(this,arguments)}}()},N=function(e,t,n){return function(){var r=Object(c.a)(a.a.mark((function r(c){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c({type:s.Id,payload:{userId:t}}),r.next=4,i.a.removeMember(e,t,n);case 4:c({type:s.Jd}),c(x(e)),r.next=12;break;case 8:throw r.prev=8,r.t0=r.catch(0),c({type:s.Ed}),r.t0;case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},z=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:s.w}),n.next=4,i.a.addProjects(e,t);case 4:return c=n.sent,r({type:s.x}),r(x(e)),n.abrupt("return",c);case 10:throw n.prev=10,n.t0=n.catch(0),r({type:s.v}),n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},M=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:s.Ld}),n.next=4,i.a.removeProject(e,t);case 4:r({type:s.Md}),r(x(e)),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(0),r({type:s.Kd}),n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},I=function(e,t,n){return function(){var r=Object(c.a)(a.a.mark((function r(c){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c({type:s.o}),r.next=4,i.a.addMembersToProject(e,t,n);case 4:c({type:s.p}),c(x(e)),r.next=12;break;case 8:throw r.prev=8,r.t0=r.catch(0),c({type:s.n}),r.t0;case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},C=function(e,t,n){return function(){var r=Object(c.a)(a.a.mark((function r(c){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c({type:s.Gd}),r.next=4,i.a.removeMemberFromProject(e,t,n);case 4:c({type:s.Hd}),c(x(e)),r.next=12;break;case 8:throw r.prev=8,r.t0=r.catch(0),c({type:s.Fd}),r.t0;case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.teamRoleType(e);case 2:r=t.sent,n({type:s.y,payload:null===r||void 0===r?void 0:r.teamRoleTypes});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.teamPermisison(e,t);case 2:c=n.sent,r({type:s.u,payload:null===c||void 0===c?void 0:c.teamPermissions});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},U=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c,u,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=d.a.getState(),u=c.organization.activeOrganization,n.next=4,i.a.getTeamProject(null===u||void 0===u?void 0:u.id,e,t);case 4:return o=n.sent,r({type:s.ec,payload:o.data}),n.abrupt("return",o);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},F=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c,u;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=d.a.getState(),u=c.organization.activeOrganization,n.next=4,i.a.changeUserRole(null===u||void 0===u?void 0:u.id,e,t);case 4:o.a.fire({icon:"success",title:"Permission Updated"}),r({type:s.F});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},A=function(e){return function(t){t({type:s.zd,payload:e})}}},951:function(e,t,n){}}]);
//# sourceMappingURL=44.ad44cdc4.chunk.js.map