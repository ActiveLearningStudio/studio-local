{"version":3,"sources":["../node_modules/react-bootstrap/esm/divWithClassName.js","../node_modules/react-bootstrap/esm/CloseButton.js","services/gapi.service.js","store/actions/gapi.js","helpers/xapi.js","../node_modules/react-google-login/dist/google-login.js","../node_modules/react-bootstrap/esm/Alert.js","assets/images/logo.svg","services/safelearn.service.js","store/actions/safelearn.js","containers/LMS/GoogleClassroom/Activity/index.js","containers/LMS/GoogleClassroom/GclassActivityPage/index.js"],"names":["className","React","forwardRef","p","ref","createElement","_extends","classNames","_excluded","propTypes","label","PropTypes","string","isRequired","onClick","func","CloseButton","_ref","props","_objectWithoutPropertiesLoose","type","displayName","defaultProps","apiVersion","config","gapiBaseUrl","token","axios","method","url","headers","Authorization","then","response","params","courseStates","activityId","studentId","submissionId","httpService","get","gcuid","submissionid","data","catch","err","Promise","reject","Swal","fire","title","icon","html","message","classworkId","courseId","post","course_id","access_token","gc_classwork_id","gc_submission_id","actor","activity","error","errors","console","log","googleShare","value","GOOGLE_SHARE","getProjectId","googleClassRoomLoginAction","dispatch","a","searchService","googleShareToken","JSON","stringify","tokenObj","getCourses","ALL_COURSES","payload","courses","googleClassRoomLoginFailure","id","GOOGLE_CLASSROOM_LOGIN_FAILURE","googleClassRoomLoginFailureAction","GOOGLE_CLASSROOM_LOGIN","confirmButtonColor","text","replace","e","setStudentAuthAction","gapiService","accessToken","studentProfile","SET_STUDENT_AUTH","studentData","auth","profile","refreshStudentAuthTokenAction","newToken","SET_STUDENT_AUTH_TOKEN","getStudentCoursesAction","coursesResponse","GET_STUDENT_COURSES","loadH5pResourceSettings","h5pSettings","GET_H5P_SETTINGS","getSubmissionAction","submission","GET_SUBMISSION","turnInAction","turnedIn","TURNED_IN_ACTIVITY","getSummaryAuthAction","summaryAuth","GET_SUMMARY_AUTH","getOutcomeSummaryAction","outcomeSummary","GET_OUTCOME_SUMMARY","isxAPINeeded","currentRoute","includes","extendStatement","h5pObj","statement","skipped","path","attemptId","homepage","toolPlatform","activeCourse","customCourseName","customApiDomainUrl","customCourseCode","platform","find","el","undefined","statementExtended","other","objectType","window","location","origin","push","object","definition","extensions","alternateLink","name","account","homePage","context","contextActivities","verb","display","result","score","min","max","interactionType","interactiveBookObject","libraryInfo","machineName","parent","chapterIndex","getActiveChapter","chapters","extendSharedActivityStatement","fakeSubId","Math","floor","random","toString","fakeAttemptId","fakeCourseId","document","referrer","self","module","exports","o","t","m","n","r","i","resetWarningCache","c","Error","array","bool","number","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","Array","isArray","Symbol","iterator","Object","next","done","length","return","prototype","call","slice","constructor","from","test","TypeError","u","l","s","f","getElementsByTagName","src","parentNode","insertBefore","head","appendChild","onerror","onload","d","getElementById","removeChild","b","style","paddingRight","fontWeight","paddingLeft","paddingTop","paddingBottom","children","g","marginRight","background","active","padding","borderRadius","width","height","xmlns","fill","fillRule","y","useState","tag","disabledStyle","buttonText","v","render","S","theme","j","O","disabled","x","h","onSuccess","onAutoLoadFinished","onRequest","onFailure","onScriptLoadFailure","clientId","cookiePolicy","loginHint","hostedDomain","autoLoad","isSignedIn","fetchBasicProfile","redirectUri","discoveryDocs","uxMode","scope","accessType","responseType","jsSrc","prompt","I","signIn","w","loaded","k","backgroundColor","alignItems","color","boxShadow","border","fontSize","fontFamily","A","cursor","opacity","_","assign","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","key","getBasicProfile","getAuthResponse","googleId","getId","tokenId","id_token","profileObj","imageUrl","getImageUrl","email","getEmail","getName","givenName","getGivenName","familyName","getFamilyName","preventDefault","P","gapi","auth2","getAuthInstance","L","grantOfflineAccess","E","T","M","C","useEffect","client_id","cookie_policy","login_hint","hosted_domain","fetch_basic_profile","ux_mode","redirect_uri","access_type","load","currentUser","init","onLogoutSuccess","signOut","useCallback","disconnect","defineProperty","enumerable","toStringTag","__esModule","create","bind","default","hasOwnProperty","require","DivStyledAsH4","divWithClassName","AlertHeading","createWithBsPrefix","Component","AlertLink","SafeAnchor","show","transition","Fade","closeLabel","Alert","uncontrolledProps","_useUncontrolled","useUncontrolled","bsPrefix","variant","onClose","dismissible","prefix","useBootstrapPrefix","handleClose","useEventCallback","Transition","alert","role","unmountOnExit","in","Link","Heading","accountId","authKey","unitPath","orgName","imagData","actualText","time","info","activityName","userName","workstationName","reportedAt","applicationName","ipAddress","image","content","saveResultScreenshotAction","org","studentName","parsedStatement","parse","category","account_id","api_key","unit_path","service","safeData","customhtml","setAttribute","innerHTML","description","body","prepend","html2canvas","scrollY","canvas","remove","base64image","toDataURL","timeSafe","Date","getTime","withRouter","connect","state","student","loadH5pSettings","getSubmission","sendStatement","loadH5pResourceXapi","turnIn","sendScreenshot","match","history","xAPILoaded","setXAPILoaded","intervalPointer","setIntervalPointer","xAPIEventHooked","setXAPIEventHooked","scrollTo","H5PIntegration","h5p","settings","embed_code","trim","newCss","core","styles","concat","loadedCss","all","map","link","href","rel","scripts","loadedJs","forEach","script","async","checkXapi","setInterval","getElementsByClassName","contentWindow","H5P","externalDispatcher","clearInterval","xAPIHelper","on","event","xapiData","this","interactions","interaction","getLastXAPIVerb","xAPIData","getXAPIData","iXAPIStatement","showCancelButton","confirmButtonText","isConfirmed","organization","fullName","userId","coursework_id","gifloader","alt","submissionError","orientation","ui","setStudentAuth","authData","refreshStudentAuthToken","newData","getStudentCourses","authorized","setAuthorized","isTeacher","setIsTeacher","setActiveCourse","found","teacher","ownerId","handleLogin","reloadAuthResponse","charset","logo","global","gapiClientId"],"mappings":"mGAAA,4CAGgB,aAAUA,GACxB,OAAoBC,IAAMC,YAAW,SAAUC,EAAGC,GAChD,OAAoBH,IAAMI,cAAc,MAAOC,YAAS,GAAIH,EAAG,CAC7DC,IAAKA,EACLJ,UAAWO,IAAWJ,EAAEH,UAAWA,W,iCCPzC,oEAEIQ,EAAY,CAAC,QAAS,UAAW,aAIjCC,EAAY,CACdC,MAAOC,IAAUC,OAAOC,WACxBC,QAASH,IAAUI,MAKjBC,EAA2Bf,IAAMC,YAAW,SAAUe,EAAMb,GAC9D,IAAIM,EAAQO,EAAKP,MACbI,EAAUG,EAAKH,QACfd,EAAYiB,EAAKjB,UACjBkB,EAAQC,YAA8BF,EAAMT,GAEhD,OAAoBP,IAAMI,cAAc,SAAUC,YAAS,CACzDF,IAAKA,EACLgB,KAAM,SACNpB,UAAWO,IAAW,QAASP,GAC/Bc,QAASA,GACRI,GAAqBjB,IAAMI,cAAc,OAAQ,CAClD,cAAe,QACd,QAAsBJ,IAAMI,cAAc,OAAQ,CACnDL,UAAW,WACVU,OAELM,EAAYK,YAAc,cAC1BL,EAAYP,UAAYA,EACxBO,EAAYM,aAtBO,CACjBZ,MAAO,SAsBMM,O,mhBC5BPO,EAAeC,IAAfD,WACFE,EAAc,sCAmGL,EAjGW,SAACC,GAAD,OAAWC,IAAM,CACzCC,OAAQ,MACRC,IAAI,GAAD,OAAKJ,EAAL,oBACHK,QAAS,CACPC,cAAc,UAAD,OAAYL,MAG1BM,MAAK,SAACC,GAAD,OAAcA,MA0FP,EAxFW,SAACP,GAAD,OAAWC,IAAM,CACzCC,OAAQ,MACRC,IAAI,GAAD,OAAKJ,EAAL,YACHS,OAAQ,CACNC,aAAc,UAEhBL,QAAS,CACPC,cAAc,UAAD,OAAYL,MAG1BM,MAAK,SAACC,GAAD,OAAcA,MA8EP,EAnBa,SAACG,GAAD,IAAaC,EAAb,uDAAyB,KAAMC,EAA/B,uDAA8C,KAA9C,OAAuDC,IAChFC,IADgF,WAE3EjB,EAF2E,wCAEjCa,EAFiC,0BAG/E,GACA,CACEK,MAAOJ,EACPK,aAAcJ,IAGjBN,MAAK,qBAAGW,QACRC,OAAM,SAACC,GACNC,QAAQC,OAAOF,EAAIZ,SAASU,MAC5BK,IAAKC,KAAK,CACRC,MAAO,QACPC,KAAM,QACNC,KAAMP,EAAIQ,SAAW,8DAIZ,EAnEO,SAACC,EAAaC,EAAU7B,GAAxB,OAAkCa,IACrDiB,KADqD,WAEhDjC,EAFgD,uCAEP+B,EAFO,eAGpD,CAAEG,UAAWF,EAAUG,aAAchC,IAEtCM,MAAK,qBAAGW,QACRC,OAAM,SAACC,GAAD,OAASC,QAAQC,OAAOF,EAAIZ,SAASU,UA6D/B,EA3DA,SAACW,EAAaC,EAAU7B,GAAxB,OAAkCa,IAC9CiB,KAD8C,WAEzCjC,EAFyC,oCAEH+B,GAC1C,CAAEG,UAAWF,EAAUG,aAAchC,IAEtCM,MAAK,qBAAGW,QACRC,OAAM,SAACC,GAAD,OAASC,QAAQC,OAAOF,EAAIZ,SAASU,UAqD/B,EAnDQ,SAACjB,EAAO6B,EAAUD,EAAahB,GAA/B,OAAgDC,IACpEiB,KADoE,WAE/DjC,EAF+D,6CAGnE,CACEkC,UAAWF,EACXG,aAAchC,EACdiC,gBAAiBL,EACjBM,iBAAkBtB,IAGrBN,MAAK,qBAAGW,QACRC,OAAM,SAACX,GAAD,OAAcA,EAASA,SAASU,SAwC1B,EAtCW,SAACN,EAAWD,GAAZ,OAA2BG,IAClDiB,KADkD,WAE7CjC,EAF6C,oBAGjD,CACEsC,MAAOxB,EACPyB,SAAU1B,IAGbJ,MAAK,qBAAGW,QACRC,OAAM,SAACmB,GACN,OAAIA,GAASA,EAAM9B,UAAY8B,EAAM9B,SAASU,MAAQoB,EAAM9B,SAASU,KAAKqB,OACjED,EAAM9B,SAASU,MAGxBsB,QAAQC,IAAI,yCACZD,QAAQC,IAAIH,GACL,U,OC3DEI,EAAc,SAACC,GAAD,MAAY,CACrChD,KAAMiD,KACND,UASWE,EAAe,aAcfC,EAA6B,SAACtC,GAAD,8CAAc,WAAOuC,GAAP,eAAAC,EAAA,6DACtDD,EAASL,GAAY,IADiC,kBAK9CO,IAAcC,iBAAiBC,KAAKC,UAAU5C,EAAS6C,WALT,uBAM3BJ,IAAcK,aANa,OAM9CA,EAN8C,OAOpDP,EAAS,CACPpD,KAAM4D,IACNC,QAASF,EAAWG,UAT8B,kDAcpDjB,QAAQC,IAAR,MAdoD,0DAAd,uDAkB7BiB,EAA8B,SAACC,GAAD,MAAS,CAClDhE,KAAMiE,KACND,OAIWE,EAAoC,SAACrD,GAAD,8CAAc,WAAOuC,GAAP,SAAAC,EAAA,sDAC7DD,EAASL,EAAY,UACrBK,GAxDmCY,EAwDLnD,EAxDa,CAC3Cb,KAAMmE,KACNH,QAwDA,IACEpC,IAAKC,KAAK,CACRuC,mBAAoB,UACpBrC,KAAM,QACNsC,KAAMxD,EAAS8B,MAAM2B,QAAQ,KAAM,OAIrClB,EAASW,EAA4BlD,IACrC,MAAO0D,GACP1B,QAAQC,IAAIyB,GAd+C,iCAtD3B,IAACP,IAsD0B,OAAd,uDAmBpCQ,EAAuB,SAACjD,GAAD,8CAAU,WAAO6B,GAAP,eAAAC,EAAA,sEAEfoB,EAA8BlD,EAAKmD,aAFpB,OAEtCC,EAFsC,OAI5CvB,EAAS,CACPpD,KAAM4E,KACNC,YAAa,CACXC,KAAMvD,EACNwD,QAASJ,KAR+B,2CAAV,uDAavBK,EAAgC,SAACC,GAAD,8CAAc,WAAO7B,GAAP,SAAAC,EAAA,sDACzDD,EAAS,CACPpD,KAAMkF,KACND,SAAS,eAAMA,KAHwC,2CAAd,uDAQhCE,EAA0B,SAAC7E,GAAD,8CAAW,WAAO8C,GAAP,eAAAC,EAAA,sEAClBoB,EAA8BnE,GADZ,OAC1C8E,EAD0C,OAEhDhC,EAAS,CACPpD,KAAMqF,KACND,oBAJ8C,2CAAX,uDAQ1BE,EAA0B,SAACtE,GAAD,IAAaC,EAAb,uDAAyB,KAAMC,EAA/B,uDAA8C,KAA9C,8CAAuD,WAAOkC,GAAP,eAAAC,EAAA,sEAClEoB,EAAgCzD,EAAYC,EAAWC,GADW,OACtFqE,EADsF,OAE5FnC,EAAS,CACPpD,KAAMwF,KACND,gBAJ0F,2CAAvD,uDAQ1BE,EAAsB,SAACvD,EAAaC,EAAU2C,GAAxB,8CAAiC,WAAO1B,GAAP,eAAAC,EAAA,sEACzCoB,EAA0BvC,EAAaC,EAAUqB,KAAKC,UAAUqB,EAAKpB,WAC3FlC,OAAM,SAACC,GAAD,OAASA,KAFgD,OAC5DiE,EAD4D,OAIlEtC,EAAS,CACPpD,KAAM2F,KACND,eANgE,2CAAjC,uDAUtBE,EAAe,SAAC1D,EAAaC,EAAU2C,GAAxB,8CAAiC,WAAO1B,GAAP,eAAAC,EAAA,sEACpCoB,EAAmBvC,EAAaC,EAAUqB,KAAKC,UAAUqB,EAAKpB,WAD1B,OACrDmC,EADqD,OAE3DzC,EAAS,CACPpD,KAAM8F,KACND,aAJyD,2CAAjC,uDAQfE,EAAuB,SAACjB,EAAM3C,EAAUD,EAAahB,GAA9B,8CAA+C,WAAOkC,GAAP,eAAAC,EAAA,sEACvDoB,EAA2BjB,KAAKC,UAAUqB,EAAKpB,UAAWvB,EAAUD,EAAahB,GAD1B,OAC3E8E,EAD2E,OAGjF5C,EAAS,CACPpD,KAAMiG,KACND,gBAL+E,2CAA/C,uDASvBE,EAA0B,SAACjF,EAAWD,GAAZ,8CAA2B,WAAOoC,GAAP,eAAAC,EAAA,sEACnCoB,EAA8BxD,EAAWD,GADN,OAC1DmF,EAD0D,OAEhE/C,EAAS,CACPpD,KAAMoG,KACND,mBAJ8D,2CAA3B,wD,kJCtIhC,SAASE,EAAaC,GAC3B,MArBO,CACL,4DACA,kCACA,+BACA,0HAiB8BC,SAASD,GAGpC,SAASE,EAAgBC,EAAQC,EAAW5F,GAA0B,IAAD,IAAjB6F,EAAiB,wDAExEC,EAYE9F,EAZF8F,KACA5F,EAWEF,EAXFE,WACAE,EAUEJ,EAVFI,aACA2F,EASE/F,EATF+F,UACA5F,EAQEH,EARFG,UACAkB,EAOErB,EAPFqB,SACA2E,EAMEhG,EANFgG,SACAC,EAKEjG,EALFiG,aACAC,EAIElG,EAJFkG,aACAC,EAGEnG,EAHFmG,iBACAC,EAEEpG,EAFFoG,mBACAC,EACErG,EADFqG,iBAGIC,EA9BC,CACL,CAAE,wEAAyE,iBAC3E,CAAE,+BAAgC,iBAClC,CAAE,4DAA6D,oBAC/D,CAAE,kCAAmC,cACrC,CAAE,yHAA0H,eAyB/EC,MAAK,SAACC,GAAD,OAAQA,EAAGV,MAC/D,QAAiBW,IAAbH,EAAJ,CAEA,IAwBqD,IAxB/CI,EAAiB,eAAQd,GACzBe,EAAQ,CACZ,CACEC,WAAY,WACZ1D,GAAG,GAAD,OAAK2D,OAAOC,SAASC,OAArB,qBAAwC7G,EAAxC,uBAAiEE,EAAjE,YAAiF2F,IAErF,CACEa,WAAY,WACZ1D,GAAG,GAAD,OAAK2D,OAAOC,SAASC,OAArB,qBAAwC7G,EAAxC,uBAAiEE,KAIhD,qBAAnBkG,EAASR,KACXa,EAAMK,KAAK,CACTJ,WAAY,WACZ1D,GAAG,GAAD,OAAK2D,OAAOC,SAASC,OAArB,mBAAsC1F,KAGtCqF,EAAkBO,QAAUP,EAAkBO,OAAOC,YAAcR,EAAkBO,OAAOC,WAAWC,aACzGT,EAAkBO,OAAOC,WAAWC,WAAW,6DAA+DjB,EAAakB,cAC3HV,EAAkBO,OAAOC,WAAWC,WAAW,8CAAgDjB,EAAamB,OAI5Gf,EAASR,GACXa,EAAMK,KAAK,CACTJ,WAAY,WACZ1D,GAAG,GAAD,OAAK2D,OAAOC,SAASC,OAArB,gBAAmC1F,MAGvC,OAAIqF,QAAJ,IAAIA,GAAJ,UAAIA,EAAmBO,cAAvB,iBAAI,EAA2BC,kBAA/B,aAAI,EAAuCC,cACzCT,EAAkBO,OAAOC,WAAWC,WAAW,kDAAoDhB,EACnGO,EAAkBO,OAAOC,WAAWC,WAAW,iDAAmDf,EAClGM,EAAkBO,OAAOC,WAAWC,WAAW,kDAAoDd,GAIvG,IAAM1E,EAAQ,CACZiF,WAAY,QACZU,QAAS,CACPC,SAAUvB,GAAY,+BACtBqB,KAAMlH,IAINuG,EAAkBc,UACG,eAAnBlB,EAASR,GACXY,EAAkBc,QAAQlB,SAAWL,EAErCS,EAAkBc,QAAQlB,SAAWA,EAASR,GAGhDY,EAAkBc,QAAQC,kBAAkBd,MAAQA,GAGtDD,EAAkB/E,MAAQA,EAGtBkE,IACFa,EAAkBgB,KAAO,CACvBxE,GAAI,yCACJyE,QAAS,CACP,QAAS,YAOXjB,EAAkBkB,QACflB,EAAkBkB,OAAOC,OACzBnB,EAAkBkB,OAAOC,MAAMC,MAAQpB,EAAkBkB,OAAOC,MAAME,MAEzErB,EAAkBkB,OAAOC,MAAME,KAAO,IAKtCrB,EAAkBO,QAAkE,aAAxDP,EAAkBO,OAAOC,WAAWc,kBAClEtB,EAAkBO,OAAOC,WAAWc,gBAAkB,UASxD,IAFA,IAAIC,EAAwBtC,EAErBsC,GAA6E,yBAA/B,QAArB,EAAAA,SAAA,mBAAuBC,mBAAvB,eAAoCC,cAAuC,CAAC,IAAD,IACzGF,EAAwBA,EAAsBG,OAGhD,GAAwD,yBAA/B,QAArB,EAAAH,SAAA,mBAAuBC,mBAAvB,eAAoCC,aAAuC,CAC7E,IAAME,EAAeJ,EAAsBK,mBAC3C5B,EAAkBO,OAAOC,WAAWC,WAAW,mDAAqDc,EAAsBM,SAASF,GAAcrH,MAGnJ,OAAO0F,GAKF,SAAS8B,EAA8B7C,EAAQC,EAAW5F,GAAS,IAAD,EAErE8F,EAEE9F,EAFF8F,KACA5F,EACEF,EADFE,WAEIwG,EAAiB,eAAQd,GAGzB6C,EAAYC,KAAKC,MAAsB,IAAhBD,KAAKE,UAAmBC,WAC/CC,EAAgBJ,KAAKC,MAAsB,IAAhBD,KAAKE,UAAmBC,WACnDE,EAAeL,KAAKC,MAAsB,IAAhBD,KAAKE,UAAmBC,WAElDlC,EAAQ,CACZ,CACEC,WAAY,WACZ1D,GAAG,GAAD,OAAK2D,OAAOC,SAASC,OAArB,qBAAwC7G,EAAxC,uBAAiEuI,EAAjE,YAA8EK,IAElF,CACElC,WAAY,WACZ1D,GAAG,GAAD,OAAK2D,OAAOC,SAASC,OAArB,qBAAwC7G,EAAxC,uBAAiEuI,IAErE,CACE7B,WAAY,WACZ1D,GAAG,GAAD,OAAK2D,OAAOC,SAASC,OAArB,mBAAsCgC,KAItCzC,EAlKC,CACL,CAAE,wEAAyE,iBAC3E,CAAE,+BAAgC,iBAClC,CAAE,4DAA6D,oBAC/D,CAAE,kCAAmC,cACrC,CAAE,yHAA0H,eA6J/EC,MAAK,SAACC,GAAD,OAAQA,EAAGV,MAC/D,QAAiBW,IAAbH,EASJ,OAPA,OAAII,QAAJ,IAAIA,GAAJ,UAAIA,EAAmBc,eAAvB,aAAI,EAA4BC,qBAC9Bf,EAAkBc,QAAQlB,SAAWA,EAASR,GAC9CY,EAAkBc,QAAQC,kBAAkBd,MAAQA,GAGtDD,EAAkBO,OAAOC,WAAWC,WAAW,8CAAgD6B,SAASC,SAAWD,SAASC,SAAWpC,OAAOC,SAASC,OAEhJL,I,oBCxLgP,oBAAoBwC,MAAKA,KAAjNC,EAAOC,QAAqN,SAAS3F,GAAG,OAAO4F,EAAE,GAAGC,EAAEC,EAAEC,EAAE,CAAC,SAASF,GAAGA,EAAEF,QAAQ3F,GAAG,SAASA,EAAE6F,EAAEE,GAAG/F,EAAE2F,QAAQI,EAAE,EAAFA,IAAQ,SAAS/F,EAAE6F,EAAEE,GAAG,aAAa,SAASH,KAAK,SAASI,KAAK,IAAIC,EAAEF,EAAE,GAAGC,EAAEE,kBAAkBN,EAAE5F,EAAE2F,QAAQ,WAAW,SAAS3F,EAAEA,EAAE6F,EAAEE,EAAEH,EAAEI,EAAElH,GAAG,GAAGA,IAAImH,EAAE,CAAC,IAAIE,EAAEC,MAAM,mLAAmL,MAAMD,EAAEvC,KAAK,sBAAsBuC,GAAG,SAASN,IAAI,OAAO7F,EAAE,IAAI+F,EAAE,CAACM,MAAMrG,EAAE9E,WAAW8E,EAAEsG,KAAKtG,EAAE5E,KAAK4E,EAAEuG,OAAOvG,EAAEwD,OAAOxD,EAAE/E,OAAO+E,EAAEwG,OAAOxG,EAAEyG,IAAIzG,EAAE0G,QAAQb,EAAEc,QAAQ3G,EAAE4G,YAAY5G,EAAE6G,WAAWhB,EAAEiB,KAAK9G,EAAE+G,SAASlB,EAAEmB,MAAMnB,EAAEoB,UAAUpB,EAAEqB,MAAMrB,EAAEsB,MAAMtB,EAAEuB,eAAepB,EAAEE,kBAAkBN,GAAG,OAAOG,EAAE/K,UAAU+K,IAAI,SAAS/F,GAAG,aAAaA,EAAE2F,QAAQ,gDAAgD,SAAS3F,EAAE6F,EAAEE,GAAG,aAAa,SAASH,EAAE5F,EAAE6F,GAAG,OAAO,SAAS7F,GAAG,GAAGqH,MAAMC,QAAQtH,GAAG,OAAOA,EAAvC,CAA0CA,IAAI,SAASA,EAAE6F,GAAG,GAAG,oBAAoB0B,QAAQA,OAAOC,YAAYC,OAAOzH,GAAG,CAAC,IAAI+F,EAAE,GAAGH,GAAE,EAAGI,GAAE,EAAGC,OAAE,EAAO,IAAI,IAAI,IAAInH,EAAEqH,EAAEnG,EAAEuH,OAAOC,cAAc5B,GAAG9G,EAAEqH,EAAEuB,QAAQC,QAAQ5B,EAAExC,KAAKzE,EAAEL,QAAQoH,GAAGE,EAAE6B,SAAS/B,GAAGD,GAAE,IAAK,MAAM5F,GAAGgG,GAAE,EAAGC,EAAEjG,EAAvH,QAAiI,IAAI4F,GAAG,MAAMO,EAAE0B,QAAQ1B,EAAE0B,SAAzB,QAA0C,GAAG7B,EAAE,MAAMC,GAAG,OAAOF,GAAvS,CAA2S/F,EAAE6F,IAAI,SAAS7F,EAAE6F,GAAG,GAAG7F,EAAE,CAAC,GAAG,iBAAiBA,EAAE,OAAOgG,EAAEhG,EAAE6F,GAAG,IAAIE,EAAE0B,OAAOK,UAAU1C,SAAS2C,KAAK/H,GAAGgI,MAAM,GAAG,GAAG,MAAM,WAAWjC,GAAG/F,EAAEiI,cAAclC,EAAE/F,EAAEiI,YAAYrE,MAAM,QAAQmC,GAAG,QAAQA,EAAEsB,MAAMa,KAAKnC,GAAG,cAAcA,GAAG,2CAA2CoC,KAAKpC,GAAGC,EAAEhG,EAAE6F,QAAG,GAApR,CAA6R7F,EAAE6F,IAAI,WAAW,MAAM,IAAIuC,UAAU,6IAA/B,GAA+K,SAASpC,EAAEhG,EAAE6F,GAAG,MAAMA,GAAGA,GAAG7F,EAAE4H,SAAS/B,EAAE7F,EAAE4H,QAAQ,IAAI,IAAI7B,EAAE,EAAEH,EAAEyB,MAAMxB,GAAGE,EAAEF,EAAEE,IAAIH,EAAEG,GAAG/F,EAAE+F,GAAG,OAAOH,EAAE,SAASK,EAAEjG,EAAE6F,GAAG,OAAO,SAAS7F,GAAG,GAAGqH,MAAMC,QAAQtH,GAAG,OAAOA,EAAvC,CAA0CA,IAAI,SAASA,EAAE6F,GAAG,GAAG,oBAAoB0B,QAAQA,OAAOC,YAAYC,OAAOzH,GAAG,CAAC,IAAI+F,EAAE,GAAGH,GAAE,EAAGI,GAAE,EAAGC,OAAE,EAAO,IAAI,IAAI,IAAInH,EAAEqH,EAAEnG,EAAEuH,OAAOC,cAAc5B,GAAG9G,EAAEqH,EAAEuB,QAAQC,QAAQ5B,EAAExC,KAAKzE,EAAEL,QAAQoH,GAAGE,EAAE6B,SAAS/B,GAAGD,GAAE,IAAK,MAAM5F,GAAGgG,GAAE,EAAGC,EAAEjG,EAAvH,QAAiI,IAAI4F,GAAG,MAAMO,EAAE0B,QAAQ1B,EAAE0B,SAAzB,QAA0C,GAAG7B,EAAE,MAAMC,GAAG,OAAOF,GAAvS,CAA2S/F,EAAE6F,IAAI,SAAS7F,EAAE6F,GAAG,GAAG7F,EAAE,CAAC,GAAG,iBAAiBA,EAAE,OAAOlB,EAAEkB,EAAE6F,GAAG,IAAIE,EAAE0B,OAAOK,UAAU1C,SAAS2C,KAAK/H,GAAGgI,MAAM,GAAG,GAAG,MAAM,WAAWjC,GAAG/F,EAAEiI,cAAclC,EAAE/F,EAAEiI,YAAYrE,MAAM,QAAQmC,GAAG,QAAQA,EAAEsB,MAAMa,KAAKnC,GAAG,cAAcA,GAAG,2CAA2CoC,KAAKpC,GAAGjH,EAAEkB,EAAE6F,QAAG,GAApR,CAA6R7F,EAAE6F,IAAI,WAAW,MAAM,IAAIuC,UAAU,6IAA/B,GAA+K,SAAStJ,EAAEkB,EAAE6F,GAAG,MAAMA,GAAGA,GAAG7F,EAAE4H,SAAS/B,EAAE7F,EAAE4H,QAAQ,IAAI,IAAI7B,EAAE,EAAEH,EAAEyB,MAAMxB,GAAGE,EAAEF,EAAEE,IAAIH,EAAEG,GAAG/F,EAAE+F,GAAG,OAAOH,EAAE,SAASO,EAAEnG,EAAE6F,GAAG,OAAO,SAAS7F,GAAG,GAAGqH,MAAMC,QAAQtH,GAAG,OAAOA,EAAvC,CAA0CA,IAAI,SAASA,EAAE6F,GAAG,GAAG,oBAAoB0B,QAAQA,OAAOC,YAAYC,OAAOzH,GAAG,CAAC,IAAI+F,EAAE,GAAGH,GAAE,EAAGI,GAAE,EAAGC,OAAE,EAAO,IAAI,IAAI,IAAInH,EAAEqH,EAAEnG,EAAEuH,OAAOC,cAAc5B,GAAG9G,EAAEqH,EAAEuB,QAAQC,QAAQ5B,EAAExC,KAAKzE,EAAEL,QAAQoH,GAAGE,EAAE6B,SAAS/B,GAAGD,GAAE,IAAK,MAAM5F,GAAGgG,GAAE,EAAGC,EAAEjG,EAAvH,QAAiI,IAAI4F,GAAG,MAAMO,EAAE0B,QAAQ1B,EAAE0B,SAAzB,QAA0C,GAAG7B,EAAE,MAAMC,GAAG,OAAOF,GAAvS,CAA2S/F,EAAE6F,IAAI,SAAS7F,EAAE6F,GAAG,GAAG7F,EAAE,CAAC,GAAG,iBAAiBA,EAAE,OAAOqI,EAAErI,EAAE6F,GAAG,IAAIE,EAAE0B,OAAOK,UAAU1C,SAAS2C,KAAK/H,GAAGgI,MAAM,GAAG,GAAG,MAAM,WAAWjC,GAAG/F,EAAEiI,cAAclC,EAAE/F,EAAEiI,YAAYrE,MAAM,QAAQmC,GAAG,QAAQA,EAAEsB,MAAMa,KAAKnC,GAAG,cAAcA,GAAG,2CAA2CoC,KAAKpC,GAAGsC,EAAErI,EAAE6F,QAAG,GAApR,CAA6R7F,EAAE6F,IAAI,WAAW,MAAM,IAAIuC,UAAU,6IAA/B,GAA+K,SAASC,EAAErI,EAAE6F,GAAG,MAAMA,GAAGA,GAAG7F,EAAE4H,SAAS/B,EAAE7F,EAAE4H,QAAQ,IAAI,IAAI7B,EAAE,EAAEH,EAAEyB,MAAMxB,GAAGE,EAAEF,EAAEE,IAAIH,EAAEG,GAAG/F,EAAE+F,GAAG,OAAOH,EAAE,SAAS0C,EAAEtI,EAAE6F,GAAG,OAAO,SAAS7F,GAAG,GAAGqH,MAAMC,QAAQtH,GAAG,OAAOA,EAAvC,CAA0CA,IAAI,SAASA,EAAE6F,GAAG,GAAG,oBAAoB0B,QAAQA,OAAOC,YAAYC,OAAOzH,GAAG,CAAC,IAAI+F,EAAE,GAAGH,GAAE,EAAGI,GAAE,EAAGC,OAAE,EAAO,IAAI,IAAI,IAAInH,EAAEqH,EAAEnG,EAAEuH,OAAOC,cAAc5B,GAAG9G,EAAEqH,EAAEuB,QAAQC,QAAQ5B,EAAExC,KAAKzE,EAAEL,QAAQoH,GAAGE,EAAE6B,SAAS/B,GAAGD,GAAE,IAAK,MAAM5F,GAAGgG,GAAE,EAAGC,EAAEjG,EAAvH,QAAiI,IAAI4F,GAAG,MAAMO,EAAE0B,QAAQ1B,EAAE0B,SAAzB,QAA0C,GAAG7B,EAAE,MAAMC,GAAG,OAAOF,GAAvS,CAA2S/F,EAAE6F,IAAI,SAAS7F,EAAE6F,GAAG,GAAG7F,EAAE,CAAC,GAAG,iBAAiBA,EAAE,OAAOuI,EAAEvI,EAAE6F,GAAG,IAAIE,EAAE0B,OAAOK,UAAU1C,SAAS2C,KAAK/H,GAAGgI,MAAM,GAAG,GAAG,MAAM,WAAWjC,GAAG/F,EAAEiI,cAAclC,EAAE/F,EAAEiI,YAAYrE,MAAM,QAAQmC,GAAG,QAAQA,EAAEsB,MAAMa,KAAKnC,GAAG,cAAcA,GAAG,2CAA2CoC,KAAKpC,GAAGwC,EAAEvI,EAAE6F,QAAG,GAApR,CAA6R7F,EAAE6F,IAAI,WAAW,MAAM,IAAIuC,UAAU,6IAA/B,GAA+K,SAASG,EAAEvI,EAAE6F,GAAG,MAAMA,GAAGA,GAAG7F,EAAE4H,SAAS/B,EAAE7F,EAAE4H,QAAQ,IAAI,IAAI7B,EAAE,EAAEH,EAAEyB,MAAMxB,GAAGE,EAAEF,EAAEE,IAAIH,EAAEG,GAAG/F,EAAE+F,GAAG,OAAOH,EAAE,SAAS4C,EAAExI,EAAE6F,EAAEE,EAAEH,EAAEI,EAAEC,GAAG,IAAInH,EAAEkB,EAAEyI,qBAAqB5C,GAAG,GAAGM,EAAErH,EAAEuJ,EAAEvJ,GAAGuJ,EAAErI,EAAEtF,cAAcmL,IAAIpG,GAAGsG,EAAEsC,EAAEK,IAAI9C,EAAEO,GAAGA,EAAEwC,WAAWxC,EAAEwC,WAAWC,aAAaP,EAAElC,GAAGnG,EAAE6I,KAAKC,YAAYT,GAAGA,EAAEU,QAAQ9C,EAAEoC,EAAEW,OAAOhD,EAAE,SAASiD,EAAEjJ,EAAE6F,GAAG,IAAIE,EAAE/F,EAAEkJ,eAAerD,GAAGE,GAAGA,EAAE4C,WAAWQ,YAAYpD,GAAG,SAASvL,EAAEwF,GAAG,OAAOoJ,EAAEtK,EAAEpE,cAAc,OAAO,CAAC2O,MAAM,CAACC,aAAa,GAAGC,WAAW,IAAIC,YAAYxJ,EAAExC,KAAK,EAAE,GAAGiM,WAAW,GAAGC,cAAc,KAAK1J,EAAE2J,UAAU,SAASC,EAAE5J,GAAG,OAAOoJ,EAAEtK,EAAEpE,cAAc,MAAM,CAAC2O,MAAM,CAACQ,YAAY,GAAGC,WAAW9J,EAAE+J,OAAO,OAAO,OAAOC,QAAQ,GAAGC,aAAa,IAAIb,EAAEtK,EAAEpE,cAAc,MAAM,CAACwP,MAAM,KAAKC,OAAO,KAAKC,MAAM,8BAA8BhB,EAAEtK,EAAEpE,cAAc,IAAI,CAAC2P,KAAK,OAAOC,SAAS,WAAWlB,EAAEtK,EAAEpE,cAAc,OAAO,CAACuO,EAAE,gIAAgIoB,KAAK,YAAYjB,EAAEtK,EAAEpE,cAAc,OAAO,CAACuO,EAAE,kHAAkHoB,KAAK,YAAYjB,EAAEtK,EAAEpE,cAAc,OAAO,CAACuO,EAAE,4HAA4HoB,KAAK,YAAYjB,EAAEtK,EAAEpE,cAAc,OAAO,CAACuO,EAAE,8HAA8HoB,KAAK,YAAYjB,EAAEtK,EAAEpE,cAAc,OAAO,CAAC2P,KAAK,OAAOpB,EAAE,qBAAqB,SAASsB,EAAEvK,GAAG,IAAI6F,EAAEI,EAAEwB,OAAO3B,EAAE0E,SAAT/C,EAAmB,GAAI,GAAG1B,EAAEF,EAAE,GAAGD,EAAEC,EAAE,GAAGG,EAAEC,EAAEwB,OAAO3B,EAAE0E,SAAT/C,EAAmB,GAAI,GAAG3I,EAAEkH,EAAE,GAAGG,EAAEH,EAAE,GAAGqC,EAAErI,EAAEyK,IAAInC,EAAEtI,EAAEvE,KAAK8M,EAAEvI,EAAE3F,UAAUmO,EAAExI,EAAE0K,cAAczB,EAAEjJ,EAAE2K,WAAWJ,EAAEvK,EAAE2J,SAASiB,EAAE5K,EAAE6K,OAAOC,EAAE9K,EAAE+K,MAAMC,EAAEhL,EAAExC,KAAKyN,EAAEjL,EAAEkL,SAASC,EAAEC,EAAE,CAACC,UAAUrL,EAAEqL,UAAUC,mBAAmBtL,EAAEsL,mBAAmBC,UAAUvL,EAAEuL,UAAUC,UAAUxL,EAAEwL,UAAUC,oBAAoBzL,EAAEyL,oBAAoBC,SAAS1L,EAAE0L,SAASC,aAAa3L,EAAE2L,aAAaC,UAAU5L,EAAE4L,UAAUC,aAAa7L,EAAE6L,aAAaC,SAAS9L,EAAE8L,SAASC,WAAW/L,EAAE+L,WAAWC,kBAAkBhM,EAAEgM,kBAAkBC,YAAYjM,EAAEiM,YAAYC,cAAclM,EAAEkM,cAAcC,OAAOnM,EAAEmM,OAAOC,MAAMpM,EAAEoM,MAAMC,WAAWrM,EAAEqM,WAAWC,aAAatM,EAAEsM,aAAaC,MAAMvM,EAAEuM,MAAMC,OAAOxM,EAAEwM,SAASC,EAAEtB,EAAEuB,OAAOC,EAAE1B,IAAIE,EAAEyB,OAAO,GAAGhC,EAAE,OAAOA,EAAE,CAACzP,QAAQsR,EAAEvB,SAASyB,IAAI,IAAIE,EAAE,CAACC,gBAAgB,SAAShC,EAAE,oBAAoB,OAAO5G,QAAQ,cAAc6I,WAAW,SAASC,MAAM,SAASlC,EAAE,OAAO,qBAAqBmC,UAAU,+DAA+DjD,QAAQ,EAAEC,aAAa,EAAEiD,OAAO,wBAAwBC,SAAS,GAAG5D,WAAW,MAAM6D,WAAW,sBAAsBC,EAAE,CAACC,OAAO,UAAUR,gBAAgB,SAAShC,EAAE,UAAU,OAAOkC,MAAM,SAASlC,EAAE,OAAO,qBAAqByC,QAAQ,GAAGC,EAAEb,EAAElF,OAAOgG,OAAO,GAAGZ,EAAErE,GAAG1J,EAAE2I,OAAOgG,OAAO,GAAGZ,EAAEQ,GAAGtH,EAAE0B,OAAOgG,OAAO,GAAGZ,EAAE,CAACS,OAAO,UAAUC,QAAQ,KAAKV,EAAE,OAAOzD,EAAEtK,EAAEpE,cAAc2N,EAAE,CAACqF,aAAa,WAAW,OAAO9H,GAAE,IAAK+H,aAAa,WAAW/H,GAAE,GAAIO,GAAE,IAAKyH,YAAY,WAAW,OAAOzH,GAAE,IAAK0H,UAAU,WAAW,OAAO1H,GAAE,IAAKhL,QAAQsR,EAAEpD,MAAMmE,EAAE/R,KAAK6M,EAAE4C,SAASyB,EAAEtS,UAAUkO,GAAG,CAACyC,GAAG5B,EAAEtK,EAAEpE,cAAckP,EAAE,CAACkE,IAAI,EAAE/D,OAAOjL,IAAIsK,EAAEtK,EAAEpE,cAAcF,EAAE,CAACgD,KAAKwN,EAAE8C,IAAI,GAAGvD,GAAGtB,KAAKlD,EAAEC,EAAEH,GAAGE,EAAEkD,EAAEpD,EAAE,WAAW,WAAW,OAAOiF,KAAK/E,EAAEkD,EAAEpD,EAAE,eAAe,WAAW,OAAOiF,KAAK/E,EAAEkD,EAAEpD,EAAE,gBAAgB,WAAW,OAAOoF,KAAKlF,EAAEkD,EAAEpD,EAAE,kBAAkB,WAAW,OAAOuF,KAAKrF,EAAEkD,EAAEpD,EAAE,mBAAmB,WAAW,OAAOmF,KAAK,IAAIlF,EAAEC,EAAE,GAAGqD,EAAErD,EAAEA,EAAED,GAAGsF,GAAGrF,EAAE,GAAG,SAAS/F,GAAG,SAAS6F,EAAE7F,GAAG,IAAI6F,EAAE7F,EAAE+N,kBAAkBhI,EAAE/F,EAAEgO,iBAAgB,GAAIhO,EAAEiO,SAASpI,EAAEqI,QAAQlO,EAAEb,SAAS4G,EAAE/F,EAAEmO,QAAQpI,EAAEqI,SAASpO,EAAEG,YAAY4F,EAAEhI,aAAaiC,EAAEqO,WAAW,CAACJ,SAASpI,EAAEqI,QAAQI,SAASzI,EAAE0I,cAAcC,MAAM3I,EAAE4I,WAAW7K,KAAKiC,EAAE6I,UAAUC,UAAU9I,EAAE+I,eAAeC,WAAWhJ,EAAEiJ,iBAAiB7I,EAAEjG,GAAG,SAAS+F,EAAE/F,GAAG,GAAGA,GAAGA,EAAE+O,iBAAiBC,EAAE,CAAC,IAAIjJ,EAAE3C,OAAO6L,KAAKC,MAAMC,kBAAkBvJ,EAAE,CAAC4G,OAAO4C,GAAG5U,IAAI,SAASgT,EAAEzH,EAAEsJ,mBAAmBzJ,GAAGvJ,MAAM,SAAS2D,GAAG,OAAOiG,EAAEjG,MAAM,SAASA,GAAG,OAAOsI,EAAEtI,MAAM+F,EAAE2G,OAAO9G,GAAGvJ,MAAM,SAAS2D,GAAG,OAAO6F,EAAE7F,MAAM,SAASA,GAAG,OAAOsI,EAAEtI,OAAO,IAAIgG,EAAEhG,EAAEqL,UAAUpF,OAAE,IAASD,EAAE,aAAaA,EAAElH,EAAEkB,EAAEsL,mBAAmBnF,OAAE,IAASrH,EAAE,aAAaA,EAAEuJ,EAAErI,EAAEwL,UAAUlD,OAAE,IAASD,EAAE,aAAaA,EAAEE,EAAEvI,EAAEuL,UAAU/Q,OAAE,IAAS+N,EAAE,aAAaA,EAAEqB,EAAE5J,EAAEyL,oBAAoBlB,EAAEvK,EAAE0L,SAAStC,EAAEpJ,EAAE2L,aAAaP,EAAEpL,EAAE4L,UAAUhB,EAAE5K,EAAE6L,aAAaf,EAAE9K,EAAE8L,SAASd,EAAEhL,EAAE+L,WAAWd,EAAEjL,EAAEgM,kBAAkBb,EAAEnL,EAAEiM,YAAYQ,EAAEzM,EAAEkM,cAAcS,EAAE3M,EAAEmM,OAAOU,EAAE7M,EAAEoM,MAAMiB,EAAErN,EAAEqM,WAAWmB,EAAExN,EAAEsM,aAAagD,EAAEtP,EAAEuM,MAAMgD,OAAE,IAASD,EAAE,oCAAoCA,EAAEF,EAAEpP,EAAEwM,OAAOgD,EAAE5J,EAAE6B,OAAO3B,EAAE0E,SAAT/C,EAAmB,GAAI,GAAGuH,EAAEQ,EAAE,GAAGC,EAAED,EAAE,GAAG,OAAO/H,OAAO3B,EAAE4J,UAATjI,EAAqB,WAAW,IAAIzH,GAAE,EAAG+F,EAAE6D,GAAGtB,EAAE,OAAOE,EAAEjD,SAAS,SAAS,eAAegK,GAAG,WAAW,IAAI3J,EAAE,CAAC+J,UAAUpF,EAAEqF,cAAcxG,EAAEyG,WAAWzE,EAAE0E,cAAclF,EAAEmF,oBAAoB9E,EAAEiB,cAAcO,EAAEuD,QAAQrD,EAAEsD,aAAa9E,EAAEiB,MAAMS,EAAEqD,YAAY7C,GAAG,SAASG,IAAI5H,EAAEsK,YAAY,WAAW9M,OAAO6L,KAAKkB,KAAK,SAAS,WAAW,IAAInK,EAAE5C,OAAO6L,KAAKC,MAAMC,kBAAkBnJ,EAAEA,EAAE3J,MAAM,WAAW2D,IAAIgL,GAAGhF,EAAE+F,WAAWlP,OAAO4S,GAAE,GAAItJ,GAAE,GAAIN,EAAEG,EAAEoK,YAAYvT,SAAS4S,GAAE,GAAItJ,GAAE,QAAS,SAASnG,GAAGsI,EAAEtI,MAAMoD,OAAO6L,KAAKC,MAAMmB,KAAKzK,GAAGvJ,MAAM,SAAS0J,GAAG,IAAI/F,EAAE,CAACyP,GAAE,GAAI,IAAI7J,EAAEoF,GAAGjF,EAAEgG,WAAWlP,MAAMsJ,EAAEP,GAAGA,GAAGC,EAAEE,EAAEqK,YAAYvT,WAAW,SAASmD,GAAGyP,GAAE,GAAItJ,GAAE,GAAIJ,EAAE/F,YAAY,SAASA,GAAG+F,EAAE/F,MAAM,WAAWA,GAAE,EAAGiJ,EAAE1D,SAAS,mBAAmB,IAAIkC,OAAO3B,EAAE4J,UAATjI,EAAqB,WAAWqD,GAAG/E,MAAM,CAACiJ,IAAI,CAACtC,OAAO3G,EAAE6G,OAAOoC,KAAK,SAASpE,EAAE5K,GAAG,IAAI6F,EAAEyC,EAAEb,OAAO3B,EAAE0E,SAAT/C,EAAmB,GAAI,GAAG1B,EAAEF,EAAE,GAAGD,EAAEC,EAAE,GAAGG,EAAEsC,EAAEb,OAAO3B,EAAE0E,SAAT/C,EAAmB,GAAI,GAAGxB,EAAED,EAAE,GAAGlH,EAAEkH,EAAE,GAAGG,EAAEnG,EAAEyK,IAAIpC,EAAErI,EAAEvE,KAAK8M,EAAEvI,EAAE3F,UAAUmO,EAAExI,EAAE0K,cAAczB,EAAEjJ,EAAE2K,WAAWJ,EAAEvK,EAAE2J,SAASyB,EAAEpL,EAAE6K,OAAOD,EAAE5K,EAAE+K,MAAMD,EAAE9K,EAAExC,KAAKyN,EAAEjL,EAAEkL,SAASC,EAAEH,EAAE,CAACuB,MAAMvM,EAAEuM,MAAMf,UAAUxL,EAAEwL,UAAUC,oBAAoBzL,EAAEyL,oBAAoBC,SAAS1L,EAAE0L,SAASC,aAAa3L,EAAE2L,aAAaC,UAAU5L,EAAE4L,UAAUC,aAAa7L,EAAE6L,aAAaG,kBAAkBhM,EAAEgM,kBAAkBE,cAAclM,EAAEkM,cAAcC,OAAOnM,EAAEmM,OAAOF,YAAYjM,EAAEiM,YAAYG,MAAMpM,EAAEoM,MAAMC,WAAWrM,EAAEqM,WAAWiE,gBAAgBtQ,EAAEsQ,kBAAkB7D,EAAEtB,EAAEoF,QAAQ5D,EAAE1B,IAAIE,EAAEyB,OAAO,GAAGxB,EAAE,OAAOA,EAAE,CAACjQ,QAAQsR,EAAEvB,SAASyB,IAAI,IAAIE,EAAE,CAACC,gBAAgB,SAASlC,EAAE,oBAAoB,OAAO1G,QAAQ,cAAc6I,WAAW,SAASC,MAAM,SAASpC,EAAE,OAAO,qBAAqBqC,UAAU,+DAA+DjD,QAAQ,EAAEC,aAAa,EAAEiD,OAAO,wBAAwBC,SAAS,GAAG5D,WAAW,MAAM6D,WAAW,sBAAsBC,EAAE,CAACC,OAAO,UAAUR,gBAAgB,SAASlC,EAAE,UAAU,OAAOoC,MAAM,SAASpC,EAAE,OAAO,qBAAqB2C,QAAQ,GAAGC,EAAEb,EAAElF,OAAOgG,OAAO,GAAGZ,EAAErE,GAAGvC,EAAEwB,OAAOgG,OAAO,GAAGZ,EAAEQ,GAAGtH,EAAE0B,OAAOgG,OAAO,GAAGZ,EAAE,CAACS,OAAO,UAAUC,QAAQ,KAAKV,EAAE,OAAOzD,EAAEtK,EAAEpE,cAAcyL,EAAE,CAACuH,aAAa,WAAW,OAAO9H,GAAE,IAAK+H,aAAa,WAAW/H,GAAE,GAAI9G,GAAE,IAAK8O,YAAY,WAAW,OAAO9O,GAAE,IAAK+O,UAAU,WAAW,OAAO/O,GAAE,IAAK3D,QAAQsR,EAAEpD,MAAMmE,EAAE/R,KAAK4M,EAAE6C,SAASyB,EAAEtS,UAAUkO,GAAG,CAACuC,GAAG1B,EAAEtK,EAAEpE,cAAckP,EAAE,CAACkE,IAAI,EAAE/D,OAAO9D,IAAImD,EAAEtK,EAAEpE,cAAcF,EAAE,CAACgD,KAAKsN,EAAEgD,IAAI,GAAGvD,GAAGtB,KAAKsB,EAAE5O,aAAa,CAACF,KAAK,SAASgP,IAAI,SAASE,WAAW,sBAAsByB,MAAM,gBAAgBC,WAAW,SAASG,OAAO,GAAGb,aAAa,qBAAqBK,mBAAkB,EAAGD,YAAW,EAAGI,OAAO,QAAQzB,cAAc,CAAC6C,QAAQ,IAAI/P,MAAK,EAAGuN,MAAM,QAAQQ,UAAU,cAAc,IAAIT,EAAEP,EAAES,EAAE,SAAShL,GAAG,IAAI6F,EAAE7F,EAAEuM,MAAMxG,OAAE,IAASF,EAAE,oCAAoCA,EAAED,EAAE5F,EAAEwL,UAAUxF,EAAEhG,EAAEyL,oBAAoBxF,EAAEjG,EAAE0L,SAAS5M,EAAEkB,EAAE2L,aAAatD,EAAErI,EAAE4L,UAAUtD,EAAEtI,EAAE6L,aAAatD,EAAEvI,EAAEgM,kBAAkBxR,EAAEwF,EAAEkM,cAActC,EAAE5J,EAAEmM,OAAO5B,EAAEvK,EAAEiM,YAAY7C,EAAEpJ,EAAEoM,MAAMhB,EAAEpL,EAAEqM,WAAWzB,EAAE5K,EAAEsQ,gBAAgBxF,EAAE3E,EAAEsB,OAAO3B,EAAE0E,SAAT/C,EAAmB,GAAI,GAAGuD,EAAEF,EAAE,GAAGG,EAAEH,EAAE,GAAGK,EAAE1D,OAAO3B,EAAE0K,YAAT/I,EAAuB,WAAW,GAAGrE,OAAO6L,KAAK,CAAC,IAAIjP,EAAEoD,OAAO6L,KAAKC,MAAMC,kBAAkB,MAAMnP,GAAGA,EAAE3D,MAAM,WAAW2D,EAAEuQ,UAAUlU,MAAM,WAAW2D,EAAEyQ,aAAa7F,UAAU,SAAS5K,GAAG,OAAO4F,EAAE5F,SAAS,CAAC4K,IAAI,OAAOnD,OAAO3B,EAAE4J,UAATjI,EAAqB,WAAW,IAAIzH,EAAEgG,GAAGJ,EAAE,OAAO4C,EAAEjD,SAAS,SAAS,eAAeQ,GAAG,WAAW,IAAIF,EAAE,CAAC8J,UAAU1J,EAAE2J,cAAc9Q,EAAE+Q,WAAWxH,EAAEyH,cAAcxH,EAAEyH,oBAAoBxH,EAAE2D,cAAc1R,EAAEwV,QAAQpG,EAAEqG,aAAa1F,EAAE6B,MAAMhD,EAAE8G,YAAY9E,GAAGhI,OAAO6L,KAAKkB,KAAK,SAAS,WAAW/M,OAAO6L,KAAKC,MAAMC,kBAAkBlE,GAAE,GAAI7H,OAAO6L,KAAKC,MAAMmB,KAAKxK,GAAGxJ,MAAM,WAAW,OAAO4O,GAAE,MAAO,SAASpF,GAAG,OAAO7F,EAAE6F,YAAY,SAASA,GAAG7F,EAAE6F,MAAM,WAAWoD,EAAE1D,SAAS,mBAAmB,IAAI,CAACgL,QAAQpF,EAAEyB,OAAO5B,IAAIJ,EAAEjP,aAAa,CAACF,KAAK,SAASgP,IAAI,SAASE,WAAW,mBAAmBD,cAAc,CAAC6C,QAAQ,IAAI/P,MAAK,EAAGuN,MAAM,QAAQwB,MAAM,qCAAqC,IAAItB,EAAEL,IAAI/E,EAAEM,EAAEP,EAAEC,EAAEoD,EAAE,SAASjJ,EAAE+F,EAAEH,GAAGC,EAAED,EAAE5F,EAAE+F,IAAI0B,OAAOiJ,eAAe1Q,EAAE+F,EAAE,CAAC4K,YAAW,EAAG9T,IAAI+I,KAAKC,EAAEG,EAAE,SAAShG,GAAG,oBAAoBuH,QAAQA,OAAOqJ,aAAanJ,OAAOiJ,eAAe1Q,EAAEuH,OAAOqJ,YAAY,CAACnS,MAAM,WAAWgJ,OAAOiJ,eAAe1Q,EAAE,aAAa,CAACvB,OAAM,KAAMoH,EAAEA,EAAE,SAAS7F,EAAE+F,GAAG,GAAG,EAAEA,IAAI/F,EAAE6F,EAAE7F,IAAI,EAAE+F,EAAE,OAAO/F,EAAE,GAAG,EAAE+F,GAAG,iBAAiB/F,GAAGA,GAAGA,EAAE6Q,WAAW,OAAO7Q,EAAE,IAAI4F,EAAE6B,OAAOqJ,OAAO,MAAM,GAAGjL,EAAEG,EAAEJ,GAAG6B,OAAOiJ,eAAe9K,EAAE,UAAU,CAAC+K,YAAW,EAAGlS,MAAMuB,IAAI,EAAE+F,GAAG,iBAAiB/F,EAAE,IAAI,IAAIgG,KAAKhG,EAAE6F,EAAEoD,EAAErD,EAAEI,EAAE,SAASH,GAAG,OAAO7F,EAAE6F,IAAIkL,KAAK,KAAK/K,IAAI,OAAOJ,GAAGC,EAAEE,EAAE,SAAS/F,GAAG,IAAI+F,EAAE/F,GAAGA,EAAE6Q,WAAW,WAAW,OAAO7Q,EAAEgR,SAAS,WAAW,OAAOhR,GAAG,OAAO6F,EAAEoD,EAAElD,EAAE,IAAIA,GAAGA,GAAGF,EAAED,EAAE,SAAS5F,EAAE6F,GAAG,OAAO4B,OAAOK,UAAUmJ,eAAelJ,KAAK/H,EAAE6F,IAAIA,EAAErL,EAAE,GAAGqL,EAAEA,EAAE0C,EAAE,GAAG,SAAS1C,EAAE7F,GAAG,GAAG4F,EAAE5F,GAAG,OAAO4F,EAAE5F,GAAG2F,QAAQ,IAAIK,EAAEJ,EAAE5F,GAAG,CAACiG,EAAEjG,EAAEsI,GAAE,EAAG3C,QAAQ,IAAI,OAAOI,EAAE/F,GAAG+H,KAAK/B,EAAEL,QAAQK,EAAEA,EAAEL,QAAQE,GAAGG,EAAEsC,GAAE,EAAGtC,EAAEL,QAAQ,IAAII,EAAEH,EAAprbC,CAAEqL,EAAQ,K,iCCA1F,uHAEIrW,EAAY,CAAC,WAAY,OAAQ,aAAc,YAAa,WAAY,UAAW,UAAW,cAAe,cAW7GsW,EAAgBC,YAAiB,MACrCD,EAAczV,YAAc,gBAC5B,IAAI2V,EAAeC,YAAmB,gBAAiB,CACrDC,UAAWJ,IAETK,EAAYF,YAAmB,aAAc,CAC/CC,UAAWE,MAET9V,EAAe,CACjB+V,MAAM,EACNC,WAAYC,IACZC,WAAY,eAEVC,EAAqBxX,IAAMC,YAAW,SAAUwX,EAAmBtX,GACrE,IAAIuX,EAAmBC,0BAAgBF,EAAmB,CACxDL,KAAM,YAEJQ,EAAWF,EAAiBE,SAC5BR,EAAOM,EAAiBN,KACxBG,EAAaG,EAAiBH,WAC9BxX,EAAY2X,EAAiB3X,UAC7BsP,EAAWqI,EAAiBrI,SAC5BwI,EAAUH,EAAiBG,QAC3BC,EAAUJ,EAAiBI,QAC3BC,EAAcL,EAAiBK,YAC/BV,EAAaK,EAAiBL,WAC9BpW,EAAQC,YAA8BwW,EAAkBnX,GAExDyX,EAASC,YAAmBL,EAAU,SACtCM,EAAcC,aAAiB,SAAUzS,GACvCoS,GACFA,GAAQ,EAAOpS,MAGf0S,GAA4B,IAAff,EAAsBC,IAAOD,EAC1CgB,EAAqBrY,IAAMI,cAAc,MAAOC,YAAS,CAC3DiY,KAAM,SACJF,OAAqB1P,EAARzH,EAAmB,CAClCd,IAAKA,EACLJ,UAAWO,IAAWP,EAAWiY,EAAQH,GAAWG,EAAS,IAAMH,EAASE,GAAeC,EAAS,kBAClGD,GAA4B/X,IAAMI,cAAcW,IAAa,CAC/DF,QAASqX,EACTzX,MAAO8W,IACLlI,GACJ,OAAK+I,EACepY,IAAMI,cAAcgY,EAAY/X,YAAS,CAC3DkY,eAAe,GACdtX,EAAO,CACRd,SAAKuI,EACL8P,GAAIpB,IACFiB,GANoBjB,EAAOiB,EAAQ,QAQzCb,EAAMpW,YAAc,QACpBoW,EAAMnW,aAAeA,EACrBmW,EAAMiB,KAAOvB,EACbM,EAAMkB,QAAU3B,EACDS,O,iCCrEA,QAA0B,kC,iIC8B1B,EA5BK,SAACmB,EAAWC,GAAZ,OAAwBlX,IACzC6B,KADyC,iDACMoV,EADN,2BAC0C,KAAM,CACxF9W,QAAS,CACPC,cAAc,UAAD,OAAY8W,MAG5B7W,MAAK,qBAAGW,QACRC,OAAM,SAACC,GAAD,OAASA,EAAIZ,SAASU,SAqBhB,EAnBM,SAACjB,EAAOkX,EAAWE,EAAUC,EAASC,EAAUC,EAAYC,EAAMC,EAAMC,GAAxE,OAAyFzX,IAC3G6B,KAD2G,iDAC5DoV,EAD4D,8BAE1G,CACES,SAAUF,EACVG,gBAAiBF,EACjBG,WAAYL,EACZM,gBAAiBT,EACjBU,UAAW,UACXX,WACAY,MAAOV,EACPW,QAASV,GACR,CACDnX,QAAS,CACPC,cAAc,UAAD,OAAYL,MAG9BM,MAAK,qBAAGW,QACRC,OAAM,SAACC,GAAD,OAASA,EAAIZ,SAASU,SCvBlBiX,EAA6B,SAACC,EAAK/R,EAAW5E,EAAO4W,GAAxB,8CAAwC,WAAOtV,GAAP,qCAAAC,EAAA,4DAI/D,QAHXsV,EAAkBnV,KAAKoV,MAAMlS,UAGlB,IAAfiS,GAAA,UAAAA,EAAiBjQ,cAAjB,eAAyB7H,WACsB,gBAA7B,OAAf8X,QAAe,IAAfA,GAAA,UAAAA,EAAiBnQ,YAAjB,eAAuBC,QAAQ,WACkC,wDAAlD,OAAfkQ,QAAe,IAAfA,GAAA,UAAAA,EAAiBrQ,eAAjB,mBAA0BC,yBAA1B,mBAA6CsQ,SAAS,UAAtD,eAA0D7U,KAC1DyU,EAAIK,YACJL,EAAIM,SACJN,EAAIO,WACJP,EAAItQ,MAVuE,iCAYvD8Q,EAAoBR,EAAIK,WAAYL,EAAIM,SAZe,OAYxEG,EAZwE,QAaxEC,EAAarP,SAAS7K,cAAc,QAC/Bma,aAAa,KAAM,6BAC9BD,EAAWE,UAAX,4CAEUV,QAFV,IAEUA,GAFV,UAEUA,EAAiB5Q,cAF3B,iBAEU,EAAyBC,kBAFnC,iBAEU,EAAqCsR,mBAF/C,aAEU,EAAmD,SAF7D,qDAIUX,QAJV,IAIUA,GAJV,UAIUA,EAAiBjQ,cAJ3B,aAIU,EAAyB7H,SAJnC,uBAMAiJ,SAASyP,KAAKC,QAAQL,GACtBM,IAAYN,EAAY,CAAEO,SAAU/R,OAAO+R,UACxC9Y,MAAK,SAAC+Y,GAAY,IAAD,EAChB,UAAA7P,SAAS2D,eAAe,oCAAxB,SAAsDmM,SACtD,IAAMC,EAAcF,EAAOG,UAAU,aACrC,GAAIZ,EAAS3X,KAAM,CAAC,IAAD,EACXwY,EAAW,IAAIC,KACrBf,EACEC,EAAS3X,KAAKjB,MACdmY,EAAIK,WACJL,EAAIO,UACJP,EAAItQ,KACJ0R,EALF,OAMElB,QANF,IAMEA,GANF,UAMEA,EAAiBjQ,cANnB,aAME,EAAyB7H,SACzBkZ,EAASE,UACTvB,EACA5W,OAGHN,OAAM,SAACC,GAAD,OAASoB,QAAQC,IAAIrB,MAxC8C,QA0ChF2B,EAAS,CAAEpD,KAAM,qBA1C+D,4CAAxC,wD,gJCmN3Bka,gBAAWC,aAdF,SAACC,GAAD,MAAY,CAClCC,QAASD,EAAM5G,KAAK6G,QACpB3U,WAAY0U,EAAM5G,KAAK9N,WACvBH,YAAa6U,EAAM5G,KAAKjO,gBAGC,SAACnC,GAAD,MAAe,CACxCkX,gBAAiB,SAACtZ,EAAYC,EAAWC,GAAxB,OAAyCkC,EAASkC,YAAwBtE,EAAYC,EAAWC,KAClHqZ,cAAe,SAACrY,EAAaC,EAAU2C,GAAxB,OAAiC1B,EAASqC,YAAoBvD,EAAaC,EAAU2C,KACpG0V,cAAe,SAAC9T,GAAD,OAAetD,EAASqX,YAAoB/T,KAC3DgU,OAAQ,SAACxY,EAAaC,EAAU2C,GAAxB,OAAiC1B,EAASwC,YAAa1D,EAAaC,EAAU2C,KACtF6V,eAAgB,SAAClC,EAAK/R,EAAW5E,EAAO4W,GAAxB,OAAwCtV,EAASoV,YAA2BC,EAAK/R,EAAW5E,EAAO4W,QAG3FyB,EA3MT,SAACra,GAChB,IACEkB,EAYElB,EAZFkB,WACAgG,EAWElH,EAXFkH,aACA4T,EAUE9a,EAVF8a,MACAC,EASE/a,EATF+a,QACAR,EAQEva,EARFua,QACA3U,EAOE5F,EAPF4F,WACAH,EAMEzF,EANFyF,YACA+U,EAKExa,EALFwa,gBACAC,EAIEza,EAJFya,cACAC,EAGE1a,EAHF0a,cACAE,EAEE5a,EAFF4a,OACAC,EACE7a,EADF6a,eAEF,EAAoC5L,oBAAS,GAA7C,mBAAO+L,EAAP,KAAmBC,EAAnB,KACA,EAA8ChM,mBAAS,MAAvD,mBAAOiM,EAAP,KAAwBC,EAAxB,KACA,EAA8ClM,oBAAS,GAAvD,mBAAOmM,EAAP,KAAwBC,EAAxB,KAoJA,OAjJAlH,qBAAU,WACRtM,OAAOyT,SAAS,EAAG,GACnBb,EAAcK,EAAM9Z,OAAOoB,YAAa0Y,EAAM9Z,OAAOqB,SAAUkY,EAAQvV,QACtE,CAAC9D,EAAYqZ,EAAQvV,OAExBmP,qBAAU,WACW,OAAfvO,GAEJ4U,EAAgBtZ,EAAYqZ,EAAQvV,KAAK0N,SAAU9M,EAAW1B,MAC7D,CAAC0B,IAGJuO,qBAAU,WACR,GAAoB,OAAhB1O,GAAuC,OAAfG,EAA5B,CAEAiC,OAAO0T,eAAiB9V,EAAY+V,IAAIC,SACrBzR,SAAS2D,eAAe,uBAChC4L,UAAY9T,EAAY+V,IAAIE,WAAWC,OAClD,IAAMC,EAASnW,EAAY+V,IAAIC,SAASI,KAAKC,OAAOC,OAClDtW,EAAY+V,IAAIC,SAASO,WAG3Bpa,QAAQqa,IACNL,EAAOM,KAAI,SAAChZ,GACV,IAAMiZ,EAAOnS,SAAS7K,cAAc,QAKpC,OAJAgd,EAAKC,KAAOlZ,EACZiZ,EAAKjc,KAAO,WACZic,EAAKE,IAAM,aACXrS,SAASsD,KAAKC,YAAY4O,IACnB,MAIQ1W,EAAY+V,IAAIC,SAASI,KAAKS,QAAQP,OACvDtW,EAAY+V,IAAIC,SAASc,UAGhBC,SAAQ,SAACtZ,GAClB,IAAMuZ,EAASzS,SAAS7K,cAAc,UACtCsd,EAAOtP,IAAMjK,EACbuZ,EAAOC,OAAQ,EACf1S,SAASyP,KAAKlM,YAAYkP,MAI5B,IAAME,EAAYC,aAAY,WAC5B,GAAI5B,EACFjY,QAAQC,IAAI,6BADd,CAKA,IAAM4M,EAAI5F,SAAS6S,uBAAuB,cAAc,GAAGC,cACtDlN,EAAEmN,KACFnN,EAAEmN,IAAIC,qBAEXja,QAAQC,IAAI,gBACZia,cAAcN,GACdxB,EAAmB,MACnBF,GAAc,QAEhBE,EAAmBwB,MAClB,CAAClX,EAAaG,IAGjBuO,qBAAU,WAER,GADApR,QAAQC,IAAI,mBACPgY,GAAepV,IAAcwV,EAAlC,CAEA,IAAMxL,EAAI5F,SAAS6S,uBAAuB,cAAc,GAAGC,cACtDlN,EAAEmN,IAAIC,qBAA8D,IAAxCE,IAAwBpC,EAAMhU,OAK/D/D,QAAQC,IAAI,uCACZ4M,EAAEmN,IAAIC,mBAAmBG,GAAG,QAAQ,SAAUC,GAAQ,IAAD,OACnDra,QAAQC,IAAI,uBACZ,IAiDO,EAjDDhC,EAAS,CACb8F,KAAMgU,EAAMhU,KACZ5F,aACAgG,eACA9F,aAAcwE,EAAW1B,GACzB6C,UAAWnB,EAAWmB,UACtB5F,UAAWoZ,EAAQtV,QAAQxD,KAAKyC,GAChC9B,YAAa0Y,EAAM9Z,OAAOoB,YAC1BC,SAAUyY,EAAM9Z,OAAOqB,SACvB2C,KAAMuV,EAAQvV,MAIVqY,EAAW3Z,KAAKC,UACpBuZ,IAA2BI,KAAMF,EAAM3b,KAAKmF,UAAW5F,IAGN,sBAA/Coc,EAAM3b,KAAKmF,UAAU8B,KAAKC,QAAQ,eAKhBlB,IAAhB6V,KAAKlU,QAAwBkU,KAAKC,cACpCD,KAAKC,aAAaf,SAAQ,SAACgB,GACzB,IAAIA,EAAYC,kBAAhB,CAEA,IAAMC,EAAWF,EAAYG,cAC7B,GAAKD,EAAL,CAEA,IAAME,EAAiBla,KAAKC,UAC1BuZ,IAA2B,EAAMQ,EAAS9W,UAAW5F,GAAQ,IAE/D0Z,EAAckD,OACbN,MAGL5C,EAAc2C,GAGdvb,IAAKC,KAAK,CACRC,MAAO,wDACP6b,kBAAkB,EAClBC,kBAAmB,YAClBhd,MAAK,SAAC8H,GACHA,EAAOmV,cACTnD,EAAO5Z,EAAOoB,YAAapB,EAAOqB,SAAUrB,EAAOgE,MACnDlD,IAAKC,KAAK,SAAU,GAAI,iBAI5B2Y,EAAc2C,IACd,OAAI5X,QAAJ,IAAIA,GAAJ,UAAIA,EAAauY,oBAAjB,aAAI,EAA2B/E,UAC7B4B,EAAepV,EAAYuY,aAAcX,EAAU5X,EAAY7C,SAASZ,MAAOuY,EAAQtV,QAAQxD,KAAK4G,KAAK4V,cAI/Glb,QAAQC,IAAI,eACZqY,GAAmB,IAhEjBtY,QAAQC,IAAI,yBAiEb,CAACgY,EAAY9Z,EAAYqZ,EAAS3U,IAGrCuO,qBAAU,WACJvO,GAAmC,cAArBA,EAAW0U,QAC3B2C,cAAc/B,GACdH,EAAQ/S,KAAR,iCAAuC8S,EAAM9Z,OAAOkd,OAApD,YAA8DpD,EAAM9Z,OAAOqB,SAA3E,YAAuFyY,EAAM9Z,OAAOE,WAApG,YAAkH0E,EAAWuY,cAA7H,YAA8IvY,EAAW1B,QAE1J,CAAC0B,IAGF,qBAAK1B,GAAG,sBAAR,SACE,qBAAKpF,UAAU,aAAf,SACE,qBAAKgP,MAAO,CAAEa,MAAO,QAAUxB,IAAKiR,IAAWC,IAAI,c,iMCQ5ChE,uBAbS,SAACC,GAAD,MAAY,CAClCtW,QAASsW,EAAM5G,KAAK1P,QACpBuW,QAASD,EAAM5G,KAAK6G,QACpB+D,gBAAiBhE,EAAM5G,KAAK4K,gBAC5BC,YAAajE,EAAMkE,GAAGD,gBAGG,SAACjb,GAAD,MAAe,CACxCmb,eAAgB,SAACC,GAAD,OAAcpb,EAASoB,YAAqBga,KAC5DC,wBAAyB,SAACC,GAAD,OAAatb,EAAS4B,YAA8B0Z,KAC7EC,kBAAmB,SAACre,GAAD,OAAW8C,EAAS+B,YAAwB7E,QAGlD6Z,EA5Kf,SAA4Bra,GAC1B,IACE8a,EAQE9a,EARF8a,MACAP,EAOEva,EAPFua,QACAvW,EAMEhE,EANFgE,QACAya,EAKEze,EALFye,eACAE,EAIE3e,EAJF2e,wBACAE,EAGE7e,EAHF6e,kBACAP,EAEEte,EAFFse,gBAGF,EAAiCxD,EAAM9Z,OAA/BE,EAAR,EAAQA,WAAYmB,EAApB,EAAoBA,SACpB,EAAoC4M,mBAAS,MAA7C,mBAAO6P,EAAP,KAAmBC,EAAnB,KACA,EAAkC9P,mBAAS,MAA3C,mBAAO+P,EAAP,KAAkBC,EAAlB,KACA,EAAwChQ,mBAAS,MAAjD,mBAAO/H,EAAP,KAAqBgY,EAArB,KAEA/K,qBAAU,WACQ,OAAZoG,GAEJsE,EAAkBtE,EAAQvV,KAAKJ,eAC9B,CAAC2V,IAGJpG,qBAAU,WACR,GAAgB,OAAZnQ,EAAJ,CAEA,IAAImb,GAAQ,EACRC,GAAU,EAEd,IAAK,IAAM1U,KAAK1G,EACVA,EAAQ0G,GAAGxG,KAAO7B,IACpB8c,GAAQ,EACRD,EAAgBlb,EAAQ0G,IAEpB1G,EAAQ0G,GAAG2U,UAAY9E,EAAQvV,KAAK0N,WACtC0M,GAAU,IAIhBL,EAAeI,IAAUC,IAAYd,GACrCW,EAAaG,MACZ,CAACpb,EAAS3B,EAAUic,IAEvB,IAAMgB,EAAc,SAAC7d,GACdA,IAELgd,EAAehd,GAEfmb,aAAY,WACVnb,EAAK8d,qBAAqBze,MAAK,SAAC8d,GAC9BD,EAAwBC,QAEzB,OAGL,OACE,mCACE,qBAAK9f,UAAU,4BAAf,SACE,0BAASA,UAAU,2EAAnB,UACE,cAAC,IAAD,UACE,wBACEqO,IAAI,2EACJqS,QAAQ,YAGZ,qBAAK1gB,UAAU,0BAAf,SACE,qBAAKA,UAAU,uBAAf,SACE,qBAAKA,UAAU,iCAAf,SACE,sBAAKA,UAAU,iBAAf,UACGggB,GAAc,cAAC,IAAD,CAAU5d,WAAYA,EAAYgG,aAAcA,KAE7D4X,GACA,sBAAKhgB,UAAU,YAAf,UACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,kBAAf,SACE,qBAAKA,UAAU,eAAeqO,IAAKsS,IAAMpB,IAAI,UAIjC,IAAfS,GACC,qBAAKhgB,UAAU,UAAf,SACE,qBAAKA,UAAU,kBAAf,SACE,cAAC,IAAD,CAAO8X,QAAQ,UAAf,yEAQS,IAAdoI,GACC,qBAAKlgB,UAAU,UAAf,SACE,qBAAKA,UAAU,kBAAf,SACE,cAAC,IAAD,CAAO8X,QAAQ,UAAf,wGAOL0H,GACC,qBAAKxf,UAAU,UAAf,SACE,qBAAKA,UAAU,kBAAf,SACE,cAAC,IAAD,CAAO8X,QAAQ,UAAf,SACG0H,QAMT,qBAAKxf,UAAU,UAAf,SACE,sBAAKA,UAAU,kBAAf,UACE,sEACA,cAAC,cAAD,CACEqR,SAAUuP,EAAOpf,OAAOqf,aACxBvQ,WAAW,QACXU,UAAWwP,EACXrP,UAAWqP,EACX9O,YAAU,EACVK,MAAM,mVAQNT,aAAa,mD","file":"static/js/30.b6a32256.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport classNames from 'classnames';\nexport default (function (className) {\n  return /*#__PURE__*/React.forwardRef(function (p, ref) {\n    return /*#__PURE__*/React.createElement(\"div\", _extends({}, p, {\n      ref: ref,\n      className: classNames(p.className, className)\n    }));\n  });\n});","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"label\", \"onClick\", \"className\"];\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classNames from 'classnames';\nvar propTypes = {\n  label: PropTypes.string.isRequired,\n  onClick: PropTypes.func\n};\nvar defaultProps = {\n  label: 'Close'\n};\nvar CloseButton = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var label = _ref.label,\n      onClick = _ref.onClick,\n      className = _ref.className,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"button\", _extends({\n    ref: ref,\n    type: \"button\",\n    className: classNames('close', className),\n    onClick: onClick\n  }, props), /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": \"true\"\n  }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sr-only\"\n  }, label));\n});\nCloseButton.displayName = 'CloseButton';\nCloseButton.propTypes = propTypes;\nCloseButton.defaultProps = defaultProps;\nexport default CloseButton;","import axios from 'axios';\nimport config from 'config';\nimport Swal from 'sweetalert2';\nimport httpService from './http.service';\n\nconst { apiVersion } = config;\nconst gapiBaseUrl = 'https://classroom.googleapis.com/v1';\n\nconst getStudentProfile = (token) => axios({\n  method: 'get',\n  url: `${gapiBaseUrl}/userProfiles/me`,\n  headers: {\n    Authorization: `Bearer ${token}`,\n  },\n})\n  .then((response) => response);\n\nconst getStudentCourses = (token) => axios({\n  method: 'get',\n  url: `${gapiBaseUrl}/courses`,\n  params: {\n    courseStates: 'ACTIVE',\n  },\n  headers: {\n    Authorization: `Bearer ${token}`,\n  },\n})\n  .then((response) => response);\n\nconst getCourse = (token, courseId) => axios({\n  method: 'get',\n  url: `${gapiBaseUrl}/courses/${courseId}`,\n  headers: {\n    Authorization: `Bearer ${token}`,\n  },\n})\n  .then((response) => response);\n\nconst getSubmission = (classworkId, courseId, token) => httpService\n  .post(\n    `/${apiVersion}/google-classroom/classwork/${classworkId}/submission`,\n    { course_id: courseId, access_token: token },\n  )\n  .then(({ data }) => data)\n  .catch((err) => Promise.reject(err.response.data));\n\nconst turnIn = (classworkId, courseId, token) => httpService\n  .post(\n    `/${apiVersion}/google-classroom/turnin/${classworkId}`,\n    { course_id: courseId, access_token: token },\n  )\n  .then(({ data }) => data)\n  .catch((err) => Promise.reject(err.response.data));\n\nconst getSummaryAuth = (token, courseId, classworkId, submissionId) => httpService\n  .post(\n    `/${apiVersion}/google-classroom/validate-summary-access`,\n    {\n      course_id: courseId,\n      access_token: token,\n      gc_classwork_id: classworkId,\n      gc_submission_id: submissionId,\n    },\n  )\n  .then(({ data }) => data)\n  .catch((response) => response.response.data);\n\nconst getOutcomeSummary = (studentId, activityId) => httpService\n  .post(\n    `/${apiVersion}/outcome/summary`,\n    {\n      actor: studentId,\n      activity: activityId,\n    },\n  )\n  .then(({ data }) => data)\n  .catch((error) => {\n    if (error && error.response && error.response.data && error.response.data.errors) {\n      return error.response.data;\n    }\n\n    console.log('Unexpected error in summary endpoint:');\n    console.log(error);\n    return null;\n  });\n\nconst h5pResourceSettings = (activityId, studentId = null, submissionId = null) => httpService\n  .get(\n    `/${apiVersion}/google-classroom/activities/${activityId}/h5p-resource-settings`,\n    {},\n    {\n      gcuid: studentId,\n      submissionid: submissionId,\n    },\n  )\n  .then(({ data }) => data)\n  .catch((err) => {\n    Promise.reject(err.response.data);\n    Swal.fire({\n      title: 'Error',\n      icon: 'error',\n      html: err.message || 'Something went wrong! We are unable to load activity.',\n    });\n  });\n\nexport default {\n  getStudentProfile,\n  getStudentCourses,\n  getCourse,\n  h5pResourceSettings,\n  getSubmission,\n  turnIn,\n  getSummaryAuth,\n  getOutcomeSummary,\n};\n","import Swal from 'sweetalert2';\nimport searchService from 'services/search.service';\nimport gapiService from 'services/gapi.service';\nimport {\n  GOOGLE_CLASSROOM_LOGIN,\n  GOOGLE_CLASSROOM_LOGIN_FAILURE,\n  GOOGLE_SHARE,\n  LOAD_GOOGLE_CLASSROOM_COURSES,\n  ALL_COURSES,\n  GET_STUDENT_COURSES,\n  SET_STUDENT_AUTH,\n  SET_STUDENT_AUTH_TOKEN,\n  GET_H5P_SETTINGS,\n  GET_SUBMISSION,\n  TURNED_IN_ACTIVITY,\n  GET_SUMMARY_AUTH,\n  GET_OUTCOME_SUMMARY,\n} from '../actionTypes';\n\nexport const googleClassRoomLogin = (id) => ({\n  type: GOOGLE_CLASSROOM_LOGIN,\n  id,\n});\n\nexport const googleShare = (value) => ({\n  type: GOOGLE_SHARE,\n  value,\n});\n\nexport const loadCourses = (value) => ({\n  type: LOAD_GOOGLE_CLASSROOM_COURSES,\n  value,\n});\n\n// let projectId = '';\nexport const getProjectId = (/* id */) => {\n  // projectId = id;\n};\n\nexport const fetchCourses = () => {\n  Swal.fire({\n    title: 'Loading...',\n    showCancelButton: false,\n    showConfirmButton: false,\n    allowOutsideClick: false,\n  });\n};\n\n// shows the delete popup on activities, project, playlists\nexport const googleClassRoomLoginAction = (response) => async (dispatch) => {\n  dispatch(googleShare(true));\n\n  try {\n    // save access token\n    await searchService.googleShareToken(JSON.stringify(response.tokenObj));\n    const getCourses = await searchService.getCourses();\n    dispatch({\n      type: ALL_COURSES,\n      payload: getCourses.courses,\n    });\n\n    // dispatch(googleClassRoomLogin(response));\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nexport const googleClassRoomLoginFailure = (id) => ({\n  type: GOOGLE_CLASSROOM_LOGIN_FAILURE,\n  id,\n});\n\n// shows the delete popup on activities, project, playlists\nexport const googleClassRoomLoginFailureAction = (response) => async (dispatch) => {\n  dispatch(googleShare('close'));\n  dispatch(googleClassRoomLogin(response));\n\n  try {\n    Swal.fire({\n      confirmButtonColor: '#5952c6',\n      icon: 'error',\n      text: response.error.replace(/_/g, ' '),\n    });\n\n    // dispatch(googleShare(true));\n    dispatch(googleClassRoomLoginFailure(response));\n  } catch (e) {\n    console.log(e);\n  }\n};\n\n// Set student auth data\nexport const setStudentAuthAction = (data) => async (dispatch) => {\n  // Auth data doesn't provide the google user ID so we get profile data\n  const studentProfile = await gapiService.getStudentProfile(data.accessToken);\n\n  dispatch({\n    type: SET_STUDENT_AUTH,\n    studentData: {\n      auth: data,\n      profile: studentProfile,\n    },\n  });\n};\n\nexport const refreshStudentAuthTokenAction = (newToken) => async (dispatch) => {\n  dispatch({\n    type: SET_STUDENT_AUTH_TOKEN,\n    newToken: { ...newToken },\n  });\n};\n\n// Gets courses for student\nexport const getStudentCoursesAction = (token) => async (dispatch) => {\n  const coursesResponse = await gapiService.getStudentCourses(token);\n  dispatch({\n    type: GET_STUDENT_COURSES,\n    coursesResponse,\n  });\n};\n\nexport const loadH5pResourceSettings = (activityId, studentId = null, submissionId = null) => async (dispatch) => {\n  const h5pSettings = await gapiService.h5pResourceSettings(activityId, studentId, submissionId);\n  dispatch({\n    type: GET_H5P_SETTINGS,\n    h5pSettings,\n  });\n};\n\nexport const getSubmissionAction = (classworkId, courseId, auth) => async (dispatch) => {\n  const submission = await gapiService.getSubmission(classworkId, courseId, JSON.stringify(auth.tokenObj))\n    .catch((err) => err);\n\n  dispatch({\n    type: GET_SUBMISSION,\n    submission,\n  });\n};\n\nexport const turnInAction = (classworkId, courseId, auth) => async (dispatch) => {\n  const turnedIn = await gapiService.turnIn(classworkId, courseId, JSON.stringify(auth.tokenObj));\n  dispatch({\n    type: TURNED_IN_ACTIVITY,\n    turnedIn,\n  });\n};\n\nexport const getSummaryAuthAction = (auth, courseId, classworkId, submissionId) => async (dispatch) => {\n  const summaryAuth = await gapiService.getSummaryAuth(JSON.stringify(auth.tokenObj), courseId, classworkId, submissionId);\n\n  dispatch({\n    type: GET_SUMMARY_AUTH,\n    summaryAuth,\n  });\n};\n\nexport const getOutcomeSummaryAction = (studentId, activityId) => async (dispatch) => {\n  const outcomeSummary = await gapiService.getOutcomeSummary(studentId, activityId);\n  dispatch({\n    type: GET_OUTCOME_SUMMARY,\n    outcomeSummary,\n  });\n};\n","// list of H5P activities links (react routes) where xAPI dispatch need to initialized\nexport function allowedH5PActvityPaths() {\n  return [\n    '/gclass/launch/:userId/:courseId/:activityId/:classworkId',\n    '/lti-tools/activity/:activityId',\n    '/activity/:activityId/shared',\n    '/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId',\n  ];\n}\n\n// map H5P activities links (react routes) to supported Platforms\nexport function H5PActvityPathMapToPlatform() {\n  return [\n    { '/project/:projectId/playlist/:playlistId/activity/:activityId/preview': 'CurrikiStudio' },\n    { '/activity/:activityId/shared': 'CurrikiStudio' },\n    { '/gclass/launch/:userId/:courseId/:activityId/:classworkId': 'Google Classroom' },\n    { '/lti-tools/activity/:activityId': 'LTI client' },\n    { '/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId': 'GenericLMS' },\n  ];\n}\n\n// check if xAPI need to initialized for H5P Activity link (react route)\nexport function isxAPINeeded(currentRoute) {\n  return allowedH5PActvityPaths().includes(currentRoute);\n}\n\nexport function extendStatement(h5pObj, statement, params, skipped = false) {\n  const {\n    path,\n    activityId,\n    submissionId,\n    attemptId,\n    studentId,\n    courseId, // LMS course id\n    homepage,\n    toolPlatform,\n    activeCourse,\n    customCourseName,\n    customApiDomainUrl,\n    customCourseCode,\n  } = params;\n\n  const platform = H5PActvityPathMapToPlatform().find((el) => el[path]);\n  if (platform === undefined) return;\n\n  const statementExtended = { ...statement };\n  const other = [\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${submissionId}/${attemptId}`,\n    },\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${submissionId}`,\n    },\n  ];\n\n  if (platform[path] === 'Google Classroom') {\n    other.push({\n      objectType: 'Activity',\n      id: `${window.location.origin}/gclass/${courseId}`,\n    });\n\n    if (statementExtended.object && statementExtended.object.definition && statementExtended.object.definition.extensions) {\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/gclass-alternate-course-id'] = activeCourse.alternateLink;\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/course-name'] = activeCourse.name;\n    }\n  }\n\n  if (platform[path] === 'LTI client' || 'GenericLMS') {\n    other.push({\n      objectType: 'Activity',\n      id: `${window.location.origin}/lti/${courseId}`,\n    });\n\n    if (statementExtended?.object?.definition?.extensions) {\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/lms-course-name'] = customCourseName;\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/lms-domain-url'] = customApiDomainUrl;\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/lms-course-code'] = customCourseCode;\n    }\n  }\n\n  const actor = {\n    objectType: 'Agent',\n    account: {\n      homePage: homepage || 'https://classroom.google.com',\n      name: studentId,\n    },\n  };\n\n  if (statementExtended.context) {\n    if (platform[path] === 'LTI client') {\n      statementExtended.context.platform = toolPlatform;\n    } else {\n      statementExtended.context.platform = platform[path];\n    }\n\n    statementExtended.context.contextActivities.other = other;\n  }\n\n  statementExtended.actor = actor;\n\n  // If the statement is marked as skipped, we supply the proper verb\n  if (skipped) {\n    statementExtended.verb = {\n      id: 'http://adlnet.gov/expapi/verbs/skipped',\n      display: {\n        'en-US': 'skipped',\n      },\n    };\n\n    // Some skipped statements come with score.min = 0 and score.max = 0\n    // This causes an error in the backend\n    if (\n      statementExtended.result\n      && statementExtended.result.score\n      && statementExtended.result.score.min === statementExtended.result.score.max\n    ) {\n      statementExtended.result.score.max += 1;\n    }\n  }\n\n  // Some H5Ps provide incompatible interaction types. Mapping those to valid ones here\n  if (statementExtended.object && statementExtended.object.definition.interactionType === 'compound') {\n    statementExtended.object.definition.interactionType = 'choice';\n  }\n\n  // We need page information for InteractiveBook statements but the children objects are agnostic to where\n  // they're being used.\n  // Here we crawl up through their heritage to see if they belong to an InteractiveBook, if they do, we\n  // add the page info to the statement.\n  let interactiveBookObject = h5pObj;\n\n  while (interactiveBookObject && interactiveBookObject?.libraryInfo?.machineName !== 'H5P.InteractiveBook') {\n    interactiveBookObject = interactiveBookObject.parent;\n  }\n\n  if (interactiveBookObject?.libraryInfo?.machineName === 'H5P.InteractiveBook') {\n    const chapterIndex = interactiveBookObject.getActiveChapter();\n    statementExtended.object.definition.extensions['http://currikistudio.org/x-api/h5p-chapter-name'] = interactiveBookObject.chapters[chapterIndex].title;\n  }\n\n  return statementExtended;\n}\n\n// Extends the xAPI statements for activities being directly shared through studio\n// instead of published to an LMS\nexport function extendSharedActivityStatement(h5pObj, statement, params) {\n  const {\n    path,\n    activityId,\n  } = params;\n  const statementExtended = { ...statement };\n\n  // We fake these values for reporting features on anonymous routes\n  const fakeSubId = Math.floor(Math.random() * 100000).toString();\n  const fakeAttemptId = Math.floor(Math.random() * 100000).toString();\n  const fakeCourseId = Math.floor(Math.random() * 100000).toString();\n\n  const other = [\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${fakeSubId}/${fakeAttemptId}`,\n    },\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${fakeSubId}`,\n    },\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/gclass/${fakeCourseId}`,\n    },\n  ];\n\n  const platform = H5PActvityPathMapToPlatform().find((el) => el[path]);\n  if (platform === undefined) return;\n\n  if (statementExtended?.context?.contextActivities) {\n    statementExtended.context.platform = platform[path];\n    statementExtended.context.contextActivities.other = other;\n  }\n\n  statementExtended.object.definition.extensions['http://id.tincanapi.com/extension/referrer'] = document.referrer ? document.referrer : window.location.origin;\n\n  return statementExtended;\n}\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"react\")):\"function\"==typeof define&&define.amd?define([\"react\"],t):\"object\"==typeof exports?exports.GoogleLogin=t(require(\"react\")):e.GoogleLogin=t(e.react)}(\"undefined\"!=typeof self?self:this,(function(e){return o={},t.m=n=[function(t){t.exports=e},function(e,t,n){e.exports=n(2)()},function(e,t,n){\"use strict\";function o(){}function r(){}var i=n(3);r.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,r,a){if(a!==i){var c=Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw c.name=\"Invariant Violation\",c}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return n.PropTypes=n}},function(e){\"use strict\";e.exports=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\"},function(e,t,n){\"use strict\";function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function r(e,t){null!=t&&t<=e.length||(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function a(e,t){null!=t&&t<=e.length||(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function u(e,t){null!=t&&t<=e.length||(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function s(e,t){null!=t&&t<=e.length||(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function f(e,t,n,o,r,i){var a=e.getElementsByTagName(t)[0],c=a,u=a;(u=e.createElement(t)).id=n,u.src=o,c&&c.parentNode?c.parentNode.insertBefore(u,c):e.head.appendChild(u),u.onerror=i,u.onload=r}function d(e,t){var n=e.getElementById(t);n&&n.parentNode.removeChild(n)}function p(e){return b.a.createElement(\"span\",{style:{paddingRight:10,fontWeight:500,paddingLeft:e.icon?0:10,paddingTop:10,paddingBottom:10}},e.children)}function g(e){return b.a.createElement(\"div\",{style:{marginRight:10,background:e.active?\"#eee\":\"#fff\",padding:10,borderRadius:2}},b.a.createElement(\"svg\",{width:\"18\",height:\"18\",xmlns:\"http://www.w3.org/2000/svg\"},b.a.createElement(\"g\",{fill:\"#000\",fillRule:\"evenodd\"},b.a.createElement(\"path\",{d:\"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z\",fill:\"#EA4335\"}),b.a.createElement(\"path\",{d:\"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z\",fill:\"#4285F4\"}),b.a.createElement(\"path\",{d:\"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z\",fill:\"#FBBC05\"}),b.a.createElement(\"path\",{d:\"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z\",fill:\"#34A853\"}),b.a.createElement(\"path\",{fill:\"none\",d:\"M0 0h18v18H0z\"}))))}function y(e){var t=i(Object(m.useState)(!1),2),n=t[0],o=t[1],r=i(Object(m.useState)(!1),2),a=r[0],c=r[1],u=e.tag,l=e.type,s=e.className,f=e.disabledStyle,d=e.buttonText,y=e.children,v=e.render,S=e.theme,j=e.icon,O=e.disabled,x=h({onSuccess:e.onSuccess,onAutoLoadFinished:e.onAutoLoadFinished,onRequest:e.onRequest,onFailure:e.onFailure,onScriptLoadFailure:e.onScriptLoadFailure,clientId:e.clientId,cookiePolicy:e.cookiePolicy,loginHint:e.loginHint,hostedDomain:e.hostedDomain,autoLoad:e.autoLoad,isSignedIn:e.isSignedIn,fetchBasicProfile:e.fetchBasicProfile,redirectUri:e.redirectUri,discoveryDocs:e.discoveryDocs,uxMode:e.uxMode,scope:e.scope,accessType:e.accessType,responseType:e.responseType,jsSrc:e.jsSrc,prompt:e.prompt}),I=x.signIn,w=O||!x.loaded;if(v)return v({onClick:I,disabled:w});var k={backgroundColor:\"dark\"===S?\"rgb(66, 133, 244)\":\"#fff\",display:\"inline-flex\",alignItems:\"center\",color:\"dark\"===S?\"#fff\":\"rgba(0, 0, 0, .54)\",boxShadow:\"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)\",padding:0,borderRadius:2,border:\"1px solid transparent\",fontSize:14,fontWeight:\"500\",fontFamily:\"Roboto, sans-serif\"},A={cursor:\"pointer\",backgroundColor:\"dark\"===S?\"#3367D6\":\"#eee\",color:\"dark\"===S?\"#fff\":\"rgba(0, 0, 0, .54)\",opacity:1},_=w?Object.assign({},k,f):a?Object.assign({},k,A):n?Object.assign({},k,{cursor:\"pointer\",opacity:.9}):k;return b.a.createElement(u,{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){o(!1),c(!1)},onMouseDown:function(){return c(!0)},onMouseUp:function(){return c(!1)},onClick:I,style:_,type:l,disabled:w,className:s},[j&&b.a.createElement(g,{key:1,active:a}),b.a.createElement(p,{icon:j,key:2},y||d)])}n.r(t),n.d(t,\"default\",(function(){return S})),n.d(t,\"GoogleLogin\",(function(){return S})),n.d(t,\"GoogleLogout\",(function(){return O})),n.d(t,\"useGoogleLogin\",(function(){return h})),n.d(t,\"useGoogleLogout\",(function(){return j}));var m=n(0),b=n.n(m),h=(n(1),function(e){function t(e){var t=e.getBasicProfile(),n=e.getAuthResponse(!0);e.googleId=t.getId(),e.tokenObj=n,e.tokenId=n.id_token,e.accessToken=n.access_token,e.profileObj={googleId:t.getId(),imageUrl:t.getImageUrl(),email:t.getEmail(),name:t.getName(),givenName:t.getGivenName(),familyName:t.getFamilyName()},i(e)}function n(e){if(e&&e.preventDefault(),P){var n=window.gapi.auth2.getAuthInstance(),o={prompt:L};p(),\"code\"===_?n.grantOfflineAccess(o).then((function(e){return i(e)}),(function(e){return l(e)})):n.signIn(o).then((function(e){return t(e)}),(function(e){return l(e)}))}}var r=e.onSuccess,i=void 0===r?function(){}:r,a=e.onAutoLoadFinished,c=void 0===a?function(){}:a,u=e.onFailure,l=void 0===u?function(){}:u,s=e.onRequest,p=void 0===s?function(){}:s,g=e.onScriptLoadFailure,y=e.clientId,b=e.cookiePolicy,h=e.loginHint,v=e.hostedDomain,S=e.autoLoad,j=e.isSignedIn,O=e.fetchBasicProfile,x=e.redirectUri,I=e.discoveryDocs,w=e.uxMode,k=e.scope,A=e.accessType,_=e.responseType,E=e.jsSrc,T=void 0===E?\"https://apis.google.com/js/api.js\":E,L=e.prompt,M=o(Object(m.useState)(!1),2),P=M[0],C=M[1];return Object(m.useEffect)((function(){var e=!1,n=g||l;return f(document,\"script\",\"google-login\",T,(function(){var o={client_id:y,cookie_policy:b,login_hint:h,hosted_domain:v,fetch_basic_profile:O,discoveryDocs:I,ux_mode:w,redirect_uri:x,scope:k,access_type:A};\"code\"===_&&(o.access_type=\"offline\"),window.gapi.load(\"auth2\",(function(){var r=window.gapi.auth2.getAuthInstance();r?r.then((function(){e||(j&&r.isSignedIn.get()?(C(!0),c(!0),t(r.currentUser.get())):(C(!0),c(!1)))}),(function(e){l(e)})):window.gapi.auth2.init(o).then((function(n){if(!e){C(!0);var o=j&&n.isSignedIn.get();c(o),o&&t(n.currentUser.get())}}),(function(e){C(!0),c(!1),n(e)}))}))}),(function(e){n(e)})),function(){e=!0,d(document,\"google-login\")}}),[]),Object(m.useEffect)((function(){S&&n()}),[P]),{signIn:n,loaded:P}});function v(e){var t=l(Object(m.useState)(!1),2),n=t[0],o=t[1],r=l(Object(m.useState)(!1),2),i=r[0],a=r[1],c=e.tag,u=e.type,s=e.className,f=e.disabledStyle,d=e.buttonText,y=e.children,h=e.render,v=e.theme,S=e.icon,O=e.disabled,x=j({jsSrc:e.jsSrc,onFailure:e.onFailure,onScriptLoadFailure:e.onScriptLoadFailure,clientId:e.clientId,cookiePolicy:e.cookiePolicy,loginHint:e.loginHint,hostedDomain:e.hostedDomain,fetchBasicProfile:e.fetchBasicProfile,discoveryDocs:e.discoveryDocs,uxMode:e.uxMode,redirectUri:e.redirectUri,scope:e.scope,accessType:e.accessType,onLogoutSuccess:e.onLogoutSuccess}),I=x.signOut,w=O||!x.loaded;if(h)return h({onClick:I,disabled:w});var k={backgroundColor:\"dark\"===v?\"rgb(66, 133, 244)\":\"#fff\",display:\"inline-flex\",alignItems:\"center\",color:\"dark\"===v?\"#fff\":\"rgba(0, 0, 0, .54)\",boxShadow:\"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)\",padding:0,borderRadius:2,border:\"1px solid transparent\",fontSize:14,fontWeight:\"500\",fontFamily:\"Roboto, sans-serif\"},A={cursor:\"pointer\",backgroundColor:\"dark\"===v?\"#3367D6\":\"#eee\",color:\"dark\"===v?\"#fff\":\"rgba(0, 0, 0, .54)\",opacity:1},_=w?Object.assign({},k,f):i?Object.assign({},k,A):n?Object.assign({},k,{cursor:\"pointer\",opacity:.9}):k;return b.a.createElement(c,{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){o(!1),a(!1)},onMouseDown:function(){return a(!0)},onMouseUp:function(){return a(!1)},onClick:I,style:_,type:u,disabled:w,className:s},[S&&b.a.createElement(g,{key:1,active:i}),b.a.createElement(p,{icon:S,key:2},y||d)])}y.defaultProps={type:\"button\",tag:\"button\",buttonText:\"Sign in with Google\",scope:\"profile email\",accessType:\"online\",prompt:\"\",cookiePolicy:\"single_host_origin\",fetchBasicProfile:!0,isSignedIn:!1,uxMode:\"popup\",disabledStyle:{opacity:.6},icon:!0,theme:\"light\",onRequest:function(){}};var S=y,j=function(e){var t=e.jsSrc,n=void 0===t?\"https://apis.google.com/js/api.js\":t,o=e.onFailure,r=e.onScriptLoadFailure,i=e.clientId,a=e.cookiePolicy,u=e.loginHint,l=e.hostedDomain,s=e.fetchBasicProfile,p=e.discoveryDocs,g=e.uxMode,y=e.redirectUri,b=e.scope,h=e.accessType,v=e.onLogoutSuccess,S=c(Object(m.useState)(!1),2),j=S[0],O=S[1],x=Object(m.useCallback)((function(){if(window.gapi){var e=window.gapi.auth2.getAuthInstance();null!=e&&e.then((function(){e.signOut().then((function(){e.disconnect(),v()}))}),(function(e){return o(e)}))}}),[v]);return Object(m.useEffect)((function(){var e=r||o;return f(document,\"script\",\"google-login\",n,(function(){var t={client_id:i,cookie_policy:a,login_hint:u,hosted_domain:l,fetch_basic_profile:s,discoveryDocs:p,ux_mode:g,redirect_uri:y,scope:b,access_type:h};window.gapi.load(\"auth2\",(function(){window.gapi.auth2.getAuthInstance()?O(!0):window.gapi.auth2.init(t).then((function(){return O(!0)}),(function(t){return e(t)}))}))}),(function(t){e(t)})),function(){d(document,\"google-login\")}}),[]),{signOut:x,loaded:j}};v.defaultProps={type:\"button\",tag:\"button\",buttonText:\"Logout of Google\",disabledStyle:{opacity:.6},icon:!0,theme:\"light\",jsSrc:\"https://apis.google.com/js/api.js\"};var O=v}],t.c=o,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var r in e)t.d(o,r,function(t){return e[t]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=4);function t(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return n[e].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n,o}));","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"show\", \"closeLabel\", \"className\", \"children\", \"variant\", \"onClose\", \"dismissible\", \"transition\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport Fade from './Fade';\nimport CloseButton from './CloseButton';\nimport divWithClassName from './divWithClassName';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport SafeAnchor from './SafeAnchor';\nvar DivStyledAsH4 = divWithClassName('h4');\nDivStyledAsH4.displayName = 'DivStyledAsH4';\nvar AlertHeading = createWithBsPrefix('alert-heading', {\n  Component: DivStyledAsH4\n});\nvar AlertLink = createWithBsPrefix('alert-link', {\n  Component: SafeAnchor\n});\nvar defaultProps = {\n  show: true,\n  transition: Fade,\n  closeLabel: 'Close alert'\n};\nvar Alert = /*#__PURE__*/React.forwardRef(function (uncontrolledProps, ref) {\n  var _useUncontrolled = useUncontrolled(uncontrolledProps, {\n    show: 'onClose'\n  }),\n      bsPrefix = _useUncontrolled.bsPrefix,\n      show = _useUncontrolled.show,\n      closeLabel = _useUncontrolled.closeLabel,\n      className = _useUncontrolled.className,\n      children = _useUncontrolled.children,\n      variant = _useUncontrolled.variant,\n      onClose = _useUncontrolled.onClose,\n      dismissible = _useUncontrolled.dismissible,\n      transition = _useUncontrolled.transition,\n      props = _objectWithoutPropertiesLoose(_useUncontrolled, _excluded);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'alert');\n  var handleClose = useEventCallback(function (e) {\n    if (onClose) {\n      onClose(false, e);\n    }\n  });\n  var Transition = transition === true ? Fade : transition;\n  var alert = /*#__PURE__*/React.createElement(\"div\", _extends({\n    role: \"alert\"\n  }, !Transition ? props : undefined, {\n    ref: ref,\n    className: classNames(className, prefix, variant && prefix + \"-\" + variant, dismissible && prefix + \"-dismissible\")\n  }), dismissible && /*#__PURE__*/React.createElement(CloseButton, {\n    onClick: handleClose,\n    label: closeLabel\n  }), children);\n  if (!Transition) return show ? alert : null;\n  return /*#__PURE__*/React.createElement(Transition, _extends({\n    unmountOnExit: true\n  }, props, {\n    ref: undefined,\n    in: show\n  }), alert);\n});\nAlert.displayName = 'Alert';\nAlert.defaultProps = defaultProps;\nAlert.Link = AlertLink;\nAlert.Heading = AlertHeading;\nexport default Alert;","export default __webpack_public_path__ + \"static/media/logo.e4118a3b.svg\";","import axios from 'axios';\n\nconst safeApiAuth = (accountId, authKey) => axios\n  .post(`https://api.v10.learnsafe.com/accounts/${accountId}/integrators/auth/token`, null, {\n    headers: {\n      Authorization: `Bearer ${authKey}`,\n    },\n  })\n  .then(({ data }) => data)\n  .catch((err) => err.response.data);\n\nconst safeApiCheck = (token, accountId, unitPath, orgName, imagData, actualText, time, info, activityName) => axios\n  .post(`https://api.v10.learnsafe.com/accounts/${accountId}/integrators/content/check`,\n    {\n      userName: info,\n      workstationName: activityName,\n      reportedAt: time,\n      applicationName: orgName,\n      ipAddress: '0.0.0.0',\n      unitPath,\n      image: imagData,\n      content: actualText,\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    })\n  .then(({ data }) => data)\n  .catch((err) => err.response.data);\n\nexport default {\n  safeApiAuth,\n  safeApiCheck,\n};\n","/* eslint-disable import/prefer-default-export */\nimport html2canvas from 'html2canvas';\nimport service from 'services/safelearn.service';\n\n// Generates a screenshot based on the statement data\nexport const saveResultScreenshotAction = (org, statement, title, studentName) => async (dispatch) => {\n  const parsedStatement = JSON.parse(statement);\n\n  if (\n    parsedStatement?.result?.response\n    && parsedStatement?.verb?.display['en-US'] === 'interacted'\n    && parsedStatement?.context?.contextActivities?.category[0]?.id === 'http://h5p.org/libraries/H5P.OpenEndedQuestion-1.0'\n    && org.account_id\n    && org.api_key\n    && org.unit_path\n    && org.name\n  ) {\n    const safeData = await service.safeApiAuth(org.account_id, org.api_key);\n    const customhtml = document.createElement('div');\n    customhtml.setAttribute('id', 'specfic-detail-safe-learn');\n    customhtml.innerHTML = `\n      <div>\n        <h3>${parsedStatement?.object?.definition?.description?.['en-US']}</h3>\n        <hr />\n        <h4>${parsedStatement?.result?.response}</h4>\n      </div>`;\n    document.body.prepend(customhtml);\n    html2canvas(customhtml, { scrollY: -window.scrollY })\n      .then((canvas) => {\n        document.getElementById('specfic-detail-safe-learn')?.remove();\n        const base64image = canvas.toDataURL('image/png');\n        if (safeData.data) {\n          const timeSafe = new Date();\n          service.safeApiCheck(\n            safeData.data.token,\n            org.account_id,\n            org.unit_path,\n            org.name,\n            base64image,\n            parsedStatement?.result?.response,\n            timeSafe.getTime(),\n            studentName,\n            title,\n          );\n        }\n      }).catch((err) => console.log(err));\n  }\n  dispatch({ type: 'SAFELEARN_ACTION' });\n};\n","/* eslint-disable react/no-this-in-sfc */\nimport React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport Swal from 'sweetalert2';\nimport gifloader from 'assets/images/dotsloader.gif';\nimport * as xAPIHelper from 'helpers/xapi';\nimport { loadH5pResourceXapi } from 'store/actions/resource';\nimport { loadH5pResourceSettings, getSubmissionAction, turnInAction } from 'store/actions/gapi';\nimport { saveResultScreenshotAction } from 'store/actions/safelearn';\nimport './style.scss';\n\nconst Activity = (props) => {\n  const {\n    activityId,\n    activeCourse,\n    match,\n    history,\n    student,\n    submission,\n    h5pSettings,\n    loadH5pSettings,\n    getSubmission,\n    sendStatement,\n    turnIn,\n    sendScreenshot,\n  } = props;\n  const [xAPILoaded, setXAPILoaded] = useState(false);\n  const [intervalPointer, setIntervalPointer] = useState(null);\n  const [xAPIEventHooked, setXAPIEventHooked] = useState(false);\n\n  // Init\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    getSubmission(match.params.classworkId, match.params.courseId, student.auth);\n  }, [activityId, student.auth]);\n\n  useEffect(() => {\n    if (submission === null) return;\n\n    loadH5pSettings(activityId, student.auth.googleId, submission.id);\n  }, [submission]);\n\n  // Load H5P\n  useEffect(() => {\n    if (h5pSettings === null || submission === null) return;\n\n    window.H5PIntegration = h5pSettings.h5p.settings;\n    const h5pWrapper = document.getElementById('curriki-h5p-wrapper');\n    h5pWrapper.innerHTML = h5pSettings.h5p.embed_code.trim();\n    const newCss = h5pSettings.h5p.settings.core.styles.concat(\n      h5pSettings.h5p.settings.loadedCss,\n    );\n\n    Promise.all(\n      newCss.map((value) => {\n        const link = document.createElement('link');\n        link.href = value;\n        link.type = 'text/css';\n        link.rel = 'stylesheet';\n        document.head.appendChild(link);\n        return true;\n      }),\n    );\n\n    const newScripts = h5pSettings.h5p.settings.core.scripts.concat(\n      h5pSettings.h5p.settings.loadedJs,\n    );\n\n    newScripts.forEach((value) => {\n      const script = document.createElement('script');\n      script.src = value;\n      script.async = false;\n      document.body.appendChild(script);\n    });\n\n    // Loops until it finds H5P object\n    const checkXapi = setInterval(() => {\n      if (xAPILoaded) {\n        console.log('Loaded hit, returning');\n        return;\n      }\n\n      const x = document.getElementsByClassName('h5p-iframe')[0].contentWindow;\n      if (!x.H5P) return;\n      if (!x.H5P.externalDispatcher) return;\n\n      console.log('AE H5P ready');\n      clearInterval(checkXapi);\n      setIntervalPointer(null);\n      setXAPILoaded(true);\n    });\n    setIntervalPointer(checkXapi);\n  }, [h5pSettings, submission]);\n\n  // Patch into xAPI events\n  useEffect(() => {\n    console.log('AE entered hook');\n    if (!xAPILoaded || !submission || xAPIEventHooked) return;\n\n    const x = document.getElementsByClassName('h5p-iframe')[0].contentWindow;\n    if (!x.H5P.externalDispatcher || xAPIHelper.isxAPINeeded(match.path) === false) {\n      console.log('missing dispatcher');\n      return;\n    }\n\n    console.log('AE found dispatcher, trying to hook');\n    x.H5P.externalDispatcher.on('xAPI', function (event) {\n      console.log('AE running listener');\n      const params = {\n        path: match.path,\n        activityId,\n        activeCourse,\n        submissionId: submission.id,\n        attemptId: submission.attemptId,\n        studentId: student.profile.data.id,\n        classworkId: match.params.classworkId,\n        courseId: match.params.courseId,\n        auth: student.auth,\n      };\n\n      // Extending the xAPI statement with our custom values and sending it off to LRS\n      const xapiData = JSON.stringify(\n        xAPIHelper.extendStatement(this, event.data.statement, params),\n      );\n\n      if (event.data.statement.verb.display['en-US'] === 'submitted-curriki') {\n        // Check if all questions/interactions have been accounted for in LRS\n        // If the user skips one of the questions, no xAPI statement is generated.\n        // We need statements for all questions for proper summary accounting.\n        // Fire off an artificial \"answered\" statement if necessary\n        if (this.parent === undefined && this.interactions) {\n          this.interactions.forEach((interaction) => {\n            if (interaction.getLastXAPIVerb()) return; // Already initialized\n\n            const xAPIData = interaction.getXAPIData();\n            if (!xAPIData) return; // Some interactions have no data to report\n\n            const iXAPIStatement = JSON.stringify(\n              xAPIHelper.extendStatement(this, xAPIData.statement, params, true),\n            );\n            sendStatement(iXAPIStatement);\n          }, this);\n        }\n\n        sendStatement(xapiData);\n\n        // Ask the user if he wants to turn-in the work to google classroom\n        Swal.fire({\n          title: 'Do you want to turn in your work to Google Classroom?',\n          showCancelButton: true,\n          confirmButtonText: 'Turn In',\n        }).then((result) => {\n          if (result.isConfirmed) {\n            turnIn(params.classworkId, params.courseId, params.auth);\n            Swal.fire('Saved!', '', 'success');\n          }\n        });\n      } else {\n        sendStatement(xapiData);\n        if (h5pSettings?.organization?.api_key) {\n          sendScreenshot(h5pSettings.organization, xapiData, h5pSettings.activity.title, student.profile.data.name.fullName);\n        }\n      }\n    });\n    console.log('? AE hooked');\n    setXAPIEventHooked(true);\n  }, [xAPILoaded, activityId, student, submission]);\n\n  // If the activity has already been submitted to google classroom, redirect to summary page\n  useEffect(() => {\n    if (submission && submission.state === 'TURNED_IN') {\n      clearInterval(intervalPointer);\n      history.push(`/studio/gclass/summary/${match.params.userId}/${match.params.courseId}/${match.params.activityId}/${submission.coursework_id}/${submission.id}`);\n    }\n  }, [submission]);\n\n  return (\n    <div id=\"curriki-h5p-wrapper\">\n      <div className=\"loader_gif\">\n        <img style={{ width: '50px' }} src={gifloader} alt=\"\" />\n      </div>\n    </div>\n  );\n};\n\nActivity.propTypes = {\n  activityId: PropTypes.string.isRequired,\n  activeCourse: PropTypes.object.isRequired,\n  match: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n  student: PropTypes.object.isRequired,\n  submission: PropTypes.object.isRequired,\n  h5pSettings: PropTypes.object.isRequired,\n  loadH5pSettings: PropTypes.func.isRequired,\n  getSubmission: PropTypes.func.isRequired,\n  sendStatement: PropTypes.func.isRequired,\n  turnIn: PropTypes.func.isRequired,\n  sendScreenshot: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  student: state.gapi.student,\n  submission: state.gapi.submission,\n  h5pSettings: state.gapi.h5pSettings,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  loadH5pSettings: (activityId, studentId, submissionId) => dispatch(loadH5pResourceSettings(activityId, studentId, submissionId)),\n  getSubmission: (classworkId, courseId, auth) => dispatch(getSubmissionAction(classworkId, courseId, auth)),\n  sendStatement: (statement) => dispatch(loadH5pResourceXapi(statement)),\n  turnIn: (classworkId, courseId, auth) => dispatch(turnInAction(classworkId, courseId, auth)),\n  sendScreenshot: (org, statement, title, studentName) => dispatch(saveResultScreenshotAction(org, statement, title, studentName)),\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Activity));\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { Helmet } from 'react-helmet';\nimport { GoogleLogin } from 'react-google-login';\nimport { Alert } from 'react-bootstrap';\n\nimport logo from 'assets/images/logo.svg';\nimport {\n  setStudentAuthAction,\n  refreshStudentAuthTokenAction,\n  getStudentCoursesAction,\n} from 'store/actions/gapi';\nimport Activity from 'containers/LMS/GoogleClassroom/Activity';\n\nimport './styles.scss';\n\nfunction GclassActivityPage(props) {\n  const {\n    match,\n    student,\n    courses,\n    setStudentAuth,\n    refreshStudentAuthToken,\n    getStudentCourses,\n    submissionError,\n    // orientation,\n  } = props;\n  const { activityId, courseId } = match.params;\n  const [authorized, setAuthorized] = useState(null);\n  const [isTeacher, setIsTeacher] = useState(null);\n  const [activeCourse, setActiveCourse] = useState(null);\n  // Gets student courses\n  useEffect(() => {\n    if (student === null) return;\n\n    getStudentCourses(student.auth.accessToken);\n  }, [student]);\n\n  // Checks user membership in the course\n  useEffect(() => {\n    if (courses === null) return;\n\n    let found = false;\n    let teacher = false;\n    // eslint-disable-next-line no-restricted-syntax\n    for (const i in courses) {\n      if (courses[i].id === courseId) {\n        found = true;\n        setActiveCourse(courses[i]);\n\n        if (courses[i].ownerId === student.auth.googleId) {\n          teacher = true;\n        }\n      }\n    }\n    setAuthorized((found && !teacher && !submissionError));\n    setIsTeacher(teacher);\n  }, [courses, courseId, submissionError]);\n\n  const handleLogin = (data) => {\n    if (!data) return;\n\n    setStudentAuth(data);\n    // Refresh token in less than half an hour\n    setInterval(() => {\n      data.reloadAuthResponse().then((newData) => {\n        refreshStudentAuthToken(newData);\n      });\n    }, 1000 * 60 * 15);\n  };\n\n  return (\n    <>\n      <div className=\"gclass-activity-container\">\n        <section className=\"main-page-content preview iframe-height-resource-shared defaultcontainer\">\n          <Helmet>\n            <script\n              src=\"https://dev.currikistudio.org/api/storage/h5p/h5p-core/js/h5p-resizer.js\"\n              charset=\"UTF-8\"\n            />\n          </Helmet>\n          <div className=\"flex-container previews\">\n            <div className=\"activity-bg left-vdo\">\n              <div className=\"main-item-wrapper desktop-view\">\n                <div className=\"item-container\">\n                  {authorized && <Activity activityId={activityId} activeCourse={activeCourse} />}\n\n                  {!authorized && (\n                    <div className=\"container\">\n                      <div className=\"row\">\n                        <div className=\"col text-center\">\n                          <img className=\"curriki-logo\" src={logo} alt=\"\" />\n                        </div>\n                      </div>\n\n                      {authorized === false && (\n                        <div className=\"row m-4\">\n                          <div className=\"col text-center\">\n                            <Alert variant=\"warning\">\n                              You don&apos;t seem to be authorized to take this\n                              activity.\n                            </Alert>\n                          </div>\n                        </div>\n                      )}\n\n                      {isTeacher === true && (\n                        <div className=\"row m-4\">\n                          <div className=\"col text-center\">\n                            <Alert variant=\"warning\">\n                              You are the teacher for this activity. Please login as a student to take the activity.\n                            </Alert>\n                          </div>\n                        </div>\n                      )}\n\n                      {submissionError && (\n                        <div className=\"row m-4\">\n                          <div className=\"col text-center\">\n                            <Alert variant=\"warning\">\n                              {submissionError}\n                            </Alert>\n                          </div>\n                        </div>\n                      )}\n\n                      <div className=\"row m-4\">\n                        <div className=\"col text-center\">\n                          <h2>Please log in to take this activity.</h2>\n                          <GoogleLogin\n                            clientId={global.config.gapiClientId}\n                            buttonText=\"Login\"\n                            onSuccess={handleLogin}\n                            onFailure={handleLogin}\n                            isSignedIn\n                            scope=\"\n                              https://www.googleapis.com/auth/classroom.courses.readonly\n                              https://www.googleapis.com/auth/classroom.courses\n                              https://www.googleapis.com/auth/classroom.topics\n                              https://www.googleapis.com/auth/classroom.coursework.me\n                              https://www.googleapis.com/auth/classroom.coursework.students\n                              https://www.googleapis.com/auth/classroom.rosters.readonly\n                            \"\n                            cookiePolicy=\"single_host_origin\"\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n        </section>\n      </div>\n      {/* {(orientation >= 90)\n      && (\n      <div className=\"coverallareas\">\n        <Alert variant=\"warning\">Please use Portrait mode!</Alert>\n      </div>\n      )} */}\n    </>\n  );\n}\nGclassActivityPage.propTypes = {\n  match: PropTypes.object.isRequired,\n  student: PropTypes.object.isRequired,\n  courses: PropTypes.array.isRequired,\n  getStudentCourses: PropTypes.func.isRequired,\n  setStudentAuth: PropTypes.func.isRequired,\n  refreshStudentAuthToken: PropTypes.func.isRequired,\n  submissionError: PropTypes.string.isRequired,\n  // orientation: PropTypes.number.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  courses: state.gapi.courses,\n  student: state.gapi.student,\n  submissionError: state.gapi.submissionError,\n  orientation: state.ui.orientation,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  setStudentAuth: (authData) => dispatch(setStudentAuthAction(authData)),\n  refreshStudentAuthToken: (newData) => dispatch(refreshStudentAuthTokenAction(newData)),\n  getStudentCourses: (token) => dispatch(getStudentCoursesAction(token)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GclassActivityPage);\n"],"sourceRoot":""}