/*! For license information please see 20.173ebf3e.chunk.js.LICENSE.txt */
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[20,6,9,10,50],{1010:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n(136),o=n(137),s=n(139),a=n(138),c=n(3),l=n.n(c),u=n(12),d=n(24),p=n(80),h=n(133),f=n(920),v=n(21),g=n(30),m=n(72),y=n(516),b=n(2);var j=Object(d.h)(Object(u.b)((function(t){return{resource:t.resource}}),(function(t){return{loadResource:function(e,n){return t(Object(m.v)(e,n))}}}))((function(t){var e=t.resource,n=t.activityId,r=t.playlistId,o=t.loadResource,s=Object(u.d)((function(t){return t.organization}));Object(c.useEffect)((function(){o(n,r)}),[o,n,r]);var a,l="";e.nextResourceId&&(l=Object(b.jsx)(v.b,{to:"/studio/org/".concat(null===(a=s.currentOrganization)||void 0===a?void 0:a.domain,"/activity/").concat(e.nextResourceId,"/preview"),className:"next-prev-link",children:Object(b.jsx)(g.a,{icon:"chevron-circle-right"})}));var d,p="";return e.previousResourceId&&(p=Object(b.jsx)(v.b,{to:"/studio/org/".concat(null===(d=s.currentOrganization)||void 0===d?void 0:d.domain,"/activity/").concat(e.previousResourceId,"/preview"),className:"next-prev-link",children:Object(b.jsx)(g.a,{icon:"chevron-circle-left"})})),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-md-12",children:[p,l]})}),Object(b.jsx)("div",{className:"col-md-12",children:Object(b.jsx)(y.default,Object(i.a)({},t))})]})})}))),O=n(4),x=n.n(O),A=n(6),w=n(8),S=n.n(w),k=n(513),N=n.n(k),_=n(144),T=n(374),P=n(371),C=n(604),I=n(458),R=n(515),E=n(382),H=n(605),B=n(606),L=n(643),D=(n(573),Object(c.lazy)((function(){return Promise.resolve().then(n.bind(null,516))}))),U=Object(c.lazy)((function(){return n.e(42).then(n.bind(null,996))}));function M(t){var e,n,i,r,o,s=t.loading,a=t.projectId,l=t.playlistId,d=t.activityId,p=t.playlist,h=t.loadHP,f=t.loadPlaylist,y=t.loadProjectPlaylists,j=t.collapsed,O=t.setCollapsed,w=Object(u.d)((function(t){return t.organization})),k=Object(u.d)((function(t){return t.team})).teamPermission,I=w.permission,M=localStorage.getItem("projectPreview"),J=Object(u.c)();Object(c.useEffect)((function(){window.scrollTo(0,0),f(a,l)}),[a,l,d,f]);var z=p.selectedPlaylist;z&&z.id!==l&&(z=null),Object(c.useEffect)((function(){y(a)}),[a,y]),Object(c.useEffect)((function(){var t,e,n,i,r,o,s,a;0===Object.keys(k).length&&(null===w||void 0===w||null===(t=w.currentOrganization)||void 0===t?void 0:t.id)&&(null===(e=z)||void 0===e||null===(n=e.project)||void 0===n||null===(i=n.team)||void 0===i?void 0:i.id)&&J(Object(E.g)(null===w||void 0===w||null===(r=w.currentOrganization)||void 0===r?void 0:r.id,null===(o=z)||void 0===o||null===(s=o.project)||void 0===s||null===(a=s.team)||void 0===a?void 0:a.id))}),[k,z,J,null===w||void 0===w||null===(e=w.currentOrganization)||void 0===e?void 0:e.id]);var V,G=d,q=null,F=null;if(z&&z.activities&&z.activities.length>0&&(null!==G&&void 0!==G||(G=z.activities[0].id),V=z.activities.find((function(t){return t.id===G})))){var K=z.activities.findIndex((function(t){return t.id===V.id}));K>0&&(q=z.activities[K-1]),K<z.activities.length-1&&(F=z.activities[K+1])}if(Object(c.useEffect)((function(){s&&G&&Object(m.p)(G).then((function(){h(null)})).catch((function(){h("fail")}))}),[s,G,h]),!z)return Object(b.jsx)("div",{className:"alert alert-info",role:"alert",children:"Loading..."});var Q=p.playlists,X=V&&V.shared,W=function(){var t=Object(A.a)(x.a.mark((function t(){var e;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=V&&V.title,!X){t.next=5;break}S.a.fire({icon:"warning",title:"You are about to stop sharing <strong>".concat(e,"</strong>.\n          Please remember that anyone you have shared this activity with will no longer have access its contents.\n          Do you want to continue?"),showCloseButton:!0,showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Stop Sharing!",confirmButtonAriaLabel:"Stop Sharing!",cancelButtonText:"Cancel",cancelButtonAriaLabel:"Cancel"}).then(function(){var t=Object(A.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isConfirmed){t.next=4;break}return t.next=3,Object(m.B)(G,e);case 3:f(a,l);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=8;break;case 5:return t.next=7,Object(m.H)(G);case 7:f(a,l);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:s?Object(b.jsx)("div",{className:"loading-phf-data",children:"loading..."===s?Object(b.jsx)(R.a,{text:s.toUpperCase()}):Object(b.jsx)(R.a,{showbutton:!0,text:"You are unauthorized to access this!"})}):Object(b.jsxs)("section",{className:"main-page-content preview iframe-height-resource",children:[Object(b.jsxs)("div",{className:"container-flex-upper",children:[Object(b.jsxs)("div",{className:"both-p",children:[Object(b.jsx)(v.b,{to:"/studio/project/".concat(z.project.id,"/preview"),children:Object(b.jsxs)("div",{className:"project-title",children:[Object(b.jsx)("img",{src:C.a,alt:""}),"Project: ".concat(z.project.name)]})}),Object(b.jsx)(v.b,{children:Object(b.jsxs)("div",{className:"project-title",children:[Object(b.jsx)("img",{src:C.a,alt:""}),"Playlist: ".concat(z.title)]})})]}),Object(b.jsx)(v.b,{to:"true"===M?"/studio/org/".concat(null===(n=w.currentOrganization)||void 0===n?void 0:n.domain,"/project/").concat(z.project.id,"/preview"):"/studio/org/".concat(null===(i=w.currentOrganization)||void 0===i?void 0:i.domain,"/project/").concat(z.project.id),children:Object(b.jsx)(g.a,{icon:"times"})})]}),Object(b.jsxs)("div",{className:"flex-container previews",children:[Object(b.jsxs)("div",{className:"activity-bg left-vdo".concat(j?" collapsed":""),children:[Object(b.jsxs)("div",{className:"flex-container-preview",children:[Object(b.jsx)("div",{className:"act-top-header",children:Object(b.jsx)("div",{className:"heading-wrapper",children:Object(b.jsx)("div",{className:"main-heading",children:V&&Object(b.jsxs)("h3",{children:["Activity: \xa0",Object(b.jsx)("span",{children:V.title})]})})})}),Object(b.jsxs)("div",{className:"back-header align-items-center justify-content-between",children:[Object(b.jsx)("div",{className:"right-control vd-controls",children:Object(b.jsxs)("div",{className:"slider-btn",children:[Object(b.jsx)(H.a,{projectId:a,playlistId:l,previousResource:q,allPlaylists:Q}),Object(b.jsx)(B.a,{projectId:a,playlistId:l,nextResource:F,allPlaylists:Q})]})}),Object(b.jsx)("a",{onClick:function(){return O()},className:"btn-expand-collapse".concat(j?" collapsed":""),children:Object(b.jsx)(g.a,{icon:"align-right"})})]})]}),Object(b.jsx)("div",{className:"main-item-wrapper",children:Object(b.jsx)("div",{className:"item-container",children:V&&Object(b.jsx)(c.Suspense,{fallback:Object(b.jsx)("div",{children:"Loading"}),children:"h5p"===V.type?Object(b.jsx)(D,{activityId:V.id}):Object(b.jsx)(U,{activity:V})})})})]}),Object(b.jsx)("div",{className:"right-sidegolf-info".concat(j?" collapsed":""),children:Object(b.jsxs)(T.a,{defaultActiveKey:"home",id:"uncontrolled-tab-example",children:[Object(b.jsx)(P.a,{eventKey:"home",title:"Activities",children:Object(b.jsx)("div",{className:"all-laylist-oracle",children:Object(b.jsx)(L.a,{projectId:a,playlistId:l,activities:z.activities,playlist:p.selectedPlaylist,teamPermission:k||{}})})}),(Object.keys(k).length?null===k||void 0===k||null===(r=k.Team)||void 0===r?void 0:r.includes("team:share-activity"):null===I||void 0===I||null===(o=I.Activity)||void 0===o?void 0:o.includes("activity:share"))&&Object(b.jsx)(P.a,{eventKey:"profile",title:"Share",children:Object(b.jsxs)("div",{className:"watcher spaner",children:[X&&Object(b.jsxs)("div",{className:"shared-link",onClick:function(){var t="".concat(window.location.href.split("/")[0],"//");Object(_.confirmAlert)({customUI:function(e){var n=e.onClose;return Object(b.jsxs)("div",{className:"share-project-preview-url project-share-check",children:[Object(b.jsxs)("div",{className:"mt-3 mb-2 d-flex align-items-center",children:[Object(b.jsx)("a",{href:"/studio/activity/".concat(G,"/shared"),target:"_blank",rel:"noreferrer",style:{flex:1},children:Object(b.jsx)("input",{id:"urllink_clip",style:{width:"100%"},value:"".concat(t).concat(window.location.host,"/studio/activity/").concat(G,"/shared")})}),Object(b.jsx)(g.a,{title:"Copy to clipboard",icon:"clipboard",onClick:function(){var t=document.getElementById("urllink_clip");t.focus(),t.select(),document.execCommand("copy"),S.a.fire({title:"Link Copied",showCancelButton:!1,showConfirmButton:!1,timer:1500,allowOutsideClick:!1})}})]}),Object(b.jsx)("div",{className:"close-btn",children:Object(b.jsx)("button",{type:"button",onClick:n,children:"Ok"})})]})}})},children:[Object(b.jsx)(g.a,{icon:"external-link-alt",className:"mr-2"}),"View Shared Link"]}),Object(b.jsxs)("div",{children:["Share Activity",Object(b.jsx)(N.a,{onColor:"#084892",onChange:W,checked:X,className:"react-switch",id:"material-switch",handleDiameter:30,uncheckedIcon:!1,checkedIcon:!1})]})]})}),Object(b.jsx)(P.a,{eventKey:"contact",title:"About",children:Object(b.jsxs)("div",{className:"descr-",children:[Object(b.jsx)("div",{className:"tti",children:"description"}),Object(b.jsx)("p",{children:z.project.description})]})})]})})]})]})})}M.defaultProps={loading:"",activityId:void 0};var J=Object(d.h)(Object(u.b)((function(t){return{collapsed:t.ui.sideBarCollapsed,playlist:t.playlist,loading:t.playlist.loadingH5P}}),(function(t){return{loadPlaylist:function(e,n){return t(Object(h.i)(e,n))},loadProjectPlaylists:function(e){return t(Object(h.j)(e))},loadHP:function(e){return t(Object(h.a)(e))},setCollapsed:function(){return t(Object(I.a)())}}}))(M)),z=n(646),V=function(t){Object(s.a)(n,t);var e=Object(a.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var t,e=this.props,n=e.match,r=e.project,o=e.previewType,s=n.params,a=s.projectId,l=s.playlistId,u=s.activityId;return t="activity"===o?Object(b.jsx)(j,{activityId:parseInt(u,10),playlistId:l}):"playlist"===o?Object(b.jsx)(J,{projectId:parseInt(a,10),playlistId:parseInt(l,10),activityId:null!==u&&void 0!==u?parseInt(u,10):null}):"activityShared"===o?Object(b.jsx)(z.a,{}):Object(b.jsx)("div",{className:"site-container-preview",children:Object(c.createElement)(f.a,Object(i.a)(Object(i.a)({},this.props),{},{key:a,project:r,showLti:!1}))}),Object(b.jsx)("div",{children:t})}}]),n}(l.a.Component);V.defaultProps={previewType:"",selectedPlaylist:null};e.default=Object(d.h)(Object(u.b)((function(t){return{project:t.project,selectedPlaylist:t.playlist.selectedPlaylist}}),(function(t){return{createProject:function(e,n,i){return t(Object(p.c)(e,n,i))},loadMyProjects:function(){return t(Object(p.m)())},showCreateProjectModal:function(){return t(Object(p.u)())},loadPlaylist:function(){return t(Object(h.i)())}}}))(V))},379:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return u})),n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f}));var i,r,o=n(385),s=n(387),a=n(386);function c(t){if(t.errors&&!Array.isArray(t.errors)&&"object"===typeof t.errors){var e=[];return Object.keys(t.errors).forEach((function(n){Array.isArray(t.errors[n])&&(e=e.concat(t.errors[n]))})),{errors:e}}return t}var l=function(t){return t&&t.trim()?void 0:"* Required"},u=function(t){return function(e){return e&&e.length>t?"* Must be ".concat(t," characters or less"):void 0}},d=Object(s.b)(i||(i=Object(o.a)(["",""])),a.fadeIn),p=s.a.div(r||(r=Object(o.a)(["\n  animation: 0.8s ",";\n"])),d),h=function(t){return!new RegExp("[^0-9a-zA-Z@ ._-]").test(t)},f=function(t){return!new RegExp("[^a-zA-Z]").test(t)}},382:function(t,e,n){"use strict";n.d(e,"r",(function(){return d})),n.d(e,"w",(function(){return p})),n.d(e,"u",(function(){return h})),n.d(e,"v",(function(){return f})),n.d(e,"t",(function(){return v})),n.d(e,"n",(function(){return g})),n.d(e,"l",(function(){return m})),n.d(e,"e",(function(){return y})),n.d(e,"m",(function(){return b})),n.d(e,"x",(function(){return j})),n.d(e,"f",(function(){return O})),n.d(e,"j",(function(){return x})),n.d(e,"k",(function(){return A})),n.d(e,"i",(function(){return w})),n.d(e,"o",(function(){return S})),n.d(e,"c",(function(){return k})),n.d(e,"q",(function(){return N})),n.d(e,"b",(function(){return _})),n.d(e,"p",(function(){return T})),n.d(e,"a",(function(){return P})),n.d(e,"g",(function(){return C})),n.d(e,"h",(function(){return I})),n.d(e,"d",(function(){return R})),n.d(e,"s",(function(){return E}));var i=n(4),r=n.n(i),o=n(6),s=n(142),a=n(8),c=n.n(a),l=n(1),u=n(15),d=function(){return function(){var t=Object(o.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:l.Zd});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:l.zf,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(){return function(){var t=Object(o.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:l.Le});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(){return function(){var t=Object(o.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:l.Oe});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(){return function(){var t=Object(o.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:l.Ge});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(){return function(){var t=Object(o.a)(r.a.mark((function t(e){var n,i,o,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.a.getState(),i=n.organization.activeOrganization,t.prev=2,e({type:l.ud}),t.next=6,s.a.getAll(null===i||void 0===i?void 0:i.id);case 6:o=t.sent,a=o.teams,e({type:l.hd,payload:{teams:a}}),e({type:l.vd}),t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(2),e({type:l.vd}),t.t0;case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()},m=function(){return function(){var t=Object(o.a)(r.a.mark((function t(e){var n,i,o,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.a.getState(),i=n.organization.activeOrganization,t.prev=2,e({type:l.ud}),t.next=6,s.a.getAllSubOrganizationTeams(null===i||void 0===i?void 0:i.id);case 6:o=t.sent,a=o.teams,e({type:l.hd,payload:{teams:a}}),e({type:l.vd}),t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(2),e({type:l.vd}),t.t0;case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()},y=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){var i,o,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.a.getState(),o=i.organization.activeOrganization,e.prev=2,n({type:l.eb}),e.next=6,s.a.create(t,null===o||void 0===o?void 0:o.id);case 6:return a=e.sent,c=a.team,n({type:l.fb,payload:{team:c}}),e.abrupt("return",c);case 12:throw e.prev=12,e.t0=e.catch(2),n({type:l.db}),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()},b=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){var i,o,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.a.getState(),o=i.organization.activeOrganization,e.prev=2,n({type:l.jd}),e.next=6,s.a.get(t,null===o||void 0===o?void 0:o.id);case 6:a=e.sent,c=a.team,n({type:l.kd,payload:{team:c}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),n({type:l.id});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},j=function(t,e){return function(){var n=Object(o.a)(r.a.mark((function n(i){var o,a,c,d;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=u.a.getState(),a=o.organization.activeOrganization,n.prev=2,i({type:l.Bf}),n.next=6,s.a.update(t,e,null===a||void 0===a?void 0:a.id);case 6:c=n.sent,d=c.team,i({type:l.Cf,payload:{team:d}}),n.next=15;break;case 11:throw n.prev=11,n.t0=n.catch(2),i({type:l.Af}),n.t0;case 15:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(t){return n.apply(this,arguments)}}()},O=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){var i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.a.getState(),o=i.organization.activeOrganization,e.prev=2,n({type:l.yb}),e.next=6,s.a.remove(t,null===o||void 0===o?void 0:o.id);case 6:n({type:l.zb,payload:{teamId:t}}),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(2),n({type:l.xb}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},x=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){var i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:l.Dc}),e.next=4,s.a.inviteConfirm(t);case 4:return i=e.sent,o=i.invited,n(o?{type:l.Ec,payload:{users:[t]}}:{type:l.Cc}),e.abrupt("return",o);case 10:throw e.prev=10,e.t0=e.catch(0),n({type:l.Cc}),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},A=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:l.Ec,payload:{users:t}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(t,e,n){return function(){var i=Object(o.a)(r.a.mark((function i(o){var a,c;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=u.a.getState(),c=a.organization.activeOrganization,i.prev=2,o({type:l.Ac}),i.next=6,s.a.inviteMembers(t,e,n,null===c||void 0===c?void 0:c.id);case 6:o({type:l.Bc}),o(b(t)),i.next=14;break;case 10:throw i.prev=10,i.t0=i.catch(2),o({type:l.zc}),i.t0;case 14:case"end":return i.stop()}}),i,null,[[2,10]])})));return function(t){return i.apply(this,arguments)}}()},S=function(t,e,n){return function(){var i=Object(o.a)(r.a.mark((function i(o){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,o({type:l.Id,payload:{userId:e}}),i.next=4,s.a.removeMember(t,e,n);case 4:o({type:l.Jd}),o(b(t)),i.next=12;break;case 8:throw i.prev=8,i.t0=i.catch(0),o({type:l.Ed}),i.t0;case 12:case"end":return i.stop()}}),i,null,[[0,8]])})));return function(t){return i.apply(this,arguments)}}()},k=function(t,e){return function(){var n=Object(o.a)(r.a.mark((function n(i){var o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i({type:l.w}),n.next=4,s.a.addProjects(t,e);case 4:return o=n.sent,i({type:l.x}),i(b(t)),n.abrupt("return",o);case 10:throw n.prev=10,n.t0=n.catch(0),i({type:l.v}),n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(t){return n.apply(this,arguments)}}()},N=function(t,e){return function(){var n=Object(o.a)(r.a.mark((function n(i){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i({type:l.Ld}),n.next=4,s.a.removeProject(t,e);case 4:i({type:l.Md}),i(b(t)),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(0),i({type:l.Kd}),n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(t){return n.apply(this,arguments)}}()},_=function(t,e,n){return function(){var i=Object(o.a)(r.a.mark((function i(o){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,o({type:l.o}),i.next=4,s.a.addMembersToProject(t,e,n);case 4:o({type:l.p}),o(b(t)),i.next=12;break;case 8:throw i.prev=8,i.t0=i.catch(0),o({type:l.n}),i.t0;case 12:case"end":return i.stop()}}),i,null,[[0,8]])})));return function(t){return i.apply(this,arguments)}}()},T=function(t,e,n){return function(){var i=Object(o.a)(r.a.mark((function i(o){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,o({type:l.Gd}),i.next=4,s.a.removeMemberFromProject(t,e,n);case 4:o({type:l.Hd}),o(b(t)),i.next=12;break;case 8:throw i.prev=8,i.t0=i.catch(0),o({type:l.Fd}),i.t0;case 12:case"end":return i.stop()}}),i,null,[[0,8]])})));return function(t){return i.apply(this,arguments)}}()},P=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.teamRoleType(t);case 2:i=e.sent,n({type:l.y,payload:null===i||void 0===i?void 0:i.teamRoleTypes});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(t,e){return function(){var n=Object(o.a)(r.a.mark((function n(i){var o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.teamPermisison(t,e);case 2:o=n.sent,i({type:l.u,payload:null===o||void 0===o?void 0:o.teamPermissions});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},I=function(t,e){return function(){var n=Object(o.a)(r.a.mark((function n(i){var o,a,c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=u.a.getState(),a=o.organization.activeOrganization,n.next=4,s.a.getTeamProject(null===a||void 0===a?void 0:a.id,t,e);case 4:return c=n.sent,i({type:l.ec,payload:c.data}),n.abrupt("return",c);case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},R=function(t,e){return function(){var n=Object(o.a)(r.a.mark((function n(i){var o,a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=u.a.getState(),a=o.organization.activeOrganization,n.next=4,s.a.changeUserRole(null===a||void 0===a?void 0:a.id,t,e);case 4:c.a.fire({icon:"success",title:"Permission Updated"}),i({type:l.F});case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},E=function(t){return function(e){e({type:l.zd,payload:t})}}},392:function(t,e,n){"use strict";n.d(e,"h",(function(){return w})),n.d(e,"b",(function(){return S})),n.d(e,"f",(function(){return k})),n.d(e,"g",(function(){return _})),n.d(e,"k",(function(){return T})),n.d(e,"j",(function(){return P})),n.d(e,"c",(function(){return C})),n.d(e,"i",(function(){return I})),n.d(e,"d",(function(){return R})),n.d(e,"l",(function(){return E})),n.d(e,"e",(function(){return H})),n.d(e,"a",(function(){return B}));var i=n(0),r=n(4),o=n.n(r),s=n(6),a=n(8),c=n.n(a),l=n(59),u=n(44),d=n.n(u),p=n(25),h=n(5),f=p.a.apiVersion,v="https://classroom.googleapis.com/v1",g=function(t){return d()({method:"get",url:"".concat(v,"/userProfiles/me"),headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return t}))},m=function(t){return d()({method:"get",url:"".concat(v,"/courses"),params:{courseStates:"ACTIVE"},headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return t}))},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return h.a.get("/".concat(f,"/google-classroom/activities/").concat(t,"/h5p-resource-settings"),{},{gcuid:e,submissionid:n}).then((function(t){return t.data})).catch((function(t){Promise.reject(t.response.data),c.a.fire({title:"Error",icon:"error",html:t.message||"Something went wrong! We are unable to load activity."})}))},b=function(t,e,n){return h.a.post("/".concat(f,"/google-classroom/classwork/").concat(t,"/submission"),{course_id:e,access_token:n}).then((function(t){return t.data})).catch((function(t){return Promise.reject(t.response.data)}))},j=function(t,e,n){return h.a.post("/".concat(f,"/google-classroom/turnin/").concat(t),{course_id:e,access_token:n}).then((function(t){return t.data})).catch((function(t){return Promise.reject(t.response.data)}))},O=function(t,e,n,i){return h.a.post("/".concat(f,"/google-classroom/validate-summary-access"),{course_id:e,access_token:t,gc_classwork_id:n,gc_submission_id:i}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},x=function(t,e){return h.a.post("/".concat(f,"/outcome/summary"),{actor:t,activity:e}).then((function(t){return t.data})).catch((function(t){return t&&t.response&&t.response.data&&t.response.data.errors?t.response.data:(console.log("Unexpected error in summary endpoint:"),console.log(t),null)}))},A=n(1),w=function(t){return{type:A.rc,value:t}},S=function(){},k=function(t){return function(){var e=Object(s.a)(o.a.mark((function e(n){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(w(!0)),e.prev=1,e.next=4,l.a.googleShareToken(JSON.stringify(t.tokenObj));case 4:return e.next=6,l.a.getCourses();case 6:i=e.sent,n({type:A.z,payload:i.courses}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},N=function(t){return{type:A.qc,id:t}},_=function(t){return function(){var e=Object(s.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(w("close")),n((i=t,{type:A.pc,id:i}));try{c.a.fire({confirmButtonColor:"#5952c6",icon:"error",text:t.error.replace(/_/g," ")}),n(N(t))}catch(r){console.log(r)}case 3:case"end":return e.stop()}var i}),e)})));return function(t){return e.apply(this,arguments)}}()},T=function(t){return function(){var e=Object(s.a)(o.a.mark((function e(n){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t.accessToken);case 2:i=e.sent,n({type:A.Ce,studentData:{auth:t,profile:i}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=function(t){return function(){var e=Object(s.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:A.De,newToken:Object(i.a)({},t)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(t){return function(){var e=Object(s.a)(o.a.mark((function e(n){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:i=e.sent,n({type:A.bc,coursesResponse:i});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(){var i=Object(s.a)(o.a.mark((function i(r){var s;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,y(t,e,n);case 2:s=i.sent,r({type:A.Rb,h5pSettings:s});case 4:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()},R=function(t,e,n){return function(){var i=Object(s.a)(o.a.mark((function i(r){var s;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,b(t,e,JSON.stringify(n.tokenObj)).catch((function(t){return t}));case 2:s=i.sent,r({type:A.cc,submission:s});case 4:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()},E=function(t,e,n){return function(){var i=Object(s.a)(o.a.mark((function i(r){var s;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,j(t,e,JSON.stringify(n.tokenObj));case 2:s=i.sent,r({type:A.ef,turnedIn:s});case 4:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()},H=function(t,e,n,i){return function(){var r=Object(s.a)(o.a.mark((function r(s){var a;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O(JSON.stringify(t.tokenObj),e,n,i);case 2:a=r.sent,s({type:A.dc,summaryAuth:a});case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()},B=function(t,e){return function(){var n=Object(s.a)(o.a.mark((function n(i){var r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x(t,e);case 2:r=n.sent,i({type:A.Xb,outcomeSummary:r});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}},411:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s}));var i=n(0);function r(t){return["/gclass/launch/:userId/:courseId/:activityId/:classworkId","/lti-tools/activity/:activityId","/activity/:activityId/shared","/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId"].includes(t)}function o(t,e,n){var r,o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n.path,c=n.activityId,l=n.submissionId,u=n.attemptId,d=n.studentId,p=n.courseId,h=n.homepage,f=n.toolPlatform,v=n.activeCourse,g=n.customCourseName,m=n.customApiDomainUrl,y=n.customCourseCode,b=[{"/project/:projectId/playlist/:playlistId/activity/:activityId/preview":"CurrikiStudio"},{"/activity/:activityId/shared":"CurrikiStudio"},{"/gclass/launch/:userId/:courseId/:activityId/:classworkId":"Google Classroom"},{"/lti-tools/activity/:activityId":"LTI client"},{"/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId":"GenericLMS"}].find((function(t){return t[a]}));if(void 0!==b){var j,O,x=Object(i.a)({},e),A=[{objectType:"Activity",id:"".concat(window.location.origin,"/activity/").concat(c,"/submission/").concat(l,"/").concat(u)},{objectType:"Activity",id:"".concat(window.location.origin,"/activity/").concat(c,"/submission/").concat(l)}];"Google Classroom"===b[a]&&(A.push({objectType:"Activity",id:"".concat(window.location.origin,"/gclass/").concat(p)}),x.object&&x.object.definition&&x.object.definition.extensions&&(x.object.definition.extensions["http://currikistudio.org/x-api/gclass-alternate-course-id"]=v.alternateLink,x.object.definition.extensions["http://currikistudio.org/x-api/course-name"]=v.name)),b[a],A.push({objectType:"Activity",id:"".concat(window.location.origin,"/lti/").concat(p)}),(null===x||void 0===x||null===(j=x.object)||void 0===j||null===(O=j.definition)||void 0===O?void 0:O.extensions)&&(x.object.definition.extensions["http://currikistudio.org/x-api/lms-course-name"]=g,x.object.definition.extensions["http://currikistudio.org/x-api/lms-domain-url"]=m,x.object.definition.extensions["http://currikistudio.org/x-api/lms-course-code"]=y);var w={objectType:"Agent",account:{homePage:h||"https://classroom.google.com",name:d}};x.context&&("LTI client"===b[a]?x.context.platform=f:x.context.platform=b[a],x.context.contextActivities.other=A),x.actor=w,s&&(x.verb={id:"http://adlnet.gov/expapi/verbs/skipped",display:{"en-US":"skipped"}},x.result&&x.result.score&&x.result.score.min===x.result.score.max&&(x.result.score.max+=1)),x.object&&"compound"===x.object.definition.interactionType&&(x.object.definition.interactionType="choice");for(var S=t;S&&"H5P.InteractiveBook"!==(null===(k=S)||void 0===k||null===(N=k.libraryInfo)||void 0===N?void 0:N.machineName);){var k,N;S=S.parent}if("H5P.InteractiveBook"===(null===(r=S)||void 0===r||null===(o=r.libraryInfo)||void 0===o?void 0:o.machineName)){var _=S.getActiveChapter();x.object.definition.extensions["http://currikistudio.org/x-api/h5p-chapter-name"]=S.chapters[_].title}return x}}function s(t,e,n){var r,o=n.path,s=n.activityId,a=Object(i.a)({},e),c=Math.floor(1e5*Math.random()).toString(),l=Math.floor(1e5*Math.random()).toString(),u=Math.floor(1e5*Math.random()).toString(),d=[{objectType:"Activity",id:"".concat(window.location.origin,"/activity/").concat(s,"/submission/").concat(c,"/").concat(l)},{objectType:"Activity",id:"".concat(window.location.origin,"/activity/").concat(s,"/submission/").concat(c)},{objectType:"Activity",id:"".concat(window.location.origin,"/gclass/").concat(u)}],p=[{"/project/:projectId/playlist/:playlistId/activity/:activityId/preview":"CurrikiStudio"},{"/activity/:activityId/shared":"CurrikiStudio"},{"/gclass/launch/:userId/:courseId/:activityId/:classworkId":"Google Classroom"},{"/lti-tools/activity/:activityId":"LTI client"},{"/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId":"GenericLMS"}].find((function(t){return t[o]}));if(void 0!==p)return(null===a||void 0===a||null===(r=a.context)||void 0===r?void 0:r.contextActivities)&&(a.context.platform=p[o],a.context.contextActivities.other=d),a.object.definition.extensions["http://id.tincanapi.com/extension/referrer"]=document.referrer?document.referrer:window.location.origin,a}},418:function(t,e,n){"use strict";e.a=n.p+"static/media/loginlogo.b91b6143.png"},419:function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){return i={},e.m=n=[function(e){e.exports=t},function(t,e,n){t.exports=n(2)()},function(t,e,n){"use strict";function i(){}function r(){}var o=n(3);r.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,r,s){if(s!==o){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}var n={array:t.isRequired=t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n}},function(t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){null!=e&&e<=t.length||(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){null!=e&&e<=t.length||(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){null!=e&&e<=t.length||(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){null!=e&&e<=t.length||(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function d(t,e,n,i,r,o){var s=t.getElementsByTagName(e)[0],a=s,c=s;(c=t.createElement(e)).id=n,c.src=i,a&&a.parentNode?a.parentNode.insertBefore(c,a):t.head.appendChild(c),c.onerror=o,c.onload=r}function p(t,e){var n=t.getElementById(e);n&&n.parentNode.removeChild(n)}function h(t){return m.a.createElement("span",{style:{paddingRight:10,fontWeight:500,paddingLeft:t.icon?0:10,paddingTop:10,paddingBottom:10}},t.children)}function f(t){return m.a.createElement("div",{style:{marginRight:10,background:t.active?"#eee":"#fff",padding:10,borderRadius:2}},m.a.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("g",{fill:"#000",fillRule:"evenodd"},m.a.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),m.a.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4"}),m.a.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),m.a.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"}),m.a.createElement("path",{fill:"none",d:"M0 0h18v18H0z"}))))}function v(t){var e=o(Object(g.useState)(!1),2),n=e[0],i=e[1],r=o(Object(g.useState)(!1),2),s=r[0],a=r[1],c=t.tag,l=t.type,u=t.className,d=t.disabledStyle,p=t.buttonText,v=t.children,b=t.render,j=t.theme,O=t.icon,x=t.disabled,A=y({onSuccess:t.onSuccess,onAutoLoadFinished:t.onAutoLoadFinished,onRequest:t.onRequest,onFailure:t.onFailure,onScriptLoadFailure:t.onScriptLoadFailure,clientId:t.clientId,cookiePolicy:t.cookiePolicy,loginHint:t.loginHint,hostedDomain:t.hostedDomain,autoLoad:t.autoLoad,isSignedIn:t.isSignedIn,fetchBasicProfile:t.fetchBasicProfile,redirectUri:t.redirectUri,discoveryDocs:t.discoveryDocs,uxMode:t.uxMode,scope:t.scope,accessType:t.accessType,responseType:t.responseType,jsSrc:t.jsSrc,prompt:t.prompt}),w=A.signIn,S=x||!A.loaded;if(b)return b({onClick:w,disabled:S});var k={backgroundColor:"dark"===j?"rgb(66, 133, 244)":"#fff",display:"inline-flex",alignItems:"center",color:"dark"===j?"#fff":"rgba(0, 0, 0, .54)",boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)",padding:0,borderRadius:2,border:"1px solid transparent",fontSize:14,fontWeight:"500",fontFamily:"Roboto, sans-serif"},N={cursor:"pointer",backgroundColor:"dark"===j?"#3367D6":"#eee",color:"dark"===j?"#fff":"rgba(0, 0, 0, .54)",opacity:1},_=S?Object.assign({},k,d):s?Object.assign({},k,N):n?Object.assign({},k,{cursor:"pointer",opacity:.9}):k;return m.a.createElement(c,{onMouseEnter:function(){return i(!0)},onMouseLeave:function(){i(!1),a(!1)},onMouseDown:function(){return a(!0)},onMouseUp:function(){return a(!1)},onClick:w,style:_,type:l,disabled:S,className:u},[O&&m.a.createElement(f,{key:1,active:s}),m.a.createElement(h,{icon:O,key:2},v||p)])}n.r(e),n.d(e,"default",(function(){return j})),n.d(e,"GoogleLogin",(function(){return j})),n.d(e,"GoogleLogout",(function(){return x})),n.d(e,"useGoogleLogin",(function(){return y})),n.d(e,"useGoogleLogout",(function(){return O}));var g=n(0),m=n.n(g),y=(n(1),function(t){function e(t){var e=t.getBasicProfile(),n=t.getAuthResponse(!0);t.googleId=e.getId(),t.tokenObj=n,t.tokenId=n.id_token,t.accessToken=n.access_token,t.profileObj={googleId:e.getId(),imageUrl:e.getImageUrl(),email:e.getEmail(),name:e.getName(),givenName:e.getGivenName(),familyName:e.getFamilyName()},o(t)}function n(t){if(t&&t.preventDefault(),R){var n=window.gapi.auth2.getAuthInstance(),i={prompt:C};h(),"code"===_?n.grantOfflineAccess(i).then((function(t){return o(t)}),(function(t){return l(t)})):n.signIn(i).then((function(t){return e(t)}),(function(t){return l(t)}))}}var r=t.onSuccess,o=void 0===r?function(){}:r,s=t.onAutoLoadFinished,a=void 0===s?function(){}:s,c=t.onFailure,l=void 0===c?function(){}:c,u=t.onRequest,h=void 0===u?function(){}:u,f=t.onScriptLoadFailure,v=t.clientId,m=t.cookiePolicy,y=t.loginHint,b=t.hostedDomain,j=t.autoLoad,O=t.isSignedIn,x=t.fetchBasicProfile,A=t.redirectUri,w=t.discoveryDocs,S=t.uxMode,k=t.scope,N=t.accessType,_=t.responseType,T=t.jsSrc,P=void 0===T?"https://apis.google.com/js/api.js":T,C=t.prompt,I=i(Object(g.useState)(!1),2),R=I[0],E=I[1];return Object(g.useEffect)((function(){var t=!1,n=f||l;return d(document,"script","google-login",P,(function(){var i={client_id:v,cookie_policy:m,login_hint:y,hosted_domain:b,fetch_basic_profile:x,discoveryDocs:w,ux_mode:S,redirect_uri:A,scope:k,access_type:N};"code"===_&&(i.access_type="offline"),window.gapi.load("auth2",(function(){var r=window.gapi.auth2.getAuthInstance();r?r.then((function(){t||(O&&r.isSignedIn.get()?(E(!0),a(!0),e(r.currentUser.get())):(E(!0),a(!1)))}),(function(t){l(t)})):window.gapi.auth2.init(i).then((function(n){if(!t){E(!0);var i=O&&n.isSignedIn.get();a(i),i&&e(n.currentUser.get())}}),(function(t){E(!0),a(!1),n(t)}))}))}),(function(t){n(t)})),function(){t=!0,p(document,"google-login")}}),[]),Object(g.useEffect)((function(){j&&n()}),[R]),{signIn:n,loaded:R}});function b(t){var e=l(Object(g.useState)(!1),2),n=e[0],i=e[1],r=l(Object(g.useState)(!1),2),o=r[0],s=r[1],a=t.tag,c=t.type,u=t.className,d=t.disabledStyle,p=t.buttonText,v=t.children,y=t.render,b=t.theme,j=t.icon,x=t.disabled,A=O({jsSrc:t.jsSrc,onFailure:t.onFailure,onScriptLoadFailure:t.onScriptLoadFailure,clientId:t.clientId,cookiePolicy:t.cookiePolicy,loginHint:t.loginHint,hostedDomain:t.hostedDomain,fetchBasicProfile:t.fetchBasicProfile,discoveryDocs:t.discoveryDocs,uxMode:t.uxMode,redirectUri:t.redirectUri,scope:t.scope,accessType:t.accessType,onLogoutSuccess:t.onLogoutSuccess}),w=A.signOut,S=x||!A.loaded;if(y)return y({onClick:w,disabled:S});var k={backgroundColor:"dark"===b?"rgb(66, 133, 244)":"#fff",display:"inline-flex",alignItems:"center",color:"dark"===b?"#fff":"rgba(0, 0, 0, .54)",boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)",padding:0,borderRadius:2,border:"1px solid transparent",fontSize:14,fontWeight:"500",fontFamily:"Roboto, sans-serif"},N={cursor:"pointer",backgroundColor:"dark"===b?"#3367D6":"#eee",color:"dark"===b?"#fff":"rgba(0, 0, 0, .54)",opacity:1},_=S?Object.assign({},k,d):o?Object.assign({},k,N):n?Object.assign({},k,{cursor:"pointer",opacity:.9}):k;return m.a.createElement(a,{onMouseEnter:function(){return i(!0)},onMouseLeave:function(){i(!1),s(!1)},onMouseDown:function(){return s(!0)},onMouseUp:function(){return s(!1)},onClick:w,style:_,type:c,disabled:S,className:u},[j&&m.a.createElement(f,{key:1,active:o}),m.a.createElement(h,{icon:j,key:2},v||p)])}v.defaultProps={type:"button",tag:"button",buttonText:"Sign in with Google",scope:"profile email",accessType:"online",prompt:"",cookiePolicy:"single_host_origin",fetchBasicProfile:!0,isSignedIn:!1,uxMode:"popup",disabledStyle:{opacity:.6},icon:!0,theme:"light",onRequest:function(){}};var j=v,O=function(t){var e=t.jsSrc,n=void 0===e?"https://apis.google.com/js/api.js":e,i=t.onFailure,r=t.onScriptLoadFailure,o=t.clientId,s=t.cookiePolicy,c=t.loginHint,l=t.hostedDomain,u=t.fetchBasicProfile,h=t.discoveryDocs,f=t.uxMode,v=t.redirectUri,m=t.scope,y=t.accessType,b=t.onLogoutSuccess,j=a(Object(g.useState)(!1),2),O=j[0],x=j[1],A=Object(g.useCallback)((function(){if(window.gapi){var t=window.gapi.auth2.getAuthInstance();null!=t&&t.then((function(){t.signOut().then((function(){t.disconnect(),b()}))}),(function(t){return i(t)}))}}),[b]);return Object(g.useEffect)((function(){var t=r||i;return d(document,"script","google-login",n,(function(){var e={client_id:o,cookie_policy:s,login_hint:c,hosted_domain:l,fetch_basic_profile:u,discoveryDocs:h,ux_mode:f,redirect_uri:v,scope:m,access_type:y};window.gapi.load("auth2",(function(){window.gapi.auth2.getAuthInstance()?x(!0):window.gapi.auth2.init(e).then((function(){return x(!0)}),(function(e){return t(e)}))}))}),(function(e){t(e)})),function(){p(document,"google-login")}}),[]),{signOut:A,loaded:O}};b.defaultProps={type:"button",tag:"button",buttonText:"Logout of Google",disabledStyle:{opacity:.6},icon:!0,theme:"light",jsSrc:"https://apis.google.com/js/api.js"};var x=b}],e.c=i,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4);function e(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return n[t].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n,i}(n(3))},423:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return v})),n.d(e,"a",(function(){return g}));var i=n(4),r=n.n(i),o=n(6),s=n(25),a=n(5),c=s.a.apiVersion,l=function(t,e){return a.a.post("/".concat(c,"/go/").concat(t,"/login"),e).then((function(t){return t.data})).catch((function(t){return t.response.data}))},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a.a.get("/".concat(c,"/google-classroom/activities/").concat(t,"/h5p-resource-settings"),{},{gcuid:e}).then((function(t){return t.data})).catch((function(t){Promise.reject(t.response.data)}))},d=function(t,e,n,i){return a.a.post("/".concat(c,"/go/safarimontage/projects/").concat(t,"/playlists/").concat(e,"/activities/").concat(n,"/publish"),{setting_id:i,count:1}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},p=n(53),h=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t.lmsName,t);case 2:(i=e.sent).errors?n({type:p.e,results:i}):n({type:p.d,results:i});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(t){return function(){var e=Object(o.a)(r.a.mark((function e(n){var i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:(i=e.sent).errors?n({type:p.c,results:i}):n({type:p.b,results:i});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(t,e,n,i){return function(){var s=Object(o.a)(r.a.mark((function o(s){var a;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d(t,e,n,i);case 2:(a=r.sent).errors?s({type:p.g,results:a}):s({type:p.f,results:a});case 4:case"end":return r.stop()}}),o)})));return function(t){return s.apply(this,arguments)}}()},g=function(){return function(){var t=Object(o.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:p.a});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},458:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return u}));var i=n(4),r=n.n(i),o=n(6),s=n(1),a=function(t,e,n){return{type:s.Me,id:t,title:e,deleteType:n}},c=function(t,e,n){return function(){var i=Object(o.a)(r.a.mark((function i(o){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o(a(t,e,n));case 1:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()},l=function(){return function(){var t=Object(o.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:s.vc});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},u=function(){return function(){var t=Object(o.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({type:s.af});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},459:function(t,e,n){},506:function(t,e,n){"use strict";(function(t){var i=n(27),r=n(3),o=n(12),s=n(24),a=(n(564),n(565)),c=n(135),l=n(419),u=n(418),d=n(392),p=n(507),h=n(2);e.a=Object(s.h)(Object(o.b)(null,(function(t){return{googleClassRoomLogin:function(e){return t(Object(d.f)(e))},googleClassRoomLoginFailure:function(e){return t(Object(d.g)(e))}}}))((function(e){var n=e.show,s=e.onHide,d=e.googleClassRoomLogin,f=(e.googleClassRoomLoginFailure,e.projectId),v=Object(o.d)((function(t){return t})),g=Object(r.useState)(""),m=Object(i.a)(g,2),y=m[0],b=m[1],j=Object(r.useState)(!1),O=Object(i.a)(j,2),x=O[0],A=O[1],w=Object(r.useState)([]),S=Object(i.a)(w,2),k=S[0],N=S[1],_=Object(r.useState)(!0),T=Object(i.a)(_,2),P=T[0],C=T[1];return Object(r.useEffect)((function(){!0===v.share.googleShare?A(!0):!1===v.share.googleShare?A(!1):"close"===v.share.googleShare&&s()}),[v,s]),Object(r.useEffect)((function(){v.share.courses&&(N(v.share.courses),C(!1))}),[v.share.courses]),Object(h.jsx)(a.a,{open:n,onClose:s,center:!0,children:Object(h.jsxs)("div",{className:"model-box-google model-box-view",children:[Object(h.jsx)("div",{className:"modal-header",children:Object(h.jsx)("img",{src:u.a,alt:""})}),Object(h.jsx)("div",{className:"model-body",style:{maxWidth:"500px"},children:Object(h.jsxs)("div",{className:"sign-in-google",children:[Object(h.jsx)("br",{}),x?Object(h.jsx)("div",{className:"classroom-form",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Are you sure you want to share this Project to Google Classroom?"}),P&&Object(h.jsx)("p",{className:"loading-classes",children:"Loading Classes...."}),Object(h.jsx)(c.b,{initialValues:{course:void 0,heading:"test",description:"test",room:"test"},onSubmit:function(t){s(),"Create a new class"===t.course?Object(p.a)(f,null,y):Object(p.a)(f,t.course,y),C(!1)},children:function(t){var e=t.values,n=t.handleChange,i=t.handleBlur,r=t.handleSubmit;return Object(h.jsxs)("form",{onSubmit:r,children:[Object(h.jsxs)("select",{className:"form-control select-dropdown",name:"course",value:e.course,onChange:n,onBlur:i,children:[Object(h.jsx)("option",{children:"Create a new class"}),!!k&&k.map((function(t){return Object(h.jsx)("option",{value:t.id,children:t.name},t.id)}))]}),!P&&Object(h.jsx)("button",{type:"submit",children:"Confirm"})]})}})]})}):Object(h.jsxs)("div",{className:"content-authorization",children:[Object(h.jsx)("p",{children:"With CurrikiStudio you can publish your Project as a new Google Classroom course."}),Object(h.jsx)("p",{children:"To start, please log into your Google account."}),Object(h.jsx)("div",{children:Object(h.jsx)(l.GoogleLogin,{clientId:t.config.gapiClientId,onSuccess:function(t){d(t),b(JSON.stringify(t.tokenObj))},scope:"https://www.googleapis.com/auth/classroom.courses.readonly https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.topics https://www.googleapis.com/auth/classroom.coursework.me https://www.googleapis.com/auth/classroom.coursework.students",cookiePolicy:"single_host_origin",children:Object(h.jsx)("span",{children:"Login with Google"})})})]})]})})]})})})))}).call(this,n(36))},507:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(4),r=n.n(i),o=n(6),s=n(8),a=n.n(s),c=n(59),l=function(){var t=Object(o.a)(r.a.mark((function t(e,n,i){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.a.fire({title:"Publishing....",showCancelButton:!1,showConfirmButton:!1,allowOutsideClick:!1}),t.next=3,c.a.googleClassShare(e,n,i);case 3:t.sent.course?a.a.fire({icon:"success",title:"Shared!",confirmButtonColor:"#5952c6",html:"Your project has been shared to Google Classroom"}):a.a.fire({confirmButtonColor:"#5952c6",icon:"error",text:"Something went wrong, Kindly try again."});case 5:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}()},508:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(4),r=n.n(i),o=n(6),s=n(25),a=n(5),c=s.a.apiVersion,l=function(){return a.a.get("/".concat(c,"/user-lms-settings")).then((function(t){return t.data})).catch((function(t){return Promise.reject(t.response.data)}))},u=n(1),d=function(){return function(){var t=Object(o.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:n=t.sent,e({type:u.ic,lmsSettings:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},513:function(t,e,n){t.exports=n(580)},515:function(t,e,n){"use strict";n(3);var i=n(21),r=n(24),o=n(12),s=n(153),a=n(133),c=n(2);function l(t){var e=t.text,n=t.showButton,r=t.loadHP;return Object(c.jsx)("div",{className:"whole-authorized",children:Object(c.jsxs)("div",{className:"box-unauthorized",children:[Object(c.jsx)("img",{src:s.a,alt:""}),Object(c.jsx)("h3",{children:e}),n?Object(c.jsxs)(i.b,{to:"/studio",onClick:function(){r("Loading...")},children:[" ","Go Back to Projects"]}):Object(c.jsxs)(i.b,{to:"/studio",onClick:function(){r("Loading...")},children:[" ","Go Back"]})]})})}l.defaultProps={showButton:!1};e.a=Object(r.h)(Object(o.b)(null,(function(t){return{loadHP:function(e){return t(Object(a.a)(e))}}}))(l))},516:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n(4),o=n.n(r),s=n(6),a=n(27),c=n(3),l=n(9),u=n.n(l),d=n(12),p=n(24),h=n.p+"static/media/276.f6c236f2.gif",f=n(72),v=n(411),g=n(2),m=0,y=function(t){var e=Object(c.useState)(!0),n=Object(a.a)(e,2),r=n[0],l=n[1],u=Object(c.useState)(null),p=Object(a.a)(u,2),y=p[0],b=p[1],j=t.activityId,O=t.loadH5pResourceProp,x=t.showLtiPreview,A=t.showActivityPreview,w=Object(d.c)(),S=function(){var t=Object(s.a)(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.H5PIntegration=e.h5p.settings,document.getElementById("curriki-h5p-wrapper").innerHTML=e.h5p.embed_code.trim(),n=e.h5p.settings.core.styles.concat(e.h5p.settings.loadedCss),t.next=6,Promise.all(n.map((function(t){var e=document.createElement("link");return e.href=t,e.type="text/css",e.rel="stylesheet",document.head.appendChild(e),!0})));case 6:e.h5p.settings.core.scripts.concat(e.h5p.settings.loadedJs).forEach((function(t){var e=document.createElement("script");e.src=t,e.async=!1,document.body.appendChild(e)})),l(!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(y!==j){var e=document.getElementsByClassName("h5p-iframe");if(e.length&&e[0].remove(),null===j||void 0===j)return;var n=function(){var e=Object(s.a)(o.a.mark((function e(){var n,r,s,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!x){e.next=10;break}return e.next=4,Object(f.r)(j);case 4:if(!(n=e.sent).h5p_activity){e.next=8;break}return e.next=8,S(n.h5p_activity);case 8:e.next=25;break;case 10:if(!A){e.next=19;break}return e.next=13,Object(f.s)(j);case 13:if(!(r=e.sent).activity){e.next=17;break}return e.next=17,S(r.activity);case 17:e.next=25;break;case 19:return e.next=21,O(j);case 21:if(!(s=e.sent).activity){e.next=25;break}return e.next=25,S(s.activity);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(0),l(!1);case 30:a=setInterval((function(){try{var e=document.getElementsByClassName("h5p-iframe")[0].contentWindow;e.H5P&&e.H5P.externalDispatcher&&v.c(t.match.path)&&(c(),e.H5P.externalDispatcher.on("xAPI",(function(e){m>0&&w(Object(f.t)(JSON.stringify(v.b(e.data.statement,Object(i.a)({},t))))),m+=1})))}catch(n){console.log(n)}})),c=function(){return clearInterval(a)};case 32:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(){return e.apply(this,arguments)}}();n(),b(j)}}),[y,j,x,A,O]),Object(g.jsx)(g.Fragment,{children:r?Object(g.jsx)("div",{id:"curriki-h5p-wrapper",children:Object(g.jsx)("div",{className:"loader_gif",children:Object(g.jsx)("img",{src:h,alt:""})})}):Object(g.jsx)("div",{id:"curriki-h5p-wrapper",children:Object(g.jsx)("div",{className:"loader_gif",style:{color:"black"},children:"Unable to Load Activity"})})})};y.defaultProps={showLtiPreview:!1,showActivityPreview:!1,match:u.a.shape({path:u.a.string})};e.default=Object(p.h)(Object(d.b)((function(t){return{resource:t.resource,parentPlaylist:t.playlist.selectedPlaylist}}),(function(t){return{loadH5pResourceProp:function(e){return t(Object(f.o)(e))}}}))(y))},520:function(t,e){},521:function(t,e){},564:function(t,e,n){},565:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return S}));var i=n(3),r=n.n(i),o=n(41),s=n.n(o),a=n(17),c=n.n(a),l=n(583),u=n(589);function d(){return d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},d.apply(this,arguments)}var p=function(t){var e=t.classes,n=t.classNames,i=t.styles,o=t.id,s=t.closeIcon,a=t.onClick;return r.a.createElement("button",{id:o,className:c()(e.closeButton,null==n?void 0:n.closeButton),style:null==i?void 0:i.closeButton,onClick:a,"data-testid":"close-button"},s||r.a.createElement("svg",{className:null==n?void 0:n.closeIcon,style:null==i?void 0:i.closeIcon,width:28,height:28,viewBox:"0 0 36 36","data-testid":"close-icon"},r.a.createElement("path",{d:"M28.5 9.62L26.38 7.5 18 15.88 9.62 7.5 7.5 9.62 15.88 18 7.5 26.38l2.12 2.12L18 20.12l8.38 8.38 2.12-2.12L20.12 18z"})))},h="undefined"!==typeof window,f=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'];function v(t){return null===t.offsetParent||"hidden"===getComputedStyle(t).visibility}function g(t){if("INPUT"!==t.tagName||"radio"!==t.type||!t.name)return!0;var e=(t.form||t.ownerDocument).querySelectorAll('input[type="radio"][name="'+t.name+'"]'),n=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]}(e,t.form);return n===t||void 0===n&&e[0]===t}function m(t){for(var e=document.activeElement,n=t.querySelectorAll(f.join(",")),i=[],r=0;r<n.length;r++){var o=n[r];(e===o||!o.disabled&&y(o)>-1&&!v(o)&&g(o))&&i.push(o)}return i}function y(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?function(t){return t.getAttribute("contentEditable")}(t)?0:t.tabIndex:e}var b=function(t){var e=t.container,n=t.initialFocusRef,r=Object(i.useRef)();return Object(i.useEffect)((function(){var t=function(t){(null==e?void 0:e.current)&&function(t,e){if(t&&"Tab"===t.key){if(!e||!e.contains)return!1;if(!e.contains(t.target))return!1;var n=m(e),i=n[0],r=n[n.length-1];t.shiftKey&&t.target===i?(r.focus(),t.preventDefault()):!t.shiftKey&&t.target===r&&(i.focus(),t.preventDefault())}}(t,e.current)};if(h&&document.addEventListener("keydown",t),h&&(null==e?void 0:e.current)){var i=function(){-1!==f.findIndex((function(t){var e;return null==(e=document.activeElement)?void 0:e.matches(t)}))&&(r.current=document.activeElement)};if(n)i(),requestAnimationFrame((function(){var t;null==(t=n.current)||t.focus()}));else{var o=m(e.current);o[0]&&(i(),o[0].focus())}}return function(){var e;h&&(document.removeEventListener("keydown",t),null==(e=r.current)||e.focus())}}),[e,n]),null},j=[],O=function(t){j.push(t)},x=function(t){j=j.filter((function(e){return e!==t}))},A=function(t){return!!j.length&&j[j.length-1]===t};var w={root:"react-responsive-modal-root",overlay:"react-responsive-modal-overlay",overlayAnimationIn:"react-responsive-modal-overlay-in",overlayAnimationOut:"react-responsive-modal-overlay-out",modalContainer:"react-responsive-modal-container",modalContainerCenter:"react-responsive-modal-containerCenter",modal:"react-responsive-modal-modal",modalAnimationIn:"react-responsive-modal-modal-in",modalAnimationOut:"react-responsive-modal-modal-out",closeButton:"react-responsive-modal-closeButton"},S=r.a.forwardRef((function(t,e){var n,o,a,f,v=t.open,g=t.center,m=t.blockScroll,y=void 0===m||m,j=t.closeOnEsc,S=void 0===j||j,k=t.closeOnOverlayClick,N=void 0===k||k,_=t.container,T=t.showCloseIcon,P=void 0===T||T,C=t.closeIconId,I=t.closeIcon,R=t.focusTrapped,E=void 0===R||R,H=t.initialFocusRef,B=void 0===H?void 0:H,L=t.animationDuration,D=void 0===L?300:L,U=t.classNames,M=t.styles,J=t.role,z=void 0===J?"dialog":J,V=t.ariaDescribedby,G=t.ariaLabelledby,q=t.modalId,F=t.onClose,K=t.onEscKeyDown,Q=t.onOverlayClick,X=t.onAnimationEnd,W=t.children,Z=Object(u.a)(e),Y=Object(i.useRef)(null),$=Object(i.useRef)(null),tt=Object(i.useRef)(null);null===tt.current&&h&&(tt.current=document.createElement("div"));var et=Object(i.useState)(!1),nt=et[0],it=et[1];!function(t,e){Object(i.useEffect)((function(){return e&&O(t),function(){x(t)}}),[e,t])}(Y,v),function(t,e,n,r){var o=Object(i.useRef)(null);Object(i.useEffect)((function(){return e&&t.current&&r&&(o.current=t.current,Object(l.a)(t.current)),function(){o.current&&(Object(l.b)(o.current),o.current=null)}}),[e,n,t])}(Y,v,nt,y);var rt=function(t){27===t.keyCode&&A(Y)&&(null==K||K(t),S&&F())};Object(i.useEffect)((function(){return function(){nt&&(tt.current&&!_&&document.body.contains(tt.current)&&document.body.removeChild(tt.current),document.removeEventListener("keydown",rt))}}),[nt]),Object(i.useEffect)((function(){v&&!nt&&(it(!0),!tt.current||_||document.body.contains(tt.current)||document.body.appendChild(tt.current),document.addEventListener("keydown",rt))}),[v]);var ot=function(){$.current=!1},st=_||tt.current,at=v?null!=(n=null==U?void 0:U.overlayAnimationIn)?n:w.overlayAnimationIn:null!=(o=null==U?void 0:U.overlayAnimationOut)?o:w.overlayAnimationOut,ct=v?null!=(a=null==U?void 0:U.modalAnimationIn)?a:w.modalAnimationIn:null!=(f=null==U?void 0:U.modalAnimationOut)?f:w.modalAnimationOut;return nt&&st?s.a.createPortal(r.a.createElement("div",{className:c()(w.root,null==U?void 0:U.root),style:null==M?void 0:M.root,"data-testid":"root"},r.a.createElement("div",{className:c()(w.overlay,null==U?void 0:U.overlay),"data-testid":"overlay","aria-hidden":!0,style:d({animation:at+" "+D+"ms"},null==M?void 0:M.overlay)}),r.a.createElement("div",{ref:Y,className:c()(w.modalContainer,g&&w.modalContainerCenter,null==U?void 0:U.modalContainer),style:null==M?void 0:M.modalContainer,"data-testid":"modal-container",onClick:function(t){null===$.current&&($.current=!0),$.current?(null==Q||Q(t),N&&F(),$.current=null):$.current=null}},r.a.createElement("div",{ref:Z,className:c()(w.modal,null==U?void 0:U.modal),style:d({animation:ct+" "+D+"ms"},null==M?void 0:M.modal),onMouseDown:ot,onMouseUp:ot,onClick:ot,onAnimationEnd:function(){v||it(!1),null==X||X()},id:q,role:z,"aria-modal":"true","aria-labelledby":G,"aria-describedby":V,"data-testid":"modal",tabIndex:-1},E&&r.a.createElement(b,{container:Z,initialFocusRef:B}),W,P&&r.a.createElement(p,{classes:w,classNames:U,styles:M,closeIcon:I,onClick:F,id:C})))),st):null}))}).call(this,n(120))},566:function(t,e,n){"use strict";var i=n(27),r=n(3),o=n(12),s=n(21),a=n(24),c=n(8),l=n.n(c),u=n(144),d=n(30),p=n(39),h=n(997),f=n(25),v=n(72),g=n(82),m=n(508),y=n(423),b=(n(459),n(2));e.a=Object(a.h)(Object(o.b)((function(t){return{lmsSettings:t.account.userLmsSettings,lmsSettingsLoaded:t.account.userLmsSettingsLoaded,safariMontagePublishTool:t.genericLMS.safariMontagePublishTool}}),(function(t){return{deleteResource:function(e,n){return t(Object(v.g)(e,n))},getLmsSettings:function(){return t(Object(m.a)())},loadSafariMontagePublishTool:function(e,n,i,r){return t(Object(y.d)(e,n,i,r))},closeSafariMontageTool:function(){return t(Object(y.a)())}}}))((function(t){var e,n,a,c,m,y,j,O,x,A,w,S,k,N,_=t.lmsSettings,T=t.lmsSettingsLoaded,P=t.getLmsSettings,C=t.resource,I=t.playlist,R=t.deleteResource,E=t.loadSafariMontagePublishTool,H=t.closeSafariMontageTool,B=t.safariMontagePublishTool,L=t.match,D=t.teamPermission,U=t.previewPage,M=Object(o.d)((function(t){return t.organization})),J=M.permission,z=Object(r.useState)(null),V=Object(i.a)(z,2),G=V[0],q=V[1];Object(r.useEffect)((function(){q(encodeURI(B))}),[B]),Object(r.useEffect)((function(){T||P()}),[L]);return Object(b.jsxs)(p.a,{className:"pull-right resource-dropdown check",children:[Object(b.jsx)(p.a.Toggle,{className:"resource-dropdown-btn",children:Object(b.jsx)(d.a,{icon:"ellipsis-v"})}),Object(b.jsxs)(p.a.Menu,{children:[(Object.keys(D).length?null===D||void 0===D||null===(e=D.Team)||void 0===e?void 0:e.includes("team:view-activity"):null===J||void 0===J||null===(n=J.Activity)||void 0===n?void 0:n.includes("activity:view"))&&Object(b.jsxs)(p.a.Item,{as:s.b,to:"/studio/org/".concat(null===(a=M.currentOrganization)||void 0===a?void 0:a.domain,"/project/").concat(L.params.projectId,"/playlist/").concat(I.id,"/activity/").concat(C.id,"/preview"),onClick:function(){"projectPreview"===U?localStorage.setItem("projectPreview",!0):localStorage.setItem("projectPreview",!1)},children:[Object(b.jsx)(d.a,{icon:"eye",className:"mr-2"}),"Preview"]}),(Object.keys(D).length?null===D||void 0===D||null===(c=D.Team)||void 0===c?void 0:c.includes("team:edit-activity"):null===J||void 0===J||null===(m=J.Activity)||void 0===m?void 0:m.includes("activity:edit"))&&Object(b.jsxs)(p.a.Item,{as:s.b,to:"/studio/org/".concat(null===(y=M.currentOrganization)||void 0===y?void 0:y.domain,"/project/").concat(L.params.projectId,"/playlist/").concat(I.id,"/activity/").concat(C.id,"/edit"),children:[Object(b.jsx)(d.a,{icon:"pen",className:"mr-2"}),"Edit"]}),(null===J||void 0===J||null===(j=J.Activity)||void 0===j?void 0:j.includes("activity:duplicate"))&&Object(b.jsxs)(p.a.Item,{to:"#",onClick:function(){l.a.showLoading(),Object(g.b)(I.id,C.id)},children:[Object(b.jsx)(d.a,{icon:"clone",className:"mr-2"}),"Duplicate"]}),(Object.keys(D).length?null===D||void 0===D||null===(O=D.Team)||void 0===O?void 0:O.includes("team:publish-activity"):null===J||void 0===J||null===(x=J.Activity)||void 0===x?void 0:x.includes("activity:share"))&&0!==_.length&&Object(b.jsxs)("li",{className:"dropdown-submenu send",children:[Object(b.jsxs)("a",{tabIndex:"-1",className:"dropdown-item",children:[Object(b.jsx)(d.a,{icon:"newspaper",className:"mr-2"}),"Publish"]}),Object(b.jsx)("ul",{className:"dropdown-menu check",children:_.map((function(t){return"safarimontage"===t.lms_name&&Object(b.jsxs)("li",{children:[Object(b.jsx)("a",{onClick:function(){E(I.project.id,I.id,C.id,t.id)},children:t.site_name}),Object(b.jsxs)(h.a,{dialogClassName:"safari-modal",show:B,onHide:function(){return H()},"aria-labelledby":"example-modal-sizes-title-lg",children:[Object(b.jsx)(h.a.Header,{closeButton:!0,children:Object(b.jsx)(h.a.Title,{id:"example-modal-sizes-title-lg",children:"Safari Montage"})}),Object(b.jsx)(h.a.Body,{children:Object(b.jsx)("iframe",{title:"Safari Montage",src:"data:text/html;charset=utf-8,".concat(G)})})]})]})}))})]}),(Object.keys(D).length?null===D||void 0===D||null===(A=D.Team)||void 0===A?void 0:A.includes("team:share-activity"):null===J||void 0===J||null===(w=J.Activity)||void 0===w?void 0:w.includes("activity:share"))&&Object(b.jsxs)(p.a.Item,{onClick:function(){Object(v.H)(C.id);var t="".concat(window.location.href.split("/")[0],"//");Object(u.confirmAlert)({customUI:function(e){var n=e.onClose;return Object(b.jsxs)("div",{className:"share-project-preview-url project-share-check",children:[Object(b.jsx)("br",{}),Object(b.jsxs)("h3",{children:["You can now share Activity"," ",Object(b.jsx)("strong",{children:C.title}),Object(b.jsx)("br",{}),"Anyone with the link below can access your activity:"]}),Object(b.jsx)("a",{target:"_blank",href:"/studio/activity/".concat(C.id,"/shared"),rel:"noopener noreferrer",children:Object(b.jsx)("input",{id:"urllink_clip",value:"".concat(t+window.location.host,"/studio/activity/").concat(C.id,"/shared")})}),Object(b.jsx)("span",{title:"copy to clipboard","aria-hidden":"true",onClick:function(){var t=document.getElementById("urllink_clip");t.focus(),t.select(),document.execCommand("copy"),l.a.fire({title:"Link Copied",showCancelButton:!1,showConfirmButton:!1,timer:1500,allowOutsideClick:!1})},children:Object(b.jsx)(d.a,{icon:"clipboard"})}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"close-btn",children:Object(b.jsx)("button",{type:"button",onClick:n,children:"Ok"})})]})}})},children:[Object(b.jsx)(d.a,{icon:"share",className:"mr-2"}),"Share"]}),(null===J||void 0===J||null===(S=J.Activity)||void 0===S?void 0:S.includes("activity:share"))&&Object(b.jsxs)(p.a.Item,{href:"".concat("http://localhost:3000/api/api","/").concat(f.a.apiVersion,"/go/getxapifile/").concat(C.id),onClick:function(){return Object(v.H)(C.id)},children:[Object(b.jsx)(d.a,{icon:"download",className:"mr-2"}),"xAPI Download"]}),(Object.keys(D).length?null===D||void 0===D||null===(k=D.Team)||void 0===k?void 0:k.includes("team:delete-activity"):null===J||void 0===J||null===(N=J.Activity)||void 0===N?void 0:N.includes("activity:delete"))&&Object(b.jsxs)(p.a.Item,{onClick:function(t){t.preventDefault(),l.a.fire({title:"Are you sure you want to delete this activity?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then((function(t){t.isConfirmed&&R(C.id,I.id)}))},children:[Object(b.jsx)(d.a,{icon:"times-circle",className:"mr-2"}),"Delete"]})]})]})})))},570:function(t,e,n){"use strict";(function(t){n(3);var i=n(21),r=n(566),o=(n(584),n(12)),s=n(2),a=function(e){var n,a=e.activity,c=e.projectId,l=e.playlistId,u=e.lti,d=e.sampleID,p=e.setModalShow,h=e.setCurrentActivity,f=e.playlist,v=e.teamPermission,g=Object(o.d)((function(t){return t.organization}));return Object(s.jsx)("li",{children:d?Object(s.jsxs)("a",{onClick:function(){h(a.id),p(!0)},children:[Object(s.jsx)("div",{className:"playimg",style:{backgroundImage:a.thumb_url&&a.thumb_url.includes("pexels.com")?"url(".concat(a.thumb_url,")"):"url(".concat(t.config.resourceUrl).concat(a.thumb_url,")")}}),Object(s.jsx)("div",{className:"plydet",children:a.metadata?a.metadata.title:a.title})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(i.b,{to:u?"/studio/playlist/".concat(l,"/activity/").concat(a.id,"/preview/lti"):"/org/".concat(null===(n=g.currentOrganization)||void 0===n?void 0:n.domain,"/project/").concat(c,"/playlist/").concat(l,"/activity/").concat(a.id,"/preview"),onClick:function(){return localStorage.setItem("projectPreview",!0)},children:[Object(s.jsx)("div",{className:"playimg",style:{backgroundImage:a.thumb_url&&a.thumb_url.includes("pexels.com")?"url(".concat(a.thumb_url,")"):"url(".concat(t.config.resourceUrl).concat(a.thumb_url,")")}}),Object(s.jsx)("div",{className:"plydet",children:a.metadata?a.metadata.title:a.title})]}),!u&&Object(s.jsx)("div",{className:"activity-options-wrapper check",children:Object(s.jsx)(r.a,{playlist:f,resource:a,teamPermission:v||{},previewPage:"projectPreview"})})]})})};a.defaultProps={lti:!1,sampleID:null,setModalShow:function(){},setCurrentActivity:function(){}},e.a=a}).call(this,n(36))},571:function(t,e,n){},572:function(t,e,n){"use strict";n(3);var i=n(8),r=n.n(i),o=n(144),s=n(30),a=n(39),c=n(72),l=n(2);e.a=function(t){var e=t.resource;return Object(l.jsxs)(a.a.Item,{onClick:function(){Object(c.H)(e.id);var t="".concat(window.location.href.split("/")[0],"//");Object(o.confirmAlert)({customUI:function(n){var i=n.onClose;return Object(l.jsxs)("div",{className:"share-project-preview-url project-share-check",children:[Object(l.jsx)("br",{}),Object(l.jsxs)("h3",{children:["You can now share Activity"," ",Object(l.jsx)("strong",{children:e.title}),Object(l.jsx)("br",{}),"Anyone with the link below can access your activity:"]}),Object(l.jsx)("a",{target:"_blank",href:"/studio/activity/".concat(e.id,"/shared"),rel:"noopener noreferrer",children:Object(l.jsx)("input",{id:"urllink_clip",value:"".concat(t+window.location.host,"/studio/activity/").concat(e.id,"/shared")})}),Object(l.jsx)("span",{title:"copy to clipboard","aria-hidden":"true",onClick:function(){var t=document.getElementById("urllink_clip");t.focus(),t.select(),document.execCommand("copy"),r.a.fire({title:"Link Copied",showCancelButton:!1,showConfirmButton:!1,timer:1500,allowOutsideClick:!1})},children:Object(l.jsx)(s.a,{icon:"clipboard"})}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{className:"close-btn",children:Object(l.jsx)("button",{type:"button",onClick:i,children:"Ok"})})]})}})},children:[Object(l.jsx)(s.a,{icon:"share",className:"mr-2"}),"Share"]})}},573:function(t,e,n){},580:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(3);function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}var o=i.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},i.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),s=i.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},i.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function a(t){if(7===t.length)return t;for(var e="#",n=1;n<4;n+=1)e+=t[n]+t[n];return e}function c(t,e,n,i,r){return function(t,e,n,i,r){var o=(t-n)/(e-n);if(0===o)return i;if(1===o)return r;for(var s="#",a=1;a<6;a+=2){var c=parseInt(i.substr(a,2),16),l=parseInt(r.substr(a,2),16),u=Math.round((1-o)*c+o*l).toString(16);1===u.length&&(u="0"+u),s+=u}return s}(t,e,n,a(i),a(r))}var l=function(t){function e(e){t.call(this,e);var n=e.height,i=e.width,r=e.checked;this.t=e.handleDiameter||n-2,this.i=Math.max(i-n,i-(n+this.t)/2),this.o=Math.max(0,(n-this.t)/2),this.state={s:r?this.i:this.o},this.n=0,this.e=0,this.h=this.h.bind(this),this.r=this.r.bind(this),this.a=this.a.bind(this),this.c=this.c.bind(this),this.l=this.l.bind(this),this.u=this.u.bind(this),this.f=this.f.bind(this),this.p=this.p.bind(this),this.b=this.b.bind(this),this.g=this.g.bind(this),this.v=this.v.bind(this),this.w=this.w.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidUpdate=function(t){t.checked!==this.props.checked&&this.setState({s:this.props.checked?this.i:this.o})},e.prototype.k=function(t){this.y.focus(),this.setState({C:t,M:!0,m:Date.now()})},e.prototype.x=function(t){var e=this.state,n=e.C,i=e.s,r=(this.props.checked?this.i:this.o)+t-n;e.R||t===n||this.setState({R:!0});var o=Math.min(this.i,Math.max(this.o,r));o!==i&&this.setState({s:o})},e.prototype.S=function(t){var e=this.state,n=e.s,i=e.R,r=e.m,o=this.props.checked,s=(this.i+this.o)/2,a=Date.now()-r;!i||a<250?this.T(t):o?s<n?this.setState({s:this.i}):this.T(t):n<s?this.setState({s:this.o}):this.T(t),this.setState({R:!1,M:!1}),this.n=Date.now()},e.prototype.h=function(t){t.preventDefault(),"number"==typeof t.button&&0!==t.button||(this.k(t.clientX),window.addEventListener("mousemove",this.r),window.addEventListener("mouseup",this.a))},e.prototype.r=function(t){t.preventDefault(),this.x(t.clientX)},e.prototype.a=function(t){this.S(t),window.removeEventListener("mousemove",this.r),window.removeEventListener("mouseup",this.a)},e.prototype.c=function(t){this.$=null,this.k(t.touches[0].clientX)},e.prototype.l=function(t){this.x(t.touches[0].clientX)},e.prototype.u=function(t){t.preventDefault(),this.S(t)},e.prototype.p=function(t){50<Date.now()-this.n&&(this.T(t),50<Date.now()-this.e&&this.setState({M:!1}))},e.prototype.b=function(){this.e=Date.now()},e.prototype.g=function(){this.setState({M:!0})},e.prototype.v=function(){this.setState({M:!1})},e.prototype.w=function(t){this.y=t},e.prototype.f=function(t){t.preventDefault(),this.y.focus(),this.T(t),this.setState({M:!1})},e.prototype.T=function(t){var e=this.props;(0,e.onChange)(!e.checked,t,e.id)},e.prototype.render=function(){var t=this.props,e=t.disabled,n=t.className,o=t.offColor,s=t.onColor,a=t.offHandleColor,l=t.onHandleColor,u=t.checkedIcon,d=t.uncheckedIcon,p=t.boxShadow,h=t.activeBoxShadow,f=t.height,v=t.width,g=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&-1===e.indexOf(i)&&(n[i]=t[i]);return n}(t,["disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","boxShadow","activeBoxShadow","height","width","handleDiameter"]),m=this.state,y=m.s,b=m.R,j=m.M,O={position:"relative",display:"inline-block",textAlign:"left",opacity:e?.5:1,direction:"ltr",borderRadius:f/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},x={height:f,width:v,margin:Math.max(0,(this.t-f)/2),position:"relative",background:c(y,this.i,this.o,o,s),borderRadius:f/2,cursor:e?"default":"pointer",WebkitTransition:b?null:"background 0.25s",MozTransition:b?null:"background 0.25s",transition:b?null:"background 0.25s"},A={height:f,width:Math.min(1.5*f,v-(this.t+f)/2+1),position:"relative",opacity:(y-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:b?null:"opacity 0.25s",MozTransition:b?null:"opacity 0.25s",transition:b?null:"opacity 0.25s"},w={height:f,width:Math.min(1.5*f,v-(this.t+f)/2+1),position:"absolute",opacity:1-(y-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:b?null:"opacity 0.25s",MozTransition:b?null:"opacity 0.25s",transition:b?null:"opacity 0.25s"},S={height:this.t,width:this.t,background:c(y,this.i,this.o,a,l),display:"inline-block",cursor:e?"default":"pointer",borderRadius:"50%",position:"absolute",transform:"translateX("+y+"px)",top:Math.max(0,(f-this.t)/2),outline:0,boxShadow:j?h:p,border:0,WebkitTransition:b?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:b?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:b?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"};return i.createElement("div",{className:n,style:O},i.createElement("div",{className:"react-switch-bg",style:x,onClick:e?null:this.f,onMouseDown:function(t){return t.preventDefault()}},u&&i.createElement("div",{style:A},u),d&&i.createElement("div",{style:w},d)),i.createElement("div",{className:"react-switch-handle",style:S,onClick:function(t){return t.preventDefault()},onMouseDown:e?null:this.h,onTouchStart:e?null:this.c,onTouchMove:e?null:this.l,onTouchEnd:e?null:this.u,onTouchCancel:e?null:this.v}),i.createElement("input",r({},{type:"checkbox",role:"switch",disabled:e,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},g,{ref:this.w,onFocus:this.g,onBlur:this.v,onKeyUp:this.b,onChange:this.p})))},e}(i.Component);l.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:o,checkedIcon:s,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56},e.default=l},581:function(t,e,n){"use strict";var i=n(3),r=n(379),o=(n(582),n(2));function s(t){var e=t.ui,n=t.selectedProject,s=t.hideDeletePopup,a=t.deleteProject,c=t.deletePlaylist,l=t.deleteResource,u=Object(i.useCallback)((function(t){27===t.keyCode&&s(t)}),[s]);Object(i.useEffect)((function(){return document.addEventListener("keydown",u,!1),function(){document.removeEventListener("keydown",u,!1)}}),[u]);var d=Object(i.useCallback)((function(t,e){return function(){"Project"===t?a(e):"Playlist"===t?c(n.id,e):"Activity"===t&&l(e)}}),[n,a,c,l]);return Object(o.jsx)(r.a,{className:"popup",children:Object(o.jsx)("div",{className:"modal fade",role:"dialog","aria-hidden":"true",children:Object(o.jsx)("div",{className:"modal-dialog",role:"document",children:Object(o.jsxs)("div",{className:"modal-content",children:[Object(o.jsxs)("div",{className:"modal-body",children:[Object(o.jsx)("h5",{children:'Delete "'.concat(e.title,'"?')}),Object(o.jsx)("p",{children:"You're about to permanently delete this ".concat(e.deleteType," and all of its data.")}),Object(o.jsx)("p",{children:"Do you want to continue?"})]}),Object(o.jsxs)("div",{className:"modal-footer",children:[Object(o.jsx)("button",{type:"submit",className:"btn btn-sm btn-danger",onClick:d(e.deleteType,e.id),children:"Delete"}),Object(o.jsx)("button",{type:"button",className:"btn btn-sm btn-default","data-dismiss":"modal",onClick:s,children:"Cancel"})]})]})})})})}s.defaultProps={selectedProject:null,deleteProject:function(){},deletePlaylist:function(){},deleteResource:function(){}},e.a=s},582:function(t,e,n){},583:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return v}));var i=!1;if("undefined"!==typeof window){var r={get passive(){i=!0}};window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}var o="undefined"!==typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),s=[],a=!1,c=-1,l=void 0,u=void 0,d=function(t){return s.some((function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))}))},p=function(t){var e=t||window.event;return!!d(e.target)||(e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1))},h=function(){void 0!==u&&(document.body.style.paddingRight=u,u=void 0),void 0!==l&&(document.body.style.overflow=l,l=void 0)},f=function(t,e){if(t){if(!s.some((function(e){return e.targetElement===t}))){var n={targetElement:t,options:e||{}};s=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(s),[n]),o?(t.ontouchstart=function(t){1===t.targetTouches.length&&(c=t.targetTouches[0].clientY)},t.ontouchmove=function(e){1===e.targetTouches.length&&function(t,e){var n=t.targetTouches[0].clientY-c;!d(t.target)&&(e&&0===e.scrollTop&&n>0||function(t){return!!t&&t.scrollHeight-t.scrollTop<=t.clientHeight}(e)&&n<0?p(t):t.stopPropagation())}(e,t)},a||(document.addEventListener("touchmove",p,i?{passive:!1}:void 0),a=!0)):function(t){if(void 0===u){var e=!!t&&!0===t.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;e&&n>0&&(u=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}void 0===l&&(l=document.body.style.overflow,document.body.style.overflow="hidden")}(e)}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},v=function(t){t?(s=s.filter((function(e){return e.targetElement!==t})),o?(t.ontouchstart=null,t.ontouchmove=null,a&&0===s.length&&(document.removeEventListener("touchmove",p,i?{passive:!1}:void 0),a=!1)):s.length||h()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")}},584:function(t,e,n){},585:function(t,e,n){"use strict";var i=n(4),r=n.n(i),o=n(6),s=n(27),a=n(3),c=n(12),l=n(8),u=n.n(l),d=n(30),p=n(80),h=n(2);e.a=function(t){var e=Object(c.c)(),n=t.projectId,i=t.playlistId,l=Object(c.d)((function(t){return t.share})),f=Object(a.useState)([]),v=Object(s.a)(f,2),g=v[0],m=v[1];return Object(a.useEffect)((function(){m(l)}),[l]),Object(h.jsxs)("li",{className:"dropdown-submenu send",children:[Object(h.jsxs)("a",{href:"#",className:"test",tabIndex:"-1",onClick:function(){g.shareVendors&&0===g.shareVendors.length&&u.a.fire({icon:"info",title:"You don't have a Learning Management Systems set up for publishing. Please contact us to get this configured."})},children:[Object(h.jsx)(d.a,{icon:"newspaper",className:"mr-2"}),"Publish"]}),Object(h.jsx)("ul",{className:"dropdown-menu check",children:g.shareVendors&&g.shareVendors.map((function(t){return"safarimontage"!==t.lms_name&&Object(h.jsx)("li",{children:Object(h.jsx)("a",{href:"#",onClick:Object(o.a)(r.a.mark((function o(){return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e(Object(p.i)(i,t.id,t.lms_name.toLowerCase(),t.lms_url,n));case 1:case"end":return r.stop()}}),o)}))),children:t.site_name})},t.id)}))})]})}},589:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(3),r=n.n(i);function o(t){var e=function(t){void 0===t&&(t=null);var e=r.a.useState(t),n=e[0],i=e[1],o=r.a.useRef({current:n}).current;return Object.defineProperty(o,"current",{get:function(){return n},set:function(t){Object.is(n,t)||(n=t,i(t))}}),o}(null);return r.a.useEffect((function(){t&&("function"==typeof t?t(e.current):t.current=e.current)})),e}},599:function(t,e,n){},600:function(t,e,n){"use strict";n.d(e,"b",(function(){return h}));var i=n(7),r=n(10),o=n(17),s=n.n(o),a=n(3),c=n.n(a),l=n(9),u=n.n(l),d=n(20),p=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],h={bsPrefix:u.a.string,fluid:u.a.bool,rounded:u.a.bool,roundedCircle:u.a.bool,thumbnail:u.a.bool},f=c.a.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,a=t.fluid,l=t.rounded,u=t.roundedCircle,h=t.thumbnail,f=Object(r.a)(t,p);n=Object(d.a)(n,"img");var v=s()(a&&n+"-fluid",l&&"rounded",u&&"rounded-circle",h&&n+"-thumbnail");return c.a.createElement("img",Object(i.a)({ref:e},f,{className:s()(o,v)}))}));f.displayName="Image",f.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1},e.a=f},603:function(t,e,n){},604:function(t,e,n){"use strict";e.a=n.p+"static/media/project_icon.6cb7f972.svg"},605:function(t,e,n){"use strict";(function(t){n(3);var i=n(21),r=n(24),o=n(30),s=n(8),a=n.n(s),c=n(12),l=n(2);function u(e){var n,r=e.history,s=e.showLti,u=e.shared,d=e.projectId,p=e.playlistId,h=e.previousResource,f=e.allPlaylists,v=Object(c.d)((function(t){return t.organization})),g=f.findIndex((function(t){return t.id===p})),m=g>0?f[g-1]:null,y="#";(h?y="/playlist/".concat(p,"/activity/").concat(h.id,"/preview"):m&&(y="/playlist/".concat(m.id,"/preview")),"#"!==y)&&(s?y+="/studio/lti":(y="/studio/org/".concat(null===(n=v.currentOrganization)||void 0===n?void 0:n.domain,"/project/").concat(d).concat(y),u&&(y+="/studio/shared")));return Object(l.jsxs)("div",{className:"slider-hover-section",children:[Object(l.jsx)(i.b,{to:y,children:Object(l.jsx)(o.a,{icon:"chevron-left"})}),Object(l.jsx)("div",{className:"hover-control-caption pointer-cursor".concat(h?"":" no-data prev"),children:h?Object(l.jsxs)(i.b,{to:y,children:[Object(l.jsx)("div",{className:"img-in-hover",style:{backgroundImage:h.thumb_url?h.thumb_url.includes("pexels.com")?"url(".concat(h.thumb_url,")"):"url(".concat(t.config.resourceUrl).concat(h.thumb_url,")"):"url(data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBw0NDQ0NDQ0NDQ0NDQ0NDg0NDQ8NDQ0NFREWFhURExMYHSggGBolGxUWITEhJSk3Li4uFx8zODMtNygtLjcBCgoKBQUFDgUFDisZExkrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIALcBEwMBIgACEQEDEQH/xAAaAAEBAQEBAQEAAAAAAAAAAAAAAgEDBAUH/8QANBABAQACAAEIBwgCAwAAAAAAAAECEQMEEiExQWFxkQUTFDJRUqEiM2JygYKxwdHhQvDx/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AP0QAAAAAAGgA0GNGgxo3QMNN0AzRpWjQJ0K0Akbo0CTTdAJGgMY0BgAAAAAAAAAAAAANCNAGgDdDQNGm6boGabpum6BOjStGgTo0rRoEaZpemWAnTNL0nQJFMBLKpNBgUAAAAAAAAAAAIEBsUyNBrWRUAbI2RsgMkVI2RsgM03TZG6BOjS9GgRo0vRoHPTNOmk2AixNjppNgIsYupoJTV1FBIUAAAAAAAAAAAIEBUUyKgCoyKgNipCRUAkVISKkBmm6duFwMsuqdHxvRHq4XIZ/yu+6f5B4Zjvqd+HyPO9f2Z39fk932OHOzH+a48Tlnyz9b/gFcPkeE6/tXv6vJw9IcLXNyk1Pdv8ASMuNnbLbei711R7uLj6zDo7ZueIPj6ZY6WJsBzsTY6WJsBzsTXSooJqK6VFBzo2sAAAAAAAAAAAIEBeKkxcBsVGRUBUXw8LeiS290duQcPDLKzOb6Nzp1H0888OFPhOySdYPFwuQZX3rMe7rr2cPkuGPZu/G9LzcTl1vuzXfemvbctY7vZN0HPiceTqxyyvdLrzefPjcS9lxndLvzd/asO/yb7Vh3+QPFzMvhl5U9Xl8t8q9vtOHf5HtOHf5A8Pq8vlvlXs5HbzdWWa6tzsV7Th3+R7Th3+QPJyng2Z3Utl6eiOF4WXy5eVfR9qw7/JXD4+OV1N76+oHyc8bOuWeM052Pf6S68fCvFQc6mrqKCKjJ0rnkCKxtYAAAAAAAAAAAQIC4uIxXAVFRMXAdODnzcplOy7/AEfX5Vhz+HddOpzo+NH1vR/E52Gu3Ho/TsB86Prcf7u/lfO4/D5udnZ1zwfR4/3d/KD52Memcly12b+DjwctZS3qlfSlmt9nxB86zXRetjpx8pcrZ1OYDHp5Lwt3nXqnV4ufG4VmWpN76YDjXbkXv/tv9OOU10V25F7/AO2/0B6S97Hwrw17vSXvY+FeGgipqqmgioyXUZA51jawAAAAAAAAAAAgQF4riIqAuKiIqAuPX6P4nNzk7Muj9ex44vGg+l6R4fRMvh0Xw/7/AC78f7u/lJZxeH+bHyv/AKco+7y/KD50VKiV6OTcHndN92fUHNfCw511590e7icLHKas8NdjODwphNdfeC8ZqajQB8/luOs9/GbOQ+/+2/078vx3jv5b9K8/IL9v9t/oG+kvex8K8Ne30n72Phf5eG0GVFVUUGVzyXUZAisbWAAAAAAAAAAAECAuKRFQFRURFQFxUrnKuUH0/RfE6MsP3T+3q5V93n4Pkcm4vMzxy7Jenw7X2crjZq2WXs3AfIxs6N9Xb2PZjy6SamGpO/8A09HqeF8uH0PVcL5cPoDj7f8Ah+p7f+H6u3quF8uH0PVcL5cPoDj7f+H6s9v/AAfX/Tv6rhfLh9D1XC+XD6A83E5bMsbOZ1zXX/pHo/7z9t/mPZ6nhfLh9G4YcPG7kxl+M0Dx+lPex8L/AC8Fr2+lbOdjq9l/l4LQZU1tTQZUVVTQTWNrAAAAAAAAAAACBAVGpigbFbQ0FytlRFbBcrZUSt2DpK3bntuwXs2jbdgrZanbNgrbLU7ZaDbWWs2zYNtTaMAqKpNBNCgAAAAAAAAAAAANjWANawBTdpaCtt2jbQXs2nZsF7No23YK2zbNs2Cts2zbNg3bKMA2wYDU1rKDKAAAAAAAAAAAAAA1gDRjQaMAUMAVs2wBu27SArbNsAbsYwGjAAYAAwAAAAAAAAAAAAAAAAAABu2ANAAawBoAAwBrAAAAYAAAAAAAAAAAP//Z)"}}),Object(l.jsx)("span",{children:h.title})]}):Object(l.jsxs)("div",{className:"slider-end",children:[Object(l.jsx)("p",{children:"Welcome! You are at the beginning of this playlist."}),Object(l.jsxs)(i.b,{to:y,onClick:function(){m||a.a.fire({text:"You are at the beginning of this project. Would you like to return to the project preview?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(t){var e;t.value&&(s?r.push("/studio/project/".concat(d,"/shared")):r.push("/studio/org/".concat(null===(e=v.currentOrganization)||void 0===e?void 0:e.domain,"/project/").concat(d,"/preview")))}))},children:[Object(l.jsx)(o.a,{icon:"chevron-left",className:"mr-2"}),"Switch to previous playlist"]})]})})]})}u.defaultProps={showLti:!1,shared:!1,projectId:null,previousResource:null,allPlaylists:[]},e.a=Object(r.h)(u)}).call(this,n(36))},606:function(t,e,n){"use strict";(function(t){n(3);var i=n(21),r=n(24),o=n(30),s=n(8),a=n.n(s),c=n(12),l=n(2);function u(e){var n,r=e.history,s=e.showLti,u=e.shared,d=e.projectId,p=e.playlistId,h=e.nextResource,f=e.allPlaylists,v=f.findIndex((function(t){return t.id===p})),g=v<f.length-1?f[v+1]:null,m=Object(c.d)((function(t){return t.organization})),y="#";(h?y="/playlist/".concat(p,"/activity/").concat(h.id,"/preview"):g&&(y="/playlist/".concat(g.id,"/preview")),"#"!==y)&&(s?y+="/studio/lti":(y="/studio/org/".concat(null===(n=m.currentOrganization)||void 0===n?void 0:n.domain,"/project/").concat(d).concat(y),u&&(y+="/studio/shared")));return Object(l.jsxs)("div",{className:"slider-hover-section",children:[Object(l.jsx)(i.b,{to:y,children:Object(l.jsx)(o.a,{icon:"chevron-right"})}),Object(l.jsx)("div",{className:"hover-control-caption pointer-cursor".concat(h?"":" no-data"),children:h?Object(l.jsxs)(i.b,{to:y,children:[Object(l.jsx)("div",{className:"img-in-hover",style:{backgroundImage:h.thumb_url?h.thumb_url.includes("pexels.com")?"url(".concat(h.thumb_url,")"):"url(".concat(t.config.resourceUrl).concat(h.thumb_url,")"):"url(data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBw0NDQ0NDQ0NDQ0NDQ0NDg0NDQ8NDQ0NFREWFhURExMYHSggGBolGxUWITEhJSk3Li4uFx8zODMtNygtLjcBCgoKBQUFDgUFDisZExkrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIALcBEwMBIgACEQEDEQH/xAAaAAEBAQEBAQEAAAAAAAAAAAAAAgEDBAUH/8QANBABAQACAAEIBwgCAwAAAAAAAAECEQMEEiExQWFxkQUTFDJRUqEiM2JygYKxwdHhQvDx/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AP0QAAAAAAGgA0GNGgxo3QMNN0AzRpWjQJ0K0Akbo0CTTdAJGgMY0BgAAAAAAAAAAAAANCNAGgDdDQNGm6boGabpum6BOjStGgTo0rRoEaZpemWAnTNL0nQJFMBLKpNBgUAAAAAAAAAAAIEBsUyNBrWRUAbI2RsgMkVI2RsgM03TZG6BOjS9GgRo0vRoHPTNOmk2AixNjppNgIsYupoJTV1FBIUAAAAAAAAAAAIEBUUyKgCoyKgNipCRUAkVISKkBmm6duFwMsuqdHxvRHq4XIZ/yu+6f5B4Zjvqd+HyPO9f2Z39fk932OHOzH+a48Tlnyz9b/gFcPkeE6/tXv6vJw9IcLXNyk1Pdv8ASMuNnbLbei711R7uLj6zDo7ZueIPj6ZY6WJsBzsTY6WJsBzsTXSooJqK6VFBzo2sAAAAAAAAAAAIEBeKkxcBsVGRUBUXw8LeiS290duQcPDLKzOb6Nzp1H0888OFPhOySdYPFwuQZX3rMe7rr2cPkuGPZu/G9LzcTl1vuzXfemvbctY7vZN0HPiceTqxyyvdLrzefPjcS9lxndLvzd/asO/yb7Vh3+QPFzMvhl5U9Xl8t8q9vtOHf5HtOHf5A8Pq8vlvlXs5HbzdWWa6tzsV7Th3+R7Th3+QPJyng2Z3Utl6eiOF4WXy5eVfR9qw7/JXD4+OV1N76+oHyc8bOuWeM052Pf6S68fCvFQc6mrqKCKjJ0rnkCKxtYAAAAAAAAAAAQIC4uIxXAVFRMXAdODnzcplOy7/AEfX5Vhz+HddOpzo+NH1vR/E52Gu3Ho/TsB86Prcf7u/lfO4/D5udnZ1zwfR4/3d/KD52Memcly12b+DjwctZS3qlfSlmt9nxB86zXRetjpx8pcrZ1OYDHp5Lwt3nXqnV4ufG4VmWpN76YDjXbkXv/tv9OOU10V25F7/AO2/0B6S97Hwrw17vSXvY+FeGgipqqmgioyXUZA51jawAAAAAAAAAAAgQF4riIqAuKiIqAuPX6P4nNzk7Muj9ex44vGg+l6R4fRMvh0Xw/7/AC78f7u/lJZxeH+bHyv/AKco+7y/KD50VKiV6OTcHndN92fUHNfCw511590e7icLHKas8NdjODwphNdfeC8ZqajQB8/luOs9/GbOQ+/+2/078vx3jv5b9K8/IL9v9t/oG+kvex8K8Ne30n72Phf5eG0GVFVUUGVzyXUZAisbWAAAAAAAAAAAECAuKRFQFRURFQFxUrnKuUH0/RfE6MsP3T+3q5V93n4Pkcm4vMzxy7Jenw7X2crjZq2WXs3AfIxs6N9Xb2PZjy6SamGpO/8A09HqeF8uH0PVcL5cPoDj7f8Ah+p7f+H6u3quF8uH0PVcL5cPoDj7f+H6s9v/AAfX/Tv6rhfLh9D1XC+XD6A83E5bMsbOZ1zXX/pHo/7z9t/mPZ6nhfLh9G4YcPG7kxl+M0Dx+lPex8L/AC8Fr2+lbOdjq9l/l4LQZU1tTQZUVVTQTWNrAAAAAAAAAAACBAVGpigbFbQ0FytlRFbBcrZUSt2DpK3bntuwXs2jbdgrZanbNgrbLU7ZaDbWWs2zYNtTaMAqKpNBNCgAAAAAAAAAAAANjWANawBTdpaCtt2jbQXs2nZsF7No23YK2zbNs2Cts2zbNg3bKMA2wYDU1rKDKAAAAAAAAAAAAAA1gDRjQaMAUMAVs2wBu27SArbNsAbsYwGjAAYAAwAAAAAAAAAAAAAAAAAABu2ANAAawBoAAwBrAAAAYAAAAAAAAAAAP//Z)"}}),Object(l.jsx)("span",{children:h.title})]}):Object(l.jsxs)("div",{className:"slider-end",children:[Object(l.jsx)("p",{children:"Hooray! You did it! There are no more activities in this playlist."}),Object(l.jsxs)(i.b,{to:y,onClick:function(){g||a.a.fire({text:"You are at the end of this project. Would you like to return to the project preview?",showCancelButton:!0,confirmButtonColor:"#4646c4",cancelButtonColor:"#d33",cancelButtonText:"No",confirmButtonText:"Yes"}).then((function(t){var e;t.value&&(s?r.push("/studio/project/".concat(d,"/shared")):r.push("/studio/org/".concat(null===(e=m.currentOrganization)||void 0===e?void 0:e.domain,"/project/").concat(d,"/preview")))}))},children:["Switch to next playlist",Object(l.jsx)(o.a,{icon:"chevron-right",className:"ml-2"})]})]})})]})}u.defaultProps={showLti:!1,shared:!1,projectId:null,nextResource:null,allPlaylists:[]},e.a=Object(r.h)(u)}).call(this,n(36))},607:function(t,e,n){},634:function(t,e,n){"use strict";var i=n(4),r=n.n(i),o=n(6),s=n(27),a=n(3),c=n(21),l=n(12),u=n(30),d=n(39),p=n(8),h=n.n(p),f=n(392),v=n(82),g=n(80),m=n(133),y=n(148),b=(n(599),n(600)),j=n(2),O=function(t){var e,n,i,p,b,O,x,A,w,S,k,N=t.project,_=t.handleShow,T=t.setProjectId,P=t.showDeletePopup,C=t.teamPermission,I=t.previewMode,R=t.text,E=Object(l.d)((function(t){return t.organization})),H=E.permission,B=Object(l.c)(),L=Object(l.d)((function(t){return t.share})),D=Object(a.useState)([]),U=Object(s.a)(D,2),M=U[0],J=U[1];return Object(a.useEffect)((function(){J(L)}),[L]),Object(j.jsxs)(d.a,{className:"project-dropdown check d-flex  align-items-center text-added-project-dropdown",children:[Object(j.jsxs)(d.a.Toggle,{className:"project-dropdown-btn project d-flex justify-content-center align-items-center",children:[Object(j.jsx)(u.a,{icon:"ellipsis-v",style:{fontSize:"13px",color:"#084892",marginLeft:"5px"}}),Object(j.jsx)("span",{children:R})]}),Object(j.jsxs)(d.a.Menu,{children:[!I&&Object(j.jsxs)(d.a.Item,{as:c.b,to:"/studio/org/".concat(null===(e=E.currentOrganization)||void 0===e?void 0:e.domain,"/project/").concat(N.id,"/preview"),children:[Object(j.jsx)(u.a,{icon:"eye",className:"mr-2"}),"Preview"]}),(C&&Object.keys(C).length?null===C||void 0===C||null===(n=C.Team)||void 0===n?void 0:n.includes("team:edit-project"):null===H||void 0===H||null===(i=H.Project)||void 0===i?void 0:i.includes("project:edit"))&&Object(j.jsxs)(d.a.Item,{as:c.b,to:"/studio/org/".concat(null===(p=E.currentOrganization)||void 0===p?void 0:p.domain,"/project/").concat(N.id,"/edit"),children:[Object(j.jsx)(u.a,{icon:"pen",className:"mr-2"}),"Edit"]}),(null===H||void 0===H||null===(b=H.Project)||void 0===b?void 0:b.includes("project:clone"))&&Object(j.jsxs)(d.a.Item,{to:"#",onClick:function(){h.a.showLoading(),Object(v.d)(N.id)},children:[Object(j.jsx)(u.a,{icon:"clone",className:"mr-2"}),"Duplicate"]}),(C&&Object.keys(C).length?null===C||void 0===C||null===(O=C.Team)||void 0===O?void 0:O.includes("team:share-project"):null===H||void 0===H||null===(x=H.Project)||void 0===x?void 0:x.includes("project:share"))&&Object(j.jsxs)(d.a.Item,{to:"#",onClick:Object(o.a)(r.a.mark((function t(){var e,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e="".concat(window.location.href.split("/")[0],"//"),n="".concat(e+window.location.host,"/studio/project/").concat(N.id,"/shared"),N.shared){t.next=10;break}return h.a.showLoading(),t.next=6,B(Object(g.v)(N.id,N.name));case 6:h.a.close(),Object(y.a)(n,N.name),t.next=11;break;case 10:Object(y.a)(n,N.name);case 11:case"end":return t.stop()}}),t)}))),children:[Object(j.jsx)(u.a,{icon:"share",className:"mr-2"}),"Share"]}),(C&&Object.keys(C).length?null===C||void 0===C||null===(A=C.Team)||void 0===A?void 0:A.includes("team:publish-project"):null===H||void 0===H||null===(w=H.Project)||void 0===w?void 0:w.includes("project:publish"))&&Object(j.jsxs)("li",{className:"dropdown-submenu send",children:[Object(j.jsxs)("a",{tabIndex:"-1",children:[Object(j.jsx)(u.a,{icon:"newspaper",className:"mr-2"}),"Publish"]}),Object(j.jsxs)("ul",{className:"dropdown-menu check",children:[Object(j.jsx)("li",{onClick:function(){_(),Object(f.b)(N.id),T(t.project.id),B(Object(f.h)(!1))},children:Object(j.jsx)("a",{children:"Google Classroom"})}),M.shareVendors&&M.shareVendors.map((function(t){return"safarimontage"!==t.lms_name&&Object(j.jsx)("li",{children:Object(j.jsx)("a",{onClick:Object(o.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(Object(m.g)(N.id));case 2:(n=e.sent)&&B(Object(g.h)(t.lms_name.toLowerCase(),t.id,N.id,n.playlists,t.lms_url));case 4:case"end":return e.stop()}}),e)}))),children:t.site_name})})}))]})]}),(C&&Object.keys(C).length?null===C||void 0===C||null===(S=C.Team)||void 0===S?void 0:S.includes("team:remove-project"):null===H||void 0===H||null===(k=H.Project)||void 0===k?void 0:k.includes("project:delete"))&&Object(j.jsxs)(d.a.Item,{to:"#",onClick:function(){return P(N.id,N.name,"Project")},children:[Object(j.jsx)(u.a,{icon:"times-circle",className:"mr-2"}),"Delete"]})]})]})};O.defaultProps={text:b.b.text},e.a=O},642:function(t,e,n){"use strict";var i=n(136),r=n(137),o=n(139),s=n(138),a=n(3),c=n.n(a),l=n(12),u=n(21),d=n(24),p=n(8),h=n.n(p),f=n(30),v=n(39),g=n(585),m=n(572),y=n(133),b=n(458),j=n(82),O=(n(603),n(2)),x=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(t=e.call.apply(e,[this].concat(o))).handleDelete=function(e){e.preventDefault();var n=t.props,i=n.playlist;(0,n.showDeletePopup)(i.id,i.title,"Playlist")},t}return Object(r.a)(n,[{key:"render",value:function(){var t,e,n,i,r,o,s,a,c,l,d,p,y,b,x=this.props,A=x.playlist,w=x.handleClickPlaylistTitle,S=x.setSelectedForEdit,k=x.organization,N=x.teamPermission,_=k.permission;return Object(O.jsxs)(v.a,{className:"pull-right playlist-dropdown check",children:[Object(O.jsx)(v.a.Toggle,{className:"playlist-dropdown-btn",children:Object(O.jsx)(f.a,{icon:"ellipsis-v"})}),Object(O.jsxs)(v.a.Menu,{children:[(Object.keys(N).length?null===N||void 0===N||null===(t=N.Team)||void 0===t?void 0:t.includes("team:view-playlist"):(null===_||void 0===_||null===(e=_.Playlist)||void 0===e?void 0:e.includes("playlist:view"))&&(null===_||void 0===_||null===(n=_.Activity)||void 0===n?void 0:n.includes("activity:view")))&&Object(O.jsxs)(v.a.Item,{as:u.b,className:"hidden",to:"/studio/org/".concat(null===(i=k.currentOrganization)||void 0===i?void 0:i.domain,"/project/").concat(A.project_id,"/playlist/").concat(A.id,"/activity/").concat(null===A||void 0===A||null===(r=A.activities[0])||void 0===r?void 0:r.id,"/preview"),children:[Object(O.jsx)(f.a,{icon:"eye",className:"mr-2"}),"Preview"]}),(Object.keys(N).length?null===N||void 0===N||null===(o=N.Team)||void 0===o?void 0:o.includes("team:edit-playlist"):null===_||void 0===_||null===(s=_.Playlist)||void 0===s?void 0:s.includes("playlist:edit"))&&Object(O.jsxs)(v.a.Item,{onClick:function(){w(),S&&S(A)},children:[Object(O.jsx)(f.a,{icon:"edit",className:"mr-2"}),"Edit"]}),(null===_||void 0===_||null===(a=_.Playlist)||void 0===a?void 0:a.includes("playlist:duplicate"))&&Object(O.jsxs)(v.a.Item,{to:"#",onClick:function(){h.a.showLoading(),Object(j.c)(A.project_id,A.id)},children:[Object(O.jsx)(f.a,{icon:"clone",className:"mr-2"}),"Duplicate"]}),(Object.keys(N).length?null===N||void 0===N||null===(c=N.Team)||void 0===c?void 0:c.includes("team:share-playlist"):null===_||void 0===_||null===(l=_.Playlist)||void 0===l?void 0:l.includes("playlist:share"))&&(A.activities.length>0?Object(O.jsx)(m.a,{resource:A.activities[0]}):Object(O.jsxs)(v.a.Item,{to:"#",onClick:function(){h.a.fire("Kindly add Activity First.")},children:[Object(O.jsx)(f.a,{icon:"share",className:"mr-2"}),"Share"]})),(Object.keys(N).length?null===N||void 0===N||null===(d=N.Team)||void 0===d?void 0:d.includes("team:publish-playlist"):null===_||void 0===_||null===(p=_.Playlist)||void 0===p?void 0:p.includes("playlist:publish"))&&Object(O.jsx)(g.a,{playlistId:A.id,projectId:A.project_id}),(Object.keys(N).length?null===N||void 0===N||null===(y=N.Team)||void 0===y?void 0:y.includes("team:delete-playlist"):null===_||void 0===_||null===(b=_.Playlist)||void 0===b?void 0:b.includes("playlist:delete"))&&Object(O.jsxs)(v.a.Item,{onClick:this.handleDelete,children:[Object(O.jsx)(f.a,{icon:"times-circle",className:"mr-2"}),"Delete"]})]})]})}}]),n}(c.a.Component);e.a=Object(d.h)(Object(l.b)((function(t){return{organization:t.organization}}),(function(t){return{deletePlaylist:function(e,n){return t(Object(y.e)(e,n))},showDeletePopup:function(e,n,i){return t(Object(b.c)(e,n,i))},hideDeletePopup:function(){return t(Object(b.b)())},changePlaylistTitle:function(e,n,i){return t(Object(y.b)(e,n,i))}}}))(x))},643:function(t,e,n){"use strict";n(3);var i=n(644),r=n(2);function o(t){var e=t.showLti,n=t.shared,o=t.projectId,s=t.playlistId,a=t.activities,c=t.playlist,l=t.teamPermission;return 0===a.length?Object(r.jsx)("div",{className:"col-md-12",children:Object(r.jsx)("div",{className:"alert alert-info",role:"alert",children:"No activity defined for this playlist."})}):a.map((function(t){return Object(r.jsx)(i.a,{showLti:e,shared:n,projectId:o,playlistId:s,activity:t,playlist:c,teamPermission:l||{}},t.id)}))}o.defaultProps={showLti:!1,shared:!1,projectId:null,activities:[]},e.a=o},644:function(t,e,n){"use strict";(function(t){n(3);var i=n(21),r=n(645),o=(n(607),n(12)),s=n(2),a=function(e){var n,a=e.showLti,c=e.shared,l=e.activity,u=e.projectId,d=e.playlistId,p=e.playlist,h=e.teamPermission,f=Object(o.d)((function(t){return t.organization}));return Object(s.jsxs)("div",{className:"preview-activity-dropdown",children:[Object(s.jsx)(i.b,{to:c?"/project/".concat(u,"/playlist/").concat(d,"/activity/").concat(l.id,"/preview/shared"):a?"/playlist/".concat(d,"/activity/").concat(l.id,"/preview/lti"):"/studio/org/".concat(null===(n=f.currentOrganization)||void 0===n?void 0:n.domain,"/project/").concat(u,"/playlist/").concat(d,"/activity/").concat(l.id,"/preview"),children:Object(s.jsxs)("li",{className:"check",children:[l.thumb_url&&Object(s.jsx)("div",{className:"bg-thumbnail",style:{backgroundImage:l.thumb_url.includes("pexels.com")?"url(".concat(l.thumb_url,")"):"url(".concat(t.config.resourceUrl).concat(l.thumb_url,")")}}),Object(s.jsx)("div",{children:Object(s.jsx)("div",{className:"title",children:l.title})})]})}),!a&&Object(s.jsx)(r.a,{resource:l,playlist:p,teamPermission:h||{}})]})};a.defaultProps={showLti:!1,shared:!1,projectId:null},e.a=a}).call(this,n(36))},645:function(t,e,n){"use strict";n(3);var i=n(12),r=n(21),o=n(24),s=n(8),a=n.n(s),c=n(30),l=n(39),u=n(72),d=n(82),p=n(572),h=(n(459),n(2));e.a=Object(o.h)(Object(i.b)(null,(function(t){return{deleteResource:function(e,n){return t(Object(u.g)(e,n))}}}))((function(t){var e,n,o,s,u,f,v,g,m,y,b,j=t.resource,O=t.deleteResource,x=t.playlist,A=t.match,w=t.teamPermission,S=Object(i.d)((function(t){return t.organization})),k=S.permission;return Object(h.jsxs)(l.a,{className:"pull-right resource-dropdown check",children:[Object(h.jsx)(l.a.Toggle,{className:"resource-dropdown-btn",children:Object(h.jsx)(c.a,{icon:"ellipsis-v"})}),Object(h.jsxs)(l.a.Menu,{children:[(Object.keys(w).length?null===w||void 0===w||null===(e=w.Team)||void 0===e?void 0:e.includes("team:view-activity"):null===k||void 0===k||null===(n=k.Activity)||void 0===n?void 0:n.includes("activity:view"))&&Object(h.jsxs)(l.a.Item,{as:r.b,to:"/studio/org/".concat(null===(o=S.currentOrganization)||void 0===o?void 0:o.domain,"/project/").concat(A.params.projectId,"/playlist/").concat(x.id,"/activity/").concat(j.id,"/preview"),children:[Object(h.jsx)(c.a,{icon:"eye",className:"mr-2"}),"Preview"]}),(Object.keys(w).length?null===w||void 0===w||null===(s=w.Team)||void 0===s?void 0:s.includes("team:edit-activity"):null===k||void 0===k||null===(u=k.Activity)||void 0===u?void 0:u.includes("activity:edit"))&&Object(h.jsxs)(l.a.Item,{as:r.b,to:"/studio/org/".concat(null===(f=S.currentOrganization)||void 0===f?void 0:f.domain,"/project/").concat(A.params.projectId,"/playlist/").concat(x.id,"/activity/").concat(j.id,"/edit"),children:[Object(h.jsx)(c.a,{icon:"pen",className:"mr-2"}),"Edit"]}),(null===k||void 0===k||null===(v=k.Activity)||void 0===v?void 0:v.includes("activity:duplicate"))&&Object(h.jsxs)(l.a.Item,{to:"#",onClick:function(){a.a.showLoading(),Object(d.b)(x.id,j.id)},children:[Object(h.jsx)(c.a,{icon:"clone",className:"mr-2"}),"Duplicate"]}),(Object.keys(w).length?null===w||void 0===w||null===(g=w.Team)||void 0===g?void 0:g.includes("team:share-activity"):null===k||void 0===k||null===(m=k.Activity)||void 0===m?void 0:m.includes("activity:share"))&&Object(h.jsx)(p.a,{resource:j}),(Object.keys(w).length?null===w||void 0===w||null===(y=w.Team)||void 0===y?void 0:y.includes("team:delete-activity"):null===k||void 0===k||null===(b=k.Activity)||void 0===b?void 0:b.includes("activity:delete"))&&Object(h.jsxs)(l.a.Item,{onClick:function(t){t.preventDefault(),a.a.fire({title:"Are you sure you want to delete this activity?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then((function(t){t.isConfirmed&&O(j.id,x.id)}))},children:[Object(h.jsx)(c.a,{icon:"times-circle",className:"mr-2"}),"Delete"]})]})]})})))},646:function(t,e,n){"use strict";var i=n(0),r=n(4),o=n.n(r),s=n(6),a=n(27),c=n(3),l=n(24),u=n(149),d=n(12),p=n(647),h=n.n(p),f=n(134),v=n(72),g=n(411),m=(n(573),n(2)),y=1,b=null;e.a=Object(l.h)((function(t){var e=t.match,n=t.embed,r=new URLSearchParams(window.location.search).get("endpoint"),l=new URLSearchParams(window.location.search).get("auth"),p=new URLSearchParams(window.location.search).get("registration"),j=Object(c.useState)(!1),O=Object(a.a)(j,2),x=O[0],A=O[1],w=Object(d.c)(),S=function(){var t=Object(s.a)(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.H5PIntegration=e.h5p.settings,document.getElementById("curriki-h5p-wrapper").innerHTML=e.h5p.embed_code.trim(),n=e.h5p.settings.core.styles.concat(e.h5p.settings.loadedCss),t.next=6,Promise.all(n.map((function(t){var e=document.createElement("link");return e.href=t,e.type="text/css",e.rel="stylesheet",document.head.appendChild(e),!0})));case 6:e.h5p.settings.core.scripts.concat(e.h5p.settings.loadedJs).forEach((function(t){var e=document.createElement("script");e.src=t,e.async=!1,document.body.appendChild(e)}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){(r||l||null!==b)&&(b=new h.a.LRS({endpoint:r,auth:l,allowFail:!0}))}),[r,l]),Object(c.useEffect)((function(){if(window.scrollTo(0,0),e.params.activityId){n?Object(v.q)(e.params.activityId).then(function(){var t=Object(s.a)(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n={}).h5p=e,S(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){A(!0)})):Object(v.s)(e.params.activityId).then(function(){var t=Object(s.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:S(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){A(!0)}));var r=setInterval((function(){try{var n=document.getElementsByClassName("h5p-iframe")[0].contentWindow;n.H5P&&n.H5P.externalDispatcher&&g.c(t.match.path)&&(a(),n.H5P.externalDispatcher.on("xAPI",(function(t){if(y>0){var n=g.a(undefined,t.data.statement,{path:e.path,activityId:e.params.activityId});if(w(Object(v.t)(JSON.stringify(n))),b){var r=new h.a.Statement({actor:Object(i.a)(Object(i.a)({},n.actor),{},{mbox:"mailto:info@currikistudio.org"}),verb:n.verb,context:Object(i.a)(Object(i.a)({},n.context),{},{registration:p}),object:n.object});b.saveStatement(r,{callback:function(t,e){if(null!==t)return null!==e?void console.log("Failed to save statement: ".concat(e.responseText," (").concat(e.status,")")):void console.log("Failed to save statement: ".concat(t));console.log("Statement saved")}})}}y+=1})))}catch(r){console.log(r)}})),a=function(){return clearInterval(r)}}}),[w,n,e.params.activityId]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("section",{className:n?"embed main-page-content preview iframe-height-resource-shared defaultcontainer":"main-page-content preview iframe-height-resource-shared defaultcontainer",children:[!!n&&Object(m.jsx)(u.a,{children:Object(m.jsx)("script",{src:"https://dev.currikistudio.org/api/storage/h5p/h5p-core/js/h5p-resizer.js",charset:"UTF-8"})}),Object(m.jsx)("div",{className:"flex-container previews",children:Object(m.jsx)("div",{className:"activity-bg left-vdo",children:Object(m.jsx)("div",{className:"main-item-wrapper desktop-view",children:Object(m.jsx)("div",{className:"item-container",children:x?Object(m.jsx)("div",{id:"curriki-h5p-wrapper",children:Object(m.jsx)("div",{className:"loader_gif",style:{color:"black"},children:"Activity is not sharable"})}):Object(m.jsx)("div",{id:"curriki-h5p-wrapper",children:Object(m.jsx)("div",{className:"loader_gif",children:Object(m.jsx)("img",{style:{width:"50px"},src:f.a,alt:""})})})})})})})]})})}))},647:function(t,e,n){(function(e){var i=i||function(t,e){var n={},i=n.lib={},r=function(){},o=i.Base={extend:function(t){r.prototype=this;var e=new r;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=undefined!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes;if(t=t.sigBytes,this.clamp(),i%4)for(var r=0;r<t;r++)e[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n.length)for(r=0;r<t;r+=4)e[i+r>>>2]=n[r>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],i=0;i<e;i+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++){var r=e[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new s.init(n,e/2)}},l=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++)n.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new s.init(n,e)}},u=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,a=r/(4*o);if(e=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,r=t.min(4*e,r),e){for(var c=0;c<e;c+=o)this._doProcessBlock(i,c);c=i.splice(0,e),n.sigBytes-=r}return new s.init(c,r)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=d.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=n.algo={};return n}(Math);!function(){var t=i,e=(o=t.lib).WordArray,n=o.Hasher,r=[],o=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],o=n[1],s=n[2],a=n[3],c=n[4],l=0;80>l;l++){if(16>l)r[l]=0|t[e+l];else{var u=r[l-3]^r[l-8]^r[l-14]^r[l-16];r[l]=u<<1|u>>>31}u=(i<<5|i>>>27)+c+r[l],u=20>l?u+(1518500249+(o&s|~o&a)):40>l?u+(1859775393+(o^s^a)):60>l?u+((o&s|o&a|s&a)-1894007588):u+((o^s^a)-899497514),c=a,a=s,s=o<<30|o>>>2,o=i,i=u}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=n._createHelper(o),t.HmacSHA1=n._createHmacHelper(o)}();var r;i=i||function(t,e){var n={},i=n.lib={},r=function(){},o=i.Base={extend:function(t){r.prototype=this;var e=new r;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=undefined!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes;if(t=t.sigBytes,this.clamp(),i%4)for(var r=0;r<t;r++)e[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n.length)for(r=0;r<t;r+=4)e[i+r>>>2]=n[r>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],i=0;i<e;i+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++){var r=e[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new s.init(n,e/2)}},l=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],i=0;i<t;i++)n.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new s.init(n,e)}},u=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,a=r/(4*o);if(e=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,r=t.min(4*e,r),e){for(var c=0;c<e;c+=o)this._doProcessBlock(i,c);c=i.splice(0,e),n.sigBytes-=r}return new s.init(c,r)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});i.Hasher=d.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=n.algo={};return n}(Math);!function(t){for(var e=i,n=(o=e.lib).WordArray,r=o.Hasher,o=e.algo,s=[],a=[],c=function(t){return 4294967296*(t-(0|t))|0},l=2,u=0;64>u;){var d;t:{d=l;for(var p=t.sqrt(d),h=2;h<=p;h++)if(!(d%h)){d=!1;break t}d=!0}d&&(8>u&&(s[u]=c(t.pow(l,.5))),a[u]=c(t.pow(l,1/3)),u++),l++}var f=[];o=o.SHA256=r.extend({_doReset:function(){this._hash=new n.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],c=n[4],l=n[5],u=n[6],d=n[7],p=0;64>p;p++){if(16>p)f[p]=0|t[e+p];else{var h=f[p-15],v=f[p-2];f[p]=((h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3)+f[p-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+f[p-16]}h=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&u)+a[p]+f[p],v=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&r^i&o^r&o),d=u,u=l,l=c,c=s+h|0,s=o,o=r,r=i,i=h+v|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+d|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=r._createHelper(o),e.HmacSHA256=r._createHmacHelper(o)}(Math),function(){var t=i,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],o=0;o<n;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)r.push(i.charAt(s>>>6*(3-a)&63));var c=i.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(t){var n=t.length,i=this._map,r=i.charAt(64);if(r){var o=t.indexOf(r);-1!=o&&(n=o)}for(var s=[],a=0,c=0;c<n;c++)if(c%4){var l=i.indexOf(t.charAt(c-1))<<c%4*2,u=i.indexOf(t.charAt(c))>>>6-c%4*2;s[a>>>2]|=(l|u)<<24-a%4*8,a++}return e.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(){if("function"==typeof ArrayBuffer){var t=i.lib.WordArray,e=t.init,n=t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,i=[],r=0;r<n;r++)i[r>>>2]|=t[r]<<24-r%4*8;e.call(this,i,n)}else e.apply(this,arguments)};n.prototype=t}}(),function(){"use strict";var e={statementId:!0,voidedStatementId:!0,verb:!0,object:!0,registration:!0,context:!0,actor:!0,since:!0,until:!0,limit:!0,authoritative:!0,sparse:!0,instructor:!0,ascending:!0,continueToken:!0,agent:!0,activityId:!0,stateId:!0,profileId:!0,activity_platform:!0,grouping:!0,"Accept-Language":!0};(r=function(t){this.log("constructor"),this.recordStores=[],this.actor=null,this.activity=null,this.registration=null,this.context=null,this.init(t)}).prototype={LOG_SRC:"TinCan",log:function(t,e){r.DEBUG&&"undefined"!==typeof console&&console.log&&(e=e||this.LOG_SRC||"TinCan",console.log("TinCan."+e+": "+t))},init:function(t){var e;if(this.log("init"),(t=t||{}).hasOwnProperty("url")&&""!==t.url&&this._initFromQueryString(t.url),t.hasOwnProperty("recordStores")&&void 0!==t.recordStores)for(e=0;e<t.recordStores.length;e+=1)this.addRecordStore(t.recordStores[e]);t.hasOwnProperty("activity")&&(t.activity instanceof r.Activity?this.activity=t.activity:this.activity=new r.Activity(t.activity)),t.hasOwnProperty("actor")&&(t.actor instanceof r.Agent?this.actor=t.actor:this.actor=new r.Agent(t.actor)),t.hasOwnProperty("context")&&(t.context instanceof r.Context?this.context=t.context:this.context=new r.Context(t.context)),t.hasOwnProperty("registration")&&(this.registration=t.registration)},_initFromQueryString:function(t){this.log("_initFromQueryString");var n,i,o,s=r.Utils.parseURL(t).params,a=["endpoint","auth"],c={},l=null;if(s.hasOwnProperty("actor")){this.log("_initFromQueryString - found actor: "+s.actor);try{this.actor=r.Agent.fromJSON(s.actor),delete s.actor}catch(u){this.log("_initFromQueryString - failed to set actor: "+u)}}if(s.hasOwnProperty("activity_id")&&(this.activity=new r.Activity({id:s.activity_id}),delete s.activity_id),(s.hasOwnProperty("activity_platform")||s.hasOwnProperty("registration")||s.hasOwnProperty("grouping"))&&(o={},s.hasOwnProperty("activity_platform")&&(o.platform=s.activity_platform,delete s.activity_platform),s.hasOwnProperty("registration")&&(o.registration=this.registration=s.registration,delete s.registration),s.hasOwnProperty("grouping")&&(o.contextActivities={},o.contextActivities.grouping=s.grouping,delete s.grouping),this.context=new r.Context(o)),s.hasOwnProperty("endpoint")){for(n=0;n<a.length;n+=1)i=a[n],s.hasOwnProperty(i)&&(c[i]=s[i],delete s[i]);for(n in s)s.hasOwnProperty(n)&&(e.hasOwnProperty(n)?delete s[n]:(l=l||{})[n]=s[n]);null!==l&&(c.extended=l),c.allowFail=!1,this.addRecordStore(c)}},addRecordStore:function(t){var e;this.log("addRecordStore"),e=t instanceof r.LRS?t:new r.LRS(t),this.recordStores.push(e)},prepareStatement:function(t){return this.log("prepareStatement"),t instanceof r.Statement||(t=new r.Statement(t)),null===t.actor&&null!==this.actor&&(t.actor=this.actor),null===t.target&&null!==this.activity&&(t.target=this.activity),null!==this.context&&(null===t.context?t.context=this.context:(null===t.context.registration&&(t.context.registration=this.context.registration),null===t.context.platform&&(t.context.platform=this.context.platform),null!==this.context.contextActivities&&(null===t.context.contextActivities?t.context.contextActivities=this.context.contextActivities:(null!==this.context.contextActivities.grouping&&null===t.context.contextActivities.grouping&&(t.context.contextActivities.grouping=this.context.contextActivities.grouping),null!==this.context.contextActivities.parent&&null===t.context.contextActivities.parent&&(t.context.contextActivities.parent=this.context.contextActivities.parent),null!==this.context.contextActivities.other&&null===t.context.contextActivities.other&&(t.context.contextActivities.other=this.context.contextActivities.other))))),t},sendStatement:function(t,e){this.log("sendStatement");var n,i,r,o=this,s=this.prepareStatement(t),a=this.recordStores.length,c=[],l=[];if(a>0)for("function"===typeof e&&(r=function(t,n){var i;o.log("sendStatement - callbackWrapper: "+a),a>1?(a-=1,l.push({err:t,xhr:n})):1===a?(l.push({err:t,xhr:n}),i=[l,s],e.apply(this,i)):o.log("sendStatement - unexpected record store count: "+a)}),i=0;i<a;i+=1)n=this.recordStores[i],c.push(n.saveStatement(s,{callback:r}));else this.log("[warning] sendStatement: No LRSs added yet (statement not sent)"),"function"===typeof e&&e.apply(this,[null,s]);return{statement:s,results:c}},getStatement:function(t,e,n){if(this.log("getStatement"),(n=n||{}).params=n.params||{},this.recordStores.length>0)return this.recordStores[0].retrieveStatement(t,{callback:e,params:n.params});this.log("[warning] getStatement: No LRSs added yet (statement not retrieved)")},voidStatement:function(t,e,n){this.log("voidStatement");var i,o,s,a,c,l=this,u=this.recordStores.length,d=[],p=[];if(t instanceof r.Statement&&(t=t.id),"undefined"!==typeof n.actor?o=n.actor:null!==this.actor&&(o=this.actor),s=new r.Statement({actor:o,verb:{id:"http://adlnet.gov/expapi/verbs/voided"},target:{objectType:"StatementRef",id:t}}),u>0)for("function"===typeof e&&(c=function(t,n){var i;l.log("voidStatement - callbackWrapper: "+u),u>1?(u-=1,p.push({err:t,xhr:n})):1===u?(p.push({err:t,xhr:n}),i=[p,s],e.apply(this,i)):l.log("voidStatement - unexpected record store count: "+u)}),a=0;a<u;a+=1)i=this.recordStores[a],d.push(i.saveStatement(s,{callback:c}));else this.log("[warning] voidStatement: No LRSs added yet (statement not sent)"),"function"===typeof e&&e.apply(this,[null,s]);return{statement:s,results:d}},getVoidedStatement:function(t,e){if(this.log("getVoidedStatement"),this.recordStores.length>0)return this.recordStores[0].retrieveVoidedStatement(t,{callback:e});this.log("[warning] getVoidedStatement: No LRSs added yet (statement not retrieved)")},sendStatements:function(t,e){this.log("sendStatements");var n,i,r,o=this,s=[],a=this.recordStores.length,c=[],l=[];if(0===t.length)"function"===typeof e&&e.apply(this,[null,s]);else{for(i=0;i<t.length;i+=1)s.push(this.prepareStatement(t[i]));if(a>0)for("function"===typeof e&&(r=function(t,n){var i;o.log("sendStatements - callbackWrapper: "+a),a>1?(a-=1,l.push({err:t,xhr:n})):1===a?(l.push({err:t,xhr:n}),i=[l,s],e.apply(this,i)):o.log("sendStatements - unexpected record store count: "+a)}),i=0;i<a;i+=1)n=this.recordStores[i],c.push(n.saveStatements(s,{callback:r}));else this.log("[warning] sendStatements: No LRSs added yet (statements not sent)"),"function"===typeof e&&e.apply(this,[null,s])}return{statements:s,results:c}},getStatements:function(t){this.log("getStatements");var e,n,i={};if(this.recordStores.length>0)return e=this.recordStores[0],n=(t=t||{}).params||{},t.sendActor&&null!==this.actor&&("0.9"===e.version||"0.95"===e.version?n.actor=this.actor:n.agent=this.actor),t.sendActivity&&null!==this.activity&&("0.9"===e.version||"0.95"===e.version?n.target=this.activity:n.activity=this.activity),"undefined"===typeof n.registration&&null!==this.registration&&(n.registration=this.registration),i={params:n},"undefined"!==typeof t.callback&&(i.callback=t.callback),e.queryStatements(i);this.log("[warning] getStatements: No LRSs added yet (statements not read)")},getState:function(t,e){var n,i;if(this.log("getState"),this.recordStores.length>0)return i=this.recordStores[0],n={agent:"undefined"!==typeof(e=e||{}).agent?e.agent:this.actor,activity:"undefined"!==typeof e.activity?e.activity:this.activity},"undefined"!==typeof e.registration?n.registration=e.registration:null!==this.registration&&(n.registration=this.registration),"undefined"!==typeof e.callback&&(n.callback=e.callback),i.retrieveState(t,n);this.log("[warning] getState: No LRSs added yet (state not retrieved)")},setState:function(t,e,n){var i,o;if(this.log("setState"),this.recordStores.length>0)return o=this.recordStores[0],i={agent:"undefined"!==typeof(n=n||{}).agent?n.agent:this.actor,activity:"undefined"!==typeof n.activity?n.activity:this.activity},"undefined"!==typeof n.registration?i.registration=n.registration:null!==this.registration&&(i.registration=this.registration),"undefined"!==typeof n.lastSHA1&&(i.lastSHA1=n.lastSHA1),"undefined"!==typeof n.contentType&&(i.contentType=n.contentType,"undefined"!==typeof n.overwriteJSON&&!n.overwriteJSON&&r.Utils.isApplicationJSON(n.contentType)&&(i.method="POST")),"undefined"!==typeof n.callback&&(i.callback=n.callback),o.saveState(t,e,i);this.log("[warning] setState: No LRSs added yet (state not saved)")},deleteState:function(t,e){var n,i;if(this.log("deleteState"),this.recordStores.length>0)return i=this.recordStores[0],n={agent:"undefined"!==typeof(e=e||{}).agent?e.agent:this.actor,activity:"undefined"!==typeof e.activity?e.activity:this.activity},"undefined"!==typeof e.registration?n.registration=e.registration:null!==this.registration&&(n.registration=this.registration),"undefined"!==typeof e.callback&&(n.callback=e.callback),i.dropState(t,n);this.log("[warning] deleteState: No LRSs added yet (state not deleted)")},getActivityProfile:function(t,e){var n,i;if(this.log("getActivityProfile"),this.recordStores.length>0)return i=this.recordStores[0],n={activity:"undefined"!==typeof(e=e||{}).activity?e.activity:this.activity},"undefined"!==typeof e.callback&&(n.callback=e.callback),i.retrieveActivityProfile(t,n);this.log("[warning] getActivityProfile: No LRSs added yet (activity profile not retrieved)")},setActivityProfile:function(t,e,n){var i,o;if(this.log("setActivityProfile"),this.recordStores.length>0)return o=this.recordStores[0],i={activity:"undefined"!==typeof(n=n||{}).activity?n.activity:this.activity},"undefined"!==typeof n.callback&&(i.callback=n.callback),"undefined"!==typeof n.lastSHA1&&(i.lastSHA1=n.lastSHA1),"undefined"!==typeof n.contentType&&(i.contentType=n.contentType,"undefined"!==typeof n.overwriteJSON&&!n.overwriteJSON&&r.Utils.isApplicationJSON(n.contentType)&&(i.method="POST")),o.saveActivityProfile(t,e,i);this.log("[warning] setActivityProfile: No LRSs added yet (activity profile not saved)")},deleteActivityProfile:function(t,e){var n,i;if(this.log("deleteActivityProfile"),this.recordStores.length>0)return i=this.recordStores[0],n={activity:"undefined"!==typeof(e=e||{}).activity?e.activity:this.activity},"undefined"!==typeof e.callback&&(n.callback=e.callback),i.dropActivityProfile(t,n);this.log("[warning] deleteActivityProfile: No LRSs added yet (activity profile not deleted)")},getAgentProfile:function(t,e){var n,i;if(this.log("getAgentProfile"),this.recordStores.length>0)return i=this.recordStores[0],n={agent:"undefined"!==typeof(e=e||{}).agent?e.agent:this.actor},"undefined"!==typeof e.callback&&(n.callback=e.callback),i.retrieveAgentProfile(t,n);this.log("[warning] getAgentProfile: No LRSs added yet (agent profile not retrieved)")},setAgentProfile:function(t,e,n){var i,o;if(this.log("setAgentProfile"),this.recordStores.length>0)return o=this.recordStores[0],i={agent:"undefined"!==typeof(n=n||{}).agent?n.agent:this.actor},"undefined"!==typeof n.callback&&(i.callback=n.callback),"undefined"!==typeof n.lastSHA1&&(i.lastSHA1=n.lastSHA1),"undefined"!==typeof n.contentType&&(i.contentType=n.contentType,"undefined"!==typeof n.overwriteJSON&&!n.overwriteJSON&&r.Utils.isApplicationJSON(n.contentType)&&(i.method="POST")),o.saveAgentProfile(t,e,i);this.log("[warning] setAgentProfile: No LRSs added yet (agent profile not saved)")},deleteAgentProfile:function(t,e){var n,i;if(this.log("deleteAgentProfile"),this.recordStores.length>0)return i=this.recordStores[0],n={agent:"undefined"!==typeof(e=e||{}).agent?e.agent:this.actor},"undefined"!==typeof e.callback&&(n.callback=e.callback),i.dropAgentProfile(t,n);this.log("[warning] deleteAgentProfile: No LRSs added yet (agent profile not deleted)")}},r.DEBUG=!1,r.enableDebug=function(){r.DEBUG=!0},r.disableDebug=function(){r.DEBUG=!1},r.versions=function(){return["1.0.2","1.0.1","1.0.0","0.95","0.9"]},t.exports=r}(),function(){"use strict";r.Utils={defaultEncoding:"utf8",getUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},getISODateString:function(t){function e(t,e){var n,i;for("undefined"!==typeof t&&null!==t||(t=0),"undefined"!==typeof e&&null!==e||(e=2),n=Math.pow(10,e-1),i=t.toString();t<n&&n>1;)i="0"+i,n/=10;return i}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+e(t.getUTCMilliseconds(),3)+"Z"},convertISO8601DurationToMilliseconds:function(t){var e,n,i,r,o=t.indexOf("-")>=0,s=t.indexOf("T"),a=t.indexOf("H"),c=t.indexOf("M"),l=t.indexOf("S");if(-1===s||-1!==c&&c<s||-1!==t.indexOf("D")||-1!==t.indexOf("Y"))throw new Error("ISO 8601 timestamps including years, months and/or days are not currently supported");return-1===a?(a=s,e=0):e=parseInt(t.slice(s+1,a),10),-1===c?(c=s,n=0):n=parseInt(t.slice(a+1,c),10),i=parseFloat(t.slice(c+1,l)),r=parseInt(1e3*(60*(60*e+n)+i),10),isNaN(r)&&(r=0),o&&(r*=-1),r},convertMillisecondsToISO8601Duration:function(t){var e,n,i,r=parseInt(t,10),o="",s="";return(i=Math.round(r/10))<0&&(o="-",i*=-1),s=o+"PT",(e=parseInt(i/36e4,10))>0&&(s+=e+"H"),(n=parseInt(i%36e4/6e3,10))>0&&(s+=n+"M"),s+=i%36e4%6e3/100+"S"},getSHA1String:function(t){return i.SHA1(t).toString(i.enc.Hex)},getSHA256String:function(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t)&&(t=i.lib.WordArray.create(t)),i.SHA256(t).toString(i.enc.Hex)},getBase64String:function(t){return i.enc.Base64.stringify(i.enc.Latin1.parse(t))},getLangDictionaryValue:function(t,e){var n,i=this[t];if("undefined"!==typeof e&&"undefined"!==typeof i[e])return i[e];if("undefined"!==typeof i.und)return i.und;if("undefined"!==typeof i["en-US"])return i["en-US"];for(n in i)if(i.hasOwnProperty(n))return i[n];return""},parseURL:function(t,e){var n,i,r,o,s="/"===t.charAt(0),a=["(/[^?#]*)","(\\?[^#]*|)","(#.*|)$"],c=/\+/g,l=/([^&=]+)=?([^&]*)/g,u=function(t){return decodeURIComponent(t.replace(c," "))};if(e=e||{},s){if("undefined"===typeof e.allowRelative||!e.allowRelative)throw new Error("Refusing to parse relative URL without 'allowRelative' option")}else a.unshift("^(https?:)//","(([^:/?#]*)(?::([0-9]+))?)"),-1===t.indexOf("/",8)&&(t+="/");if(n=new RegExp(a.join("")),null===(i=t.match(n)))throw new Error("Unable to parse URL regular expression did not match: '"+t+"'");if(s?(r={protocol:null,host:null,hostname:null,port:null,path:null,pathname:i[1],search:i[2],hash:i[3],params:{}}).path=r.pathname:(r={protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7],params:{}}).path=r.protocol+"//"+r.host+r.pathname,""!==r.search)for(;o=l.exec(r.search.substring(1));)r.params[u(o[1])]=u(o[2]);return r},getServerRoot:function(t){var e=t.split("/");return e[0]+"//"+e[2]},getContentTypeFromHeader:function(t){return String(t).split(";")[0]},isApplicationJSON:function(t){return 0===r.Utils.getContentTypeFromHeader(t).toLowerCase().indexOf("application/json")},stringToArrayBuffer:function(){r.prototype.log("stringToArrayBuffer not overloaded - no environment loaded?")},stringFromArrayBuffer:function(){r.prototype.log("stringFromArrayBuffer not overloaded - no environment loaded?")}}}(),function(){"use strict";var t=r.LRS=function(t){this.log("constructor"),this.endpoint=null,this.version=null,this.auth=null,this.allowFail=!0,this.extended=null,this.init(t)};t.prototype={LOG_SRC:"LRS",log:r.prototype.log,init:function(t){this.log("init");var e,n=r.versions(),i=!1;if((t=t||{}).hasOwnProperty("alertOnRequestFailure")&&this.log("'alertOnRequestFailure' is deprecated (alerts have been removed) no need to set it now"),!t.hasOwnProperty("endpoint")||null===t.endpoint||""===t.endpoint)throw this.log("[error] LRS invalid: no endpoint"),{code:3,mesg:"LRS invalid: no endpoint"};if(this.endpoint=String(t.endpoint),"/"!==this.endpoint.slice(-1)&&(this.log("adding trailing slash to endpoint"),this.endpoint+="/"),t.hasOwnProperty("allowFail")&&(this.allowFail=t.allowFail),t.hasOwnProperty("auth")?this.auth=t.auth:t.hasOwnProperty("username")&&t.hasOwnProperty("password")&&(this.auth="Basic "+r.Utils.getBase64String(t.username+":"+t.password)),t.hasOwnProperty("extended")&&(this.extended=t.extended),this._initByEnvironment(t),"undefined"!==typeof t.version){for(this.log("version: "+t.version),e=0;e<n.length;e+=1)if(n[e]===t.version){i=!0;break}if(!i)throw this.log("[error] LRS invalid: version not supported ("+t.version+")"),{code:5,mesg:"LRS invalid: version not supported ("+t.version+")"};this.version=t.version}else this.version=n[0]},_getBoundary:function(){return r.Utils.getUUID().replace(/-/g,"")},_initByEnvironment:function(){this.log("_initByEnvironment not overloaded - no environment loaded?")},_makeRequest:function(){this.log("_makeRequest not overloaded - no environment loaded?")},_getMultipartRequestData:function(){this.log("_getMultipartRequestData not overloaded - no environment loaded?")},_IEModeConversion:function(){this.log("_IEModeConversion not overloaded - browser environment not loaded.")},_processGetStatementResult:function(t,e){var n,i,o,s,a={};if(!e.attachments)return r.Statement.fromJSON(t.responseText);for(n=t.getResponseHeader("Content-Type").split("boundary=")[1],i=this._parseMultipart(n,t.response),o=JSON.parse(i[0].body),s=1;s<i.length;s+=1)a[i[s].headers["X-Experience-API-Hash"]]=i[s].body;return this._assignAttachmentContent([o],a),new r.Statement(o)},sendRequest:function(t){this.log("sendRequest");var e,n=this.endpoint+t.url,i={};if(0===t.url.indexOf("http")&&(n=t.url),null!==this.extended)for(e in t.params=t.params||{},this.extended)this.extended.hasOwnProperty(e)&&(t.params.hasOwnProperty(e)||null!==this.extended[e]&&(t.params[e]=this.extended[e]));for(e in i.Authorization=this.auth,"0.9"!==this.version&&(i["X-Experience-API-Version"]=this.version),t.headers)t.headers.hasOwnProperty(e)&&(i[e]=t.headers[e]);return this._makeRequest(n,i,t)},about:function(t){var e,n,i;if(this.log("about"),e={url:"about",method:"GET",params:{}},"undefined"!==typeof(t=t||{}).callback&&(i=function(e,n){var i=n;null===e&&(i=r.About.fromJSON(n.responseText)),t.callback(e,i)},e.callback=i),n=this.sendRequest(e),!i)return null===n.err&&(n.xhr=r.About.fromJSON(n.xhr.responseText)),n},saveStatement:function(t,e){this.log("saveStatement");var n,i,r,o={url:"statements",headers:{}},s=[];e=e||{};try{n=t.asVersion(this.version)}catch(a){return this.allowFail?(this.log("[warning] statement could not be serialized in version ("+this.version+"): "+a),"undefined"!==typeof e.callback?void e.callback(null,null):{err:null,xhr:null}):(this.log("[error] statement could not be serialized in version ("+this.version+"): "+a),"undefined"!==typeof e.callback?void e.callback(a,null):{err:a,xhr:null})}if(n.hasOwnProperty("attachments")&&t.hasAttachmentWithContent()){for(i=this._getBoundary(),o.headers["Content-Type"]="multipart/mixed; boundary="+i,r=0;r<t.attachments.length;r+=1)null!==t.attachments[r].content&&s.push(t.attachments[r]);try{o.data=this._getMultipartRequestData(i,n,s)}catch(a){return this.allowFail?(this.log("[warning] multipart request data could not be created (attachments probably not supported): "+a),"undefined"!==typeof e.callback?void e.callback(null,null):{err:null,xhr:null}):(this.log("[error] multipart request data could not be created (attachments probably not supported): "+a),"undefined"!==typeof e.callback?void e.callback(a,null):{err:a,xhr:null})}}else o.headers["Content-Type"]="application/json",o.data=JSON.stringify(n);return null!==t.id?(o.method="PUT",o.params={statementId:t.id}):o.method="POST","undefined"!==typeof e.callback&&(o.callback=e.callback),this.sendRequest(o)},retrieveStatement:function(t,e){this.log("retrieveStatement");var n,i,r,o=this;return(e=e||{}).params=e.params||{},n={url:"statements",method:"GET",params:{statementId:t}},e.params.attachments&&(n.params.attachments=!0,n.expectMultipart=!0),"undefined"!==typeof e.callback&&(r=function(t,n){var i=n;null===t&&(i=o._processGetStatementResult(n,e.params)),e.callback(t,i)},n.callback=r),i=this.sendRequest(n),r||(i.statement=null,null===i.err&&(i.statement=o._processGetStatementResult(i.xhr,e.params))),i},retrieveVoidedStatement:function(t,e){this.log("retrieveVoidedStatement");var n,i,r,o=this;return(e=e||{}).params=e.params||{},n={url:"statements",method:"GET",params:{}},"0.9"===this.version||"0.95"===this.version?n.params.statementId=t:(n.params.voidedStatementId=t,e.params.attachments&&(n.params.attachments=!0,n.expectMultipart=!0)),"undefined"!==typeof e.callback&&(r=function(t,n){var i=n;null===t&&(i=o._processGetStatementResult(n,e.params)),e.callback(t,i)},n.callback=r),i=this.sendRequest(n),r||(i.statement=null,null===i.err&&(i.statement=o._processGetStatementResult(i.xhr,e.params))),i},saveStatements:function(t,e){this.log("saveStatements");var n,i,r,o,s={url:"statements",method:"POST",headers:{}},a=[],c=[];if(e=e||{},0===t.length)return"undefined"!==typeof e.callback?void e.callback(new Error("no statements"),null):{err:new Error("no statements"),xhr:null};for(r=0;r<t.length;r+=1){try{n=t[r].asVersion(this.version)}catch(l){return this.allowFail?(this.log("[warning] statement could not be serialized in version ("+this.version+"): "+l),"undefined"!==typeof e.callback?void e.callback(null,null):{err:null,xhr:null}):(this.log("[error] statement could not be serialized in version ("+this.version+"): "+l),"undefined"!==typeof e.callback?void e.callback(l,null):{err:l,xhr:null})}if(t[r].hasAttachmentWithContent())for(o=0;o<t[r].attachments.length;o+=1)null!==t[r].attachments[o].content&&c.push(t[r].attachments[o]);a.push(n)}if(0!==c.length){i=this._getBoundary(),s.headers["Content-Type"]="multipart/mixed; boundary="+i;try{s.data=this._getMultipartRequestData(i,a,c)}catch(l){return this.allowFail?(this.log("[warning] multipart request data could not be created (attachments probably not supported): "+l),"undefined"!==typeof e.callback?void e.callback(null,null):{err:null,xhr:null}):(this.log("[error] multipart request data could not be created (attachments probably not supported): "+l),"undefined"!==typeof e.callback?void e.callback(l,null):{err:l,xhr:null})}}else s.headers["Content-Type"]="application/json",s.data=JSON.stringify(a);return"undefined"!==typeof e.callback&&(s.callback=e.callback),this.sendRequest(s)},queryStatements:function(t){this.log("queryStatements");var e,n,i,o=this;(t=t||{}).params=t.params||{};try{e=this._queryStatementsRequestCfg(t),t.params.attachments&&(e.expectMultipart=!0)}catch(s){return this.log("[error] Query statements failed - "+s),"undefined"!==typeof t.callback&&t.callback(s,{}),{err:s,statementsResult:null}}return"undefined"!==typeof t.callback&&(i=function(e,n){var i,s,a,c,l=n,u={};if(null===e)if(t.params.attachments){for(s=n.getResponseHeader("Content-Type").split("boundary=")[1],i=o._parseMultipart(s,n.response),a=JSON.parse(i[0].body),c=1;c<i.length;c+=1)u[i[c].headers["X-Experience-API-Hash"]]=i[c].body;for(o._assignAttachmentContent(a.statements,u),l=new r.StatementsResult({statements:a.statements}),c=0;c<l.statements.length;c+=1)l.statements[c]instanceof r.Statement||(l.statements[c]=new r.Statement(l.statements[c]))}else l=r.StatementsResult.fromJSON(n.responseText);t.callback(e,l)},e.callback=i),(n=this.sendRequest(e)).config=e,i||(n.statementsResult=null,null===n.err&&(n.statementsResult=r.StatementsResult.fromJSON(n.xhr.responseText))),n},_queryStatementsRequestCfg:function(t){this.log("_queryStatementsRequestCfg");var e,n,i={},r={url:"statements",method:"GET",params:i},o=["agent","actor","object","instructor"],s=["verb","activity"],a=["registration","context","since","until","limit","authoritative","sparse","ascending","related_activities","related_agents","format","attachments"],c={verb:!0,registration:!0,since:!0,until:!0,limit:!0,ascending:!0},l={.9:{supported:{actor:!0,instructor:!0,target:!0,object:!0,context:!0,authoritative:!0,sparse:!0}},"1.0.0":{supported:{agent:!0,activity:!0,related_activities:!0,related_agents:!0,format:!0,attachments:!0}}};for(n in l[.95]=l[.9],l["1.0.1"]=l["1.0.0"],l["1.0.2"]=l["1.0.0"],t.params.hasOwnProperty("target")&&(t.params.object=t.params.target),t.params)if(t.params.hasOwnProperty(n)&&"undefined"===typeof c[n]&&"undefined"===typeof l[this.version].supported[n])throw"Unrecognized query parameter configured: "+n;for(e=0;e<o.length;e+=1)"undefined"!==typeof t.params[o[e]]&&(i[o[e]]=JSON.stringify(t.params[o[e]].asVersion(this.version)));for(e=0;e<s.length;e+=1)"undefined"!==typeof t.params[s[e]]&&("undefined"===typeof t.params[s[e]].id?i[s[e]]=t.params[s[e]]:i[s[e]]=t.params[s[e]].id);for(e=0;e<a.length;e+=1)"undefined"!==typeof t.params[a[e]]&&null!==t.params[a[e]]&&(i[a[e]]=t.params[a[e]]);return r},_assignAttachmentContent:function(t,e){var n,i;for(n=0;n<t.length;n+=1)if(t[n].hasOwnProperty("attachments")&&null!==t[n].attachments)for(i=0;i<t[n].attachments.length;i+=1)e.hasOwnProperty(t[n].attachments[i].sha2)&&(t[n].attachments[i].content=e[t[n].attachments[i].sha2])},_parseMultipart:function(t,e){var n,i,o,s,a,c,l,u,d,p,h,f="--"+t,v=[];for(n=new Uint8Array(e),o=(i=this.__uint8ToString(n)).indexOf(f+"--"),s=i.indexOf(f);-1!==s;)a=i.indexOf(f,s+f.length),c=s+f.length+2,u=(l=i.indexOf("\r\n\r\n",s))+2+2,d=a-2,p=this._parseHeaders(this.__uint8ToString(new Uint8Array(e.slice(c,l)))),h=e.slice(u,d),0===v.length&&(h=r.Utils.stringFromArrayBuffer(h)),v.push({headers:p,body:h}),s=a===o?-1:a;return v},__uint8ToString:function(t){var e,n="",i=t.byteLength;for(e=0;e<i;e+=1)n+=String.fromCharCode(t[e]);return n},_parseHeaders:function(t){var e,n,i,r={};for(e=t.split("\n"),i=0;i<e.length;i+=1)null!==(n=e[i].split(":",2))[1]?(r[n[0]]=n[1].replace(/^\s+|\s+$/g,""),n[0]):"\t"===n[0].substring(0,1)&&(r[n[0]]=n[1].replace(/^\s+|\s+$/g,""));return r},moreStatements:function(t){var e,n,i,o,s;return this.log("moreStatements: "+t.url),t=t||{},o=r.Utils.parseURL(t.url,{allowRelative:!0}),s=r.Utils.getServerRoot(this.endpoint),0===o.path.indexOf("/statements")&&(o.path=this.endpoint.replace(s,"")+o.path,this.log("converting non-standard more URL to "+o.path)),0!==o.path.indexOf("/")&&(o.path="/"+o.path),e={method:"GET",url:s+o.path,params:o.params},"undefined"!==typeof t.callback&&(i=function(e,n){var i=n;null===e&&(i=r.StatementsResult.fromJSON(n.responseText)),t.callback(e,i)},e.callback=i),(n=this.sendRequest(e)).config=e,i||(n.statementsResult=null,null===n.err&&(n.statementsResult=r.StatementsResult.fromJSON(n.xhr.responseText))),n},retrieveState:function(t,e){this.log("retrieveState");var n,i,o,s={},a={},c=this;if(o=e.requestHeaders||{},s={stateId:t,activityId:e.activity.id},"0.9"===this.version?s.actor=JSON.stringify(e.agent.asVersion(this.version)):s.agent=JSON.stringify(e.agent.asVersion(this.version)),"undefined"!==typeof e.registration&&null!==e.registration&&("0.9"===this.version?s.registrationId=e.registration:s.registration=e.registration),a={url:"activities/state",method:"GET",params:s,ignore404:!0,headers:o},"undefined"!==typeof e.callback&&(i=function(n,i){var o=i;if(null===n)if(404===i.status)o=null;else if(o=new r.State({id:t,contents:i.responseText}),"undefined"!==typeof i.getResponseHeader&&null!==i.getResponseHeader("ETag")&&""!==i.getResponseHeader("ETag")?o.etag=i.getResponseHeader("ETag"):o.etag='"'+r.Utils.getSHA1String(i.responseText)+'"',"undefined"!==typeof i.contentType?o.contentType=i.contentType:"undefined"!==typeof i.getResponseHeader&&null!==i.getResponseHeader("Content-Type")&&""!==i.getResponseHeader("Content-Type")&&(o.contentType=i.getResponseHeader("Content-Type")),r.Utils.isApplicationJSON(o.contentType))try{o.contents=JSON.parse(o.contents)}catch(s){c.log("retrieveState - failed to deserialize JSON: "+s)}e.callback(n,o)},a.callback=i),n=this.sendRequest(a),!i&&(n.state=null,null===n.err&&404!==n.xhr.status&&(n.state=new r.State({id:t,contents:n.xhr.responseText}),"undefined"!==typeof n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("ETag")&&""!==n.xhr.getResponseHeader("ETag")?n.state.etag=n.xhr.getResponseHeader("ETag"):n.state.etag='"'+r.Utils.getSHA1String(n.xhr.responseText)+'"',"undefined"!==typeof n.xhr.contentType?n.state.contentType=n.xhr.contentType:"undefined"!==typeof n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("Content-Type")&&""!==n.xhr.getResponseHeader("Content-Type")&&(n.state.contentType=n.xhr.getResponseHeader("Content-Type")),r.Utils.isApplicationJSON(n.state.contentType))))try{n.state.contents=JSON.parse(n.state.contents)}catch(l){this.log("retrieveState - failed to deserialize JSON: "+l)}return n},retrieveStateIds:function(t){this.log("retrieveStateIds");var e,n,i,r,o={};if(n=(t=t||{}).requestHeaders||{},o.activityId=t.activity.id,"0.9"===this.version?o.actor=JSON.stringify(t.agent.asVersion(this.version)):o.agent=JSON.stringify(t.agent.asVersion(this.version)),"undefined"!==typeof t.registration&&null!==t.registration&&("0.9"===this.version?o.registrationId=t.registration:o.registration=t.registration),e={url:"activities/state",method:"GET",params:o,headers:n,ignore404:!0},"undefined"!==typeof t.callback&&(r=function(e,n){var i=n;if(null===e){if(404===n.status)i=[];else try{i=JSON.parse(n.responseText)}catch(r){e="Response JSON parse error: "+r}t.callback(e,i)}else t.callback(e,i)},e.callback=r),"undefined"!==typeof t.since&&(e.params.since=t.since),i=this.sendRequest(e),!r){if(i.profileIds=null,null!==i.err)return i;if(404===i.xhr.status)i.profileIds=[];else try{i.profileIds=JSON.parse(i.xhr.responseText)}catch(s){i.err="retrieveStateIds - JSON parse error: "+s}}return i},saveState:function(t,e,n){var i,o,s;return this.log("saveState"),s=n.requestHeaders||{},"undefined"===typeof n.contentType&&(n.contentType="application/octet-stream"),s["Content-Type"]=n.contentType,"object"===typeof e&&r.Utils.isApplicationJSON(n.contentType)&&(e=JSON.stringify(e)),"undefined"!==typeof n.method&&"POST"===n.method||(n.method="PUT"),i={stateId:t,activityId:n.activity.id},"0.9"===this.version?i.actor=JSON.stringify(n.agent.asVersion(this.version)):i.agent=JSON.stringify(n.agent.asVersion(this.version)),"undefined"!==typeof n.registration&&null!==n.registration&&("0.9"===this.version?i.registrationId=n.registration:i.registration=n.registration),o={url:"activities/state",method:n.method,params:i,data:e,headers:s},"undefined"!==typeof n.callback&&(o.callback=n.callback),"undefined"!==typeof n.lastSHA1&&null!==n.lastSHA1&&(o.headers["If-Match"]=n.lastSHA1),this.sendRequest(o)},dropState:function(t,e){var n,i,r;return this.log("dropState"),r=e.requestHeaders||{},n={activityId:e.activity.id},"0.9"===this.version?n.actor=JSON.stringify(e.agent.asVersion(this.version)):n.agent=JSON.stringify(e.agent.asVersion(this.version)),null!==t&&(n.stateId=t),"undefined"!==typeof e.registration&&null!==e.registration&&("0.9"===this.version?n.registrationId=e.registration:n.registration=e.registration),i={url:"activities/state",method:"DELETE",params:n,headers:r},"undefined"!==typeof e.callback&&(i.callback=e.callback),this.sendRequest(i)},retrieveActivity:function(t,e){this.log("retrieveActivity");var n,i,o,s={};return o=e.requestHeaders||{},s={url:"activities",method:"GET",params:{activityId:t},ignore404:!0,headers:o},"undefined"!==typeof e.callback&&(i=function(n,i){var o=i;null===n&&(o=404===i.status?new r.Activity({id:t}):r.Activity.fromJSON(i.responseText)),e.callback(n,o)},s.callback=i),n=this.sendRequest(s),i||(n.activity=null,null===n.err&&(404===n.xhr.status?n.activity=new r.Activity({id:t}):n.activity=r.Activity.fromJSON(n.xhr.responseText))),n},retrieveActivityProfile:function(t,e){this.log("retrieveActivityProfile");var n,i,o,s={},a=this;if(o=e.requestHeaders||{},s={url:"activities/profile",method:"GET",params:{profileId:t,activityId:e.activity.id},ignore404:!0,headers:o},"undefined"!==typeof e.callback&&(i=function(n,i){var o=i;if(null===n)if(404===i.status)o=null;else if(o=new r.ActivityProfile({id:t,activity:e.activity,contents:i.responseText}),"undefined"!==typeof i.getResponseHeader&&null!==i.getResponseHeader("ETag")&&""!==i.getResponseHeader("ETag")?o.etag=i.getResponseHeader("ETag"):o.etag='"'+r.Utils.getSHA1String(i.responseText)+'"',"undefined"!==typeof i.contentType?o.contentType=i.contentType:"undefined"!==typeof i.getResponseHeader&&null!==i.getResponseHeader("Content-Type")&&""!==i.getResponseHeader("Content-Type")&&(o.contentType=i.getResponseHeader("Content-Type")),r.Utils.isApplicationJSON(o.contentType))try{o.contents=JSON.parse(o.contents)}catch(s){a.log("retrieveActivityProfile - failed to deserialize JSON: "+s)}e.callback(n,o)},s.callback=i),n=this.sendRequest(s),!i&&(n.profile=null,null===n.err&&404!==n.xhr.status&&(n.profile=new r.ActivityProfile({id:t,activity:e.activity,contents:n.xhr.responseText}),"undefined"!==typeof n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("ETag")&&""!==n.xhr.getResponseHeader("ETag")?n.profile.etag=n.xhr.getResponseHeader("ETag"):n.profile.etag='"'+r.Utils.getSHA1String(n.xhr.responseText)+'"',"undefined"!==typeof n.xhr.contentType?n.profile.contentType=n.xhr.contentType:"undefined"!==typeof n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("Content-Type")&&""!==n.xhr.getResponseHeader("Content-Type")&&(n.profile.contentType=n.xhr.getResponseHeader("Content-Type")),r.Utils.isApplicationJSON(n.profile.contentType))))try{n.profile.contents=JSON.parse(n.profile.contents)}catch(c){this.log("retrieveActivityProfile - failed to deserialize JSON: "+c)}return n},retrieveActivityProfileIds:function(t){var e,n,i,r;if(this.log("retrieveActivityProfileIds"),n=(t=t||{}).requestHeaders||{},e={url:"activities/profile",method:"GET",params:{activityId:t.activity.id},headers:n,ignore404:!0},"undefined"!==typeof t.callback&&(r=function(e,n){var i=n;if(null===e){if(404===n.status)i=[];else try{i=JSON.parse(n.responseText)}catch(r){e="Response JSON parse error: "+r}t.callback(e,i)}else t.callback(e,i)},e.callback=r),"undefined"!==typeof t.since&&(e.params.since=t.since),i=this.sendRequest(e),!r){if(i.profileIds=null,null!==i.err)return i;if(404===i.xhr.status)i.profileIds=[];else try{i.profileIds=JSON.parse(i.xhr.responseText)}catch(o){i.err="retrieveActivityProfileIds - JSON parse error: "+o}}return i},saveActivityProfile:function(t,e,n){var i,o;return this.log("saveActivityProfile"),o=n.requestHeaders||{},"undefined"===typeof n.contentType&&(n.contentType="application/octet-stream"),o["Content-Type"]=n.contentType,"undefined"!==typeof n.method&&"POST"===n.method||(n.method="PUT"),"object"===typeof e&&r.Utils.isApplicationJSON(n.contentType)&&(e=JSON.stringify(e)),i={url:"activities/profile",method:n.method,params:{profileId:t,activityId:n.activity.id},data:e,headers:o},"undefined"!==typeof n.callback&&(i.callback=n.callback),"undefined"!==typeof n.lastSHA1&&null!==n.lastSHA1?i.headers["If-Match"]=n.lastSHA1:i.headers["If-None-Match"]="*",this.sendRequest(i)},dropActivityProfile:function(t,e){var n,i;return this.log("dropActivityProfile"),i=e.requestHeaders||{},n={url:"activities/profile",method:"DELETE",params:{profileId:t,activityId:e.activity.id},headers:i},"undefined"!==typeof e.callback&&(n.callback=e.callback),this.sendRequest(n)},retrieveAgentProfile:function(t,e){this.log("retrieveAgentProfile");var n,i,o,s={},a=this;if(o=e.requestHeaders||{},s={method:"GET",params:{profileId:t},ignore404:!0,headers:o},"0.9"===this.version?(s.url="actors/profile",s.params.actor=JSON.stringify(e.agent.asVersion(this.version))):(s.url="agents/profile",s.params.agent=JSON.stringify(e.agent.asVersion(this.version))),"undefined"!==typeof e.callback&&(i=function(n,i){var o=i;if(null===n)if(404===i.status)o=null;else if(o=new r.AgentProfile({id:t,agent:e.agent,contents:i.responseText}),"undefined"!==typeof i.getResponseHeader&&null!==i.getResponseHeader("ETag")&&""!==i.getResponseHeader("ETag")?o.etag=i.getResponseHeader("ETag"):o.etag='"'+r.Utils.getSHA1String(i.responseText)+'"',"undefined"!==typeof i.contentType?o.contentType=i.contentType:"undefined"!==typeof i.getResponseHeader&&null!==i.getResponseHeader("Content-Type")&&""!==i.getResponseHeader("Content-Type")&&(o.contentType=i.getResponseHeader("Content-Type")),r.Utils.isApplicationJSON(o.contentType))try{o.contents=JSON.parse(o.contents)}catch(s){a.log("retrieveAgentProfile - failed to deserialize JSON: "+s)}e.callback(n,o)},s.callback=i),n=this.sendRequest(s),!i&&(n.profile=null,null===n.err&&404!==n.xhr.status&&(n.profile=new r.AgentProfile({id:t,agent:e.agent,contents:n.xhr.responseText}),"undefined"!==typeof n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("ETag")&&""!==n.xhr.getResponseHeader("ETag")?n.profile.etag=n.xhr.getResponseHeader("ETag"):n.profile.etag='"'+r.Utils.getSHA1String(n.xhr.responseText)+'"',"undefined"!==typeof n.xhr.contentType?n.profile.contentType=n.xhr.contentType:"undefined"!==typeof n.xhr.getResponseHeader&&null!==n.xhr.getResponseHeader("Content-Type")&&""!==n.xhr.getResponseHeader("Content-Type")&&(n.profile.contentType=n.xhr.getResponseHeader("Content-Type")),r.Utils.isApplicationJSON(n.profile.contentType))))try{n.profile.contents=JSON.parse(n.profile.contents)}catch(c){this.log("retrieveAgentProfile - failed to deserialize JSON: "+c)}return n},retrieveAgentProfileIds:function(t){this.log("retrieveAgentProfileIds");var e,n,i,r={};if(e={method:"GET",params:r,headers:(t=t||{}).requestHeaders||{},ignore404:!0},"0.9"===this.version?(e.url="actors/profile",r.actor=JSON.stringify(t.agent.asVersion(this.version))):(e.url="agents/profile",r.agent=JSON.stringify(t.agent.asVersion(this.version))),"undefined"!==typeof t.callback&&(i=function(e,n){var i=n;if(null===e){if(404===n.status)i=[];else try{i=JSON.parse(n.responseText)}catch(r){e="Response JSON parse error: "+r}t.callback(e,i)}else t.callback(e,i)},e.callback=i),"undefined"!==typeof t.since&&(e.params.since=t.since),n=this.sendRequest(e),!i){if(n.profileIds=null,null!==n.err)return n;if(404===n.xhr.status)n.profileIds=[];else try{n.profileIds=JSON.parse(n.xhr.responseText)}catch(o){n.err="retrieveAgentProfileIds - JSON parse error: "+o}}return n},saveAgentProfile:function(t,e,n){var i,o;return this.log("saveAgentProfile"),o=n.requestHeaders||{},"undefined"===typeof n.contentType&&(n.contentType="application/octet-stream"),o["Content-Type"]=n.contentType,"undefined"!==typeof n.method&&"POST"===n.method||(n.method="PUT"),"object"===typeof e&&r.Utils.isApplicationJSON(n.contentType)&&(e=JSON.stringify(e)),i={method:n.method,params:{profileId:t},data:e,headers:o},"0.9"===this.version?(i.url="actors/profile",i.params.actor=JSON.stringify(n.agent.asVersion(this.version))):(i.url="agents/profile",i.params.agent=JSON.stringify(n.agent.asVersion(this.version))),"undefined"!==typeof n.callback&&(i.callback=n.callback),"undefined"!==typeof n.lastSHA1&&null!==n.lastSHA1?i.headers["If-Match"]=n.lastSHA1:i.headers["If-None-Match"]="*",this.sendRequest(i)},dropAgentProfile:function(t,e){var n,i;return this.log("dropAgentProfile"),i={method:"DELETE",params:n={profileId:t},headers:e.requestHeaders||{}},"0.9"===this.version?(i.url="actors/profile",n.actor=JSON.stringify(e.agent.asVersion(this.version))):(i.url="agents/profile",n.agent=JSON.stringify(e.agent.asVersion(this.version))),"undefined"!==typeof e.callback&&(i.callback=e.callback),this.sendRequest(i)}},t.syncEnabled=null}(),function(){"use strict";var t=r.AgentAccount=function(t){this.log("constructor"),this.homePage=null,this.name=null,this.init(t)};t.prototype={LOG_SRC:"AgentAccount",log:r.prototype.log,init:function(t){this.log("init");var e,n=["name","homePage"];for("undefined"!==typeof(t=t||{}).accountServiceHomePage&&(t.homePage=t.accountServiceHomePage),"undefined"!==typeof t.accountName&&(t.name=t.accountName),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},toString:function(){this.log("toString");var t="";return null!==this.name||null!==this.homePage?(t+=null!==this.name?this.name:"-",t+=":",t+=null!==this.homePage?this.homePage:"-"):t="AgentAccount: unidentified",t},asVersion:function(t){this.log("asVersion: "+t);var e={};return"0.9"===(t=t||r.versions()[0])?(e.accountName=this.name,e.accountServiceHomePage=this.homePage):(e.name=this.name,e.homePage=this.homePage),e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.Agent=function(t){this.log("constructor"),this.name=null,this.mbox=null,this.mbox_sha1sum=null,this.openid=null,this.account=null,this.degraded=!1,this.init(t)};t.prototype={objectType:"Agent",LOG_SRC:"Agent",log:r.prototype.log,init:function(t){this.log("init");var e,n,i=["name","mbox","mbox_sha1sum","openid"];for("undefined"!==typeof(t=t||{}).lastName||"undefined"!==typeof t.firstName?(t.name="","undefined"!==typeof t.firstName&&t.firstName.length>0&&(t.name=t.firstName[0],t.firstName.length>1&&(this.degraded=!0)),""!==t.name&&(t.name+=" "),"undefined"!==typeof t.lastName&&t.lastName.length>0&&(t.name+=t.lastName[0],t.lastName.length>1&&(this.degraded=!0))):"undefined"===typeof t.familyName&&"undefined"===typeof t.givenName||(t.name="","undefined"!==typeof t.givenName&&t.givenName.length>0&&(t.name=t.givenName[0],t.givenName.length>1&&(this.degraded=!0)),""!==t.name&&(t.name+=" "),"undefined"!==typeof t.familyName&&t.familyName.length>0&&(t.name+=t.familyName[0],t.familyName.length>1&&(this.degraded=!0))),"object"===typeof t.name&&null!==t.name&&(t.name.length>1&&(this.degraded=!0),t.name=t.name[0]),"object"===typeof t.mbox&&null!==t.mbox&&(t.mbox.length>1&&(this.degraded=!0),t.mbox=t.mbox[0]),"object"===typeof t.mbox_sha1sum&&null!==t.mbox_sha1sum&&(t.mbox_sha1sum.length>1&&(this.degraded=!0),t.mbox_sha1sum=t.mbox_sha1sum[0]),"object"===typeof t.openid&&null!==t.openid&&(t.openid.length>1&&(this.degraded=!0),t.openid=t.openid[0]),"object"===typeof t.account&&null!==t.account&&"undefined"===typeof t.account.homePage&&"undefined"===typeof t.account.name&&(0===t.account.length?delete t.account:(t.account.length>1&&(this.degraded=!0),t.account=t.account[0])),t.hasOwnProperty("account")&&(t.account instanceof r.AgentAccount?this.account=t.account:this.account=new r.AgentAccount(t.account)),e=0;e<i.length;e+=1)t.hasOwnProperty(i[e])&&null!==t[i[e]]&&(n=t[i[e]],"mbox"===i[e]&&-1===n.indexOf("mailto:")&&(n="mailto:"+n),this[i[e]]=n)},toString:function(){return this.log("toString"),null!==this.name?this.name:null!==this.mbox?this.mbox.replace("mailto:",""):null!==this.mbox_sha1sum?this.mbox_sha1sum:null!==this.openid?this.openid:null!==this.account?this.account.toString():this.objectType+": unidentified"},asVersion:function(t){this.log("asVersion: "+t);var e={objectType:this.objectType};return"0.9"===(t=t||r.versions()[0])?(null!==this.mbox?e.mbox=[this.mbox]:null!==this.mbox_sha1sum?e.mbox_sha1sum=[this.mbox_sha1sum]:null!==this.openid?e.openid=[this.openid]:null!==this.account&&(e.account=[this.account.asVersion(t)]),null!==this.name&&(e.name=[this.name])):(null!==this.mbox?e.mbox=this.mbox:null!==this.mbox_sha1sum?e.mbox_sha1sum=this.mbox_sha1sum:null!==this.openid?e.openid=this.openid:null!==this.account&&(e.account=this.account.asVersion(t)),null!==this.name&&(e.name=this.name)),e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.Group=function(t){this.log("constructor"),this.name=null,this.mbox=null,this.mbox_sha1sum=null,this.openid=null,this.account=null,this.member=[],this.init(t)};t.prototype={objectType:"Group",LOG_SRC:"Group",log:r.prototype.log,init:function(t){var e;if(this.log("init"),t=t||{},r.Agent.prototype.init.call(this,t),"undefined"!==typeof t.member)for(e=0;e<t.member.length;e+=1)t.member[e]instanceof r.Agent?this.member.push(t.member[e]):this.member.push(new r.Agent(t.member[e]))},toString:function(t){this.log("toString");var e=r.Agent.prototype.toString.call(this,t);return e!==this.objectType+": unidentified"&&(e=this.objectType+": "+e),e},asVersion:function(t){var e,n;if(this.log("asVersion: "+t),t=t||r.versions()[0],e=r.Agent.prototype.asVersion.call(this,t),this.member.length>0)for(e.member=[],n=0;n<this.member.length;n+=1)e.member.push(this.member[n].asVersion(t));return e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t={"http://adlnet.gov/expapi/verbs/experienced":"experienced","http://adlnet.gov/expapi/verbs/attended":"attended","http://adlnet.gov/expapi/verbs/attempted":"attempted","http://adlnet.gov/expapi/verbs/completed":"completed","http://adlnet.gov/expapi/verbs/passed":"passed","http://adlnet.gov/expapi/verbs/failed":"failed","http://adlnet.gov/expapi/verbs/answered":"answered","http://adlnet.gov/expapi/verbs/interacted":"interacted","http://adlnet.gov/expapi/verbs/imported":"imported","http://adlnet.gov/expapi/verbs/created":"created","http://adlnet.gov/expapi/verbs/shared":"shared","http://adlnet.gov/expapi/verbs/voided":"voided"},e=r.Verb=function(t){this.log("constructor"),this.id=null,this.display=null,this.init(t)};e.prototype={LOG_SRC:"Verb",log:r.prototype.log,init:function(e){this.log("init");var n,i,r=["id","display"];if("string"===typeof e){for(i in this.id=e,this.display={und:this.id},t)if(t.hasOwnProperty(i)&&t[i]===e){this.id=i;break}}else{for(e=e||{},n=0;n<r.length;n+=1)e.hasOwnProperty(r[n])&&null!==e[r[n]]&&(this[r[n]]=e[r[n]]);null===this.display&&"undefined"!==typeof t[this.id]&&(this.display={und:t[this.id]})}},toString:function(t){return this.log("toString"),null!==this.display?this.getLangDictionaryValue("display",t):this.id},asVersion:function(e){var n;return this.log("asVersion"),"0.9"===(e=e||r.versions()[0])?n=t[this.id]:(n={id:this.id},null!==this.display&&(n.display=this.display)),n},getLangDictionaryValue:r.Utils.getLangDictionaryValue},e.fromJSON=function(t){e.prototype.log("fromJSON");var n=JSON.parse(t);return new e(n)}}(),function(){"use strict";var t=r.Result=function(t){this.log("constructor"),this.score=null,this.success=null,this.completion=null,this.duration=null,this.response=null,this.extensions=null,this.init(t)};t.prototype={LOG_SRC:"Result",log:r.prototype.log,init:function(t){this.log("init");var e,n=["completion","duration","extensions","response","success"];for((t=t||{}).hasOwnProperty("score")&&null!==t.score&&(t.score instanceof r.Score?this.score=t.score:this.score=new r.Score(t.score)),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]]);"Completed"===this.completion&&(this.completion=!0)},asVersion:function(t){this.log("asVersion");var e,n={},i=["success","duration","response","extensions"],o=["score"];for(t=t||r.versions()[0],e=0;e<i.length;e+=1)null!==this[i[e]]&&(n[i[e]]=this[i[e]]);for(e=0;e<o.length;e+=1)null!==this[o[e]]&&(n[o[e]]=this[o[e]].asVersion(t));return null!==this.completion&&("0.9"===t?this.completion&&(n.completion="Completed"):n.completion=this.completion),n}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.Score=function(t){this.log("constructor"),this.scaled=null,this.raw=null,this.min=null,this.max=null,this.init(t)};t.prototype={LOG_SRC:"Score",log:r.prototype.log,init:function(t){this.log("init");var e,n=["scaled","raw","min","max"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},asVersion:function(t){this.log("asVersion");var e,n={},i=["scaled","raw","min","max"];for(t=t||r.versions()[0],e=0;e<i.length;e+=1)null!==this[i[e]]&&(n[i[e]]=this[i[e]]);return n}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.InteractionComponent=function(t){this.log("constructor"),this.id=null,this.description=null,this.init(t)};t.prototype={LOG_SRC:"InteractionComponent",log:r.prototype.log,init:function(t){this.log("init");var e,n=["id","description"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},asVersion:function(t){this.log("asVersion");var e,n,i={id:this.id},o=["description"];for(t=t||r.versions()[0],e=0;e<o.length;e+=1)null!==this[n=o[e]]&&(i[n]=this[n]);return i},getLangDictionaryValue:r.Utils.getLangDictionaryValue},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t={"http://adlnet.gov/expapi/activities/course":"course","http://adlnet.gov/expapi/activities/module":"module","http://adlnet.gov/expapi/activities/meeting":"meeting","http://adlnet.gov/expapi/activities/media":"media","http://adlnet.gov/expapi/activities/performance":"performance","http://adlnet.gov/expapi/activities/simulation":"simulation","http://adlnet.gov/expapi/activities/assessment":"assessment","http://adlnet.gov/expapi/activities/interaction":"interaction","http://adlnet.gov/expapi/activities/cmi.interaction":"cmi.interaction","http://adlnet.gov/expapi/activities/question":"question","http://adlnet.gov/expapi/activities/objective":"objective","http://adlnet.gov/expapi/activities/link":"link"},e=r.ActivityDefinition=function(t){this.log("constructor"),this.name=null,this.description=null,this.type=null,this.moreInfo=null,this.extensions=null,this.interactionType=null,this.correctResponsesPattern=null,this.choices=null,this.scale=null,this.source=null,this.target=null,this.steps=null,this.init(t)};e.prototype={LOG_SRC:"ActivityDefinition",log:r.prototype.log,init:function(e){this.log("init");var n,i,o,s=["name","description","moreInfo","extensions","correctResponsesPattern"],a=[];if((e=e||{}).hasOwnProperty("type")&&null!==e.type){for(o in t)t.hasOwnProperty(o)&&t[o]===e.type&&(e.type=t[o]);this.type=e.type}if(e.hasOwnProperty("interactionType")&&null!==e.interactionType&&(this.interactionType=e.interactionType,"choice"===e.interactionType||"sequencing"===e.interactionType?a.push("choices"):"likert"===e.interactionType?a.push("scale"):"matching"===e.interactionType?(a.push("source"),a.push("target")):"performance"===e.interactionType&&a.push("steps"),a.length>0))for(n=0;n<a.length;n+=1)if(o=a[n],e.hasOwnProperty(o)&&null!==e[o])for(this[o]=[],i=0;i<e[o].length;i+=1)e[o][i]instanceof r.InteractionComponent?this[o].push(e[o][i]):this[o].push(new r.InteractionComponent(e[o][i]));for(n=0;n<s.length;n+=1)e.hasOwnProperty(s[n])&&null!==e[s[n]]&&(this[s[n]]=e[s[n]])},toString:function(t){return this.log("toString"),null!==this.name?this.getLangDictionaryValue("name",t):null!==this.description?this.getLangDictionaryValue("description",t):""},asVersion:function(e){this.log("asVersion");var n,i,o,s={},a=["name","description","interactionType","correctResponsesPattern","extensions"],c=["choices","scale","source","target","steps"];for(e=e||r.versions()[0],null!==this.type&&(s.type="0.9"===e?t[this.type]:this.type),n=0;n<a.length;n+=1)null!==this[o=a[n]]&&(s[o]=this[o]);for(n=0;n<c.length;n+=1)if(null!==this[o=c[n]])for(s[o]=[],i=0;i<this[o].length;i+=1)s[o].push(this[o][i].asVersion(e));return 0!==e.indexOf("0.9")&&null!==this.moreInfo&&(s.moreInfo=this.moreInfo),s},getLangDictionaryValue:r.Utils.getLangDictionaryValue},e.fromJSON=function(t){e.prototype.log("fromJSON");var n=JSON.parse(t);return new e(n)}}(),function(){"use strict";var t=r.Activity=function(t){this.log("constructor"),this.objectType="Activity",this.id=null,this.definition=null,this.init(t)};t.prototype={LOG_SRC:"Activity",log:r.prototype.log,init:function(t){this.log("init");var e,n=["id"];for((t=t||{}).hasOwnProperty("definition")&&(t.definition instanceof r.ActivityDefinition?this.definition=t.definition:this.definition=new r.ActivityDefinition(t.definition)),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},toString:function(t){this.log("toString");var e="";return null!==this.definition&&""!==(e=this.definition.toString(t))?e:null!==this.id?this.id:"Activity: unidentified"},asVersion:function(t){this.log("asVersion");var e={id:this.id,objectType:this.objectType};return t=t||r.versions()[0],null!==this.definition&&(e.definition=this.definition.asVersion(t)),e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.ContextActivities=function(t){this.log("constructor"),this.category=null,this.parent=null,this.grouping=null,this.other=null,this.init(t)};t.prototype={LOG_SRC:"ContextActivities",log:r.prototype.log,init:function(t){this.log("init");var e,n,i,r,o=["category","parent","grouping","other"];for(t=t||{},e=0;e<o.length;e+=1)if(i=o[e],t.hasOwnProperty(i)&&null!==t[i])if("[object Array]"===Object.prototype.toString.call(t[i]))for(n=0;n<t[i].length;n+=1)this.add(i,t[i][n]);else r=t[i],this.add(i,r)},add:function(t,e){if("category"===t||"parent"===t||"grouping"===t||"other"===t)return null===this[t]&&(this[t]=[]),e instanceof r.Activity||(e="string"===typeof e?{id:e}:e,e=new r.Activity(e)),this[t].push(e),this[t].length-1},asVersion:function(t){this.log("asVersion");var e,n,i={},o=["parent","grouping","other"];for(t=t||r.versions()[0],e=0;e<o.length;e+=1)if(null!==this[o[e]]&&this[o[e]].length>0)if("0.9"===t||"0.95"===t)this[o[e]].length>1&&this.log("[warning] version does not support multiple values in: "+o[e]),i[o[e]]=this[o[e]][0].asVersion(t);else for(i[o[e]]=[],n=0;n<this[o[e]].length;n+=1)i[o[e]].push(this[o[e]][n].asVersion(t));if(null!==this.category&&this.category.length>0){if("0.9"===t||"0.95"===t)throw this.log("[error] version does not support the 'category' property: "+t),new Error(t+" does not support the 'category' property");for(i.category=[],e=0;e<this.category.length;e+=1)i.category.push(this.category[e].asVersion(t))}return i}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.Context=function(t){this.log("constructor"),this.registration=null,this.instructor=null,this.team=null,this.contextActivities=null,this.revision=null,this.platform=null,this.language=null,this.statement=null,this.extensions=null,this.init(t)};t.prototype={LOG_SRC:"Context",log:r.prototype.log,init:function(t){this.log("init");var e,n,i,o=["registration","revision","platform","language","extensions"],s=["instructor","team"];for(t=t||{},e=0;e<o.length;e+=1)n=o[e],t.hasOwnProperty(n)&&null!==t[n]&&(this[n]=t[n]);for(e=0;e<s.length;e+=1)n=s[e],t.hasOwnProperty(n)&&null!==t[n]&&("undefined"!==typeof(i=t[n]).objectType&&"Person"!==i.objectType||(i.objectType="Agent"),"Agent"!==i.objectType||i instanceof r.Agent?"Group"!==i.objectType||i instanceof r.Group||(i=new r.Group(i)):i=new r.Agent(i),this[n]=i);t.hasOwnProperty("contextActivities")&&null!==t.contextActivities&&(t.contextActivities instanceof r.ContextActivities?this.contextActivities=t.contextActivities:this.contextActivities=new r.ContextActivities(t.contextActivities)),t.hasOwnProperty("statement")&&null!==t.statement&&(t.statement instanceof r.StatementRef||t.statement instanceof r.SubStatement?this.statement=t.statement:"StatementRef"===t.statement.objectType?this.statement=new r.StatementRef(t.statement):"SubStatement"===t.statement.objectType?this.statement=new r.SubStatement(t.statement):this.log("Unable to parse statement.context.statement property."))},asVersion:function(t){this.log("asVersion");var e,n={},i=["registration","revision","platform","language","extensions"],o=["instructor","team","contextActivities","statement"];if(t=t||r.versions()[0],this.statement instanceof r.SubStatement&&"0.9"!==t&&"0.95"!==t)throw this.log("[error] version does not support SubStatements in the 'statement' property: "+t),new Error(t+" does not support SubStatements in the 'statement' property");for(e=0;e<i.length;e+=1)null!==this[i[e]]&&(n[i[e]]=this[i[e]]);for(e=0;e<o.length;e+=1)null!==this[o[e]]&&(n[o[e]]=this[o[e]].asVersion(t));return n}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.StatementRef=function(t){this.log("constructor"),this.id=null,this.init(t)};t.prototype={objectType:"StatementRef",LOG_SRC:"StatementRef",log:r.prototype.log,init:function(t){this.log("init");var e,n=["id"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},toString:function(){return this.log("toString"),this.id},asVersion:function(t){this.log("asVersion");var e={objectType:this.objectType,id:this.id};return"0.9"===t&&(e.objectType="Statement"),e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.SubStatement=function(t){this.log("constructor"),this.actor=null,this.verb=null,this.target=null,this.result=null,this.context=null,this.timestamp=null,this.init(t)};t.prototype={objectType:"SubStatement",LOG_SRC:"SubStatement",log:r.prototype.log,init:function(t){this.log("init");var e,n=["timestamp"];for((t=t||{}).hasOwnProperty("object")&&(t.target=t.object),t.hasOwnProperty("actor")&&("undefined"!==typeof t.actor.objectType&&"Person"!==t.actor.objectType||(t.actor.objectType="Agent"),"Agent"===t.actor.objectType?t.actor instanceof r.Agent?this.actor=t.actor:this.actor=new r.Agent(t.actor):"Group"===t.actor.objectType&&(t.actor instanceof r.Group?this.actor=t.actor:this.actor=new r.Group(t.actor))),t.hasOwnProperty("verb")&&(t.verb instanceof r.Verb?this.verb=t.verb:this.verb=new r.Verb(t.verb)),t.hasOwnProperty("target")&&(t.target instanceof r.Activity||t.target instanceof r.Agent||t.target instanceof r.Group||t.target instanceof r.SubStatement||t.target instanceof r.StatementRef?this.target=t.target:("undefined"===typeof t.target.objectType&&(t.target.objectType="Activity"),"Activity"===t.target.objectType?this.target=new r.Activity(t.target):"Agent"===t.target.objectType?this.target=new r.Agent(t.target):"Group"===t.target.objectType?this.target=new r.Group(t.target):"SubStatement"===t.target.objectType?this.target=new r.SubStatement(t.target):"StatementRef"===t.target.objectType?this.target=new r.StatementRef(t.target):this.log("Unrecognized target type: "+t.target.objectType))),t.hasOwnProperty("result")&&(t.result instanceof r.Result?this.result=t.result:this.result=new r.Result(t.result)),t.hasOwnProperty("context")&&(t.context instanceof r.Context?this.context=t.context:this.context=new r.Context(t.context)),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])},toString:function(t){return this.log("toString"),(null!==this.actor?this.actor.toString(t):"")+" "+(null!==this.verb?this.verb.toString(t):"")+" "+(null!==this.target?this.target.toString(t):"")},asVersion:function(t){this.log("asVersion");var e,n,i=["timestamp"],o=["actor","verb","result","context"];for(e={objectType:this.objectType},t=t||r.versions()[0],n=0;n<i.length;n+=1)null!==this[i[n]]&&(e[i[n]]=this[i[n]]);for(n=0;n<o.length;n+=1)null!==this[o[n]]&&(e[o[n]]=this[o[n]].asVersion(t));return null!==this.target&&(e.object=this.target.asVersion(t)),"0.9"===t&&(e.objectType="Statement"),e}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.Statement=function(t,e){this.log("constructor"),"undefined"===typeof(e="number"===typeof e?{storeOriginal:e}:e||{}).storeOriginal&&(e.storeOriginal=null),"undefined"===typeof e.doStamp&&(e.doStamp=!0),this.id=null,this.actor=null,this.verb=null,this.target=null,this.result=null,this.context=null,this.timestamp=null,this.stored=null,this.authority=null,this.attachments=null,this.version=null,this.degraded=!1,this.voided=null,this.inProgress=null,this.originalJSON=null,this.init(t,e)};t.prototype={LOG_SRC:"Statement",log:r.prototype.log,init:function(t,e){this.log("init");var n,i=["id","stored","timestamp","version","inProgress","voided"];if(t=t||{},e.storeOriginal&&(this.originalJSON=JSON.stringify(t,null,e.storeOriginal)),t.hasOwnProperty("object")&&(t.target=t.object),t.hasOwnProperty("actor")&&("undefined"!==typeof t.actor.objectType&&"Person"!==t.actor.objectType||(t.actor.objectType="Agent"),"Agent"===t.actor.objectType?t.actor instanceof r.Agent?this.actor=t.actor:this.actor=new r.Agent(t.actor):"Group"===t.actor.objectType&&(t.actor instanceof r.Group?this.actor=t.actor:this.actor=new r.Group(t.actor))),t.hasOwnProperty("authority")&&("undefined"!==typeof t.authority.objectType&&"Person"!==t.authority.objectType||(t.authority.objectType="Agent"),"Agent"===t.authority.objectType?t.authority instanceof r.Agent?this.authority=t.authority:this.authority=new r.Agent(t.authority):"Group"===t.authority.objectType&&(t.actor instanceof r.Group?this.authority=t.authority:this.authority=new r.Group(t.authority))),t.hasOwnProperty("verb")&&(t.verb instanceof r.Verb?this.verb=t.verb:this.verb=new r.Verb(t.verb)),t.hasOwnProperty("target")&&(t.target instanceof r.Activity||t.target instanceof r.Agent||t.target instanceof r.Group||t.target instanceof r.SubStatement||t.target instanceof r.StatementRef?this.target=t.target:("undefined"===typeof t.target.objectType&&(t.target.objectType="Activity"),"Activity"===t.target.objectType?this.target=new r.Activity(t.target):"Agent"===t.target.objectType?this.target=new r.Agent(t.target):"Group"===t.target.objectType?this.target=new r.Group(t.target):"SubStatement"===t.target.objectType?this.target=new r.SubStatement(t.target):"StatementRef"===t.target.objectType?this.target=new r.StatementRef(t.target):this.log("Unrecognized target type: "+t.target.objectType))),t.hasOwnProperty("result")&&(t.result instanceof r.Result?this.result=t.result:this.result=new r.Result(t.result)),t.hasOwnProperty("context")&&(t.context instanceof r.Context?this.context=t.context:this.context=new r.Context(t.context)),t.hasOwnProperty("attachments")&&null!==t.attachments)for(this.attachments=[],n=0;n<t.attachments.length;n+=1)t.attachments[n]instanceof r.Attachment?this.attachments.push(t.attachments[n]):this.attachments.push(new r.Attachment(t.attachments[n]));for(n=0;n<i.length;n+=1)t.hasOwnProperty(i[n])&&null!==t[i[n]]&&(this[i[n]]=t[i[n]]);e.doStamp&&this.stamp()},toString:function(t){return this.log("toString"),(null!==this.actor?this.actor.toString(t):"")+" "+(null!==this.verb?this.verb.toString(t):"")+" "+(null!==this.target?this.target.toString(t):"")},asVersion:function(t){this.log("asVersion");var e,n={},i=["id","timestamp"],o=["actor","verb","result","context","authority"];for(t=t||r.versions()[0],e=0;e<i.length;e+=1)null!==this[i[e]]&&(n[i[e]]=this[i[e]]);for(e=0;e<o.length;e+=1)null!==this[o[e]]&&(n[o[e]]=this[o[e]].asVersion(t));if(null!==this.target&&(n.object=this.target.asVersion(t)),"0.9"!==t&&"0.95"!==t||null!==this.voided&&(n.voided=this.voided),"0.9"===t&&null!==this.inProgress&&(n.inProgress=this.inProgress),null!==this.attachments&&"0.9"!==t&&"0.95"!==t)for(n.attachments=[],e=0;e<this.attachments.length;e+=1)this.attachments[e]instanceof r.Attachment?n.attachments.push(this.attachments[e].asVersion(t)):n.attachments.push(new r.Attachment(this.attachments[e]).asVersion(t));return n},stamp:function(){this.log("stamp"),null===this.id&&(this.id=r.Utils.getUUID()),null===this.timestamp&&(this.timestamp=r.Utils.getISODateString(new Date))},hasAttachmentWithContent:function(){var t;if(this.log("hasAttachmentWithContent"),null===this.attachments)return!1;for(t=0;t<this.attachments.length;t+=1)if(null!==this.attachments[t].content)return!0;return!1}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.StatementsResult=function(t){this.log("constructor"),this.statements=null,this.more=null,this.init(t)};t.prototype={LOG_SRC:"StatementsResult",log:r.prototype.log,init:function(t){this.log("init"),(t=t||{}).hasOwnProperty("statements")&&(this.statements=t.statements),t.hasOwnProperty("more")&&(this.more=t.more)}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n,i,o,s=[];try{n=JSON.parse(e)}catch(a){t.prototype.log("fromJSON - JSON.parse error: "+a)}if(n){for(o=0;o<n.statements.length;o+=1){try{i=new r.Statement(n.statements[o],4)}catch(c){t.prototype.log("fromJSON - statement instantiation failed: "+c+" ("+JSON.stringify(n.statements[o])+")"),i=new r.Statement({id:n.statements[o].id},4)}s.push(i)}n.statements=s}return new t(n)}}(),function(){"use strict";var t=r.State=function(t){this.log("constructor"),this.id=null,this.updated=null,this.contents=null,this.etag=null,this.contentType=null,this.init(t)};t.prototype={LOG_SRC:"State",log:r.prototype.log,init:function(t){this.log("init");var e,n=["id","contents","etag","contentType"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]]);this.updated=!1}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.ActivityProfile=function(t){this.log("constructor"),this.id=null,this.activity=null,this.updated=null,this.contents=null,this.etag=null,this.contentType=null,this.init(t)};t.prototype={LOG_SRC:"ActivityProfile",log:r.prototype.log,init:function(t){this.log("init");var e,n=["id","contents","etag","contentType"];for((t=t||{}).hasOwnProperty("activity")&&(t.activity instanceof r.Activity?this.activity=t.activity:this.activity=new r.Activity(t.activity)),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]]);this.updated=!1}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.AgentProfile=function(t){this.log("constructor"),this.id=null,this.agent=null,this.updated=null,this.contents=null,this.etag=null,this.contentType=null,this.init(t)};t.prototype={LOG_SRC:"AgentProfile",log:r.prototype.log,init:function(t){this.log("init");var e,n=["id","contents","etag","contentType"];for((t=t||{}).hasOwnProperty("agent")&&(t.agent instanceof r.Agent?this.agent=t.agent:this.agent=new r.Agent(t.agent)),e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]]);this.updated=!1}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.About=function(t){this.log("constructor"),this.version=null,this.init(t)};t.prototype={LOG_SRC:"About",log:r.prototype.log,init:function(t){this.log("init");var e,n=["version"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]])}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)}}(),function(){"use strict";var t=r.Attachment=function(t){this.log("constructor"),this.usageType=null,this.display=null,this.contentType=null,this.length=null,this.sha2=null,this.description=null,this.fileUrl=null,this.content=null,this.init(t)};t.prototype={LOG_SRC:"Attachment",log:r.prototype.log,init:function(t){this.log("init");var e,n=["contentType","length","sha2","usageType","display","description","fileUrl"];for(t=t||{},e=0;e<n.length;e+=1)t.hasOwnProperty(n[e])&&null!==t[n[e]]&&(this[n[e]]=t[n[e]]);t.hasOwnProperty("content")&&null!==t.content&&("string"===typeof t.content?this.setContentFromString(t.content):this.setContent(t.content))},asVersion:function(t){var e;return this.log("asVersion"),"0.9"===(t=t||r.versions()[0])||"0.95"===t?e=null:(e={contentType:this.contentType,display:this.display,length:this.length,sha2:this.sha2,usageType:this.usageType},null!==this.fileUrl&&(e.fileUrl=this.fileUrl),null!==this.description&&(e.description=this.description)),e},getLangDictionaryValue:r.Utils.getLangDictionaryValue,setContent:function(t){this.content=t,this.length=t.byteLength,this.sha2=r.Utils.getSHA256String(t)},setContentFromString:function(t){var e;e=r.Utils.stringToArrayBuffer(t),this.setContent(e)},getContentAsString:function(){return r.Utils.stringFromArrayBuffer(this.content)}},t.fromJSON=function(e){t.prototype.log("fromJSON");var n=JSON.parse(e);return new t(n)},t._defaultEncoding="utf-8"}(),function(){"use strict";var t,i,o,s="Environment.Node",a=r.prototype.log,c=n(627),l=n(648);t=function(t,e){a("requestComplete - xhr.status: "+t.status,s),a("requestComplete - xhr.responseText: "+t.responseText,s);var n,i=t.status,r=e.ignore404&&404===i;return i>=200&&i<400||r?e.callback?void e.callback(null,t):n={err:null,xhr:t}:(n={err:i,xhr:t},a(0===i?"[warning] There was a problem communicating with the Learning Record Store. Aborted, offline, or invalid CORS endpoint ("+i+")":"[warning] There was a problem communicating with the Learning Record Store. ("+i+" | "+t.responseText+")",s),e.callback&&e.callback(i,t),n)},r.LRS.prototype._initByEnvironment=function(){},r.LRS.prototype._makeRequest=function(e,n,i){a("_makeRequest using http/https",s);var r,o,u=e,d="undefined"!==typeof i.callback;for(o in"undefined"!==typeof i.params&&Object.keys(i.params).length>0&&(u+="?"+c.stringify(i.params)),(r=new l).open(i.method,u,d),i.expectMultipart&&(r.responseType="arraybuffer"),n)n.hasOwnProperty(o)&&r.setRequestHeader(o,n[o]);return"undefined"!==typeof i.data&&(i.data+=""),d&&(r.onreadystatechange=function(){a("xhr.onreadystatechange - xhr.readyState: "+r.readyState,s),4===r.readyState&&t(r,i)}),r.send(i.data),d?r:t(r,i)},r.LRS.syncEnabled=!1,r.LRS.prototype._getMultipartRequestData=function(t,n,r){var s,a=[];for(a.push(i(t,n)),s=0;s<r.length;s+=1)null!==r[s].content&&a.push(o(t,r[s].content,r[s].sha2,r[s].contentType));return"undefined"===typeof e.from?a.push(new e("\r\n--"+t+"--\r\n")):a.push(e.from("\r\n--"+t+"--\r\n")),e.concat(a)},i=function(t,n){var i=["--"+t,"Content-Type: application/json","",JSON.stringify(n)].join("\r\n");return i+="\r\n","undefined"===typeof e.from?new e(i):e.from(i)},o=function(t,n,i,r){var o=[],s=["--"+t,"Content-Type: "+r,"Content-Transfer-Encoding: binary","X-Experience-API-Hash: "+i].join("\r\n");return s+="\r\n\r\n","undefined"===typeof e.from?(o.push(new e(s)),o.push(new e(n))):(o.push(e.from(s)),o.push(e.from(n))),e.concat(o)},r.Utils.stringToArrayBuffer=function(t,n){var i,o,s,a;if(n||(n=r.Utils.defaultEncoding),"undefined"===typeof e.from){for(i=new e(t,n),o=new ArrayBuffer(i.length),s=new Uint8Array(o),a=0;a<i.length;a+=1)s[a]=i[a];return o}return(o=(i=e.from(t,n)).buffer).slice(i.byteOffset,i.byteOffset+i.byteLength)},r.Utils.stringFromArrayBuffer=function(t,n){var i,o,s;if(n||(n=r.Utils.defaultEncoding),"undefined"===typeof e.from)for(i=new e(t.byteLength),o=new Uint8Array(t),s=0;s<i.length;s+=1)i[s]=o[s];else i=e.from(t);return i.toString(n)}}()}).call(this,n(119).Buffer)},648:function(t,e,n){(function(e,i){(function(){var r,o,s,a,c,l,u,d,p,h,f,v={}.hasOwnProperty,g=function(t,e){for(var n in e)v.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};c=function(){function t(){this.onloadstart=null,this.onprogress=null,this.onabort=null,this.onerror=null,this.onload=null,this.ontimeout=null,this.onloadend=null,this._listeners={}}return t.prototype.onloadstart=null,t.prototype.onprogress=null,t.prototype.onabort=null,t.prototype.onerror=null,t.prototype.onload=null,t.prototype.ontimeout=null,t.prototype.onloadend=null,t.prototype.addEventListener=function(t,e){var n;t=t.toLowerCase(),(n=this._listeners)[t]||(n[t]=[]),this._listeners[t].push(e)},t.prototype.removeEventListener=function(t,e){var n;t=t.toLowerCase(),this._listeners[t]&&-1!==(n=this._listeners[t].indexOf(e))&&this._listeners.splice(n,1)},t.prototype.dispatchEvent=function(t){var e,n,i,r,o;if(e=t.type,i=this._listeners[e])for(r=0,o=i.length;r<o;r++)(n=i[r])(t);(n=this["on"+e])&&n(t)},t}(),d=n(421),p=n(524),h=n(649),f=n(394),a=function(t){function n(t){n.__super__.constructor.call(this),this.onreadystatechange=null,this._anonymous=t&&t.anon,this.readyState=n.UNSENT,this.response=null,this.responseText="",this.responseType="",this.status=0,this.statusText="",this.timeout=0,this.upload=new u(this),this._method=null,this._url=null,this._sync=!1,this._headers=null,this._loweredHeaders=null,this._mimeOverride=null,this._request=null,this._response=null,this._responseParts=null,this._responseHeaders=null,this._aborting=null,this._error=null,this._loadedBytes=0,this._totalBytes=0,this._lengthComputable=!1}return g(n,t),n.prototype.onreadystatechange=null,n.prototype.readyState=null,n.prototype.response=null,n.prototype.responseText=null,n.prototype.responseType=null,n.prototype.status=null,n.prototype.timeout=null,n.prototype.upload=null,n.prototype.open=function(t,e,i,r,o){var a;if((t=t.toUpperCase())in this._restrictedMethods)throw new s("HTTP method "+t+" is not allowed in XHR");switch(a=this._parseUrl(e),void 0===i&&(i=!0),this.readyState){case n.UNSENT:case n.OPENED:case n.DONE:case n.HEADERS_RECEIVED:case n.LOADING:}this._method=t,this._url=a,this._sync=!i,this._headers={},this._loweredHeaders={},this._mimeOverride=null,this._setReadyState(n.OPENED),this._request=null,this._response=null,this.status=0,this.statusText="",this._responseParts=[],this._responseHeaders=null,this._loadedBytes=0,this._totalBytes=0,this._lengthComputable=!1},n.prototype.setRequestHeader=function(t,e){var i;if(this.readyState!==n.OPENED)throw new r("XHR readyState must be OPENED");i=t.toLowerCase(),this._restrictedHeaders[i]||/^sec\-/.test(i)||/^proxy-/.test(i)?console.warn('Refused to set unsafe header "'+t+'"'):(e=e.toString(),i in this._loweredHeaders?(t=this._loweredHeaders[i],this._headers[t]=this._headers[t]+", "+e):(this._loweredHeaders[i]=t,this._headers[t]=e))},n.prototype.send=function(t){if(this.readyState!==n.OPENED)throw new r("XHR readyState must be OPENED");if(this._request)throw new r("send() already called");switch(this._url.protocol){case"file:":this._sendFile(t);break;case"http:":case"https:":this._sendHttp(t);break;default:throw new o("Unsupported protocol "+this._url.protocol)}},n.prototype.abort=function(){this._request&&(this._request.abort(),this._setError(),this._dispatchProgress("abort"),this._dispatchProgress("loadend"))},n.prototype.getResponseHeader=function(t){var e;return this._responseHeaders&&(e=t.toLowerCase())in this._responseHeaders?this._responseHeaders[e]:null},n.prototype.getAllResponseHeaders=function(){var t,e,n;return this._responseHeaders?(t=function(){var t,i;for(e in i=[],t=this._responseHeaders)n=t[e],i.push(e+": "+n);return i}.call(this),t.join("\r\n")):""},n.prototype.overrideMimeType=function(t){if(this.readyState===n.LOADING||this.readyState===n.DONE)throw new r("overrideMimeType() not allowed in LOADING or DONE");this._mimeOverride=t.toLowerCase()},n.prototype.nodejsSet=function(t){"httpAgent"in t&&(this.nodejsHttpAgent=t.httpAgent),"httpsAgent"in t&&(this.nodejsHttpsAgent=t.httpsAgent)},n.nodejsSet=function(t){n.prototype.nodejsSet(t)},n.prototype.UNSENT=0,n.UNSENT=0,n.prototype.OPENED=1,n.OPENED=1,n.prototype.HEADERS_RECEIVED=2,n.HEADERS_RECEIVED=2,n.prototype.LOADING=3,n.LOADING=3,n.prototype.DONE=4,n.DONE=4,n.prototype.nodejsHttpAgent=d.globalAgent,n.prototype.nodejsHttpsAgent=p.globalAgent,n.prototype._restrictedMethods={CONNECT:!0,TRACE:!0,TRACK:!0},n.prototype._restrictedHeaders={"accept-charset":!0,"accept-encoding":!0,"access-control-request-headers":!0,"access-control-request-method":!0,connection:!0,"content-length":!0,cookie:!0,cookie2:!0,date:!0,dnt:!0,expect:!0,host:!0,"keep-alive":!0,origin:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,via:!0},n.prototype._privateHeaders={"set-cookie":!0,"set-cookie2":!0},n.prototype._userAgent="Mozilla/5.0 ("+h.type()+" "+h.arch()+") node.js/"+e.versions.node+" v8/"+e.versions.v8,n.prototype._setReadyState=function(t){var e;this.readyState=t,e=new l("readystatechange",this),this.dispatchEvent(e)},n.prototype._sendFile=function(){if("GET"!==this._url.method)throw new o("The file protocol only supports GET");throw new Error("Protocol file: not implemented")},n.prototype._sendHttp=function(t){if(this._sync)throw new Error("Synchronous XHR processing not implemented");null==t||"GET"!==this._method&&"HEAD"!==this._method?t||(t=""):(console.warn("Discarding entity body for "+this._method+" requests"),t=null),this.upload._setData(t),this._finalizeHeaders(),this._sendHxxpRequest()},n.prototype._sendHxxpRequest=function(){var t,e,n,i=this;"http:"===this._url.protocol?(e=d,t=this.nodejsHttpAgent):(e=p,t=this.nodejsHttpsAgent),n=e.request({hostname:this._url.hostname,port:this._url.port,path:this._url.path,auth:this._url.auth,method:this._method,headers:this._headers,agent:t}),this._request=n,this.timeout&&n.setTimeout(this.timeout,(function(){return i._onHttpTimeout(n)})),n.on("response",(function(t){return i._onHttpResponse(n,t)})),n.on("error",(function(t){return i._onHttpRequestError(n,t)})),this.upload._startUpload(n),this._request===n&&this._dispatchProgress("loadstart")},n.prototype._finalizeHeaders=function(){this._headers.Connection="keep-alive",this._headers.Host=this._url.host,this._anonymous&&(this._headers.Referer="about:blank"),this._headers["User-Agent"]=this._userAgent,this.upload._finalizeHeaders(this._headers,this._loweredHeaders)},n.prototype._onHttpResponse=function(t,e){var i,r=this;if(this._request===t){switch(e.statusCode){case 301:case 302:case 303:case 307:case 308:return this._url=this._parseUrl(e.headers.location),this._method="GET","content-type"in this._loweredHeaders&&(delete this._headers[this._loweredHeaders["content-type"]],delete this._loweredHeaders["content-type"]),"Content-Type"in this._headers&&delete this._headers["Content-Type"],delete this._headers["Content-Length"],this.upload._reset(),this._finalizeHeaders(),void this._sendHxxpRequest()}return this._response=e,this._response.on("data",(function(t){return r._onHttpResponseData(e,t)})),this._response.on("end",(function(){return r._onHttpResponseEnd(e)})),this._response.on("close",(function(){return r._onHttpResponseClose(e)})),this.status=this._response.statusCode,this.statusText=d.STATUS_CODES[this.status],this._parseResponseHeaders(e),(i=this._responseHeaders["content-length"])?(this._totalBytes=parseInt(i),this._lengthComputable=!0):this._lengthComputable=!1,this._setReadyState(n.HEADERS_RECEIVED)}},n.prototype._onHttpResponseData=function(t,e){if(this._response===t)return this._responseParts.push(e),this._loadedBytes+=e.length,this.readyState!==n.LOADING&&this._setReadyState(n.LOADING),this._dispatchProgress("progress")},n.prototype._onHttpResponseEnd=function(t){if(this._response===t)return this._parseResponse(),this._request=null,this._response=null,this._setReadyState(n.DONE),this._dispatchProgress("load"),this._dispatchProgress("loadend")},n.prototype._onHttpResponseClose=function(t){var e;if(this._response===t)return e=this._request,this._setError(),e.abort(),this._setReadyState(n.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")},n.prototype._onHttpTimeout=function(t){if(this._request===t)return this._setError(),t.abort(),this._setReadyState(n.DONE),this._dispatchProgress("timeout"),this._dispatchProgress("loadend")},n.prototype._onHttpRequestError=function(t,e){if(this._request===t)return this._setError(),t.abort(),this._setReadyState(n.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")},n.prototype._dispatchProgress=function(t){var e;(e=new l(t,this)).lengthComputable=this._lengthComputable,e.loaded=this._loadedBytes,e.total=this._totalBytes,this.dispatchEvent(e)},n.prototype._setError=function(){this._request=null,this._response=null,this._responseHeaders=null,this._responseParts=null},n.prototype._parseUrl=function(t){var e,n,i,r;return(r=f.parse(t,!1,!0)).hash=null,r.auth&&("undefined"!==typeof i&&null!==i||"undefined"!==typeof n&&null!==n)&&(-1===(e=r.auth.indexOf(":"))?i||(i=r.auth):(i||(i=r.substring(0,e)),n||(n=r.substring(e+1)))),(i||n)&&(r.auth=i+":"+n),r},n.prototype._parseResponseHeaders=function(t){var e,n,i,r;for(n in this._responseHeaders={},r=t.headers)i=r[n],e=n.toLowerCase(),this._privateHeaders[e]||(null!==this._mimeOverride&&"content-type"===e&&(i=this._mimeOverride),this._responseHeaders[e]=i);null===this._mimeOverride||"content-type"in this._responseHeaders||(this._responseHeaders["content-type"]=this._mimeOverride)},n.prototype._parseResponse=function(){var t,e,n,r,o,s;switch(e=i.concat?i.concat(this._responseParts):this._concatBuffers(this._responseParts),this._responseParts=null,this.responseType){default:this._parseTextResponse(e);break;case"json":this.responseText=null;try{this.response=JSON.parse(e.toString("utf-8"))}catch(a){a,this.response=null}break;case"buffer":this.responseText=null,this.response=e;break;case"arraybuffer":for(this.responseText=null,t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=o=0,s=e.length;0<=s?o<s:o>s;n=0<=s?++o:--o)r[n]=e[n];this.response=t}},n.prototype._parseTextResponse=function(t){try{this.responseText=t.toString(this._parseResponseEncoding())}catch(e){e,this.responseText=t.toString("binary")}this.response=this.responseText},n.prototype._parseResponseEncoding=function(){var t,e;return null,(t=this._responseHeaders["content-type"])&&(e=/\;\s*charset\=(.*)$/.exec(t))?e[1]:"utf-8"},n.prototype._concatBuffers=function(t){var e,n,r,o,s,a,c;if(0===t.length)return new i(0);if(1===t.length)return t[0];for(n=0,o=0,a=t.length;o<a;o++)n+=(e=t[o]).length;for(r=new i(n),n=0,s=0,c=t.length;s<c;s++)(e=t[s]).copy(r,n),n+=e.length;return r},n}(c),t.exports=a,a.XMLHttpRequest=a,s=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return g(e,t),e}(Error),a.SecurityError=s,r=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return g(e,t),e}(Error),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,t),e}(Error),a.InvalidStateError=r,o=function(t){function e(){e.__super__.constructor.apply(this,arguments)}return g(e,t),e}(Error),a.NetworkError=o,l=function(){function t(t,e){this.type=t,this.target=e,this.currentTarget=this.target,this.lengthComputable=!1,this.loaded=0,this.total=0}return t.prototype.bubbles=!1,t.prototype.cancelable=!1,t.prototype.target=null,t.prototype.loaded=null,t.prototype.lengthComputable=null,t.prototype.total=null,t}(),a.XMLHttpRequestProgressEvent=l,u=function(t){function e(t){e.__super__.constructor.call(this),this._request=t,this._reset()}return g(e,t),e.prototype._reset=function(){this._contentType=null,this._body=null},e.prototype._setData=function(t){var e,n,r,o,s,a,c,l;if("undefined"!==typeof t&&null!==t)if("string"===typeof t)0!==t.length&&(this._contentType="text/plain;charset=UTF-8"),this._body=new i(t,"utf8");else if(i.isBuffer(t))this._body=t;else if(t instanceof ArrayBuffer){for(e=new i(t.byteLength),o=new Uint8Array(t),n=s=0,c=t.byteLength;0<=c?s<c:s>c;n=0<=c?++s:--s)e[n]=o[n];this._body=e}else{if(!(t.buffer&&t.buffer instanceof ArrayBuffer))throw new Error("Unsupported send() data "+t);for(e=new i(t.byteLength),r=t.byteOffset,o=new Uint8Array(t.buffer),n=a=0,l=t.byteLength;0<=l?a<l:a>l;n=0<=l?++a:--a)e[n]=o[n+r];this._body=e}},e.prototype._finalizeHeaders=function(t,e){this._contentType&&("content-type"in e||(t["Content-Type"]=this._contentType)),this._body&&(t["Content-Length"]=this._body.length.toString())},e.prototype._startUpload=function(t){this._body&&t.write(this._body),t.end()},e}(c),a.XMLHttpRequestUpload=u}).call(this)}).call(this,n(120),n(119).Buffer)},649:function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!==typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},920:function(t,e,n){"use strict";(function(t){var i=n(0),r=n(23),o=n(4),s=n.n(o),a=n(6),c=n(27),l=n(3),u=n(21),d=n(24),p=n(568),h=n.n(p),f=n(12),v=n(513),g=n.n(v),m=n(8),y=n.n(m),b=n(30),j=n(133),O=n(80),x=n(148),A=n(570),w=n(634),S=n(642),k=n(506),N=n(581),_=n(458),T=(n(571),n(382)),P=n(2);e.a=Object(d.h)(Object(f.b)(null,(function(t){return{changePlaylistTitle:function(e,n,i){return t(Object(j.b)(e,n,i))}}}))((function(e){var n,o,d,p,v,m,C,I,R,E=e.match,H=e.history,B=e.changePlaylistTitle,L=Object(f.c)(),D=Object(l.useState)(!1),U=Object(c.a)(D,2),M=U[0],J=U[1],z=Object(l.useRef)(),V=Object(f.d)((function(t){return t.organization})),G=Object(f.d)((function(t){return t.project})),q=Object(f.d)((function(t){return t.playlist})),F=Object(f.d)((function(t){return t.ui})),K=Object(l.useRef)([]),Q=V.permission,X=Object(f.d)((function(t){return t.team})).teamPermission,W=F.showDeletePlaylistPopup,Z=Object(l.useState)(null),Y=Object(c.a)(Z,2),$=Y[0],tt=Y[1],et=Object(l.useState)(!0),nt=Object(c.a)(et,2),it=nt[0],rt=nt[1],ot=Object(l.useState)([!0]),st=Object(c.a)(ot,2),at=st[0],ct=st[1],lt=Object(l.useState)(!1),ut=Object(c.a)(lt,2),dt=ut[0],pt=ut[1],ht=Object(l.useState)(0),ft=Object(c.a)(ht,2),vt=ft[0],gt=ft[1],mt=Object(l.useState)(null),yt=Object(c.a)(mt,2),bt=yt[0],jt=yt[1];Object(l.useEffect)((function(){tt(G.projectSelect),rt(G.projectSelect.shared)}),[G.projectSelect]),Object(l.useEffect)((function(){var t,e,n;0===Object.keys(X).length&&(null===$||void 0===$||null===(t=$.team)||void 0===t?void 0:t.id)&&(null===V||void 0===V||null===(e=V.currentOrganization)||void 0===e?void 0:e.id)&&L(Object(T.g)(null===V||void 0===V||null===(n=V.currentOrganization)||void 0===n?void 0:n.id,$.team.id))}),[X,null===V||void 0===V?void 0:V.currentOrganization,$]),Object(l.useEffect)((function(){0===q.playlists.length&&L(Object(j.j)(E.params.projectId,!0))}),[]);var Ot,xt=function(){var t=Object(a.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(Object(O.e)(e));case 2:H.push("/studio");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),At=function(){J(!0)},wt={dots:!1,arrows:!0,infinite:!1,speed:500,slidesToShow:5.5,slidesToScroll:1};return Object(l.useEffect)((function(){var t;(null===V||void 0===V||null===(t=V.currentOrganization)||void 0===t?void 0:t.id)&&L(Object(O.n)(E.params.projectId))}),[L,E.params.projectId,null===V||void 0===V||null===(n=V.currentOrganization)||void 0===n?void 0:n.id]),Ot=$?q.playlists&&q.playlists.map((function(t,e){var n,o,s,a,c,l;return l=t.activities&&t.activities.length>0?t.activities.map((function(e){var n,i;return(Object.keys(X).length?null===X||void 0===X||null===(n=X.Team)||void 0===n?void 0:n.includes("team:view-activity"):null===Q||void 0===Q||null===(i=Q.Activity)||void 0===i?void 0:i.includes("activity:view"))&&Object(P.jsx)(A.a,{activity:e,projectId:parseInt(E.params.projectId,10),playlistId:t.id,playlist:t,teamPermission:X||{}},e.id)})):Object(P.jsx)("div",{className:"col-md-12",children:Object(P.jsx)("div",{className:"alert alert-info",role:"alert",children:"No activity defined for this playlist."})}),console.log(M),(Object.keys(X).length?null===X||void 0===X||null===(n=X.Team)||void 0===n?void 0:n.includes("team:view-playlist"):null===Q||void 0===Q||null===(o=Q.Playlist)||void 0===o?void 0:o.includes("playlist:view"))&&Object(P.jsxs)("div",{className:"check-each",children:[(Object.keys(X).length?null===X||void 0===X||null===(s=X.Team)||void 0===s?void 0:s.includes("team:add-activity"):(null===Q||void 0===Q||null===(a=Q.Activity)||void 0===a?void 0:a.includes("activity:create"))||(null===Q||void 0===Q||null===(c=Q.Activity)||void 0===c?void 0:c.includes("activity:upload")))&&Object(P.jsx)("div",{className:"add-btn-activity",children:Object(P.jsxs)("button",{type:"button",className:"add-resource-to-playlist-btn",onClick:function(){var e;H.push("/studio/org/".concat(null===(e=V.currentOrganization)||void 0===e?void 0:e.domain,"/project/").concat(t.project_id,"/playlist/").concat(t.id,"/activity/create"))},children:[Object(P.jsx)(b.a,{icon:"plus-circle",className:"mr-2"}),"Add new activity"]})}),Object(P.jsxs)("button",{type:"button",ref:function(t){K.current[e]=t},className:0===e?"active accordion":" accordion",onClick:function(){if(!M){K.current[e].classList.toggle("active");var t=Object(r.a)(at);t[e]=!t[e],ct(t)}},children:[Object(P.jsx)(b.a,{icon:at[e]?"minus":"plus",className:"mr-2"}),M&&t===bt?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("input",{name:"playlist-title",defaultValue:t.title,ref:z}),"\xa0",Object(P.jsx)(b.a,{icon:"edit",className:"mr-4",onClick:function(){var e;t.title!==z.current.value&&z.current.value&&B(null===G||void 0===G||null===(e=G.projectSelect)||void 0===e?void 0:e.id,t.id,z.current.value);J(!1)}})]}):t.title]}),Object(P.jsx)("div",{className:"panel",children:Object(P.jsx)("ul",{children:Object(P.jsx)(h.a,Object(i.a)(Object(i.a)({},wt),{},{children:l}))})}),Object(P.jsx)(S.a,{playlist:t,projectId:t.project_id,selectedProject:t.project,setSelectedForEdit:jt,handleClickPlaylistTitle:At,teamPermission:X||{}})]},t.id)})):Object(P.jsx)("div",{className:"col-md-12",children:Object(P.jsx)("div",{className:"alert alert-info",role:"alert",children:"No playlists defined for this project."})}),Object(P.jsx)("div",{children:$&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"container",children:Object(P.jsxs)("div",{className:"scene flex-wrap",children:[Object(P.jsxs)("div",{className:"scene-img",children:[Object(P.jsx)("div",{id:"content"}),Object(P.jsx)(u.b,{to:"/studio/org/".concat(null===(o=V.currentOrganization)||void 0===o?void 0:o.domain,"/project/").concat($.id),children:$.thumb_url&&$.thumb_url.includes("pexels.com")?Object(P.jsx)("img",{src:$.thumb_url,alt:"thumbnail"}):Object(P.jsx)("img",{src:t.config.resourceUrl+$.thumb_url,alt:"thumbnail"})})]}),Object(P.jsxs)("div",{className:"sce_cont",children:[Object(P.jsxs)("ul",{className:"bar_list flex-div check",children:[Object(P.jsxs)("li",{children:[Object(P.jsx)("div",{className:"team-name",children:(null===$||void 0===$||null===(d=$.team)||void 0===d?void 0:d.name)?"Team Name: ".concat(null===$||void 0===$||null===(p=$.team)||void 0===p?void 0:p.name):null}),Object(P.jsxs)("div",{className:"title_lg check",children:[Object(P.jsx)("div",{children:$.name}),Object(P.jsxs)("div",{className:"configuration",children:[(Object.keys(X).length?null===X||void 0===X||null===(v=X.Team)||void 0===v?void 0:v.includes("team:view-project"):null===Q||void 0===Q||null===(m=Q.Project)||void 0===m?void 0:m.includes("project:view"))&&Object(P.jsx)(w.a,{project:$,handleShow:function(){pt(!0)},setProjectId:function(t){gt(t)},showDeletePopup:function(t,e,n){L(Object(_.c)(t,e,n))},teamPermission:X||{},previewMode:!0}),Object(P.jsxs)(u.b,{to:"/studio/org/".concat(null===(C=V.currentOrganization)||void 0===C?void 0:C.domain),onClick:H.goBack,className:"go-back-button-preview",children:[Object(P.jsx)(b.a,{icon:"undo",className:"mr-2"}),"Exit Preview Mode"]}),(Object.keys(X).length?null===X||void 0===X||null===(I=X.Team)||void 0===I?void 0:I.includes("team:share-project"):null===Q||void 0===Q||null===(R=Q.Project)||void 0===R?void 0:R.includes("project:share"))&&Object(P.jsxs)("div",{className:"share-button",children:["Share Project",Object(P.jsx)(g.a,{onColor:"#5952c6",onChange:function(){it?y.a.fire({icon:"warning",title:'You are about to stop sharing <strong>"'.concat($.name,'"</strong>'),html:"Please remember that anyone you have shared this project\n                                    with will no longer have access its contents. Do you want to continue?",showCloseButton:!0,showCancelButton:!0,focusConfirm:!1,confirmButtonText:"Stop Sharing!",confirmButtonAriaLabel:"Stop Sharing!",cancelButtonText:"Cancel",cancelButtonAriaLabel:"Cancel"}).then((function(t){t.isConfirmed&&L(Object(O.w)($.id,$.name))})):L(Object(O.v)(null===$||void 0===$?void 0:$.id,$.name))},checked:it||!1,className:"react-switch",handleDiameter:30,uncheckedIcon:!1,checkedIcon:!1})]}),it&&Object(P.jsxs)("div",{className:"shared-link",onClick:function(){window.gapi&&window.gapi.sharetoclassroom&&window.gapi.sharetoclassroom.go("croom");var t="".concat(window.location.href.split("/")[0],"//"),e="".concat(t).concat(window.location.host,"/studio/project/").concat(E.params.projectId,"/shared");return Object(x.a)(e,$.name)},children:[Object(P.jsx)(b.a,{icon:"external-link-alt",className:"mr-2"}),"View Shared Link"]})]})]})]}),Object(P.jsx)("li",{}),Object(P.jsx)("li",{}),Object(P.jsx)("li",{})]}),Object(P.jsx)("ul",{className:"rating flex-div"}),Object(P.jsx)("p",{className:"expandiv",children:$.description})]})]})}),Object(P.jsx)("div",{className:"container",children:Object(P.jsxs)("div",{className:"playlist-div",children:[Object(P.jsx)("div",{className:"playlist-title-div",children:Object(P.jsx)("div",{className:"title-md",children:"Playlists"})}),Object(P.jsx)("div",{className:"all-playlist check-custom",children:Object(P.jsx)("div",{className:"playlist-accordion",id:"custom_accordion",children:Ot})})]})}),Object(P.jsx)(k.a,{projectId:vt,show:dt,onHide:function(){pt(!1)}}),W&&Object(P.jsx)(N.a,{ui:F,selectedProject:$,deletePlaylist:function(t,e){L(Object(j.e)(t,e))},hideDeletePopup:function(){L(Object(_.b)())},deleteProject:xt})]})})})))}).call(this,n(36))}}]);
//# sourceMappingURL=20.173ebf3e.chunk.js.map