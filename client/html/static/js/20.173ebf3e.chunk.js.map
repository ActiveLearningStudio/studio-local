{"version":3,"sources":["containers/Preview/ResourcePreview/index.js","containers/Preview/PlaylistPreview/index.js","containers/Preview/index.js","utils/index.js","store/actions/team.js","services/gapi.service.js","store/actions/gapi.js","helpers/xapi.js","assets/images/loginlogo.png","../node_modules/react-google-login/dist/google-login.js","services/genericLMS.service.js","store/actions/LMS/genericLMS.js","store/actions/ui.js","components/models/GoogleLoginModal.js","store/actions/share.js","services/account.service.js","store/actions/account.js","../node_modules/react-switch/index.js","components/Unauthorized.js","assets/images/276.gif","containers/H5PPreview.js","../../src/CloseIcon.tsx","../../src/utils.ts","../../src/lib/focusTrapJs.ts","../../src/FocusTrap.tsx","../../src/modalManager.ts","../../src/useScrollLock.ts","../../src/index.tsx","components/ResourceCard/ResourceCardDropdown.js","components/ActivityCard/index.js","components/ResourceCard/shareResource.js","../node_modules/react-switch/dist/react-switch.min.js","components/DeletePopup/index.js","../node_modules/body-scroll-lock/lib/bodyScrollLock.esm.js","components/ResourceCard/ShareLink.js","../node_modules/react-bootstrap/esm/Image.js","assets/images/project_icon.svg","containers/Preview/PlaylistPreview/components/PreviousLink.js","containers/Preview/PlaylistPreview/components/NextLink.js","containers/Projects/ProjectCard/ProjectCardDropdown.js","containers/Playlists/PlaylistCard/PlaylistCardDropdown.js","containers/Preview/PlaylistPreview/components/ActivitiesList.js","components/ActivityPreviewCard/index.js","components/ResourceCard/dropdown.js","containers/Preview/PlaylistPreview/ActivityShared.js","../node_modules/tincanjs/build/tincan-node.js","../node_modules/xhr2/lib/xhr2.js","../node_modules/os-browserify/browser.js","containers/Preview/ProjectPreview/index.js"],"names":["withRouter","connect","state","resource","dispatch","loadResource","activityId","playlistId","loadResourceAction","props","organization","useSelector","useEffect","next","nextResourceId","to","currentOrganization","domain","className","icon","previous","previousResourceId","H5PPreview","lazy","ImmersiveReaderPreview","PlaylistPreview","loading","projectId","playlist","loadHP","loadPlaylist","loadProjectPlaylists","collapsed","setCollapsed","teamPermission","team","permission","projectPreview","localStorage","getItem","useDispatch","window","scrollTo","selectedPlaylist","id","Object","keys","length","project","getTeamPermission","currentActivity","currentActivityId","previousResource","nextResource","activities","undefined","find","f","index","findIndex","loadH5pResourceSettings","then","catch","role","allPlaylists","playlists","activityShared","shared","share","a","nameActivity","title","Swal","fire","showCloseButton","showCancelButton","focusConfirm","confirmButtonText","confirmButtonAriaLabel","cancelButtonText","cancelButtonAriaLabel","resp","isConfirmed","removeShareActivity","shareActivity","Unauthorized","text","toUpperCase","showbutton","src","projectIcon","alt","name","PreviousLink","NextLink","onClick","fallback","type","activity","Tabs","defaultActiveKey","Tab","eventKey","ActivitiesList","Team","includes","Activity","protocol","location","href","split","confirmAlert","customUI","onClose","target","rel","style","flex","width","value","host","copyText","document","getElementById","focus","select","execCommand","showConfirmButton","timer","allowOutsideClick","onColor","onChange","checked","handleDiameter","uncheckedIcon","checkedIcon","description","defaultProps","ui","sideBarCollapsed","loadingH5P","loadPlaylistAction","loadProjectPlaylistsAction","show","LoadHP","collapsedSideBar","PreviewPage","content","this","match","previewType","params","parseInt","ActivityShared","ProjectPreview","key","showLti","React","Component","createProject","thumbUrl","createProjectAction","loadMyProjects","loadMyProjectsAction","showCreateProjectModal","showCreateProjectModalAction","getErrors","e","errors","Array","isArray","forEach","concat","required","trim","maxLength","max","fadeAnimation","keyframes","fadeIn","FadeDiv","styled","div","alphaNumeric","RegExp","test","alphabetsOnly","resetSelectedTeamAction","actionTypes","updateSelectedTeamAction","payload","showCreationAction","showInvitingAction","showAssigningAction","loadTeamsAction","centralizedState","store","getState","activeOrganization","teamService","getAll","teams","loadSubOrganizationTeamsAction","getAllSubOrganizationTeams","createTeamAction","data","create","loadTeamAction","teamId","get","updateTeamAction","update","deleteTeamAction","remove","inviteTeamMemberAction","user","inviteConfirm","invited","users","inviteTeamMembersAction","inviteMembersAction","note","inviteMembers","removeMemberAction","userId","email","removeMember","addProjectsAction","ids","addProjects","result","removeProjectAction","removeProject","addMembersToProjectAction","addMembersToProject","removeMemberFromProjectAction","removeMemberFromProject","AddTeamRoles","orgId","teamRoleType","teamRoleTypes","TeamId","teamPermisison","teamPermissions","getTeamProject","query","page","changeUserRole","selectedProjectForCloning","projectName","apiVersion","config","gapiBaseUrl","token","axios","method","url","headers","Authorization","response","courseStates","studentId","submissionId","httpService","gcuid","submissionid","err","Promise","reject","html","message","classworkId","courseId","post","course_id","access_token","gc_classwork_id","gc_submission_id","actor","error","console","log","googleShare","GOOGLE_SHARE","getProjectId","googleClassRoomLoginAction","searchService","googleShareToken","JSON","stringify","tokenObj","getCourses","ALL_COURSES","courses","googleClassRoomLoginFailure","GOOGLE_CLASSROOM_LOGIN_FAILURE","googleClassRoomLoginFailureAction","GOOGLE_CLASSROOM_LOGIN","confirmButtonColor","replace","setStudentAuthAction","gapiService","accessToken","studentProfile","SET_STUDENT_AUTH","studentData","auth","profile","refreshStudentAuthTokenAction","newToken","SET_STUDENT_AUTH_TOKEN","getStudentCoursesAction","coursesResponse","GET_STUDENT_COURSES","h5pSettings","GET_H5P_SETTINGS","getSubmissionAction","submission","GET_SUBMISSION","turnInAction","turnedIn","TURNED_IN_ACTIVITY","getSummaryAuthAction","summaryAuth","GET_SUMMARY_AUTH","getOutcomeSummaryAction","outcomeSummary","GET_OUTCOME_SUMMARY","isxAPINeeded","currentRoute","extendStatement","h5pObj","statement","skipped","path","attemptId","homepage","toolPlatform","activeCourse","customCourseName","customApiDomainUrl","customCourseCode","platform","el","statementExtended","other","objectType","origin","push","object","definition","extensions","alternateLink","account","homePage","context","contextActivities","verb","display","score","min","interactionType","interactiveBookObject","libraryInfo","machineName","parent","chapterIndex","getActiveChapter","chapters","extendSharedActivityStatement","fakeSubId","Math","floor","random","toString","fakeAttemptId","fakeCourseId","referrer","self","module","exports","o","t","m","n","r","i","resetWarningCache","c","Error","array","isRequired","bool","func","number","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","Symbol","iterator","done","return","prototype","call","slice","constructor","from","TypeError","u","l","s","getElementsByTagName","createElement","parentNode","insertBefore","head","appendChild","onerror","onload","d","removeChild","p","b","paddingRight","fontWeight","paddingLeft","paddingTop","paddingBottom","children","g","marginRight","background","active","padding","borderRadius","height","xmlns","fill","fillRule","y","useState","tag","disabledStyle","buttonText","v","render","S","theme","j","O","disabled","x","h","onSuccess","onAutoLoadFinished","onRequest","onFailure","onScriptLoadFailure","clientId","cookiePolicy","loginHint","hostedDomain","autoLoad","isSignedIn","fetchBasicProfile","redirectUri","discoveryDocs","uxMode","scope","accessType","responseType","jsSrc","prompt","I","signIn","w","loaded","k","backgroundColor","alignItems","color","boxShadow","border","fontSize","fontFamily","A","cursor","opacity","_","assign","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","getBasicProfile","getAuthResponse","googleId","getId","tokenId","id_token","profileObj","imageUrl","getImageUrl","getEmail","getName","givenName","getGivenName","familyName","getFamilyName","preventDefault","P","gapi","auth2","getAuthInstance","L","grantOfflineAccess","E","T","M","C","client_id","cookie_policy","login_hint","hosted_domain","fetch_basic_profile","ux_mode","redirect_uri","access_type","load","currentUser","init","onLogoutSuccess","signOut","useCallback","disconnect","defineProperty","enumerable","toStringTag","__esModule","bind","default","hasOwnProperty","require","lms","lmsSettingId","setting_id","count","doLoginAction","service","lmsName","results","GENERIC_LMS_LOGIN_ERROR","GENERIC_LMS_LOGIN","loadH5PSettingsAction","GENERIC_LMS_LOAD_H5P_SETTINGS_ERROR","GENERIC_LMS_LOAD_H5P_SETTINGS","loadSafariMontagePublishToolAction","SAFARI_MONTAGE_LOAD_PUBLISH_TOOL_ERROR","SAFARI_MONTAGE_LOAD_PUBLISH_TOOL","closeSafariMontageToolAction","CLOSE_SAFARI_MONTAGE_TOOL","showDeletePopup","deleteType","SHOW_DELETE_POPUP","showDeletePopupAction","hideDeletePopupAction","HIDE_DELETE_POPUP","SIDE_BAR_COLLAPSE_TOGGLE","googleClassRoomLogin","onHide","dataRedux","tokenTemp","setTokenTemp","showForm","setShowForm","setCourses","setLoading","open","center","logo","maxWidth","initialValues","course","heading","room","onSubmit","values","copyProject","handleChange","handleBlur","handleSubmit","onBlur","map","item","global","gapiClientId","googleClassShare","getUserLmsSettingsAction","accountService","lmsSettings","GET_USER_LMS_SETTINGS","showButton","std","counter","resourceId","setResourceId","loadH5pResourceProp","showLtiPreview","showActivityPreview","resourceLoaded","H5PIntegration","h5p","settings","innerHTML","embed_code","newCss","core","styles","loadedCss","all","link","scripts","loadedJs","script","async","body","h5pIFrame","getElementsByClassName","loadH5pResourceSettingsOpen","h5p_activity","loadH5pResourceSettingsShared","checkXapi","setInterval","contentWindow","H5P","externalDispatcher","xAPIHelper","stopXapi","on","event","loadH5pResourceXapi","clearInterval","gifLoader","parentPlaylist","loadH5pResource","CloseIcon","classes","classNames","closeIcon","cx","closeButton","viewBox","isBrowser","candidateSelectors","isHidden","getComputedStyle","isNotRadioOrTabbableRadio","radioSet","radioScope","nodes","getCheckedRadio","getAllTabbingElements","parentElem","currentActiveElement","tabbableNodes","onlyTabbable","getTabindex","tabindexAttr","isNaN","isContentEditable","FocusTrap","container","initialFocusRef","refLastFocus","useRef","handleKeyEvent","allTabbingElements","firstFocusableElement","lastFocusableElement","tabTrappingKey","savePreviousFocus","requestAnimationFrame","modals","modalManager","modal","root","overlay","overlayAnimationIn","overlayAnimationOut","modalContainer","modalContainerCenter","modalAnimationIn","modalAnimationOut","Modal","blockScroll","closeOnEsc","closeOnOverlayClick","showCloseIcon","closeIconId","focusTrapped","animationDuration","ariaDescribedby","ariaLabelledby","modalId","onEscKeyDown","onOverlayClick","onAnimationEnd","refDialog","useForwardedRef","refModal","refShouldClose","refContainer","showPortal","setShowPortal","ref","useModalManager","oldRef","disableBodyScroll","enableBodyScroll","useScrollLock","handleKeydown","handleModalEvent","containerModal","overlayAnimation","modalAnimation","animation","tabIndex","userLmsSettings","lmsSettingsLoaded","userLmsSettingsLoaded","safariMontagePublishTool","genericLMS","deleteResource","deleteResourceAction","getLmsSettings","loadSafariMontagePublishTool","closeSafariMontageTool","previewPage","safariToolHtml","setSafariToolHtml","encodeURI","Toggle","Menu","Item","as","Link","setItem","showLoading","cloneActivity","lms_name","site_name","dialogClassName","Header","Title","Body","process","showDenyButton","denyButtonText","ActivityCard","lti","sampleID","setModalShow","setCurrentActivity","backgroundImage","thumb_url","resourceUrl","metadata","ResourceCardDropdownShare","_extends","arguments","apply","position","top","convertShorthandColor","getBackgroundColor","substr","round","createBackgroundColor","ReactSwitch","__proto__","componentDidUpdate","setState","Date","now","R","button","clientX","addEventListener","removeEventListener","$","touches","offColor","offHandleColor","onHandleColor","activeBoxShadow","indexOf","objectWithoutProperties","textAlign","direction","WebkitTransition","MozTransition","transition","touchAction","WebkitTapHighlightColor","WebkitUserSelect","MozUserSelect","msUserSelect","userSelect","margin","pointerEvents","right","transform","outline","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","clip","overflow","onFocus","onKeyUp","DeletePopup","selectedProject","hideDeletePopup","deleteProject","deletePlaylist","escFunction","keyCode","deleteEntity","hasPassiveEvents","passiveTestOptions","passive","isIosDevice","navigator","maxTouchPoints","locks","documentListenerAdded","initialClientY","previousBodyOverflowSetting","previousBodyPaddingRight","allowTouchMove","some","lock","options","rawEvent","restoreOverflowSetting","targetElement","arr","arr2","_toConsumableArray","ontouchstart","targetTouches","clientY","ontouchmove","scrollTop","scrollHeight","clientHeight","isTargetElementTotallyScrolled","stopPropagation","handleScroll","_reserveScrollBarGap","reserveScrollBarGap","scrollBarGap","innerWidth","documentElement","clientWidth","setOverflowHidden","filter","ShareLink","AllLms","allLms","setAllLms","shareVendors","getProjectCourseFromLMSPlaylist","toLowerCase","lms_url","forwardedRef","innerRef","initialVal","cur","setCur","current","set","is","useStatefulRef","_excluded","propTypes","bsPrefix","fluid","rounded","roundedCircle","thumbnail","Image","forwardRef","_ref","_objectWithoutPropertiesLoose","useBootstrapPrefix","displayName","history","currentPlaylistIndex","prevPlaylist","prevLink","cancelButtonColor","nextPlaylist","nextLink","ProjectCardDropdown","handleShow","setProjectId","previewMode","marginLeft","Project","cloneProject","toggleProjectShareAction","close","SharePreviewPopup","lmsPlaylist","allPlaylist","getProjectCourseFromLMS","PlaylistCardDropdown","handleDelete","handleClickPlaylistTitle","setSelectedForEdit","Playlist","project_id","clonePlaylist","deletePlaylistAction","changePlaylistTitle","changePlaylistTitleAction","ActivityPreviewCard","lrs","embed","lrsEndpoint","URLSearchParams","search","lrsAuth","lrsRegistration","authorized","setAuthorized","h5pInsertion","TinCan","LRS","endpoint","allowFail","loadH5pResourceSettingsEmbed","embedSettings","extendedStatement","doceboStatement","Statement","mbox","registration","saveStatement","callback","xhr","responseText","status","charset","gifloader","CryptoJS","lib","Base","extend","mixIn","$super","clone","WordArray","words","sigBytes","q","clamp","ceil","enc","Hex","join","parse","Latin1","String","fromCharCode","charCodeAt","Utf8","decodeURIComponent","escape","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","blockSize","_minBufferSize","_doProcessBlock","splice","Hasher","cfg","_doReset","finalize","_doFinalize","_createHelper","_createHmacHelper","HMAC","algo","SHA1","_hash","HmacSHA1","sqrt","pow","SHA256","HmacSHA256","Base64","wordArray","_map","base64Chars","triplet","charAt","paddingChar","base64Str","base64StrLength","paddingIndex","nBytes","bits1","bits2","ArrayBuffer","superInit","subInit","typedArray","Uint8Array","Int8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","buffer","byteOffset","byteLength","typedArrayByteLength","_reservedQSParams","statementId","voidedStatementId","since","until","limit","authoritative","sparse","instructor","ascending","continueToken","agent","stateId","profileId","activity_platform","grouping","recordStores","LOG_SRC","msg","DEBUG","_initFromQueryString","addRecordStore","Agent","Context","prop","contextCfg","qsParams","Utils","parseURL","lrsProps","lrsCfg","extended","fromJSON","ex","activity_id","prepareStatement","stmt","sendStatement","callbackWrapper","rsCount","callbackResults","args","getStatement","stmtId","retrieveStatement","voidStatement","voidingStatement","getVoidedStatement","retrieveVoidedStatement","sendStatements","stmts","statements","saveStatements","getStatements","queryCfg","sendActor","version","sendActivity","queryStatements","retrieveState","val","lastSHA1","contentType","overwriteJSON","isApplicationJSON","saveState","deleteState","dropState","getActivityProfile","retrieveActivityProfile","setActivityProfile","saveActivityProfile","deleteActivityProfile","dropActivityProfile","getAgentProfile","retrieveAgentProfile","setAgentProfile","saveAgentProfile","deleteAgentProfile","dropAgentProfile","enableDebug","disableDebug","versions","defaultEncoding","getUUID","getISODateString","pad","padder","tempVal","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","convertISO8601DurationToMilliseconds","ISO8601Duration","hours","minutes","seconds","durationInMilliseconds","isValueNegative","indexOfT","indexOfH","indexOfM","indexOfS","parseFloat","convertMillisecondsToISO8601Duration","inputMilliseconds","i_inputCentiseconds","i_inputMilliseconds","inputIsNegative","rtnStr","getSHA1String","str","getSHA256String","getBase64String","getLangDictionaryValue","lang","langDict","und","reURLInformation","paramMatch","isRelative","_reURLInformation","pl","decode","allowRelative","unshift","hostname","port","pathname","hash","exec","substring","getServerRoot","absoluteUrl","urlParts","getContentTypeFromHeader","header","stringToArrayBuffer","stringFromArrayBuffer","versionMatch","code","mesg","username","password","_initByEnvironment","_getBoundary","_makeRequest","_getMultipartRequestData","_IEModeConversion","_processGetStatementResult","boundary","parsedResponse","attachmentMap","attachments","getResponseHeader","_parseMultipart","_assignAttachmentContent","sendRequest","fullUrl","about","requestCfg","requestResult","About","versionedStatement","requestAttachments","asVersion","hasAttachmentWithContent","expectMultipart","versionedStatements","_queryStatementsRequestCfg","statementsResult","StatementsResult","returnCfg","jsonProps","idProps","valProps","universal","compatibility","supported","related_activities","related_agents","format","sha2","byteArray","bodyEncodedInString","fullBodyEnd","sliceStart","sliceEnd","headerStart","headerEnd","bodyStart","bodyEnd","__boundary","parts","__uint8ToString","_parseHeaders","len","rawHeaders","headerList","moreStatements","parsedURL","serverRoot","requestHeaders","requestParams","registrationId","ignore404","State","contents","etag","retrieveStateIds","profileIds","retrieveActivity","ActivityProfile","retrieveActivityProfileIds","AgentProfile","retrieveAgentProfileIds","syncEnabled","AgentAccount","directProps","accountServiceHomePage","accountName","acctJSON","_acct","mbox_sha1sum","openid","degraded","lastName","firstName","agentJSON","_agent","Group","member","groupJSON","_group","_downConvertMap","Verb","verbJSON","_verb","Result","success","completion","duration","Score","optionalDirectProps","optionalObjProps","resultJSON","_result","scaled","raw","scoreJSON","_score","InteractionComponent","icJSON","_ic","ActivityDefinition","moreInfo","correctResponsesPattern","choices","scale","source","steps","interactionComponentProps","definitionJSON","_definition","defString","activityJSON","_activity","ContextActivities","category","objProps","add","contextActivitiesJSON","_contextActivities","revision","language","agentGroupProps","StatementRef","SubStatement","contextJSON","_context","stRefJSON","_stRef","timestamp","subStJSON","_subSt","initCfg","storeOriginal","doStamp","stored","authority","voided","inProgress","originalJSON","Attachment","stamp","stJSON","_st","more","parseError","updated","stateJSON","_state","aboutJSON","_about","usageType","fileUrl","setContentFromString","setContent","_content","getContentAsString","attachmentJSON","_attachment","_defaultEncoding","requestComplete","__createJSONSegment","__createAttachmentSegment","querystring","XMLHttpRequest","requestCompleteResult","httpStatus","notFoundOk","setRequestHeader","onreadystatechange","readyState","send","jsonContent","Buffer","bufferParts","encoding","ab","view","InvalidStateError","NetworkError","SecurityError","XMLHttpRequestEventTarget","XMLHttpRequestProgressEvent","XMLHttpRequestUpload","http","https","os","__hasProp","__extends","child","ctor","__super__","onloadstart","onprogress","onabort","ontimeout","onloadend","_listeners","eventType","listener","_base","dispatchEvent","listeners","_i","_len","_super","_anonymous","anon","UNSENT","statusText","timeout","upload","_method","_url","_sync","_headers","_loweredHeaders","_mimeOverride","_request","_response","_responseParts","_responseHeaders","_aborting","_error","_loadedBytes","_totalBytes","_lengthComputable","xhrUrl","_restrictedMethods","_parseUrl","OPENED","DONE","HEADERS_RECEIVED","LOADING","_setReadyState","loweredName","_restrictedHeaders","warn","_sendFile","_sendHttp","abort","_setError","_dispatchProgress","getAllResponseHeaders","lines","_results","overrideMimeType","newMimeType","nodejsSet","nodejsHttpAgent","httpAgent","nodejsHttpsAgent","httpsAgent","globalAgent","CONNECT","TRACE","TRACK","connection","cookie","cookie2","date","dnt","expect","referer","te","trailer","upgrade","via","_privateHeaders","_userAgent","arch","v8","newReadyState","_setData","_finalizeHeaders","_sendHxxpRequest","hxxp","request","_this","setTimeout","_onHttpTimeout","_onHttpResponse","_onHttpRequestError","_startUpload","lengthString","statusCode","_reset","_onHttpResponseData","_onHttpResponseEnd","_onHttpResponseClose","STATUS_CODES","_parseResponseHeaders","_parseResponse","lengthComputable","total","urlString","arrayBuffer","_concatBuffers","_parseTextResponse","_parseResponseEncoding","buffers","_j","_len1","copy","currentTarget","bubbles","cancelable","_contentType","_body","offset","_ref1","_ref2","isBuffer","loweredHeaders","write","end","endianness","loadavg","uptime","freemem","Number","MAX_VALUE","totalmem","cpus","release","appVersion","networkInterfaces","getNetworkInterfaces","tmpdir","tmpDir","EOL","homedir","editTitle","setEditTitle","editFieldRef","projectState","playlistState","accordion","showDeletePlaylistPopup","currentProject","setCurrentProject","activeShared","setActiveShared","setShow","selectedProjectId","setSelectedProjectId","selectedForEdit","projectSelect","deleteProjectAction","dots","arrows","infinite","speed","slidesToShow","slidesToScroll","loadMyProjectsActionPreview","classList","toggle","tempCollapsed","defaultValue","goBack","toggleProjectShareRemovedAction","sharetoclassroom","go"],"mappings":"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","file":"static/js/20.173ebf3e.chunk.js","sourcesContent":["import React, { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect, useSelector } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { loadResourceAction } from 'store/actions/resource';\nimport H5PPreview from 'containers/H5PPreview';\n\nfunction ResourcePreview(props) {\n  const {\n    resource, activityId, playlistId, loadResource,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n  useEffect(() => {\n    loadResource(activityId, playlistId);\n  }, [loadResource, activityId, playlistId]);\n\n  let next = '';\n  if (resource.nextResourceId) {\n    next = (\n      <Link to={`/studio/org/${organization.currentOrganization?.domain}/activity/${resource.nextResourceId}/preview`} className=\"next-prev-link\">\n        <FontAwesomeIcon icon=\"chevron-circle-right\" />\n      </Link>\n    );\n  }\n\n  let previous = '';\n  if (resource.previousResourceId) {\n    previous = (\n      <Link to={`/studio/org/${organization.currentOrganization?.domain}/activity/${resource.previousResourceId}/preview`} className=\"next-prev-link\">\n        <FontAwesomeIcon icon=\"chevron-circle-left\" />\n      </Link>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"row\">\n          <div className=\"col-md-12\">\n            {previous}\n            {next}\n          </div>\n        </div>\n\n        <div className=\"col-md-12\">\n          <H5PPreview {...props} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nResourcePreview.propTypes = {\n  resource: PropTypes.object.isRequired,\n  activityId: PropTypes.number.isRequired,\n  playlistId: PropTypes.number.isRequired,\n  loadResource: PropTypes.func.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  loadResource: (activityId, playlistId) => dispatch(loadResourceAction(activityId, playlistId)),\n});\n\nconst mapStateToProps = (state) => ({\n  resource: state.resource,\n});\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(ResourcePreview),\n);\n","import React, { Suspense, lazy, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, useDispatch, useSelector } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Swal from 'sweetalert2';\nimport Switch from 'react-switch';\nimport { confirmAlert } from 'react-confirm-alert';\nimport { Tab, Tabs } from 'react-bootstrap';\n\nimport projectIcon from 'assets/images/project_icon.svg';\nimport { loadPlaylistAction, loadProjectPlaylistsAction, LoadHP } from 'store/actions/playlist';\nimport { shareActivity, removeShareActivity, loadH5pResourceSettings } from 'store/actions/resource';\nimport { collapsedSideBar } from 'store/actions/ui';\nimport Unauthorized from 'components/Unauthorized';\nimport { getTeamPermission } from 'store/actions/team';\nimport PreviousLink from './components/PreviousLink';\nimport NextLink from './components/NextLink';\nimport ActivitiesList from './components/ActivitiesList';\n\nimport './style.scss';\n\nconst H5PPreview = lazy(() => import('../../H5PPreview'));\nconst ImmersiveReaderPreview = lazy(() => import('../../../components/Microsoft/ImmersiveReaderPreview'));\n\nfunction PlaylistPreview(props) {\n  const {\n    loading,\n    projectId,\n    playlistId,\n    activityId,\n    playlist,\n    loadHP,\n    loadPlaylist,\n    loadProjectPlaylists,\n    collapsed,\n    setCollapsed,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n  const { teamPermission } = useSelector((state) => state.team);\n  const { permission } = organization;\n  const projectPreview = localStorage.getItem('projectPreview');\n  // const history = useHistory();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    loadPlaylist(projectId, playlistId);\n  }, [\n    projectId,\n    playlistId,\n    activityId,\n    loadPlaylist,\n  ]);\n\n  let { selectedPlaylist } = playlist;\n  if (selectedPlaylist && selectedPlaylist.id !== playlistId) {\n    selectedPlaylist = null;\n  }\n  useEffect(() => {\n    loadProjectPlaylists(projectId);\n  }, [projectId, loadProjectPlaylists]);\n  useEffect(() => {\n    if (Object.keys(teamPermission).length === 0 && organization?.currentOrganization?.id && selectedPlaylist?.project?.team?.id) {\n      dispatch(getTeamPermission(organization?.currentOrganization?.id, selectedPlaylist?.project?.team?.id));\n    }\n  }, [teamPermission, selectedPlaylist, dispatch, organization?.currentOrganization?.id]);\n\n  let currentActivityId = activityId;\n  let currentActivity;\n  let previousResource = null;\n  let nextResource = null;\n\n  if (selectedPlaylist && selectedPlaylist.activities && selectedPlaylist.activities.length > 0) {\n    if (currentActivityId === null || currentActivityId === undefined) {\n      currentActivityId = selectedPlaylist.activities[0].id;\n    }\n\n    currentActivity = selectedPlaylist.activities.find((f) => f.id === currentActivityId);\n\n    if (currentActivity) {\n      const index = selectedPlaylist.activities.findIndex((f) => f.id === currentActivity.id);\n      if (index > 0) {\n        previousResource = selectedPlaylist.activities[index - 1];\n      }\n      if (index < selectedPlaylist.activities.length - 1) {\n        nextResource = selectedPlaylist.activities[index + 1];\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (loading && currentActivityId) {\n      loadH5pResourceSettings(currentActivityId)\n        .then(() => {\n          loadHP(null);\n        })\n        .catch(() => {\n          loadHP('fail');\n        });\n    }\n  }, [loading, currentActivityId, loadHP]);\n\n  if (!selectedPlaylist) {\n    return (\n      <div className=\"alert alert-info\" role=\"alert\">\n        Loading...\n      </div>\n    );\n  }\n\n  // const allPlaylists = selectedPlaylist.project.playlists;\n  const allPlaylists = playlist.playlists;\n  const activityShared = currentActivity && currentActivity.shared;\n\n  const share = async () => {\n    const nameActivity = currentActivity && currentActivity.title;\n    if (activityShared) {\n      Swal.fire({\n        icon: 'warning',\n        title: `You are about to stop sharing <strong>${nameActivity}</strong>.\n          Please remember that anyone you have shared this activity with will no longer have access its contents.\n          Do you want to continue?`,\n        showCloseButton: true,\n        showCancelButton: true,\n        focusConfirm: false,\n        confirmButtonText: 'Stop Sharing!',\n        confirmButtonAriaLabel: 'Stop Sharing!',\n        cancelButtonText: 'Cancel',\n        cancelButtonAriaLabel: 'Cancel',\n      })\n        .then(async (resp) => {\n          if (resp.isConfirmed) {\n            await removeShareActivity(currentActivityId, nameActivity);\n            loadPlaylist(projectId, playlistId);\n          }\n        });\n    } else {\n      await shareActivity(currentActivityId);\n      loadPlaylist(projectId, playlistId);\n    }\n  };\n\n  const viewSharedLink = () => {\n    const protocol = `${window.location.href.split('/')[0]}//`;\n    confirmAlert({\n      // eslint-disable-next-line react/prop-types\n      customUI: ({ onClose }) => (\n        <div className=\"share-project-preview-url project-share-check\">\n          <div className=\"mt-3 mb-2 d-flex align-items-center\">\n            <a\n              href={`/studio/activity/${currentActivityId}/shared`}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              style={{ flex: 1 }}\n            >\n              <input\n                id=\"urllink_clip\"\n                style={{ width: '100%' }}\n                value={`${protocol}${window.location.host}/studio/activity/${currentActivityId}/shared`}\n              />\n            </a>\n\n            <FontAwesomeIcon\n              title=\"Copy to clipboard\"\n              icon=\"clipboard\"\n              onClick={() => {\n                /* Get the text field */\n                const copyText = document.getElementById('urllink_clip');\n\n                /* Select the text field */\n                copyText.focus();\n                copyText.select();\n                // copyText.setSelectionRange(0, 99999); /*For mobile devices*/\n\n                /* Copy the text inside the text field */\n                document.execCommand('copy');\n\n                /* Alert the copied text */\n                Swal.fire({\n                  title: 'Link Copied',\n                  showCancelButton: false,\n                  showConfirmButton: false,\n                  timer: 1500,\n                  allowOutsideClick: false,\n                });\n              }}\n            />\n          </div>\n\n          <div className=\"close-btn\">\n            <button type=\"button\" onClick={onClose}>Ok</button>\n          </div>\n        </div>\n      ),\n    });\n  };\n  // const goBack = () => {\n  //   history.goBack();\n  // };\n  return (\n    <>\n      {loading ? (\n        <div className=\"loading-phf-data\">\n          {loading === 'loading...' ? (\n            <Unauthorized text={loading.toUpperCase()} />\n          ) : (\n            <Unauthorized showbutton text=\"You are unauthorized to access this!\" />\n          )}\n        </div>\n      ) : (\n        <section className=\"main-page-content preview iframe-height-resource\">\n          <div className=\"container-flex-upper\">\n            <div className=\"both-p\">\n              <Link to={`/studio/project/${selectedPlaylist.project.id}/preview`}>\n                <div className=\"project-title\">\n                  <img src={projectIcon} alt=\"\" />\n                  {`Project: ${selectedPlaylist.project.name}`}\n                </div>\n              </Link>\n              <Link>\n                <div className=\"project-title\">\n                  <img src={projectIcon} alt=\"\" />\n                  {`Playlist: ${selectedPlaylist.title}`}\n                </div>\n              </Link>\n            </div>\n\n            <Link\n              to={\n                projectPreview === 'true'\n                 ? `/studio/org/${organization.currentOrganization?.domain}/project/${selectedPlaylist.project.id}/preview`\n                 : `/studio/org/${organization.currentOrganization?.domain}/project/${selectedPlaylist.project.id}`\n              }\n            >\n              <FontAwesomeIcon icon=\"times\" />\n            </Link>\n          </div>\n\n          <div className=\"flex-container previews\">\n            <div className={`activity-bg left-vdo${collapsed ? ' collapsed' : ''}`}>\n              <div className=\"flex-container-preview\">\n                <div className=\"act-top-header\">\n                  <div className=\"heading-wrapper\">\n                    <div className=\"main-heading\">\n                      {currentActivity && (\n                        <h3>\n                          Activity:\n                          &nbsp;\n                          <span>\n                            {currentActivity.title}\n                          </span>\n                        </h3>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"back-header align-items-center justify-content-between\">\n                  <div className=\"right-control vd-controls\">\n                    <div className=\"slider-btn\">\n                      <PreviousLink\n                        projectId={projectId}\n                        playlistId={playlistId}\n                        previousResource={previousResource}\n                        allPlaylists={allPlaylists}\n                      />\n                      <NextLink\n                        projectId={projectId}\n                        playlistId={playlistId}\n                        nextResource={nextResource}\n                        allPlaylists={allPlaylists}\n                      />\n                    </div>\n                  </div>\n                  {/* <div>\n                    <Link\n                      className=\"go-back-\"\n                      to={`/project/${selectedPlaylist.project.id}/preview`}\n                    >\n                      <FontAwesomeIcon icon=\"undo\" className=\"mr-2\" />\n                    </Link>\n                  </div> */}\n                  <a\n                    onClick={() => setCollapsed()}\n                    className={`btn-expand-collapse${collapsed ? ' collapsed' : ''}`}\n                  >\n                    <FontAwesomeIcon icon=\"align-right\" />\n                  </a>\n                </div>\n              </div>\n\n              <div className=\"main-item-wrapper\">\n                <div className=\"item-container\">\n                  {currentActivity && (\n                    <Suspense fallback={<div>Loading</div>}>\n                      {currentActivity.type === 'h5p' ? (\n                        <H5PPreview activityId={currentActivity.id} />\n                      ) : (\n                        <ImmersiveReaderPreview activity={currentActivity} />\n                      )}\n                    </Suspense>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className={`right-sidegolf-info${collapsed ? ' collapsed' : ''}`}>\n              <Tabs defaultActiveKey=\"home\" id=\"uncontrolled-tab-example\">\n                <Tab eventKey=\"home\" title=\"Activities\">\n                  <div className=\"all-laylist-oracle\">\n                    <ActivitiesList\n                      projectId={projectId}\n                      playlistId={playlistId}\n                      activities={selectedPlaylist.activities}\n                      playlist={playlist.selectedPlaylist}\n                      teamPermission={teamPermission || {}}\n                    />\n                  </div>\n                </Tab>\n                {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:share-activity') : permission?.Activity?.includes('activity:share')) && (\n                  <Tab eventKey=\"profile\" title=\"Share\">\n                    <div className=\"watcher spaner\">\n                      {activityShared && (\n                        <div className=\"shared-link\" onClick={viewSharedLink}>\n                          <FontAwesomeIcon icon=\"external-link-alt\" className=\"mr-2\" />\n                          View Shared Link\n                        </div>\n                      )}\n                      <div>\n                        Share Activity\n                        <Switch\n                          onColor=\"#084892\"\n                          onChange={share}\n                          checked={activityShared}\n                          className=\"react-switch\"\n                          id=\"material-switch\"\n                          handleDiameter={30}\n                          uncheckedIcon={false}\n                          checkedIcon={false}\n                        />\n                      </div>\n                    </div>\n                  </Tab>\n                )}\n                <Tab eventKey=\"contact\" title=\"About\">\n                  <div className=\"descr-\">\n                    <div className=\"tti\">\n                      description\n                    </div>\n                    <p>\n                      {selectedPlaylist.project.description}\n                    </p>\n                  </div>\n                </Tab>\n              </Tabs>\n            </div>\n          </div>\n        </section>\n      )}\n    </>\n  );\n}\n\nPlaylistPreview.propTypes = {\n  playlist: PropTypes.object.isRequired,\n  projectId: PropTypes.number.isRequired,\n  playlistId: PropTypes.number.isRequired,\n  activityId: PropTypes.number,\n  loading: PropTypes.string,\n  loadPlaylist: PropTypes.func.isRequired,\n  loadProjectPlaylists: PropTypes.func.isRequired,\n  loadHP: PropTypes.func.isRequired,\n  collapsed: PropTypes.bool.isRequired,\n  setCollapsed: PropTypes.func.isRequired,\n};\n\nPlaylistPreview.defaultProps = {\n  loading: '',\n  activityId: undefined,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  loadPlaylist: (projectId, playlistId) => dispatch(loadPlaylistAction(projectId, playlistId)),\n  loadProjectPlaylists: (projectId) => dispatch(loadProjectPlaylistsAction(projectId)),\n  loadHP: (show) => dispatch(LoadHP(show)),\n  setCollapsed: () => dispatch(collapsedSideBar()),\n});\n\nconst mapStateToProps = (state) => ({\n  collapsed: state.ui.sideBarCollapsed,\n  playlist: state.playlist,\n  loading: state.playlist.loadingH5P,\n});\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(PlaylistPreview),\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nimport { createProjectAction, loadMyProjectsAction, showCreateProjectModalAction } from 'store/actions/project';\nimport { loadPlaylistAction } from 'store/actions/playlist';\n// import Header from 'components/Header';\n// import Sidebar from 'components/Sidebar';\nimport ProjectPreview from './ProjectPreview';\nimport ResourcePreview from './ResourcePreview';\nimport PlaylistPreview from './PlaylistPreview';\nimport ActivityShared from './PlaylistPreview/ActivityShared';\n\nclass PreviewPage extends React.Component {\n  componentDidMount() {\n    // scroll to top\n    window.scrollTo(0, 0);\n\n    // const { loadMyProjects, previewType } = this.props;\n    // if (previewType !== 'activityShared') {\n    //   //loadMyProjects();\n    // }\n  }\n\n  render() {\n    const { match, project, previewType } = this.props;\n\n    const { projectId, playlistId, activityId } = match.params;\n\n    let content;\n    if (previewType === 'activity') {\n      content = (\n        <ResourcePreview\n          activityId={parseInt(activityId, 10)}\n          playlistId={playlistId}\n        />\n      );\n    } else if (previewType === 'playlist') {\n      content = (\n        <PlaylistPreview\n          projectId={parseInt(projectId, 10)}\n          playlistId={parseInt(playlistId, 10)}\n          activityId={(activityId !== null && activityId !== undefined) ? parseInt(activityId, 10) : null}\n        />\n      );\n    } else if (previewType === 'activityShared') {\n      content = <ActivityShared />;\n    } else {\n      content = (\n        <div className=\"site-container-preview\">\n          <ProjectPreview\n            {...this.props}\n            key={projectId}\n            project={project}\n            showLti={false}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        {/* {!previewType && <Header {...this.props} />} */}\n        {/* {!previewType ? (\n          <div className=\"main-content-wrapper\">\n            <div className=\"sidebar-wrapper\">\n              <Sidebar />\n            </div>\n            {content}\n          </div>\n        ) : content} */}\n        {content}\n      </div>\n    );\n  }\n}\n\nPreviewPage.propTypes = {\n  match: PropTypes.object.isRequired,\n  project: PropTypes.object.isRequired,\n  previewType: PropTypes.string,\n  selectedPlaylist: PropTypes.object,\n  loadMyProjects: PropTypes.func.isRequired,\n};\n\nPreviewPage.defaultProps = {\n  previewType: '',\n  selectedPlaylist: null,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  createProject: (name, description, thumbUrl) => dispatch(createProjectAction(name, description, thumbUrl)),\n  loadMyProjects: () => dispatch(loadMyProjectsAction()),\n  showCreateProjectModal: () => dispatch(showCreateProjectModalAction()),\n  loadPlaylist: () => dispatch(loadPlaylistAction()),\n});\n\nconst mapStateToProps = (state) => ({\n  project: state.project,\n  selectedPlaylist: state.playlist.selectedPlaylist,\n});\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(PreviewPage),\n);\n","import styled, { keyframes } from 'styled-components';\nimport { fadeIn } from 'react-animations';\n\nexport function getErrors(e) {\n  if (e.errors) {\n    if (!Array.isArray(e.errors) && typeof e.errors === 'object') {\n      let errors = [];\n      Object.keys(e.errors).forEach((key) => {\n        if (Array.isArray(e.errors[key])) {\n          errors = errors.concat(e.errors[key]);\n        }\n      });\n\n      return { errors };\n    }\n  }\n\n  return e;\n}\n\nexport const required = (value) => (!!value && value.trim() ? undefined : '* Required');\n\nexport const maxLength = (max) => (value) => (value && value.length > max\n  ? `* Must be ${max} characters or less`\n  : undefined);\n\nconst fadeAnimation = keyframes`${fadeIn}`;\nexport const FadeDiv = styled.div`\n  animation: 0.8s ${fadeAnimation};\n`;\n\nexport const zeroFill = (value) => {\n  const newValue = `00${value}`;\n  return newValue.slice(newValue.length - 2, newValue.length);\n};\n\nexport const alphaNumeric = (value) => {\n  const alphaNumericRegex = new RegExp('[^0-9a-zA-Z@ ._-]');\n  return !alphaNumericRegex.test(value);\n};\n\nexport const alphabetsOnly = (value) => {\n  const alphaNumericRegex = new RegExp('[^a-zA-Z]');\n  return !alphaNumericRegex.test(value);\n};\n","import teamService from 'services/team.service';\nimport Swal from 'sweetalert2';\nimport * as actionTypes from '../actionTypes';\nimport store from '../index';\n\nexport const resetSelectedTeamAction = () => async (dispatch) => {\n  dispatch({\n    type: actionTypes.RESET_SELECTED_TEAM,\n  });\n};\n\nexport const updateSelectedTeamAction = (payload) => async (dispatch) => {\n  dispatch({\n    type: actionTypes.UPDATE_SELECTED_TEAM,\n    payload,\n  });\n};\n\nexport const showCreationAction = () => async (dispatch) => {\n  dispatch({\n    type: actionTypes.SHOW_CREATE_TEAM,\n  });\n};\n\nexport const showInvitingAction = () => async (dispatch) => {\n  dispatch({\n    type: actionTypes.SHOW_INVITE_MEMBER,\n  });\n};\n\nexport const showAssigningAction = () => async (dispatch) => {\n  dispatch({\n    type: actionTypes.SHOW_ASSIGN_TEAM,\n  });\n};\n\nexport const loadTeamsAction = () => async (dispatch) => {\n  const centralizedState = store.getState();\n  const { organization: { activeOrganization } } = centralizedState;\n  try {\n    dispatch({\n      type: actionTypes.PAGE_LOADING,\n    });\n\n    const { teams } = await teamService.getAll(activeOrganization?.id);\n\n    dispatch({\n      type: actionTypes.LOAD_TEAMS,\n      payload: { teams },\n    });\n\n    dispatch({\n      type: actionTypes.PAGE_LOADING_COMPLETE,\n    });\n  } catch (e) {\n    dispatch({\n      type: actionTypes.PAGE_LOADING_COMPLETE,\n    });\n\n    throw e;\n  }\n};\n\nexport const loadSubOrganizationTeamsAction = () => async (dispatch) => {\n  const centralizedState = store.getState();\n  const { organization: { activeOrganization } } = centralizedState;\n  try {\n    dispatch({\n      type: actionTypes.PAGE_LOADING,\n    });\n\n    const { teams } = await teamService.getAllSubOrganizationTeams(activeOrganization?.id);\n\n    dispatch({\n      type: actionTypes.LOAD_TEAMS,\n      payload: { teams },\n    });\n\n    dispatch({\n      type: actionTypes.PAGE_LOADING_COMPLETE,\n    });\n  } catch (e) {\n    dispatch({\n      type: actionTypes.PAGE_LOADING_COMPLETE,\n    });\n\n    throw e;\n  }\n};\n\nexport const createTeamAction = (data) => async (dispatch) => {\n  const centralizedState = store.getState();\n  const { organization: { activeOrganization } } = centralizedState;\n  try {\n    dispatch({ type: actionTypes.CREATE_TEAM_REQUEST });\n\n    const { team } = await teamService.create(data, activeOrganization?.id);\n\n    dispatch({\n      type: actionTypes.CREATE_TEAM_SUCCESS,\n      payload: { team },\n    });\n\n    return team;\n  } catch (e) {\n    dispatch({ type: actionTypes.CREATE_TEAM_FAIL });\n\n    throw e;\n  }\n};\n\nexport const loadTeamAction = (teamId) => async (dispatch) => {\n  const centralizedState = store.getState();\n  const { organization: { activeOrganization } } = centralizedState;\n  try {\n    dispatch({\n      type: actionTypes.LOAD_TEAM_REQUEST,\n    });\n\n    const { team } = await teamService.get(teamId, activeOrganization?.id);\n\n    dispatch({\n      type: actionTypes.LOAD_TEAM_SUCCESS,\n      payload: { team },\n    });\n  } catch (e) {\n    dispatch({\n      type: actionTypes.LOAD_TEAM_FAIL,\n    });\n  }\n};\n\nexport const updateTeamAction = (teamId, data) => async (dispatch) => {\n  const centralizedState = store.getState();\n  const { organization: { activeOrganization } } = centralizedState;\n  try {\n    dispatch({ type: actionTypes.UPDATE_TEAM_REQUEST });\n\n    const { team } = await teamService.update(teamId, data, activeOrganization?.id);\n\n    dispatch({\n      type: actionTypes.UPDATE_TEAM_SUCCESS,\n      payload: { team },\n    });\n  } catch (e) {\n    dispatch({ type: actionTypes.UPDATE_TEAM_FAIL });\n\n    throw e;\n  }\n};\n\nexport const deleteTeamAction = (teamId) => async (dispatch) => {\n  const centralizedState = store.getState();\n  const { organization: { activeOrganization } } = centralizedState;\n  try {\n    dispatch({ type: actionTypes.DELETE_TEAM_REQUEST });\n\n    await teamService.remove(teamId, activeOrganization?.id);\n\n    dispatch({\n      type: actionTypes.DELETE_TEAM_SUCCESS,\n      payload: { teamId },\n    });\n  } catch (e) {\n    dispatch({ type: actionTypes.DELETE_TEAM_FAIL });\n\n    throw e;\n  }\n};\n\nexport const inviteTeamMemberAction = (user) => async (dispatch) => {\n  try {\n    dispatch({ type: actionTypes.INVITE_MEMBER_CONFIRM_REQUEST });\n\n    const { invited } = await teamService.inviteConfirm(user);\n\n    if (invited) {\n      dispatch({\n        type: actionTypes.INVITE_MEMBER_CONFIRM_SUCCESS,\n        payload: { users: [user] },\n      });\n    } else {\n      dispatch({ type: actionTypes.INVITE_MEMBER_CONFIRM_FAIL });\n    }\n\n    return invited;\n  } catch (e) {\n    dispatch({ type: actionTypes.INVITE_MEMBER_CONFIRM_FAIL });\n\n    throw e;\n  }\n};\n\nexport const inviteTeamMembersAction = (users) => async (dispatch) => {\n  dispatch({\n    type: actionTypes.INVITE_MEMBER_CONFIRM_SUCCESS,\n    payload: { users },\n  });\n};\n\nexport const inviteMemberAction = (teamId, email) => async (dispatch) => {\n  try {\n    dispatch({ type: actionTypes.INVITE_MEMBERS_REQUEST });\n\n    await teamService.inviteMember(teamId, email);\n\n    dispatch({\n      type: actionTypes.INVITE_MEMBERS_SUCCESS,\n    });\n\n    dispatch(loadTeamAction(teamId));\n  } catch (e) {\n    dispatch({ type: actionTypes.INVITE_MEMBERS_FAIL });\n\n    throw e;\n  }\n};\n\nexport const inviteMembersAction = (teamId, users, note) => async (dispatch) => {\n  const centralizedState = store.getState();\n  const { organization: { activeOrganization } } = centralizedState;\n  try {\n    dispatch({ type: actionTypes.INVITE_MEMBERS_REQUEST });\n\n    await teamService.inviteMembers(teamId, users, note, activeOrganization?.id);\n\n    dispatch({\n      type: actionTypes.INVITE_MEMBERS_SUCCESS,\n    });\n\n    dispatch(loadTeamAction(teamId));\n  } catch (e) {\n    dispatch({ type: actionTypes.INVITE_MEMBERS_FAIL });\n\n    throw e;\n  }\n};\n\nexport const removeMemberAction = (teamId, userId, email) => async (dispatch) => {\n  try {\n    dispatch({\n      type: actionTypes.REMOVE_MEMBER_REQUEST,\n      payload: { userId },\n    });\n\n    await teamService.removeMember(teamId, userId, email);\n\n    dispatch({\n      type: actionTypes.REMOVE_MEMBER_SUCCESS,\n    });\n\n    dispatch(loadTeamAction(teamId));\n  } catch (e) {\n    dispatch({ type: actionTypes.REMOVE_MEMBER_FAIL });\n\n    throw e;\n  }\n};\n\nexport const addProjectsAction = (teamId, ids) => async (dispatch) => {\n  try {\n    dispatch({\n      type: actionTypes.ADD_TEAM_PROJECTS_REQUEST,\n    });\n\n    const result = await teamService.addProjects(teamId, ids);\n\n    dispatch({\n      type: actionTypes.ADD_TEAM_PROJECTS_SUCCESS,\n    });\n\n    dispatch(loadTeamAction(teamId));\n    return result;\n  } catch (e) {\n    dispatch({ type: actionTypes.ADD_TEAM_PROJECTS_FAIL });\n\n    throw e;\n  }\n};\n\nexport const removeProjectAction = (teamId, id) => async (dispatch) => {\n  try {\n    dispatch({\n      type: actionTypes.REMOVE_PROJECT_REQUEST,\n    });\n\n    await teamService.removeProject(teamId, id);\n\n    dispatch({\n      type: actionTypes.REMOVE_PROJECT_SUCCESS,\n    });\n\n    dispatch(loadTeamAction(teamId));\n  } catch (e) {\n    dispatch({ type: actionTypes.REMOVE_PROJECT_FAIL });\n\n    throw e;\n  }\n};\n\nexport const addMembersToProjectAction = (teamId, projectId, ids) => async (dispatch) => {\n  try {\n    dispatch({\n      type: actionTypes.ADD_MEMBERS_TO_PROJECT_REQUEST,\n    });\n\n    await teamService.addMembersToProject(teamId, projectId, ids);\n\n    dispatch({\n      type: actionTypes.ADD_MEMBERS_TO_PROJECT_SUCCESS,\n    });\n\n    dispatch(loadTeamAction(teamId));\n  } catch (e) {\n    dispatch({ type: actionTypes.ADD_MEMBERS_TO_PROJECT_FAIL });\n\n    throw e;\n  }\n};\n\nexport const removeMemberFromProjectAction = (teamId, projectId, id) => async (dispatch) => {\n  try {\n    dispatch({\n      type: actionTypes.REMOVE_MEMBER_FROM_PROJECT_REQUEST,\n    });\n\n    await teamService.removeMemberFromProject(teamId, projectId, id);\n\n    dispatch({\n      type: actionTypes.REMOVE_MEMBER_FROM_PROJECT_SUCCESS,\n    });\n\n    dispatch(loadTeamAction(teamId));\n  } catch (e) {\n    dispatch({ type: actionTypes.REMOVE_MEMBER_FROM_PROJECT_FAIL });\n\n    throw e;\n  }\n};\n\nexport const AddTeamRoles = (orgId) => async (dispatch) => {\n  const result = await teamService.teamRoleType(orgId);\n  dispatch({\n    type: actionTypes.ADD_TEAM_ROLES,\n    payload: result?.teamRoleTypes,\n  });\n};\n\nexport const getTeamPermission = (orgId, TeamId) => async (dispatch) => {\n  const result = await teamService.teamPermisison(orgId, TeamId);\n  dispatch({\n    type: actionTypes.ADD_TEAM_PERMISSION,\n    payload: result?.teamPermissions,\n  });\n};\n\nexport const clearTeamPermissions = () => (dispatch) => {\n  dispatch({\n    type: actionTypes.CLEAR_TEAM_PERMISSIONS,\n  });\n};\n\nexport const getTeamProject = (query, page) => async (dispatch) => {\n  const centralizedState = store.getState();\n  const { organization: { activeOrganization } } = centralizedState;\n  const result = await teamService.getTeamProject(activeOrganization?.id, query, page);\n  dispatch({\n    type: actionTypes.GET_TEAM_PROJECTS,\n    payload: result.data,\n  });\n  return result;\n};\n\nexport const changeUserRole = (teamId, data) => async (dispatch) => {\n  const centralizedState = store.getState();\n  const { organization: { activeOrganization } } = centralizedState;\n  await teamService.changeUserRole(activeOrganization?.id, teamId, data);\n  Swal.fire({\n    icon: 'success',\n    title: 'Permission Updated',\n  });\n  dispatch({\n    type: actionTypes.CHANGE_USER_ROLE,\n  });\n};\n\nexport const selectedProjectForCloning = (projectName) => (dispatch) => {\n  dispatch({\n    type: actionTypes.PROJECT_SELECTED_FOR_CLONE,\n    payload: projectName,\n  });\n};\n","import axios from 'axios';\nimport config from 'config';\nimport Swal from 'sweetalert2';\nimport httpService from './http.service';\n\nconst { apiVersion } = config;\nconst gapiBaseUrl = 'https://classroom.googleapis.com/v1';\n\nconst getStudentProfile = (token) => axios({\n  method: 'get',\n  url: `${gapiBaseUrl}/userProfiles/me`,\n  headers: {\n    Authorization: `Bearer ${token}`,\n  },\n})\n  .then((response) => response);\n\nconst getStudentCourses = (token) => axios({\n  method: 'get',\n  url: `${gapiBaseUrl}/courses`,\n  params: {\n    courseStates: 'ACTIVE',\n  },\n  headers: {\n    Authorization: `Bearer ${token}`,\n  },\n})\n  .then((response) => response);\n\nconst getCourse = (token, courseId) => axios({\n  method: 'get',\n  url: `${gapiBaseUrl}/courses/${courseId}`,\n  headers: {\n    Authorization: `Bearer ${token}`,\n  },\n})\n  .then((response) => response);\n\nconst getSubmission = (classworkId, courseId, token) => httpService\n  .post(\n    `/${apiVersion}/google-classroom/classwork/${classworkId}/submission`,\n    { course_id: courseId, access_token: token },\n  )\n  .then(({ data }) => data)\n  .catch((err) => Promise.reject(err.response.data));\n\nconst turnIn = (classworkId, courseId, token) => httpService\n  .post(\n    `/${apiVersion}/google-classroom/turnin/${classworkId}`,\n    { course_id: courseId, access_token: token },\n  )\n  .then(({ data }) => data)\n  .catch((err) => Promise.reject(err.response.data));\n\nconst getSummaryAuth = (token, courseId, classworkId, submissionId) => httpService\n  .post(\n    `/${apiVersion}/google-classroom/validate-summary-access`,\n    {\n      course_id: courseId,\n      access_token: token,\n      gc_classwork_id: classworkId,\n      gc_submission_id: submissionId,\n    },\n  )\n  .then(({ data }) => data)\n  .catch((response) => response.response.data);\n\nconst getOutcomeSummary = (studentId, activityId) => httpService\n  .post(\n    `/${apiVersion}/outcome/summary`,\n    {\n      actor: studentId,\n      activity: activityId,\n    },\n  )\n  .then(({ data }) => data)\n  .catch((error) => {\n    if (error && error.response && error.response.data && error.response.data.errors) {\n      return error.response.data;\n    }\n\n    console.log('Unexpected error in summary endpoint:');\n    console.log(error);\n    return null;\n  });\n\nconst h5pResourceSettings = (activityId, studentId = null, submissionId = null) => httpService\n  .get(\n    `/${apiVersion}/google-classroom/activities/${activityId}/h5p-resource-settings`,\n    {},\n    {\n      gcuid: studentId,\n      submissionid: submissionId,\n    },\n  )\n  .then(({ data }) => data)\n  .catch((err) => {\n    Promise.reject(err.response.data);\n    Swal.fire({\n      title: 'Error',\n      icon: 'error',\n      html: err.message || 'Something went wrong! We are unable to load activity.',\n    });\n  });\n\nexport default {\n  getStudentProfile,\n  getStudentCourses,\n  getCourse,\n  h5pResourceSettings,\n  getSubmission,\n  turnIn,\n  getSummaryAuth,\n  getOutcomeSummary,\n};\n","import Swal from 'sweetalert2';\nimport searchService from 'services/search.service';\nimport gapiService from 'services/gapi.service';\nimport {\n  GOOGLE_CLASSROOM_LOGIN,\n  GOOGLE_CLASSROOM_LOGIN_FAILURE,\n  GOOGLE_SHARE,\n  LOAD_GOOGLE_CLASSROOM_COURSES,\n  ALL_COURSES,\n  GET_STUDENT_COURSES,\n  SET_STUDENT_AUTH,\n  SET_STUDENT_AUTH_TOKEN,\n  GET_H5P_SETTINGS,\n  GET_SUBMISSION,\n  TURNED_IN_ACTIVITY,\n  GET_SUMMARY_AUTH,\n  GET_OUTCOME_SUMMARY,\n} from '../actionTypes';\n\nexport const googleClassRoomLogin = (id) => ({\n  type: GOOGLE_CLASSROOM_LOGIN,\n  id,\n});\n\nexport const googleShare = (value) => ({\n  type: GOOGLE_SHARE,\n  value,\n});\n\nexport const loadCourses = (value) => ({\n  type: LOAD_GOOGLE_CLASSROOM_COURSES,\n  value,\n});\n\n// let projectId = '';\nexport const getProjectId = (/* id */) => {\n  // projectId = id;\n};\n\nexport const fetchCourses = () => {\n  Swal.fire({\n    title: 'Loading...',\n    showCancelButton: false,\n    showConfirmButton: false,\n    allowOutsideClick: false,\n  });\n};\n\n// shows the delete popup on activities, project, playlists\nexport const googleClassRoomLoginAction = (response) => async (dispatch) => {\n  dispatch(googleShare(true));\n\n  try {\n    // save access token\n    await searchService.googleShareToken(JSON.stringify(response.tokenObj));\n    const getCourses = await searchService.getCourses();\n    dispatch({\n      type: ALL_COURSES,\n      payload: getCourses.courses,\n    });\n\n    // dispatch(googleClassRoomLogin(response));\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nexport const googleClassRoomLoginFailure = (id) => ({\n  type: GOOGLE_CLASSROOM_LOGIN_FAILURE,\n  id,\n});\n\n// shows the delete popup on activities, project, playlists\nexport const googleClassRoomLoginFailureAction = (response) => async (dispatch) => {\n  dispatch(googleShare('close'));\n  dispatch(googleClassRoomLogin(response));\n\n  try {\n    Swal.fire({\n      confirmButtonColor: '#5952c6',\n      icon: 'error',\n      text: response.error.replace(/_/g, ' '),\n    });\n\n    // dispatch(googleShare(true));\n    dispatch(googleClassRoomLoginFailure(response));\n  } catch (e) {\n    console.log(e);\n  }\n};\n\n// Set student auth data\nexport const setStudentAuthAction = (data) => async (dispatch) => {\n  // Auth data doesn't provide the google user ID so we get profile data\n  const studentProfile = await gapiService.getStudentProfile(data.accessToken);\n\n  dispatch({\n    type: SET_STUDENT_AUTH,\n    studentData: {\n      auth: data,\n      profile: studentProfile,\n    },\n  });\n};\n\nexport const refreshStudentAuthTokenAction = (newToken) => async (dispatch) => {\n  dispatch({\n    type: SET_STUDENT_AUTH_TOKEN,\n    newToken: { ...newToken },\n  });\n};\n\n// Gets courses for student\nexport const getStudentCoursesAction = (token) => async (dispatch) => {\n  const coursesResponse = await gapiService.getStudentCourses(token);\n  dispatch({\n    type: GET_STUDENT_COURSES,\n    coursesResponse,\n  });\n};\n\nexport const loadH5pResourceSettings = (activityId, studentId = null, submissionId = null) => async (dispatch) => {\n  const h5pSettings = await gapiService.h5pResourceSettings(activityId, studentId, submissionId);\n  dispatch({\n    type: GET_H5P_SETTINGS,\n    h5pSettings,\n  });\n};\n\nexport const getSubmissionAction = (classworkId, courseId, auth) => async (dispatch) => {\n  const submission = await gapiService.getSubmission(classworkId, courseId, JSON.stringify(auth.tokenObj))\n    .catch((err) => err);\n\n  dispatch({\n    type: GET_SUBMISSION,\n    submission,\n  });\n};\n\nexport const turnInAction = (classworkId, courseId, auth) => async (dispatch) => {\n  const turnedIn = await gapiService.turnIn(classworkId, courseId, JSON.stringify(auth.tokenObj));\n  dispatch({\n    type: TURNED_IN_ACTIVITY,\n    turnedIn,\n  });\n};\n\nexport const getSummaryAuthAction = (auth, courseId, classworkId, submissionId) => async (dispatch) => {\n  const summaryAuth = await gapiService.getSummaryAuth(JSON.stringify(auth.tokenObj), courseId, classworkId, submissionId);\n\n  dispatch({\n    type: GET_SUMMARY_AUTH,\n    summaryAuth,\n  });\n};\n\nexport const getOutcomeSummaryAction = (studentId, activityId) => async (dispatch) => {\n  const outcomeSummary = await gapiService.getOutcomeSummary(studentId, activityId);\n  dispatch({\n    type: GET_OUTCOME_SUMMARY,\n    outcomeSummary,\n  });\n};\n","// list of H5P activities links (react routes) where xAPI dispatch need to initialized\nexport function allowedH5PActvityPaths() {\n  return [\n    '/gclass/launch/:userId/:courseId/:activityId/:classworkId',\n    '/lti-tools/activity/:activityId',\n    '/activity/:activityId/shared',\n    '/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId',\n  ];\n}\n\n// map H5P activities links (react routes) to supported Platforms\nexport function H5PActvityPathMapToPlatform() {\n  return [\n    { '/project/:projectId/playlist/:playlistId/activity/:activityId/preview': 'CurrikiStudio' },\n    { '/activity/:activityId/shared': 'CurrikiStudio' },\n    { '/gclass/launch/:userId/:courseId/:activityId/:classworkId': 'Google Classroom' },\n    { '/lti-tools/activity/:activityId': 'LTI client' },\n    { '/genericlms/:lmsName/lmsurl/:lmsUrl/client/:lmsClientId/lmscourse/:lmsCourseId/lmsunit/:lmsUnitId/activity/:activityId': 'GenericLMS' },\n  ];\n}\n\n// check if xAPI need to initialized for H5P Activity link (react route)\nexport function isxAPINeeded(currentRoute) {\n  return allowedH5PActvityPaths().includes(currentRoute);\n}\n\nexport function extendStatement(h5pObj, statement, params, skipped = false) {\n  const {\n    path,\n    activityId,\n    submissionId,\n    attemptId,\n    studentId,\n    courseId, // LMS course id\n    homepage,\n    toolPlatform,\n    activeCourse,\n    customCourseName,\n    customApiDomainUrl,\n    customCourseCode,\n  } = params;\n\n  const platform = H5PActvityPathMapToPlatform().find((el) => el[path]);\n  if (platform === undefined) return;\n\n  const statementExtended = { ...statement };\n  const other = [\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${submissionId}/${attemptId}`,\n    },\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${submissionId}`,\n    },\n  ];\n\n  if (platform[path] === 'Google Classroom') {\n    other.push({\n      objectType: 'Activity',\n      id: `${window.location.origin}/gclass/${courseId}`,\n    });\n\n    if (statementExtended.object && statementExtended.object.definition && statementExtended.object.definition.extensions) {\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/gclass-alternate-course-id'] = activeCourse.alternateLink;\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/course-name'] = activeCourse.name;\n    }\n  }\n\n  if (platform[path] === 'LTI client' || 'GenericLMS') {\n    other.push({\n      objectType: 'Activity',\n      id: `${window.location.origin}/lti/${courseId}`,\n    });\n\n    if (statementExtended?.object?.definition?.extensions) {\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/lms-course-name'] = customCourseName;\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/lms-domain-url'] = customApiDomainUrl;\n      statementExtended.object.definition.extensions['http://currikistudio.org/x-api/lms-course-code'] = customCourseCode;\n    }\n  }\n\n  const actor = {\n    objectType: 'Agent',\n    account: {\n      homePage: homepage || 'https://classroom.google.com',\n      name: studentId,\n    },\n  };\n\n  if (statementExtended.context) {\n    if (platform[path] === 'LTI client') {\n      statementExtended.context.platform = toolPlatform;\n    } else {\n      statementExtended.context.platform = platform[path];\n    }\n\n    statementExtended.context.contextActivities.other = other;\n  }\n\n  statementExtended.actor = actor;\n\n  // If the statement is marked as skipped, we supply the proper verb\n  if (skipped) {\n    statementExtended.verb = {\n      id: 'http://adlnet.gov/expapi/verbs/skipped',\n      display: {\n        'en-US': 'skipped',\n      },\n    };\n\n    // Some skipped statements come with score.min = 0 and score.max = 0\n    // This causes an error in the backend\n    if (\n      statementExtended.result\n      && statementExtended.result.score\n      && statementExtended.result.score.min === statementExtended.result.score.max\n    ) {\n      statementExtended.result.score.max += 1;\n    }\n  }\n\n  // Some H5Ps provide incompatible interaction types. Mapping those to valid ones here\n  if (statementExtended.object && statementExtended.object.definition.interactionType === 'compound') {\n    statementExtended.object.definition.interactionType = 'choice';\n  }\n\n  // We need page information for InteractiveBook statements but the children objects are agnostic to where\n  // they're being used.\n  // Here we crawl up through their heritage to see if they belong to an InteractiveBook, if they do, we\n  // add the page info to the statement.\n  let interactiveBookObject = h5pObj;\n\n  while (interactiveBookObject && interactiveBookObject?.libraryInfo?.machineName !== 'H5P.InteractiveBook') {\n    interactiveBookObject = interactiveBookObject.parent;\n  }\n\n  if (interactiveBookObject?.libraryInfo?.machineName === 'H5P.InteractiveBook') {\n    const chapterIndex = interactiveBookObject.getActiveChapter();\n    statementExtended.object.definition.extensions['http://currikistudio.org/x-api/h5p-chapter-name'] = interactiveBookObject.chapters[chapterIndex].title;\n  }\n\n  return statementExtended;\n}\n\n// Extends the xAPI statements for activities being directly shared through studio\n// instead of published to an LMS\nexport function extendSharedActivityStatement(h5pObj, statement, params) {\n  const {\n    path,\n    activityId,\n  } = params;\n  const statementExtended = { ...statement };\n\n  // We fake these values for reporting features on anonymous routes\n  const fakeSubId = Math.floor(Math.random() * 100000).toString();\n  const fakeAttemptId = Math.floor(Math.random() * 100000).toString();\n  const fakeCourseId = Math.floor(Math.random() * 100000).toString();\n\n  const other = [\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${fakeSubId}/${fakeAttemptId}`,\n    },\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/activity/${activityId}/submission/${fakeSubId}`,\n    },\n    {\n      objectType: 'Activity',\n      id: `${window.location.origin}/gclass/${fakeCourseId}`,\n    },\n  ];\n\n  const platform = H5PActvityPathMapToPlatform().find((el) => el[path]);\n  if (platform === undefined) return;\n\n  if (statementExtended?.context?.contextActivities) {\n    statementExtended.context.platform = platform[path];\n    statementExtended.context.contextActivities.other = other;\n  }\n\n  statementExtended.object.definition.extensions['http://id.tincanapi.com/extension/referrer'] = document.referrer ? document.referrer : window.location.origin;\n\n  return statementExtended;\n}\n","export default __webpack_public_path__ + \"static/media/loginlogo.b91b6143.png\";","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"react\")):\"function\"==typeof define&&define.amd?define([\"react\"],t):\"object\"==typeof exports?exports.GoogleLogin=t(require(\"react\")):e.GoogleLogin=t(e.react)}(\"undefined\"!=typeof self?self:this,(function(e){return o={},t.m=n=[function(t){t.exports=e},function(e,t,n){e.exports=n(2)()},function(e,t,n){\"use strict\";function o(){}function r(){}var i=n(3);r.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,r,a){if(a!==i){var c=Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw c.name=\"Invariant Violation\",c}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return n.PropTypes=n}},function(e){\"use strict\";e.exports=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\"},function(e,t,n){\"use strict\";function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function r(e,t){null!=t&&t<=e.length||(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function a(e,t){null!=t&&t<=e.length||(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function u(e,t){null!=t&&t<=e.length||(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(n):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function s(e,t){null!=t&&t<=e.length||(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function f(e,t,n,o,r,i){var a=e.getElementsByTagName(t)[0],c=a,u=a;(u=e.createElement(t)).id=n,u.src=o,c&&c.parentNode?c.parentNode.insertBefore(u,c):e.head.appendChild(u),u.onerror=i,u.onload=r}function d(e,t){var n=e.getElementById(t);n&&n.parentNode.removeChild(n)}function p(e){return b.a.createElement(\"span\",{style:{paddingRight:10,fontWeight:500,paddingLeft:e.icon?0:10,paddingTop:10,paddingBottom:10}},e.children)}function g(e){return b.a.createElement(\"div\",{style:{marginRight:10,background:e.active?\"#eee\":\"#fff\",padding:10,borderRadius:2}},b.a.createElement(\"svg\",{width:\"18\",height:\"18\",xmlns:\"http://www.w3.org/2000/svg\"},b.a.createElement(\"g\",{fill:\"#000\",fillRule:\"evenodd\"},b.a.createElement(\"path\",{d:\"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z\",fill:\"#EA4335\"}),b.a.createElement(\"path\",{d:\"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z\",fill:\"#4285F4\"}),b.a.createElement(\"path\",{d:\"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z\",fill:\"#FBBC05\"}),b.a.createElement(\"path\",{d:\"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z\",fill:\"#34A853\"}),b.a.createElement(\"path\",{fill:\"none\",d:\"M0 0h18v18H0z\"}))))}function y(e){var t=i(Object(m.useState)(!1),2),n=t[0],o=t[1],r=i(Object(m.useState)(!1),2),a=r[0],c=r[1],u=e.tag,l=e.type,s=e.className,f=e.disabledStyle,d=e.buttonText,y=e.children,v=e.render,S=e.theme,j=e.icon,O=e.disabled,x=h({onSuccess:e.onSuccess,onAutoLoadFinished:e.onAutoLoadFinished,onRequest:e.onRequest,onFailure:e.onFailure,onScriptLoadFailure:e.onScriptLoadFailure,clientId:e.clientId,cookiePolicy:e.cookiePolicy,loginHint:e.loginHint,hostedDomain:e.hostedDomain,autoLoad:e.autoLoad,isSignedIn:e.isSignedIn,fetchBasicProfile:e.fetchBasicProfile,redirectUri:e.redirectUri,discoveryDocs:e.discoveryDocs,uxMode:e.uxMode,scope:e.scope,accessType:e.accessType,responseType:e.responseType,jsSrc:e.jsSrc,prompt:e.prompt}),I=x.signIn,w=O||!x.loaded;if(v)return v({onClick:I,disabled:w});var k={backgroundColor:\"dark\"===S?\"rgb(66, 133, 244)\":\"#fff\",display:\"inline-flex\",alignItems:\"center\",color:\"dark\"===S?\"#fff\":\"rgba(0, 0, 0, .54)\",boxShadow:\"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)\",padding:0,borderRadius:2,border:\"1px solid transparent\",fontSize:14,fontWeight:\"500\",fontFamily:\"Roboto, sans-serif\"},A={cursor:\"pointer\",backgroundColor:\"dark\"===S?\"#3367D6\":\"#eee\",color:\"dark\"===S?\"#fff\":\"rgba(0, 0, 0, .54)\",opacity:1},_=w?Object.assign({},k,f):a?Object.assign({},k,A):n?Object.assign({},k,{cursor:\"pointer\",opacity:.9}):k;return b.a.createElement(u,{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){o(!1),c(!1)},onMouseDown:function(){return c(!0)},onMouseUp:function(){return c(!1)},onClick:I,style:_,type:l,disabled:w,className:s},[j&&b.a.createElement(g,{key:1,active:a}),b.a.createElement(p,{icon:j,key:2},y||d)])}n.r(t),n.d(t,\"default\",(function(){return S})),n.d(t,\"GoogleLogin\",(function(){return S})),n.d(t,\"GoogleLogout\",(function(){return O})),n.d(t,\"useGoogleLogin\",(function(){return h})),n.d(t,\"useGoogleLogout\",(function(){return j}));var m=n(0),b=n.n(m),h=(n(1),function(e){function t(e){var t=e.getBasicProfile(),n=e.getAuthResponse(!0);e.googleId=t.getId(),e.tokenObj=n,e.tokenId=n.id_token,e.accessToken=n.access_token,e.profileObj={googleId:t.getId(),imageUrl:t.getImageUrl(),email:t.getEmail(),name:t.getName(),givenName:t.getGivenName(),familyName:t.getFamilyName()},i(e)}function n(e){if(e&&e.preventDefault(),P){var n=window.gapi.auth2.getAuthInstance(),o={prompt:L};p(),\"code\"===_?n.grantOfflineAccess(o).then((function(e){return i(e)}),(function(e){return l(e)})):n.signIn(o).then((function(e){return t(e)}),(function(e){return l(e)}))}}var r=e.onSuccess,i=void 0===r?function(){}:r,a=e.onAutoLoadFinished,c=void 0===a?function(){}:a,u=e.onFailure,l=void 0===u?function(){}:u,s=e.onRequest,p=void 0===s?function(){}:s,g=e.onScriptLoadFailure,y=e.clientId,b=e.cookiePolicy,h=e.loginHint,v=e.hostedDomain,S=e.autoLoad,j=e.isSignedIn,O=e.fetchBasicProfile,x=e.redirectUri,I=e.discoveryDocs,w=e.uxMode,k=e.scope,A=e.accessType,_=e.responseType,E=e.jsSrc,T=void 0===E?\"https://apis.google.com/js/api.js\":E,L=e.prompt,M=o(Object(m.useState)(!1),2),P=M[0],C=M[1];return Object(m.useEffect)((function(){var e=!1,n=g||l;return f(document,\"script\",\"google-login\",T,(function(){var o={client_id:y,cookie_policy:b,login_hint:h,hosted_domain:v,fetch_basic_profile:O,discoveryDocs:I,ux_mode:w,redirect_uri:x,scope:k,access_type:A};\"code\"===_&&(o.access_type=\"offline\"),window.gapi.load(\"auth2\",(function(){var r=window.gapi.auth2.getAuthInstance();r?r.then((function(){e||(j&&r.isSignedIn.get()?(C(!0),c(!0),t(r.currentUser.get())):(C(!0),c(!1)))}),(function(e){l(e)})):window.gapi.auth2.init(o).then((function(n){if(!e){C(!0);var o=j&&n.isSignedIn.get();c(o),o&&t(n.currentUser.get())}}),(function(e){C(!0),c(!1),n(e)}))}))}),(function(e){n(e)})),function(){e=!0,d(document,\"google-login\")}}),[]),Object(m.useEffect)((function(){S&&n()}),[P]),{signIn:n,loaded:P}});function v(e){var t=l(Object(m.useState)(!1),2),n=t[0],o=t[1],r=l(Object(m.useState)(!1),2),i=r[0],a=r[1],c=e.tag,u=e.type,s=e.className,f=e.disabledStyle,d=e.buttonText,y=e.children,h=e.render,v=e.theme,S=e.icon,O=e.disabled,x=j({jsSrc:e.jsSrc,onFailure:e.onFailure,onScriptLoadFailure:e.onScriptLoadFailure,clientId:e.clientId,cookiePolicy:e.cookiePolicy,loginHint:e.loginHint,hostedDomain:e.hostedDomain,fetchBasicProfile:e.fetchBasicProfile,discoveryDocs:e.discoveryDocs,uxMode:e.uxMode,redirectUri:e.redirectUri,scope:e.scope,accessType:e.accessType,onLogoutSuccess:e.onLogoutSuccess}),I=x.signOut,w=O||!x.loaded;if(h)return h({onClick:I,disabled:w});var k={backgroundColor:\"dark\"===v?\"rgb(66, 133, 244)\":\"#fff\",display:\"inline-flex\",alignItems:\"center\",color:\"dark\"===v?\"#fff\":\"rgba(0, 0, 0, .54)\",boxShadow:\"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)\",padding:0,borderRadius:2,border:\"1px solid transparent\",fontSize:14,fontWeight:\"500\",fontFamily:\"Roboto, sans-serif\"},A={cursor:\"pointer\",backgroundColor:\"dark\"===v?\"#3367D6\":\"#eee\",color:\"dark\"===v?\"#fff\":\"rgba(0, 0, 0, .54)\",opacity:1},_=w?Object.assign({},k,f):i?Object.assign({},k,A):n?Object.assign({},k,{cursor:\"pointer\",opacity:.9}):k;return b.a.createElement(c,{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){o(!1),a(!1)},onMouseDown:function(){return a(!0)},onMouseUp:function(){return a(!1)},onClick:I,style:_,type:u,disabled:w,className:s},[S&&b.a.createElement(g,{key:1,active:i}),b.a.createElement(p,{icon:S,key:2},y||d)])}y.defaultProps={type:\"button\",tag:\"button\",buttonText:\"Sign in with Google\",scope:\"profile email\",accessType:\"online\",prompt:\"\",cookiePolicy:\"single_host_origin\",fetchBasicProfile:!0,isSignedIn:!1,uxMode:\"popup\",disabledStyle:{opacity:.6},icon:!0,theme:\"light\",onRequest:function(){}};var S=y,j=function(e){var t=e.jsSrc,n=void 0===t?\"https://apis.google.com/js/api.js\":t,o=e.onFailure,r=e.onScriptLoadFailure,i=e.clientId,a=e.cookiePolicy,u=e.loginHint,l=e.hostedDomain,s=e.fetchBasicProfile,p=e.discoveryDocs,g=e.uxMode,y=e.redirectUri,b=e.scope,h=e.accessType,v=e.onLogoutSuccess,S=c(Object(m.useState)(!1),2),j=S[0],O=S[1],x=Object(m.useCallback)((function(){if(window.gapi){var e=window.gapi.auth2.getAuthInstance();null!=e&&e.then((function(){e.signOut().then((function(){e.disconnect(),v()}))}),(function(e){return o(e)}))}}),[v]);return Object(m.useEffect)((function(){var e=r||o;return f(document,\"script\",\"google-login\",n,(function(){var t={client_id:i,cookie_policy:a,login_hint:u,hosted_domain:l,fetch_basic_profile:s,discoveryDocs:p,ux_mode:g,redirect_uri:y,scope:b,access_type:h};window.gapi.load(\"auth2\",(function(){window.gapi.auth2.getAuthInstance()?O(!0):window.gapi.auth2.init(t).then((function(){return O(!0)}),(function(t){return e(t)}))}))}),(function(t){e(t)})),function(){d(document,\"google-login\")}}),[]),{signOut:x,loaded:j}};v.defaultProps={type:\"button\",tag:\"button\",buttonText:\"Logout of Google\",disabledStyle:{opacity:.6},icon:!0,theme:\"light\",jsSrc:\"https://apis.google.com/js/api.js\"};var O=v}],t.c=o,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var r in e)t.d(o,r,function(t){return e[t]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=4);function t(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return n[e].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n,o}));","import config from 'config';\nimport httpService from './http.service';\n\nconst { apiVersion } = config;\n\nconst login = (lms, params) => httpService\n  .post(`/${apiVersion}/go/${lms}/login`, params)\n  .then(({ data }) => data)\n  .catch((err) => err.response.data);\n\nconst loadH5PSettings = (activityId, studentId = null) => httpService\n  .get(\n    `/${apiVersion}/google-classroom/activities/${activityId}/h5p-resource-settings`,\n    {},\n    { gcuid: studentId },\n  )\n  .then(({ data }) => data)\n  .catch((err) => {\n    Promise.reject(err.response.data);\n  });\n\nconst loadSafariMontagePublishTool = (projectId, playlistId, activityId, lmsSettingId) => httpService\n  .post(\n    `/${apiVersion}/go/safarimontage/projects/${projectId}/playlists/${playlistId}/activities/${activityId}/publish`,\n    { setting_id: lmsSettingId, count: 1 },\n  )\n  .then(({ data }) => data)\n  .catch((err) => err.response.data);\n\nexport default {\n  login,\n  loadH5PSettings,\n  loadSafariMontagePublishTool,\n};\n","import service from 'services/genericLMS.service';\nimport {\n  GENERIC_LMS_LOGIN,\n  GENERIC_LMS_LOGIN_ERROR,\n  GENERIC_LMS_LOAD_H5P_SETTINGS,\n  GENERIC_LMS_LOAD_H5P_SETTINGS_ERROR,\n  SAFARI_MONTAGE_LOAD_PUBLISH_TOOL,\n  SAFARI_MONTAGE_LOAD_PUBLISH_TOOL_ERROR,\n  CLOSE_SAFARI_MONTAGE_TOOL,\n} from '../../genericLMSActionTypes';\n\nexport const doLoginAction = (params) => async (dispatch) => {\n  const results = await service.login(params.lmsName, params);\n  if (results.errors) {\n    dispatch({\n      type: GENERIC_LMS_LOGIN_ERROR,\n      results,\n    });\n  } else {\n    dispatch({\n      type: GENERIC_LMS_LOGIN,\n      results,\n    });\n  }\n};\n\nexport const loadH5PSettingsAction = (activityId) => async (dispatch) => {\n  const results = await service.loadH5PSettings(activityId);\n  if (results.errors) {\n    dispatch({\n      type: GENERIC_LMS_LOAD_H5P_SETTINGS_ERROR,\n      results,\n    });\n  } else {\n    dispatch({\n      type: GENERIC_LMS_LOAD_H5P_SETTINGS,\n      results,\n    });\n  }\n};\n\nexport const loadSafariMontagePublishToolAction = (projectId, playlistId, activityId, lmsSettingId) => async (dispatch) => {\n  const results = await service.loadSafariMontagePublishTool(projectId, playlistId, activityId, lmsSettingId);\n  if (results.errors) {\n    dispatch({\n      type: SAFARI_MONTAGE_LOAD_PUBLISH_TOOL_ERROR,\n      results,\n    });\n  } else {\n    dispatch({\n      type: SAFARI_MONTAGE_LOAD_PUBLISH_TOOL,\n      results,\n    });\n  }\n};\n\nexport const closeSafariMontageToolAction = () => async (dispatch) => {\n  dispatch({ type: CLOSE_SAFARI_MONTAGE_TOOL });\n};\n","import {\n  SHOW_DELETE_POPUP,\n  HIDE_DELETE_POPUP,\n  SIDE_BAR_COLLAPSE_TOGGLE,\n} from '../actionTypes';\n\nexport const showDeletePopup = (id, title, deleteType) => ({\n  type: SHOW_DELETE_POPUP,\n  id,\n  title,\n  deleteType,\n});\n\n// shows the delete popup on activities, project, playlists\nexport const showDeletePopupAction = (id, title, deleteType) => async (dispatch) => {\n  dispatch(showDeletePopup(id, title, deleteType));\n};\n\nexport const hideDeletePopup = () => ({\n  type: HIDE_DELETE_POPUP,\n});\n\n// hides the delete popup on activities, project, playlists\nexport const hideDeletePopupAction = () => async (dispatch) => {\n  dispatch(hideDeletePopup());\n};\n\nexport const collapsedSideBar = () => async (dispatch) => {\n  dispatch({ type: SIDE_BAR_COLLAPSE_TOGGLE });\n};\n","/* eslint-disable */\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport 'react-responsive-modal/styles.css';\nimport { Modal } from 'react-responsive-modal';\n\nimport { Formik } from 'formik';\nimport { GoogleLogin } from 'react-google-login';\n\nimport logo from 'assets/images/loginlogo.png';\nimport {\n  googleClassRoomLoginAction,\n  googleClassRoomLoginFailureAction,\n} from 'store/actions/gapi';\nimport { copyProject } from 'store/actions/share';\n\nconst GoogleLoginModal = ({\n  show,\n  onHide,\n  googleClassRoomLogin,\n  googleClassRoomLoginFailure,\n  projectId,\n}) => {\n  const dataRedux = useSelector((state) => state);\n  const [tokenTemp, setTokenTemp] = useState('');\n  const [showForm, setShowForm] = useState(false);\n  const [courses, setCourses] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (dataRedux.share.googleShare === true) {\n      setShowForm(true);\n    } else if (dataRedux.share.googleShare === false) {\n      setShowForm(false);\n    } else if (dataRedux.share.googleShare === 'close') {\n      onHide();\n    }\n  }, [dataRedux, onHide]);\n\n  useEffect(() => {\n    if (dataRedux.share.courses) {\n      setCourses(dataRedux.share.courses);\n      setLoading(false);\n    }\n  }, [dataRedux.share.courses]);\n\n  return (\n    <Modal\n      open={show}\n      onClose={onHide}\n      center\n    >\n      <div className=\"model-box-google model-box-view\">\n        <div className=\"modal-header\">\n          <img src={logo} alt=\"\" />\n        </div>\n        <div className=\"model-body\" style={{ maxWidth: '500px' }}>\n          <div className=\"sign-in-google\">\n            <br />\n            {!showForm ? (\n              <div className=\"content-authorization\">\n                <p>\n                  With CurrikiStudio you can publish your Project as a new Google Classroom course.\n                </p>\n                <p>To start, please log into your Google account.</p>\n                <div>\n                  <GoogleLogin\n                    clientId={global.config.gapiClientId}\n                    onSuccess={(data) => {\n                      googleClassRoomLogin(data);\n                      setTokenTemp(JSON.stringify(data.tokenObj));\n                    }}\n                    // onFailure={googleClassRoomLoginFailure}\n                    scope=\"https://www.googleapis.com/auth/classroom.courses.readonly https://www.googleapis.com/auth/classroom.courses https://www.googleapis.com/auth/classroom.topics https://www.googleapis.com/auth/classroom.coursework.me https://www.googleapis.com/auth/classroom.coursework.students\"\n                    cookiePolicy=\"single_host_origin\"\n                  >\n                    <span>Login with Google</span>\n                  </GoogleLogin>\n                </div>\n              </div>\n            ) : (\n              <div className=\"classroom-form\">\n                <div>\n                  <h1>Are you sure you want to share this Project to Google Classroom?</h1>\n\n                  {loading && (\n                    <p className=\"loading-classes\">Loading Classes....</p>\n                  )}\n\n                  <Formik\n                    initialValues={{\n                      course: undefined,\n                      heading: 'test',\n                      description: 'test',\n                      room: 'test',\n                    }}\n                    onSubmit={(values) => {\n                      onHide();\n                      if (values.course === 'Create a new class') {\n                        copyProject(projectId, null, tokenTemp);\n                      } else {\n                        copyProject(projectId, values.course, tokenTemp);\n                      }\n                      setLoading(false);\n                    }}\n                  >\n                    {({\n                      values,\n                      // errors,\n                      // touched,\n                      handleChange,\n                      handleBlur,\n                      handleSubmit,\n                      // isSubmitting,\n                      /* and other goodies */\n                    }) => (\n                      <form onSubmit={handleSubmit}>\n                        <select\n                          className=\"form-control select-dropdown\"\n                          name=\"course\"\n                          value={values.course}\n                          onChange={handleChange}\n                          onBlur={handleBlur}\n                        >\n                          <option>Create a new class</option>\n                          {!!courses && courses.map((item) => (\n                            <option key={item.id} value={item.id}>{item.name}</option>\n                          ))}\n                        </select>\n                        {/* <input\n                          type=\"text\"\n                          name=\"course\"\n                          class=\"form-control\"\n                          onChange={handleChange}\n                          onBlur={handleBlur}\n                          value={values.course}\n                          placeholder=\"Course Name\"\n                        /> */}\n\n                        {/* {errors.course && touched.course && (\n                          <div className=\"form-error\">{errors.course}</div>\n                        )} */}\n\n                        {/* <select\n                          class=\"form-control\"\n                          name=\"room\"\n                          onChange={handleChange}\n                          onBlur={handleBlur}\n                          value={values.room}\n                          placeholder=\"Course Name\"\n                        >\n                          <option>Select your room</option>\n                          {rooms.map((data) => (\n                            <option key={data.id}>{data}</option>\n                          ))}\n                        </select> */}\n\n                        {/* {errors.room && touched.room && (\n                          <div className=\"form-error\">{errors.room}</div>\n                        )} */}\n\n                        {/* <input\n                          type=\"text\"\n                          name=\"heading\"\n                          class=\"form-control\"\n                          onChange={handleChange}\n                          onBlur={handleBlur}\n                          value={values.heading}\n                          placeholder=\"Heading\"\n                        /> */}\n\n                        {/* {errors.heading && touched.heading && (\n                          <div className=\"form-error\">{errors.heading}</div>\n                        )} */}\n\n                        {/* <textarea\n                          class=\"form-control\"\n                          rows=\"5\"\n                          type=\"text\"\n                          name=\"description\"\n                          onChange={handleChange}\n                          onBlur={handleBlur}\n                          value={values.description}\n                          placeholder=\"Description\"\n                        /> */}\n\n                        {/* {errors.description && touched.description && (\n                          <div className=\"form-error\">{errors.description}</div>\n                        )} */}\n\n                        {/*\n                        <p>\n                          Are you sure you want to share this Project to Google Classroom?\n                        </p>\n                        */}\n                        {!loading && (\n                          <button type=\"submit\">Confirm</button>\n                        )}\n                      </form>\n                    )}\n                  </Formik>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nGoogleLoginModal.propTypes = {\n  show: PropTypes.bool.isRequired,\n  projectId: PropTypes.number.isRequired,\n  onHide: PropTypes.func.isRequired,\n  googleClassRoomLogin: PropTypes.func.isRequired,\n  googleClassRoomLoginFailure: PropTypes.func.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  googleClassRoomLogin: (data) => dispatch(googleClassRoomLoginAction(data)),\n  googleClassRoomLoginFailure: (data) => dispatch(googleClassRoomLoginFailureAction(data)),\n});\n\nexport default withRouter(\n  connect(null, mapDispatchToProps)(GoogleLoginModal),\n);\n","import Swal from 'sweetalert2';\n\nimport searchService from 'services/search.service';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const copyProject = async (projectId, courseId, token) => {\n  Swal.fire({\n    title: 'Publishing....',\n    showCancelButton: false,\n    showConfirmButton: false,\n    allowOutsideClick: false,\n  });\n  const result = await searchService.googleClassShare(projectId, courseId, token);\n  if (result.course) {\n    Swal.fire({\n      icon: 'success',\n      title: 'Shared!',\n      confirmButtonColor: '#5952c6',\n      html: 'Your project has been shared to Google Classroom',\n      // text: `Your playlist has been submitted to ${lmsUrl}`,\n    });\n  } else {\n    Swal.fire({\n      confirmButtonColor: '#5952c6',\n      icon: 'error',\n      text: 'Something went wrong, Kindly try again.',\n    });\n  }\n};\n","import config from 'config';\nimport httpService from './http.service';\n\nconst { apiVersion } = config;\n\nconst getUserLmsSettings = () => httpService\n  .get(`/${apiVersion}/user-lms-settings`)\n  .then(({ data }) => data)\n  .catch((err) => Promise.reject(err.response.data));\n\nexport default {\n  getUserLmsSettings,\n};\n","import accountService from 'services/account.service';\nimport { GET_USER_LMS_SETTINGS } from '../actionTypes';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const getUserLmsSettingsAction = () => async (dispatch) => {\n  const lmsSettings = await accountService.getUserLmsSettings();\n  dispatch({\n    type: GET_USER_LMS_SETTINGS,\n    lmsSettings,\n  });\n};\n","if (process.env.NODE_ENV === \"production\") {\n  module.exports = require(\"./dist/react-switch.min.js\");\n} else {\n  module.exports = require(\"./dist/react-switch.dev.js\");\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport std from 'assets/images/terms.png';\nimport { LoadHP } from 'store/actions/playlist';\n\nfunction Unauthorized(props) {\n  const { text, showButton, loadHP } = props;\n\n  return (\n    <div className=\"whole-authorized\">\n      <div className=\"box-unauthorized\">\n        <img src={std} alt=\"\" />\n\n        <h3>{text}</h3>\n\n        {showButton ? (\n          <Link\n            to=\"/studio\"\n            onClick={() => {\n              loadHP('Loading...');\n            }}\n          >\n            {' '}\n            Go Back to Projects\n          </Link>\n        ) : (\n          <Link\n            to=\"/studio\"\n            onClick={() => {\n              loadHP('Loading...');\n            }}\n          >\n            {' '}\n            Go Back\n          </Link>\n        )}\n      </div>\n    </div>\n  );\n}\n\nUnauthorized.propTypes = {\n  text: PropTypes.string.isRequired,\n  showButton: PropTypes.bool,\n  loadHP: PropTypes.func.isRequired,\n};\n\nUnauthorized.defaultProps = {\n  showButton: false,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  loadHP: (show) => dispatch(LoadHP(show)),\n});\n\nexport default withRouter(\n  connect(null, mapDispatchToProps)(Unauthorized),\n);\n","export default __webpack_public_path__ + \"static/media/276.f6c236f2.gif\";","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, useDispatch } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nimport gifLoader from 'assets/images/276.gif';\nimport {\n  loadH5pResource,\n  loadH5pResourceSettingsOpen,\n  loadH5pResourceSettingsShared,\n  loadH5pResourceXapi,\n} from 'store/actions/resource';\nimport * as xAPIHelper from 'helpers/xapi';\n\nlet counter = 0;\n\nconst H5PPreview = (props) => {\n  const [loading, setLoading] = useState(true);\n\n  const [resourceId, setResourceId] = useState(null);\n\n  const {\n    activityId,\n    loadH5pResourceProp,\n    showLtiPreview,\n    showActivityPreview,\n  } = props;\n\n  const dispatch = useDispatch();\n\n  const resourceLoaded = async (data) => {\n    window.H5PIntegration = data.h5p.settings;\n    const h5pWrapper = document.getElementById('curriki-h5p-wrapper');\n    h5pWrapper.innerHTML = data.h5p.embed_code.trim();\n    const newCss = data.h5p.settings.core.styles.concat(\n      data.h5p.settings.loadedCss,\n    );\n\n    await Promise.all(\n      newCss.map((value) => {\n        const link = document.createElement('link');\n        link.href = value;\n        link.type = 'text/css';\n        link.rel = 'stylesheet';\n        document.head.appendChild(link);\n        return true;\n      }),\n    );\n\n    const newScripts = data.h5p.settings.core.scripts.concat(\n      data.h5p.settings.loadedJs,\n    );\n\n    newScripts.forEach((value) => {\n      const script = document.createElement('script');\n      script.src = value;\n      script.async = false;\n      document.body.appendChild(script);\n    });\n\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    if (resourceId !== activityId) {\n      const h5pIFrame = document.getElementsByClassName('h5p-iframe');\n      if (h5pIFrame.length) {\n        h5pIFrame[0].remove();\n      }\n\n      if (activityId === null || activityId === undefined) {\n        return;\n      }\n\n      const loadResource = async () => {\n        try {\n          if (showLtiPreview) {\n            const response = await loadH5pResourceSettingsOpen(activityId);\n            if (response.h5p_activity) {\n              await resourceLoaded(response.h5p_activity);\n            }\n          } else if (showActivityPreview) {\n            const response = await loadH5pResourceSettingsShared(activityId);\n            if (response.activity) {\n              await resourceLoaded(response.activity);\n            }\n          } else {\n            const response = await loadH5pResourceProp(activityId);\n            if (response.activity) {\n              await resourceLoaded(response.activity);\n            }\n          }\n        } catch (e) {\n          setLoading(false);\n        }\n\n        const checkXapi = setInterval(() => {\n          try {\n            const x = document.getElementsByClassName('h5p-iframe')[0].contentWindow;\n            if (x.H5P) {\n              if (x.H5P.externalDispatcher && xAPIHelper.isxAPINeeded(props.match.path)) {\n                // eslint-disable-next-line no-use-before-define\n                stopXapi();\n\n                x.H5P.externalDispatcher.on('xAPI', (event) => {\n                  if (counter > 0) {\n                    dispatch(loadH5pResourceXapi(JSON.stringify(xAPIHelper.extendStatement(event.data.statement, { ...props }))));\n                  }\n                  counter += 1;\n                });\n              }\n            }\n          } catch (e) {\n            console.log(e);\n          }\n        });\n\n        const stopXapi = () => clearInterval(checkXapi);\n      };\n\n      loadResource();\n\n      setResourceId(activityId);\n    }\n  }, [resourceId, activityId, showLtiPreview, showActivityPreview, loadH5pResourceProp]);\n\n  return (\n    <>\n      {!loading ? (\n        <div id=\"curriki-h5p-wrapper\">\n          <div className=\"loader_gif\" style={{ color: 'black' }}>\n            Unable to Load Activity\n          </div>\n        </div>\n      ) : (\n        <div id=\"curriki-h5p-wrapper\">\n          <div className=\"loader_gif\">\n            <img src={gifLoader} alt=\"\" />\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nH5PPreview.propTypes = {\n  match: PropTypes.shape({ path: PropTypes.string }),\n  activityId: PropTypes.number.isRequired,\n  showLtiPreview: PropTypes.bool,\n  showActivityPreview: PropTypes.bool,\n  loadH5pResourceProp: PropTypes.func.isRequired,\n};\n\nH5PPreview.defaultProps = {\n  showLtiPreview: false,\n  showActivityPreview: false,\n  match: PropTypes.shape({ path: PropTypes.string }),\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  loadH5pResourceProp: (activityId) => dispatch(loadH5pResource(activityId)),\n});\n\nconst mapStateToProps = (state) => ({\n  resource: state.resource,\n  parentPlaylist: state.playlist.selectedPlaylist,\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(H5PPreview));\n","import React from 'react';\nimport cx from 'classnames';\n\ninterface CloseIconProps {\n  id?: string;\n  closeIcon?: React.ReactNode;\n  styles?: {\n    closeButton?: React.CSSProperties;\n    closeIcon?: React.CSSProperties;\n  };\n  classNames?: {\n    closeButton?: string;\n    closeIcon?: string;\n  };\n  classes: {\n    closeButton?: string;\n  };\n  onClick: () => void;\n}\n\nconst CloseIcon = ({\n  classes,\n  classNames,\n  styles,\n  id,\n  closeIcon,\n  onClick,\n}: CloseIconProps) => (\n  <button\n    id={id}\n    className={cx(classes.closeButton, classNames?.closeButton)}\n    style={styles?.closeButton}\n    onClick={onClick}\n    data-testid=\"close-button\"\n  >\n    {closeIcon ? (\n      closeIcon\n    ) : (\n      <svg\n        className={classNames?.closeIcon}\n        style={styles?.closeIcon}\n        width={28}\n        height={28}\n        viewBox=\"0 0 36 36\"\n        data-testid=\"close-icon\"\n      >\n        <path d=\"M28.5 9.62L26.38 7.5 18 15.88 9.62 7.5 7.5 9.62 15.88 18 7.5 26.38l2.12 2.12L18 20.12l8.38 8.38 2.12-2.12L20.12 18z\" />\n      </svg>\n    )}\n  </button>\n);\n\nexport default CloseIcon;\n","export const isBrowser = typeof window !== 'undefined';\n","// https://github.com/alexandrzavalii/focus-trap-js/blob/master/src/index.js v1.1.0\n\nexport const candidateSelectors = [\n  'input',\n  'select',\n  'textarea',\n  'a[href]',\n  'button',\n  '[tabindex]',\n  'audio[controls]',\n  'video[controls]',\n  '[contenteditable]:not([contenteditable=\"false\"])',\n];\n\nfunction isHidden(node: any) {\n  // offsetParent being null will allow detecting cases where an element is invisible or inside an invisible element,\n  // as long as the element does not use position: fixed. For them, their visibility has to be checked directly as well.\n  return (\n    node.offsetParent === null || getComputedStyle(node).visibility === 'hidden'\n  );\n}\n\nfunction getCheckedRadio(nodes: any, form: any) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n}\n\nfunction isNotRadioOrTabbableRadio(node: any) {\n  if (node.tagName !== 'INPUT' || node.type !== 'radio' || !node.name) {\n    return true;\n  }\n  var radioScope = node.form || node.ownerDocument;\n  var radioSet = radioScope.querySelectorAll(\n    'input[type=\"radio\"][name=\"' + node.name + '\"]'\n  );\n  var checked = getCheckedRadio(radioSet, node.form);\n  return checked === node || (checked === undefined && radioSet[0] === node);\n}\n\nexport function getAllTabbingElements(parentElem: any) {\n  var currentActiveElement = document.activeElement;\n  var tabbableNodes = parentElem.querySelectorAll(candidateSelectors.join(','));\n  var onlyTabbable = [];\n  for (var i = 0; i < tabbableNodes.length; i++) {\n    var node = tabbableNodes[i];\n    if (\n      currentActiveElement === node ||\n      (!node.disabled &&\n        getTabindex(node) > -1 &&\n        !isHidden(node) &&\n        isNotRadioOrTabbableRadio(node))\n    ) {\n      onlyTabbable.push(node);\n    }\n  }\n  return onlyTabbable;\n}\n\nexport function tabTrappingKey(event: any, parentElem: any) {\n  // check if current event keyCode is tab\n  if (!event || event.key !== 'Tab') return;\n\n  if (!parentElem || !parentElem.contains) {\n    if (process && process.env.NODE_ENV === 'development') {\n      console.warn('focus-trap-js: parent element is not defined');\n    }\n    return false;\n  }\n\n  if (!parentElem.contains(event.target)) {\n    return false;\n  }\n\n  var allTabbingElements = getAllTabbingElements(parentElem);\n  var firstFocusableElement = allTabbingElements[0];\n  var lastFocusableElement = allTabbingElements[allTabbingElements.length - 1];\n\n  if (event.shiftKey && event.target === firstFocusableElement) {\n    lastFocusableElement.focus();\n    event.preventDefault();\n    return true;\n  } else if (!event.shiftKey && event.target === lastFocusableElement) {\n    firstFocusableElement.focus();\n    event.preventDefault();\n    return true;\n  }\n  return false;\n}\n\nfunction getTabindex(node: any) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) return tabindexAttr;\n  // Browsers do not return tabIndex correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n  if (isContentEditable(node)) return 0;\n  return node.tabIndex;\n}\n\nfunction isContentEditable(node: any) {\n  return node.getAttribute('contentEditable');\n}\n","import { useEffect, useRef } from 'react';\nimport { isBrowser } from './utils';\nimport {\n  tabTrappingKey,\n  candidateSelectors,\n  getAllTabbingElements,\n} from './lib/focusTrapJs';\n\ninterface FocusTrapProps {\n  container?: React.RefObject<HTMLElement> | null;\n  initialFocusRef?: React.RefObject<HTMLElement>;\n}\n\nexport const FocusTrap = ({ container, initialFocusRef }: FocusTrapProps) => {\n  const refLastFocus = useRef<HTMLElement | null>();\n  /**\n   * Handle focus lock on the modal\n   */\n  useEffect(() => {\n    const handleKeyEvent = (event: KeyboardEvent) => {\n      if (container?.current) {\n        tabTrappingKey(event, container.current);\n      }\n    };\n\n    if (isBrowser) {\n      document.addEventListener('keydown', handleKeyEvent);\n    }\n    // On mount we focus on the first focusable element in the modal if there is one\n    if (isBrowser && container?.current) {\n      const savePreviousFocus = () => {\n        // First we save the last focused element\n        // only if it's a focusable element\n        if (\n          candidateSelectors.findIndex((selector) =>\n            document.activeElement?.matches(selector)\n          ) !== -1\n        ) {\n          refLastFocus.current = document.activeElement as HTMLElement;\n        }\n      };\n\n      if (initialFocusRef) {\n        savePreviousFocus();\n        // We need to schedule focusing on a next frame - this allows to focus on the modal root\n        requestAnimationFrame(() => {\n          initialFocusRef.current?.focus();\n        });\n      } else {\n        const allTabbingElements = getAllTabbingElements(container.current);\n        if (allTabbingElements[0]) {\n          savePreviousFocus();\n          allTabbingElements[0].focus();\n        }\n      }\n    }\n    return () => {\n      if (isBrowser) {\n        document.removeEventListener('keydown', handleKeyEvent);\n        // On unmount we restore the focus to the last focused element\n        refLastFocus.current?.focus();\n      }\n    };\n  }, [container, initialFocusRef]);\n\n  return null;\n};\n","import { Ref, useEffect } from 'react';\n\nlet modals: Ref<Element>[] = [];\n\n/**\n * Handle the order of the modals.\n * Inspired by the material-ui implementation.\n */\nexport const modalManager = {\n  /**\n   * Register a new modal\n   */\n  add: (newModal: Ref<Element>) => {\n    modals.push(newModal);\n  },\n\n  /**\n   * Remove a modal\n   */\n  remove: (oldModal: Ref<Element>) => {\n    modals = modals.filter((modal) => modal !== oldModal);\n  },\n\n  /**\n   * When multiple modals are rendered will return true if current modal is the last one\n   */\n  isTopModal: (modal: Ref<Element>) =>\n    !!modals.length && modals[modals.length - 1] === modal,\n};\n\nexport function useModalManager(ref: Ref<Element>, open: boolean) {\n  useEffect(() => {\n    if (open) {\n      modalManager.add(ref);\n    }\n    return () => {\n      modalManager.remove(ref);\n    };\n  }, [open, ref]);\n}\n","import { useEffect, useRef } from 'react';\nimport { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock';\n\nexport const useScrollLock = (\n  refModal: React.RefObject<Element>,\n  open: boolean,\n  showPortal: boolean,\n  blockScroll: boolean\n) => {\n  const oldRef = useRef<Element | null>(null);\n\n  useEffect(() => {\n    if (open && refModal.current && blockScroll) {\n      oldRef.current = refModal.current;\n      disableBodyScroll(refModal.current);\n    }\n    return () => {\n      if (oldRef.current) {\n        enableBodyScroll(oldRef.current);\n        oldRef.current = null;\n      }\n    };\n  }, [open, showPortal, refModal]);\n};\n","import useStatefulRef from \"@bedrock-layout/use-stateful-ref\";\nimport React from \"react\";\n\nexport default function useForwardedRef<T>(\n  forwardedRef: React.Ref<T>\n): React.MutableRefObject<T> {\n  const innerRef = useStatefulRef<T>(null);\n  React.useEffect(() => {\n    if (!forwardedRef) return;\n\n    if (typeof forwardedRef === \"function\") {\n      forwardedRef(innerRef.current);\n    } else {\n      (forwardedRef as React.MutableRefObject<T | null>).current =\n        innerRef.current;\n    }\n  });\n\n  return innerRef;\n}\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, useSelector } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport { confirmAlert } from 'react-confirm-alert';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Dropdown, Modal } from 'react-bootstrap';\n\n// import logo from 'assets/images/logo.svg';\nimport config from 'config';\nimport { shareActivity, deleteResourceAction } from 'store/actions/resource';\nimport { cloneActivity } from 'store/actions/search';\nimport { getUserLmsSettingsAction } from 'store/actions/account';\nimport { loadSafariMontagePublishToolAction, closeSafariMontageToolAction } from 'store/actions/LMS/genericLMS';\n\nimport './style.scss';\n\nconst ResourceCardDropdown = (props) => {\n  const {\n    lmsSettings,\n    lmsSettingsLoaded,\n    getLmsSettings,\n    resource,\n    playlist,\n    deleteResource,\n    loadSafariMontagePublishTool,\n    closeSafariMontageTool,\n    safariMontagePublishTool,\n    match,\n    teamPermission,\n    previewPage,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n  const { permission } = organization;\n  const [safariToolHtml, setSafariToolHtml] = useState(null);\n\n  useEffect(() => {\n    setSafariToolHtml(encodeURI(safariMontagePublishTool));\n  }, [safariMontagePublishTool]);\n\n  useEffect(() => {\n    if (lmsSettingsLoaded) return;\n\n    getLmsSettings();\n  }, [match]);\n\n  const handleDelete = (e) => {\n    e.preventDefault();\n\n    Swal.fire({\n      title: 'Are you sure you want to delete this activity?',\n      showDenyButton: true,\n      showCancelButton: true,\n      confirmButtonText: 'Yes',\n      denyButtonText: 'No',\n    }).then((result) => {\n      if (result.isConfirmed) {\n        deleteResource(resource.id, playlist.id);\n      }\n    });\n  };\n\n  return (\n    <Dropdown className=\"pull-right resource-dropdown check\">\n      <Dropdown.Toggle className=\"resource-dropdown-btn\">\n        <FontAwesomeIcon icon=\"ellipsis-v\" />\n      </Dropdown.Toggle>\n\n      <Dropdown.Menu>\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:view-activity') : permission?.Activity?.includes('activity:view')) && (\n        <Dropdown.Item\n          as={Link}\n          to={`/studio/org/${organization.currentOrganization?.domain}/project/${match.params.projectId}/playlist/${playlist.id}/activity/${resource.id}/preview`}\n          onClick={() => { if (previewPage === 'projectPreview') { localStorage.setItem('projectPreview', true); } else { localStorage.setItem('projectPreview', false); } }}\n        >\n          <FontAwesomeIcon icon=\"eye\" className=\"mr-2\" />\n          Preview\n        </Dropdown.Item>\n        )}\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:edit-activity') : permission?.Activity?.includes('activity:edit')) && (\n          <Dropdown.Item\n            as={Link}\n            to={`/studio/org/${organization.currentOrganization?.domain}/project/${match.params.projectId}/playlist/${playlist.id}/activity/${resource.id}/edit`}\n          >\n            <FontAwesomeIcon icon=\"pen\" className=\"mr-2\" />\n            Edit\n          </Dropdown.Item>\n        )}\n        {permission?.Activity?.includes('activity:duplicate') && (\n          <Dropdown.Item\n            to=\"#\"\n            onClick={() => {\n              Swal.showLoading();\n              cloneActivity(playlist.id, resource.id);\n            }}\n          >\n            <FontAwesomeIcon icon=\"clone\" className=\"mr-2\" />\n            Duplicate\n          </Dropdown.Item>\n        )}\n        {(Object.keys(teamPermission).length\n        ? teamPermission?.Team?.includes('team:publish-activity') : permission?.Activity?.includes('activity:share')) && lmsSettings.length !== 0 && (\n          <li className=\"dropdown-submenu send\">\n            <a tabIndex=\"-1\" className=\"dropdown-item\">\n              <FontAwesomeIcon icon=\"newspaper\" className=\"mr-2\" />\n              Publish\n            </a>\n            <ul className=\"dropdown-menu check\">\n              {lmsSettings.map((data) => {\n                if (data.lms_name !== 'safarimontage') return false;\n\n                return (\n                  <li>\n                    <a\n                      onClick={() => {\n                        loadSafariMontagePublishTool(\n                          playlist.project.id,\n                          playlist.id,\n                          resource.id,\n                          data.id,\n                        );\n                      }}\n                    >\n                      {data.site_name}\n                    </a>\n                    <Modal\n                      dialogClassName=\"safari-modal\"\n                      show={safariMontagePublishTool}\n                      onHide={() => closeSafariMontageTool()}\n                      aria-labelledby=\"example-modal-sizes-title-lg\"\n                    >\n                      <Modal.Header closeButton>\n                        <Modal.Title id=\"example-modal-sizes-title-lg\">\n                          Safari Montage\n                        </Modal.Title>\n                      </Modal.Header>\n                      <Modal.Body>\n                        <iframe title=\"Safari Montage\" src={`data:text/html;charset=utf-8,${safariToolHtml}`} />\n                      </Modal.Body>\n                    </Modal>\n                  </li>\n                );\n              })}\n            </ul>\n          </li>\n        )}\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:share-activity') : permission?.Activity?.includes('activity:share')) && (\n          <Dropdown.Item\n            onClick={() => {\n              shareActivity(resource.id);\n              const protocol = `${window.location.href.split('/')[0]}//`;\n              confirmAlert({\n                /* eslint-disable react/prop-types */\n                customUI: ({ onClose }) => (\n                  <div className=\"share-project-preview-url project-share-check\">\n                    <br />\n                    <h3>\n                      You can now share Activity\n                      {' '}\n                      <strong>{resource.title}</strong>\n                      <br />\n                      Anyone with the link below can access your activity:\n                    </h3>\n\n                    <a\n                      target=\"_blank\"\n                      href={`/studio/activity/${resource.id}/shared`}\n                      rel=\"noopener noreferrer\"\n                    >\n                      <input\n                        id=\"urllink_clip\"\n                        value={`${protocol + window.location.host}/studio/activity/${resource.id}/shared`}\n                      />\n                    </a>\n\n                    <span\n                      title=\"copy to clipboard\"\n                      aria-hidden=\"true\"\n                      onClick={() => {\n                        /* Get the text field */\n                        const copyText = document.getElementById('urllink_clip');\n\n                        /* Select the text field */\n                        copyText.focus();\n                        copyText.select();\n                        // copyText.setSelectionRange(0, 99999); /*For mobile devices*/\n\n                        /* Copy the text inside the text field */\n                        document.execCommand('copy');\n\n                        /* Alert the copied text */\n                        Swal.fire({\n                          title: 'Link Copied',\n                          showCancelButton: false,\n                          showConfirmButton: false,\n                          timer: 1500,\n                          allowOutsideClick: false,\n                        });\n                      }}\n                    >\n                      <FontAwesomeIcon icon=\"clipboard\" />\n                    </span>\n                    <br />\n\n                    <div className=\"close-btn\">\n                      <button type=\"button\" onClick={onClose}>\n                        Ok\n                      </button>\n                    </div>\n                  </div>\n                ),\n                /* eslint-enable react/prop-types */\n              });\n            }}\n          >\n            <FontAwesomeIcon icon=\"share\" className=\"mr-2\" />\n            Share\n          </Dropdown.Item>\n        )}\n        {permission?.Activity?.includes('activity:share') && (\n          <Dropdown.Item\n            href={`${process.env.REACT_APP_API_URL}/${config.apiVersion}/go/getxapifile/${resource.id}`}\n            onClick={() => shareActivity(resource.id)}\n          >\n            <FontAwesomeIcon icon=\"download\" className=\"mr-2\" />\n            xAPI Download\n          </Dropdown.Item>\n        )}\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:delete-activity') : permission?.Activity?.includes('activity:delete')) && (\n          <Dropdown.Item onClick={handleDelete}>\n            <FontAwesomeIcon icon=\"times-circle\" className=\"mr-2\" />\n            Delete\n          </Dropdown.Item>\n        )}\n\n        {/* <Dropdown.Item\n          href=\"#\"\n          onClick={() => {\n            Swal.fire({\n              title: 'STAY TUNED!',\n              text: 'COMING SOON',\n              imageUrl: logo,\n              imageWidth: 400,\n              imageHeight: 200,\n              imageAlt: 'Custom image',\n            });\n          }}\n        >\n          <FontAwesomeIcon icon=\"times-circle\" className=\"mr-2\" />\n          Executable\n        </Dropdown.Item> */}\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n};\n\nResourceCardDropdown.propTypes = {\n  lmsSettings: PropTypes.array.isRequired,\n  lmsSettingsLoaded: PropTypes.bool.isRequired,\n  resource: PropTypes.object.isRequired,\n  playlist: PropTypes.object.isRequired,\n  match: PropTypes.object.isRequired,\n  projectId: PropTypes.number.isRequired,\n  deleteResource: PropTypes.func.isRequired,\n  getLmsSettings: PropTypes.func.isRequired,\n  loadSafariMontagePublishTool: PropTypes.func.isRequired,\n  closeSafariMontageTool: PropTypes.func.isRequired,\n  safariMontagePublishTool: PropTypes.string.isRequired,\n  teamPermission: PropTypes.object.isRequired,\n  previewPage: PropTypes.string.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  lmsSettings: state.account.userLmsSettings,\n  lmsSettingsLoaded: state.account.userLmsSettingsLoaded,\n  safariMontagePublishTool: state.genericLMS.safariMontagePublishTool,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  deleteResource: (activityId, playlistId) => dispatch(deleteResourceAction(activityId, playlistId)),\n  getLmsSettings: () => dispatch(getUserLmsSettingsAction()),\n  loadSafariMontagePublishTool: (projectId, playlistId, activityId, lmsSettingId) => dispatch(loadSafariMontagePublishToolAction(projectId, playlistId, activityId, lmsSettingId)),\n  closeSafariMontageTool: () => dispatch(closeSafariMontageToolAction()),\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ResourceCardDropdown));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\n\nimport ResourceCardDropdown from 'components/ResourceCard/ResourceCardDropdown';\n\nimport './style.scss';\nimport { useSelector } from 'react-redux';\n\nconst ActivityCard = (props) => {\n  const {\n    activity,\n    projectId,\n    playlistId,\n    lti,\n    sampleID,\n    setModalShow,\n    setCurrentActivity,\n    playlist,\n    teamPermission,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n\n  return (\n    <li>\n      {sampleID\n        ? (\n          <a\n            onClick={() => {\n              setCurrentActivity(activity.id);\n              setModalShow(true);\n            }}\n          >\n            <div\n              className=\"playimg\"\n              style={{\n                backgroundImage:\n                  !!activity.thumb_url && activity.thumb_url.includes('pexels.com')\n                    ? `url(${activity.thumb_url})`\n                    : `url(${global.config.resourceUrl}${activity.thumb_url})`,\n              }}\n            />\n            <div className=\"plydet\">\n              {activity.metadata ? activity.metadata.title : activity.title}\n            </div>\n          </a>\n        )\n        : (\n          <>\n            <Link\n              to={\n                lti\n                  ? `/studio/playlist/${playlistId}/activity/${activity.id}/preview/lti`\n                  : `/org/${organization.currentOrganization?.domain}/project/${projectId}/playlist/${playlistId}/activity/${activity.id}/preview`\n              }\n              onClick={() => localStorage.setItem('projectPreview', true)}\n            >\n              <div\n                className=\"playimg\"\n                style={{\n                  backgroundImage:\n                    !!activity.thumb_url && activity.thumb_url.includes('pexels.com')\n                      ? `url(${activity.thumb_url})`\n                      : `url(${global.config.resourceUrl}${activity.thumb_url})`,\n                }}\n              />\n              <div className=\"plydet\">\n                {activity.metadata ? activity.metadata.title : activity.title}\n              </div>\n            </Link>\n            {!lti\n            && (\n              <div className=\"activity-options-wrapper check\">\n                <ResourceCardDropdown\n                  playlist={playlist}\n                  resource={activity}\n                  teamPermission={teamPermission || {}}\n                  previewPage=\"projectPreview\"\n                />\n              </div>\n            )}\n          </>\n        )}\n    </li>\n  );\n};\n\nActivityCard.propTypes = {\n  activity: PropTypes.object.isRequired,\n  projectId: PropTypes.number.isRequired,\n  playlistId: PropTypes.number.isRequired,\n  lti: PropTypes.bool,\n  sampleID: PropTypes.number,\n  setModalShow: PropTypes.func,\n  setCurrentActivity: PropTypes.func,\n  playlist: PropTypes.object.isRequired,\n  teamPermission: PropTypes.object.isRequired,\n};\n\nActivityCard.defaultProps = {\n  lti: false,\n  sampleID: null,\n  setModalShow: () => {},\n  setCurrentActivity: () => {},\n};\n\nexport default ActivityCard;\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Swal from 'sweetalert2';\nimport { confirmAlert } from 'react-confirm-alert';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Dropdown } from 'react-bootstrap';\n\nimport { shareActivity } from 'store/actions/resource';\n\nconst ResourceCardDropdownShare = (props) => {\n  const { resource } = props;\n\n  return (\n    <Dropdown.Item\n      onClick={() => {\n        shareActivity(resource.id);\n        const protocol = `${window.location.href.split('/')[0]}//`;\n        confirmAlert({\n          customUI: ({ onClose }) => (\n            <div className=\"share-project-preview-url project-share-check\">\n              <br />\n              <h3>\n                You can now share Activity\n                {' '}\n                <strong>{resource.title}</strong>\n                <br />\n                Anyone with the link below can access your activity:\n              </h3>\n\n              <a\n                target=\"_blank\"\n                href={`/studio/activity/${resource.id}/shared`}\n                rel=\"noopener noreferrer\"\n              >\n                <input\n                  id=\"urllink_clip\"\n                  value={`${protocol + window.location.host}/studio/activity/${resource.id}/shared`}\n                />\n              </a>\n\n              <span\n                title=\"copy to clipboard\"\n                aria-hidden=\"true\"\n                onClick={() => {\n                  /* Get the text field */\n                  const copyText = document.getElementById('urllink_clip');\n\n                  /* Select the text field */\n                  copyText.focus();\n                  copyText.select();\n                  // copyText.setSelectionRange(0, 99999); /*For mobile devices*/\n\n                  /* Copy the text inside the text field */\n                  document.execCommand('copy');\n\n                  /* Alert the copied text */\n                  Swal.fire({\n                    title: 'Link Copied',\n                    showCancelButton: false,\n                    showConfirmButton: false,\n                    timer: 1500,\n                    allowOutsideClick: false,\n                  });\n                }}\n              >\n                <FontAwesomeIcon icon=\"clipboard\" />\n              </span>\n              <br />\n\n              <div className=\"close-btn\">\n                <button type=\"button\" onClick={onClose}>\n                  Ok\n                </button>\n              </div>\n            </div>\n          ),\n        });\n      }}\n    >\n      <FontAwesomeIcon icon=\"share\" className=\"mr-2\" />\n      Share\n    </Dropdown.Item>\n  );\n};\n\nResourceCardDropdownShare.propTypes = {\n  resource: PropTypes.object.isRequired,\n};\n\nexport default ResourceCardDropdownShare;\n","Object.defineProperty(exports,\"__esModule\",{value:!0});var React=require(\"react\");function _extends(){return(_extends=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t}).apply(this,arguments)}var uncheckedIcon=React.createElement(\"svg\",{viewBox:\"-2 -5 14 20\",height:\"100%\",width:\"100%\",style:{position:\"absolute\",top:0}},React.createElement(\"path\",{d:\"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12\",fill:\"#fff\",fillRule:\"evenodd\"})),checkedIcon=React.createElement(\"svg\",{height:\"100%\",width:\"100%\",viewBox:\"-2 -5 17 21\",style:{position:\"absolute\",top:0}},React.createElement(\"path\",{d:\"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0\",fill:\"#fff\",fillRule:\"evenodd\"}));function createBackgroundColor(t,i,o,s,n){var e=(t-o)/(i-o);if(0===e)return s;if(1===e)return n;for(var h=\"#\",r=1;r<6;r+=2){var a=parseInt(s.substr(r,2),16),c=parseInt(n.substr(r,2),16),l=Math.round((1-e)*a+e*c).toString(16);1===l.length&&(l=\"0\"+l),h+=l}return h}function convertShorthandColor(t){if(7===t.length)return t;for(var i=\"#\",o=1;o<4;o+=1)i+=t[o]+t[o];return i}function getBackgroundColor(t,i,o,s,n){return createBackgroundColor(t,i,o,convertShorthandColor(s),convertShorthandColor(n))}function objectWithoutProperties(t,i){var o={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&-1===i.indexOf(s)&&(o[s]=t[s]);return o}var ReactSwitch=function(n){function t(t){n.call(this,t);var i=t.height,o=t.width,s=t.checked;this.t=t.handleDiameter||i-2,this.i=Math.max(o-i,o-(i+this.t)/2),this.o=Math.max(0,(i-this.t)/2),this.state={s:s?this.i:this.o},this.n=0,this.e=0,this.h=this.h.bind(this),this.r=this.r.bind(this),this.a=this.a.bind(this),this.c=this.c.bind(this),this.l=this.l.bind(this),this.u=this.u.bind(this),this.f=this.f.bind(this),this.p=this.p.bind(this),this.b=this.b.bind(this),this.g=this.g.bind(this),this.v=this.v.bind(this),this.w=this.w.bind(this)}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.componentDidUpdate=function(t){t.checked!==this.props.checked&&this.setState({s:this.props.checked?this.i:this.o})},t.prototype.k=function(t){this.y.focus(),this.setState({C:t,M:!0,m:Date.now()})},t.prototype.x=function(t){var i=this.state,o=i.C,s=i.s,n=(this.props.checked?this.i:this.o)+t-o;i.R||t===o||this.setState({R:!0});var e=Math.min(this.i,Math.max(this.o,n));e!==s&&this.setState({s:e})},t.prototype.S=function(t){var i=this.state,o=i.s,s=i.R,n=i.m,e=this.props.checked,h=(this.i+this.o)/2,r=Date.now()-n;!s||r<250?this.T(t):e?h<o?this.setState({s:this.i}):this.T(t):o<h?this.setState({s:this.o}):this.T(t),this.setState({R:!1,M:!1}),this.n=Date.now()},t.prototype.h=function(t){t.preventDefault(),\"number\"==typeof t.button&&0!==t.button||(this.k(t.clientX),window.addEventListener(\"mousemove\",this.r),window.addEventListener(\"mouseup\",this.a))},t.prototype.r=function(t){t.preventDefault(),this.x(t.clientX)},t.prototype.a=function(t){this.S(t),window.removeEventListener(\"mousemove\",this.r),window.removeEventListener(\"mouseup\",this.a)},t.prototype.c=function(t){this.$=null,this.k(t.touches[0].clientX)},t.prototype.l=function(t){this.x(t.touches[0].clientX)},t.prototype.u=function(t){t.preventDefault(),this.S(t)},t.prototype.p=function(t){50<Date.now()-this.n&&(this.T(t),50<Date.now()-this.e&&this.setState({M:!1}))},t.prototype.b=function(){this.e=Date.now()},t.prototype.g=function(){this.setState({M:!0})},t.prototype.v=function(){this.setState({M:!1})},t.prototype.w=function(t){this.y=t},t.prototype.f=function(t){t.preventDefault(),this.y.focus(),this.T(t),this.setState({M:!1})},t.prototype.T=function(t){var i=this.props;(0,i.onChange)(!i.checked,t,i.id)},t.prototype.render=function(){var t=this.props,i=t.disabled,o=t.className,s=t.offColor,n=t.onColor,e=t.offHandleColor,h=t.onHandleColor,r=t.checkedIcon,a=t.uncheckedIcon,c=t.boxShadow,l=t.activeBoxShadow,u=t.height,d=t.width,f=objectWithoutProperties(t,[\"disabled\",\"className\",\"offColor\",\"onColor\",\"offHandleColor\",\"onHandleColor\",\"checkedIcon\",\"uncheckedIcon\",\"boxShadow\",\"activeBoxShadow\",\"height\",\"width\",\"handleDiameter\"]),p=this.state,b=p.s,g=p.R,v=p.M,w={position:\"relative\",display:\"inline-block\",textAlign:\"left\",opacity:i?.5:1,direction:\"ltr\",borderRadius:u/2,WebkitTransition:\"opacity 0.25s\",MozTransition:\"opacity 0.25s\",transition:\"opacity 0.25s\",touchAction:\"none\",WebkitTapHighlightColor:\"rgba(0, 0, 0, 0)\",WebkitUserSelect:\"none\",MozUserSelect:\"none\",msUserSelect:\"none\",userSelect:\"none\"},k={height:u,width:d,margin:Math.max(0,(this.t-u)/2),position:\"relative\",background:getBackgroundColor(b,this.i,this.o,s,n),borderRadius:u/2,cursor:i?\"default\":\"pointer\",WebkitTransition:g?null:\"background 0.25s\",MozTransition:g?null:\"background 0.25s\",transition:g?null:\"background 0.25s\"},y={height:u,width:Math.min(1.5*u,d-(this.t+u)/2+1),position:\"relative\",opacity:(b-this.o)/(this.i-this.o),pointerEvents:\"none\",WebkitTransition:g?null:\"opacity 0.25s\",MozTransition:g?null:\"opacity 0.25s\",transition:g?null:\"opacity 0.25s\"},C={height:u,width:Math.min(1.5*u,d-(this.t+u)/2+1),position:\"absolute\",opacity:1-(b-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:\"none\",WebkitTransition:g?null:\"opacity 0.25s\",MozTransition:g?null:\"opacity 0.25s\",transition:g?null:\"opacity 0.25s\"},M={height:this.t,width:this.t,background:getBackgroundColor(b,this.i,this.o,e,h),display:\"inline-block\",cursor:i?\"default\":\"pointer\",borderRadius:\"50%\",position:\"absolute\",transform:\"translateX(\"+b+\"px)\",top:Math.max(0,(u-this.t)/2),outline:0,boxShadow:v?l:c,border:0,WebkitTransition:g?null:\"background-color 0.25s, transform 0.25s, box-shadow 0.15s\",MozTransition:g?null:\"background-color 0.25s, transform 0.25s, box-shadow 0.15s\",transition:g?null:\"background-color 0.25s, transform 0.25s, box-shadow 0.15s\"};return React.createElement(\"div\",{className:o,style:w},React.createElement(\"div\",{className:\"react-switch-bg\",style:k,onClick:i?null:this.f,onMouseDown:function(t){return t.preventDefault()}},r&&React.createElement(\"div\",{style:y},r),a&&React.createElement(\"div\",{style:C},a)),React.createElement(\"div\",{className:\"react-switch-handle\",style:M,onClick:function(t){return t.preventDefault()},onMouseDown:i?null:this.h,onTouchStart:i?null:this.c,onTouchMove:i?null:this.l,onTouchEnd:i?null:this.u,onTouchCancel:i?null:this.v}),React.createElement(\"input\",_extends({},{type:\"checkbox\",role:\"switch\",disabled:i,style:{border:0,clip:\"rect(0 0 0 0)\",height:1,margin:-1,overflow:\"hidden\",padding:0,position:\"absolute\",width:1}},f,{ref:this.w,onFocus:this.g,onBlur:this.v,onKeyUp:this.b,onChange:this.p})))},t}(React.Component);ReactSwitch.defaultProps={disabled:!1,offColor:\"#888\",onColor:\"#080\",offHandleColor:\"#fff\",onHandleColor:\"#fff\",uncheckedIcon:uncheckedIcon,checkedIcon:checkedIcon,boxShadow:null,activeBoxShadow:\"0 0 2px 3px #3bf\",height:28,width:56},exports.default=ReactSwitch;\n","import React, { useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { FadeDiv } from 'utils';\n\nimport './style.scss';\n\n// TODO: need to clean up attribute\nfunction DeletePopup(props) {\n  const {\n    ui,\n    selectedProject,\n    hideDeletePopup,\n    deleteProject,\n    deletePlaylist,\n    deleteResource,\n  } = props;\n\n  // remove popup when escape is pressed\n  const escFunction = useCallback((event) => {\n    if (event.keyCode === 27) {\n      hideDeletePopup(event);\n    }\n  }, [hideDeletePopup]);\n\n  useEffect(() => {\n    document.addEventListener('keydown', escFunction, false);\n    return () => {\n      document.removeEventListener('keydown', escFunction, false);\n    };\n  }, [escFunction]);\n\n  const deleteEntity = useCallback((deleteType, id) => () => {\n    if (deleteType === 'Project') {\n      deleteProject(id);\n    } else if (deleteType === 'Playlist') {\n      deletePlaylist(selectedProject.id, id);\n    } else if (deleteType === 'Activity') {\n      deleteResource(id);\n    }\n  }, [selectedProject, deleteProject, deletePlaylist, deleteResource]);\n\n  return (\n    <FadeDiv className=\"popup\">\n      <div className=\"modal fade\" role=\"dialog\" aria-hidden=\"true\">\n        <div className=\"modal-dialog\" role=\"document\">\n          <div className=\"modal-content\">\n            <div className=\"modal-body\">\n              <h5>{`Delete \"${ui.title}\"?`}</h5>\n              <p>\n                {`You're about to permanently delete this ${ui.deleteType} and all of its data.`}\n              </p>\n              <p>Do you want to continue?</p>\n            </div>\n\n            <div className=\"modal-footer\">\n              <button\n                type=\"submit\"\n                className=\"btn btn-sm btn-danger\"\n                onClick={deleteEntity(ui.deleteType, ui.id)}\n              >\n                Delete\n              </button>\n\n              <button\n                type=\"button\"\n                className=\"btn btn-sm btn-default\"\n                data-dismiss=\"modal\"\n                onClick={hideDeletePopup}\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </FadeDiv>\n  );\n}\n\nDeletePopup.propTypes = {\n  ui: PropTypes.object.isRequired,\n  selectedProject: PropTypes.object,\n  hideDeletePopup: PropTypes.func.isRequired,\n  deleteProject: PropTypes.func,\n  deletePlaylist: PropTypes.func,\n  deleteResource: PropTypes.func,\n};\n\nDeletePopup.defaultProps = {\n  selectedProject: null,\n  deleteProject: () => {},\n  deletePlaylist: () => {},\n  deleteResource: () => {},\n};\n\nexport default DeletePopup;\n","function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n// Older browsers don't support event options, feature detect it.\n\n// Adopted and modified solution from Bohdan Didukh (2017)\n// https://stackoverflow.com/questions/41594997/ios-10-safari-prevent-scrolling-behind-a-fixed-overlay-and-maintain-scroll-posi\n\nvar hasPassiveEvents = false;\nif (typeof window !== 'undefined') {\n  var passiveTestOptions = {\n    get passive() {\n      hasPassiveEvents = true;\n      return undefined;\n    }\n  };\n  window.addEventListener('testPassive', null, passiveTestOptions);\n  window.removeEventListener('testPassive', null, passiveTestOptions);\n}\n\nvar isIosDevice = typeof window !== 'undefined' && window.navigator && window.navigator.platform && (/iP(ad|hone|od)/.test(window.navigator.platform) || window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\n\n\nvar locks = [];\nvar documentListenerAdded = false;\nvar initialClientY = -1;\nvar previousBodyOverflowSetting = void 0;\nvar previousBodyPaddingRight = void 0;\n\n// returns true if `el` should be allowed to receive touchmove events.\nvar allowTouchMove = function allowTouchMove(el) {\n  return locks.some(function (lock) {\n    if (lock.options.allowTouchMove && lock.options.allowTouchMove(el)) {\n      return true;\n    }\n\n    return false;\n  });\n};\n\nvar preventDefault = function preventDefault(rawEvent) {\n  var e = rawEvent || window.event;\n\n  // For the case whereby consumers adds a touchmove event listener to document.\n  // Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })\n  // in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then\n  // the touchmove event on document will break.\n  if (allowTouchMove(e.target)) {\n    return true;\n  }\n\n  // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).\n  if (e.touches.length > 1) return true;\n\n  if (e.preventDefault) e.preventDefault();\n\n  return false;\n};\n\nvar setOverflowHidden = function setOverflowHidden(options) {\n  // If previousBodyPaddingRight is already set, don't set it again.\n  if (previousBodyPaddingRight === undefined) {\n    var _reserveScrollBarGap = !!options && options.reserveScrollBarGap === true;\n    var scrollBarGap = window.innerWidth - document.documentElement.clientWidth;\n\n    if (_reserveScrollBarGap && scrollBarGap > 0) {\n      previousBodyPaddingRight = document.body.style.paddingRight;\n      document.body.style.paddingRight = scrollBarGap + 'px';\n    }\n  }\n\n  // If previousBodyOverflowSetting is already set, don't set it again.\n  if (previousBodyOverflowSetting === undefined) {\n    previousBodyOverflowSetting = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n  }\n};\n\nvar restoreOverflowSetting = function restoreOverflowSetting() {\n  if (previousBodyPaddingRight !== undefined) {\n    document.body.style.paddingRight = previousBodyPaddingRight;\n\n    // Restore previousBodyPaddingRight to undefined so setOverflowHidden knows it\n    // can be set again.\n    previousBodyPaddingRight = undefined;\n  }\n\n  if (previousBodyOverflowSetting !== undefined) {\n    document.body.style.overflow = previousBodyOverflowSetting;\n\n    // Restore previousBodyOverflowSetting to undefined\n    // so setOverflowHidden knows it can be set again.\n    previousBodyOverflowSetting = undefined;\n  }\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\nvar isTargetElementTotallyScrolled = function isTargetElementTotallyScrolled(targetElement) {\n  return targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false;\n};\n\nvar handleScroll = function handleScroll(event, targetElement) {\n  var clientY = event.targetTouches[0].clientY - initialClientY;\n\n  if (allowTouchMove(event.target)) {\n    return false;\n  }\n\n  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {\n    // element is at the top of its scroll.\n    return preventDefault(event);\n  }\n\n  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {\n    // element is at the bottom of its scroll.\n    return preventDefault(event);\n  }\n\n  event.stopPropagation();\n  return true;\n};\n\nexport var disableBodyScroll = function disableBodyScroll(targetElement, options) {\n  // targetElement must be provided\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error('disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.');\n    return;\n  }\n\n  // disableBodyScroll must not have been called on this targetElement before\n  if (locks.some(function (lock) {\n    return lock.targetElement === targetElement;\n  })) {\n    return;\n  }\n\n  var lock = {\n    targetElement: targetElement,\n    options: options || {}\n  };\n\n  locks = [].concat(_toConsumableArray(locks), [lock]);\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = function (event) {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        initialClientY = event.targetTouches[0].clientY;\n      }\n    };\n    targetElement.ontouchmove = function (event) {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        handleScroll(event, targetElement);\n      }\n    };\n\n    if (!documentListenerAdded) {\n      document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = true;\n    }\n  } else {\n    setOverflowHidden(options);\n  }\n};\n\nexport var clearAllBodyScrollLocks = function clearAllBodyScrollLocks() {\n  if (isIosDevice) {\n    // Clear all locks ontouchstart/ontouchmove handlers, and the references.\n    locks.forEach(function (lock) {\n      lock.targetElement.ontouchstart = null;\n      lock.targetElement.ontouchmove = null;\n    });\n\n    if (documentListenerAdded) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = false;\n    }\n\n    // Reset initial clientY.\n    initialClientY = -1;\n  } else {\n    restoreOverflowSetting();\n  }\n\n  locks = [];\n};\n\nexport var enableBodyScroll = function enableBodyScroll(targetElement) {\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error('enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.');\n    return;\n  }\n\n  locks = locks.filter(function (lock) {\n    return lock.targetElement !== targetElement;\n  });\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = null;\n    targetElement.ontouchmove = null;\n\n    if (documentListenerAdded && locks.length === 0) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = false;\n    }\n  } else if (!locks.length) {\n    restoreOverflowSetting();\n  }\n};\n\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Swal from 'sweetalert2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { getProjectCourseFromLMSPlaylist } from 'store/actions/project';\n\nfunction ShareLink(props) {\n  const dispatch = useDispatch();\n\n  const { projectId, playlistId } = props;\n\n  const AllLms = useSelector((state) => state.share);\n\n  const [allLms, setAllLms] = useState([]);\n  useEffect(() => {\n    setAllLms(AllLms);\n  }, [AllLms]);\n\n  return (\n    <li className=\"dropdown-submenu send\">\n      <a\n        href=\"#\"\n        className=\"test\"\n        tabIndex=\"-1\"\n        onClick={() => {\n          if (allLms.shareVendors && allLms.shareVendors.length === 0) {\n            Swal.fire({\n              icon: 'info',\n              // eslint-disable-next-line max-len\n              title: \"You don't have a Learning Management Systems set up for publishing. Please contact us to get this configured.\",\n            });\n          }\n        }}\n      >\n        <FontAwesomeIcon icon=\"newspaper\" className=\"mr-2\" />\n        Publish\n      </a>\n\n      <ul className=\"dropdown-menu check\">\n        {allLms.shareVendors && allLms.shareVendors.map((data) => (\n          data.lms_name !== 'safarimontage' && (\n          <li key={data.id}>\n            <a\n              href=\"#\"\n              onClick={async () => {\n                dispatch(getProjectCourseFromLMSPlaylist(\n                  playlistId,\n                  data.id,\n                  data.lms_name.toLowerCase(),\n                  data.lms_url,\n                  projectId,\n                ));\n              }}\n            >\n              {data.site_name}\n            </a>\n          </li>\n        )))}\n      </ul>\n    </li>\n  );\n}\n\nShareLink.propTypes = {\n  projectId: PropTypes.number.isRequired,\n  playlistId: PropTypes.number.isRequired,\n};\n\nexport default ShareLink;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"className\", \"fluid\", \"rounded\", \"roundedCircle\", \"thumbnail\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useBootstrapPrefix } from './ThemeProvider';\nexport var propTypes = {\n  /**\n   * @default 'img'\n   */\n  bsPrefix: PropTypes.string,\n\n  /**\n   * Sets image as fluid image.\n   */\n  fluid: PropTypes.bool,\n\n  /**\n   * Sets image shape as rounded.\n   */\n  rounded: PropTypes.bool,\n\n  /**\n   * Sets image shape as circle.\n   */\n  roundedCircle: PropTypes.bool,\n\n  /**\n   * Sets image shape as thumbnail.\n   */\n  thumbnail: PropTypes.bool\n};\nvar defaultProps = {\n  fluid: false,\n  rounded: false,\n  roundedCircle: false,\n  thumbnail: false\n};\nvar Image = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      fluid = _ref.fluid,\n      rounded = _ref.rounded,\n      roundedCircle = _ref.roundedCircle,\n      thumbnail = _ref.thumbnail,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'img');\n  var classes = classNames(fluid && bsPrefix + \"-fluid\", rounded && \"rounded\", roundedCircle && \"rounded-circle\", thumbnail && bsPrefix + \"-thumbnail\");\n  return /*#__PURE__*/React.createElement(\"img\", _extends({\n    // eslint-disable-line jsx-a11y/alt-text\n    ref: ref\n  }, props, {\n    className: classNames(className, classes)\n  }));\n});\nImage.displayName = 'Image';\nImage.defaultProps = defaultProps;\nexport default Image;","export default __webpack_public_path__ + \"static/media/project_icon.6cb7f972.svg\";","/* eslint-disable max-len */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Swal from 'sweetalert2';\nimport { useSelector } from 'react-redux';\n\nfunction PreviousLink(props) {\n  const {\n    history,\n    showLti,\n    shared,\n    projectId,\n    playlistId,\n    previousResource,\n    allPlaylists,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n  const currentPlaylistIndex = allPlaylists.findIndex((p) => (p.id === playlistId));\n  const prevPlaylist = currentPlaylistIndex > 0\n    ? allPlaylists[currentPlaylistIndex - 1]\n    : null;\n\n  let prevLink = '#';\n  if (previousResource) {\n    prevLink = `/playlist/${playlistId}/activity/${previousResource.id}/preview`;\n  } else if (prevPlaylist) {\n    prevLink = `/playlist/${prevPlaylist.id}/preview`;\n  }\n  if (prevLink !== '#') {\n    if (showLti) {\n      prevLink += '/studio/lti';\n    } else {\n      prevLink = `/studio/org/${organization.currentOrganization?.domain}/project/${projectId}${prevLink}`;\n\n      if (shared) {\n        prevLink += '/studio/shared';\n      }\n    }\n  }\n\n  return (\n    <div className=\"slider-hover-section\">\n      <Link to={prevLink}>\n        <FontAwesomeIcon icon=\"chevron-left\" />\n      </Link>\n\n      <div className={`hover-control-caption pointer-cursor${previousResource ? '' : ' no-data prev'}`}>\n        {previousResource ? (\n          <Link to={prevLink}>\n            <div\n              className=\"img-in-hover\"\n              style={{\n                backgroundImage: previousResource.thumb_url\n                  ? previousResource.thumb_url.includes('pexels.com')\n                    ? `url(${previousResource.thumb_url})`\n                    : `url(${global.config.resourceUrl}${previousResource.thumb_url})`\n                  : 'url(data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBw0NDQ0NDQ0NDQ0NDQ0NDg0NDQ8NDQ0NFREWFhURExMYHSggGBolGxUWITEhJSk3Li4uFx8zODMtNygtLjcBCgoKBQUFDgUFDisZExkrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIALcBEwMBIgACEQEDEQH/xAAaAAEBAQEBAQEAAAAAAAAAAAAAAgEDBAUH/8QANBABAQACAAEIBwgCAwAAAAAAAAECEQMEEiExQWFxkQUTFDJRUqEiM2JygYKxwdHhQvDx/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AP0QAAAAAAGgA0GNGgxo3QMNN0AzRpWjQJ0K0Akbo0CTTdAJGgMY0BgAAAAAAAAAAAAANCNAGgDdDQNGm6boGabpum6BOjStGgTo0rRoEaZpemWAnTNL0nQJFMBLKpNBgUAAAAAAAAAAAIEBsUyNBrWRUAbI2RsgMkVI2RsgM03TZG6BOjS9GgRo0vRoHPTNOmk2AixNjppNgIsYupoJTV1FBIUAAAAAAAAAAAIEBUUyKgCoyKgNipCRUAkVISKkBmm6duFwMsuqdHxvRHq4XIZ/yu+6f5B4Zjvqd+HyPO9f2Z39fk932OHOzH+a48Tlnyz9b/gFcPkeE6/tXv6vJw9IcLXNyk1Pdv8ASMuNnbLbei711R7uLj6zDo7ZueIPj6ZY6WJsBzsTY6WJsBzsTXSooJqK6VFBzo2sAAAAAAAAAAAIEBeKkxcBsVGRUBUXw8LeiS290duQcPDLKzOb6Nzp1H0888OFPhOySdYPFwuQZX3rMe7rr2cPkuGPZu/G9LzcTl1vuzXfemvbctY7vZN0HPiceTqxyyvdLrzefPjcS9lxndLvzd/asO/yb7Vh3+QPFzMvhl5U9Xl8t8q9vtOHf5HtOHf5A8Pq8vlvlXs5HbzdWWa6tzsV7Th3+R7Th3+QPJyng2Z3Utl6eiOF4WXy5eVfR9qw7/JXD4+OV1N76+oHyc8bOuWeM052Pf6S68fCvFQc6mrqKCKjJ0rnkCKxtYAAAAAAAAAAAQIC4uIxXAVFRMXAdODnzcplOy7/AEfX5Vhz+HddOpzo+NH1vR/E52Gu3Ho/TsB86Prcf7u/lfO4/D5udnZ1zwfR4/3d/KD52Memcly12b+DjwctZS3qlfSlmt9nxB86zXRetjpx8pcrZ1OYDHp5Lwt3nXqnV4ufG4VmWpN76YDjXbkXv/tv9OOU10V25F7/AO2/0B6S97Hwrw17vSXvY+FeGgipqqmgioyXUZA51jawAAAAAAAAAAAgQF4riIqAuKiIqAuPX6P4nNzk7Muj9ex44vGg+l6R4fRMvh0Xw/7/AC78f7u/lJZxeH+bHyv/AKco+7y/KD50VKiV6OTcHndN92fUHNfCw511590e7icLHKas8NdjODwphNdfeC8ZqajQB8/luOs9/GbOQ+/+2/078vx3jv5b9K8/IL9v9t/oG+kvex8K8Ne30n72Phf5eG0GVFVUUGVzyXUZAisbWAAAAAAAAAAAECAuKRFQFRURFQFxUrnKuUH0/RfE6MsP3T+3q5V93n4Pkcm4vMzxy7Jenw7X2crjZq2WXs3AfIxs6N9Xb2PZjy6SamGpO/8A09HqeF8uH0PVcL5cPoDj7f8Ah+p7f+H6u3quF8uH0PVcL5cPoDj7f+H6s9v/AAfX/Tv6rhfLh9D1XC+XD6A83E5bMsbOZ1zXX/pHo/7z9t/mPZ6nhfLh9G4YcPG7kxl+M0Dx+lPex8L/AC8Fr2+lbOdjq9l/l4LQZU1tTQZUVVTQTWNrAAAAAAAAAAACBAVGpigbFbQ0FytlRFbBcrZUSt2DpK3bntuwXs2jbdgrZanbNgrbLU7ZaDbWWs2zYNtTaMAqKpNBNCgAAAAAAAAAAAANjWANawBTdpaCtt2jbQXs2nZsF7No23YK2zbNs2Cts2zbNg3bKMA2wYDU1rKDKAAAAAAAAAAAAAA1gDRjQaMAUMAVs2wBu27SArbNsAbsYwGjAAYAAwAAAAAAAAAAAAAAAAAABu2ANAAawBoAAwBrAAAAYAAAAAAAAAAAP//Z)',\n              }}\n            />\n            <span>{previousResource.title}</span>\n          </Link>\n        ) : (\n          <div className=\"slider-end\">\n            <p>Welcome! You are at the beginning of this playlist.</p>\n            <Link\n              to={prevLink}\n              onClick={() => {\n                if (!prevPlaylist) {\n                  Swal.fire({\n                    text: 'You are at the beginning of this project. Would you like to return to the project preview?',\n                    showCancelButton: true,\n                    confirmButtonColor: '#3085d6',\n                    cancelButtonColor: '#d33',\n                    confirmButtonText: 'Yes',\n                  })\n                    .then((result) => {\n                      if (result.value) {\n                        if (showLti) {\n                          history.push(`/studio/project/${projectId}/shared`);\n                        } else {\n                          history.push(`/studio/org/${organization.currentOrganization?.domain}/project/${projectId}/preview`);\n                        }\n                      }\n                    });\n                }\n              }}\n            >\n              <FontAwesomeIcon icon=\"chevron-left\" className=\"mr-2\" />\n              Switch to previous playlist\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nPreviousLink.propTypes = {\n  history: PropTypes.object.isRequired,\n  showLti: PropTypes.bool,\n  shared: PropTypes.bool,\n  projectId: PropTypes.number,\n  playlistId: PropTypes.number.isRequired,\n  previousResource: PropTypes.object,\n  allPlaylists: PropTypes.array,\n};\n\nPreviousLink.defaultProps = {\n  showLti: false,\n  shared: false,\n  projectId: null,\n  previousResource: null,\n  allPlaylists: [],\n};\n\nexport default withRouter(PreviousLink);\n","/* eslint-disable max-len */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Swal from 'sweetalert2';\nimport { useSelector } from 'react-redux';\n\nfunction NextLink(props) {\n  const {\n    history,\n    showLti,\n    shared,\n    projectId,\n    playlistId,\n    nextResource,\n    allPlaylists,\n  } = props;\n\n  const currentPlaylistIndex = allPlaylists.findIndex((p) => (p.id === playlistId));\n  const nextPlaylist = currentPlaylistIndex < allPlaylists.length - 1\n    ? allPlaylists[currentPlaylistIndex + 1]\n    : null;\n  const organization = useSelector((state) => state.organization);\n  let nextLink = '#';\n  if (nextResource) {\n    nextLink = `/playlist/${playlistId}/activity/${nextResource.id}/preview`;\n  } else if (nextPlaylist) {\n    nextLink = `/playlist/${nextPlaylist.id}/preview`;\n  }\n  if (nextLink !== '#') {\n    if (showLti) {\n      nextLink += '/studio/lti';\n    } else {\n      nextLink = `/studio/org/${organization.currentOrganization?.domain}/project/${projectId}${nextLink}`;\n\n      if (shared) {\n        nextLink += '/studio/shared';\n      }\n    }\n  }\n\n  return (\n    <div className=\"slider-hover-section\">\n      <Link to={nextLink}>\n        <FontAwesomeIcon icon=\"chevron-right\" />\n      </Link>\n\n      <div className={`hover-control-caption pointer-cursor${nextResource ? '' : ' no-data'}`}>\n        {nextResource ? (\n          <Link to={nextLink}>\n            <div\n              className=\"img-in-hover\"\n              style={{\n                backgroundImage: nextResource.thumb_url\n                  ? nextResource.thumb_url.includes('pexels.com')\n                    ? `url(${nextResource.thumb_url})`\n                    : `url(${global.config.resourceUrl}${nextResource.thumb_url})`\n                  : 'url(data:image/jpeg;base64,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)',\n              }}\n            />\n            <span>{nextResource.title}</span>\n          </Link>\n        ) : (\n          <div className=\"slider-end\">\n            <p>Hooray! You did it! There are no more activities in this playlist.</p>\n            <Link\n              to={nextLink}\n              onClick={() => {\n                if (!nextPlaylist) {\n                  Swal.fire({\n                    text: 'You are at the end of this project. Would you like to return to the project preview?',\n                    showCancelButton: true,\n                    confirmButtonColor: '#4646c4',\n                    cancelButtonColor: '#d33',\n                    cancelButtonText: 'No',\n                    confirmButtonText: 'Yes',\n                  })\n                    .then((result) => {\n                      if (result.value) {\n                        if (showLti) {\n                          history.push(`/studio/project/${projectId}/shared`);\n                        } else {\n                          history.push(`/studio/org/${organization.currentOrganization?.domain}/project/${projectId}/preview`);\n                        }\n                      }\n                    });\n                }\n              }}\n            >\n              Switch to next playlist\n              <FontAwesomeIcon icon=\"chevron-right\" className=\"ml-2\" />\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nNextLink.propTypes = {\n  history: PropTypes.object.isRequired,\n  showLti: PropTypes.bool,\n  shared: PropTypes.bool,\n  projectId: PropTypes.number,\n  playlistId: PropTypes.number.isRequired,\n  nextResource: PropTypes.object,\n  allPlaylists: PropTypes.array,\n};\n\nNextLink.defaultProps = {\n  showLti: false,\n  shared: false,\n  projectId: null,\n  nextResource: null,\n  allPlaylists: [],\n};\n\nexport default withRouter(NextLink);\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Dropdown } from 'react-bootstrap';\nimport Swal from 'sweetalert2';\n\nimport { getProjectId, googleShare } from 'store/actions/gapi';\nimport { cloneProject } from 'store/actions/search';\nimport { getProjectCourseFromLMS, toggleProjectShareAction } from 'store/actions/project';\nimport { lmsPlaylist } from 'store/actions/playlist';\nimport SharePreviewPopup from 'components/SharePreviewPopup';\n\nimport './style.scss';\nimport { propTypes } from 'react-bootstrap/esm/Image';\n\nconst ProjectCardDropdown = (props) => {\n  const {\n    project,\n    handleShow,\n    setProjectId,\n    showDeletePopup,\n    teamPermission,\n    previewMode,\n    text,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n  const { permission } = organization;\n  const dispatch = useDispatch();\n  const AllLms = useSelector((state) => state.share);\n  const [allLms, setAllLms] = useState([]);\n  useEffect(() => {\n    setAllLms(AllLms);\n  }, [AllLms]);\n\n  return (\n    <Dropdown className=\"project-dropdown check d-flex  align-items-center text-added-project-dropdown\">\n      <Dropdown.Toggle className=\"project-dropdown-btn project d-flex justify-content-center align-items-center\">\n        <FontAwesomeIcon icon=\"ellipsis-v\" style={{ fontSize: '13px', color: '#084892', marginLeft: '5px' }} />\n        <span>\n          {text}\n        </span>\n      </Dropdown.Toggle>\n\n      <Dropdown.Menu>\n        {!previewMode && (\n          <Dropdown.Item\n            as={Link}\n            to={`/studio/org/${organization.currentOrganization?.domain}/project/${project.id}/preview`}\n          >\n            <FontAwesomeIcon icon=\"eye\" className=\"mr-2\" />\n            Preview\n          </Dropdown.Item>\n        )}\n        {(teamPermission && Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:edit-project') : permission?.Project?.includes('project:edit')) && (\n          <Dropdown.Item as={Link} to={`/studio/org/${organization.currentOrganization?.domain}/project/${project.id}/edit`}>\n            <FontAwesomeIcon icon=\"pen\" className=\"mr-2\" />\n            Edit\n          </Dropdown.Item>\n        )}\n\n        {permission?.Project?.includes('project:clone') && (\n          <Dropdown.Item\n            to=\"#\"\n            onClick={() => {\n              Swal.showLoading();\n              cloneProject(project.id);\n            }}\n          >\n            <FontAwesomeIcon icon=\"clone\" className=\"mr-2\" />\n            Duplicate\n          </Dropdown.Item>\n        )}\n        {(teamPermission && Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:share-project') : permission?.Project?.includes('project:share')) && (\n          <Dropdown.Item\n            to=\"#\"\n            onClick={async () => {\n              const protocol = `${window.location.href.split('/')[0]}//`;\n              const url = `${protocol + window.location.host}/studio/project/${project.id}/shared`;\n              if (!project.shared) {\n                Swal.showLoading();\n                await dispatch(toggleProjectShareAction(project.id, project.name));\n                Swal.close();\n                SharePreviewPopup(url, project.name);\n              } else {\n                SharePreviewPopup(url, project.name);\n              }\n            }}\n          >\n            <FontAwesomeIcon icon=\"share\" className=\"mr-2\" />\n            Share\n          </Dropdown.Item>\n        )}\n        {(teamPermission && Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:publish-project') : permission?.Project?.includes('project:publish')) && (\n          <li className=\"dropdown-submenu send\">\n            <a tabIndex=\"-1\">\n              <FontAwesomeIcon icon=\"newspaper\" className=\"mr-2\" />\n              Publish\n            </a>\n            <ul className=\"dropdown-menu check\">\n              <li\n                onClick={() => {\n                  handleShow();\n                  getProjectId(project.id);\n                  setProjectId(props.project.id);\n                  dispatch(googleShare(false));\n                }}\n              >\n                <a>Google Classroom</a>\n              </li>\n\n              {allLms.shareVendors && allLms.shareVendors.map((data) => (\n                data.lms_name !== 'safarimontage' && (\n                <li>\n                  <a\n                    onClick={async () => {\n                      const allPlaylist = await dispatch(lmsPlaylist(project.id));\n                      if (allPlaylist) {\n                        dispatch(\n                          getProjectCourseFromLMS(\n                            data.lms_name.toLowerCase(),\n                            data.id,\n                            project.id,\n                            allPlaylist.playlists,\n                            data.lms_url,\n                          ),\n                        );\n                      }\n                    }}\n                  >\n                    {data.site_name}\n                  </a>\n                </li>\n              )))}\n            </ul>\n          </li>\n        )}\n        {(teamPermission && Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:remove-project') : permission?.Project?.includes('project:delete')) && (\n          <Dropdown.Item\n            to=\"#\"\n            onClick={() => showDeletePopup(project.id, project.name, 'Project')}\n          >\n            <FontAwesomeIcon icon=\"times-circle\" className=\"mr-2\" />\n            Delete\n          </Dropdown.Item>\n        )}\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n};\n\nProjectCardDropdown.propTypes = {\n  project: PropTypes.object.isRequired,\n  showDeletePopup: PropTypes.func.isRequired,\n  handleShow: PropTypes.func.isRequired,\n  setProjectId: PropTypes.func.isRequired,\n  teamPermission: PropTypes.object.isRequired,\n  previewMode: PropTypes.bool.isRequired,\n  text: propTypes.text,\n};\n\nProjectCardDropdown.defaultProps = {\n  text: propTypes.text,\n};\n\nexport default ProjectCardDropdown;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Dropdown } from 'react-bootstrap';\n\nimport ShareLink from 'components/ResourceCard/ShareLink';\nimport ResourceCardDropdownShare from 'components/ResourceCard/shareResource';\nimport { deletePlaylistAction, changePlaylistTitleAction } from 'store/actions/playlist';\nimport { showDeletePopupAction, hideDeletePopupAction } from 'store/actions/ui';\nimport { clonePlaylist } from 'store/actions/search';\n\nimport './style.scss';\n\n// TODO: need to clean up attributes, update to functional component\n// need to refactor template functions\nclass PlaylistCardDropdown extends React.Component {\n  handleDelete = (e) => {\n    e.preventDefault();\n    const { playlist, showDeletePopup } = this.props;\n    showDeletePopup(playlist.id, playlist.title, 'Playlist');\n  };\n\n  render() {\n    const {\n      playlist,\n      handleClickPlaylistTitle,\n      setSelectedForEdit,\n      organization,\n      teamPermission,\n    } = this.props;\n    const { permission } = organization;\n    return (\n      <Dropdown className=\"pull-right playlist-dropdown check\">\n        <Dropdown.Toggle className=\"playlist-dropdown-btn\">\n          <FontAwesomeIcon icon=\"ellipsis-v\" />\n        </Dropdown.Toggle>\n\n        <Dropdown.Menu>\n          {(Object.keys(teamPermission).length\n            ? teamPermission?.Team?.includes('team:view-playlist') : (permission?.Playlist?.includes('playlist:view') && permission?.Activity?.includes('activity:view'))) && (\n            <Dropdown.Item\n              as={Link}\n              className=\"hidden\"\n              to={`/studio/org/${organization.currentOrganization?.domain}/project/${playlist.project_id}/playlist/${playlist.id}/activity/${playlist?.activities[0]?.id}/preview`}\n            >\n              <FontAwesomeIcon icon=\"eye\" className=\"mr-2\" />\n              Preview\n            </Dropdown.Item>\n          )}\n          {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:edit-playlist') : permission?.Playlist?.includes('playlist:edit')) && (\n            <Dropdown.Item onClick={() => {\n              handleClickPlaylistTitle();\n              if (setSelectedForEdit) {\n                setSelectedForEdit(playlist);\n              }\n            }}\n            >\n              <FontAwesomeIcon icon=\"edit\" className=\"mr-2\" />\n              Edit\n            </Dropdown.Item>\n          )}\n          {permission?.Playlist?.includes('playlist:duplicate') && (\n            <Dropdown.Item\n              to=\"#\"\n              onClick={() => {\n                Swal.showLoading();\n                clonePlaylist(playlist.project_id, playlist.id);\n              }}\n            >\n              <FontAwesomeIcon icon=\"clone\" className=\"mr-2\" />\n              Duplicate\n            </Dropdown.Item>\n          )}\n          {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:share-playlist') : permission?.Playlist?.includes('playlist:share')) && (\n            playlist.activities.length > 0\n              ? <ResourceCardDropdownShare resource={playlist.activities[0]} />\n              : (\n                <Dropdown.Item\n                  to=\"#\"\n                  onClick={() => {\n                    Swal.fire('Kindly add Activity First.');\n                  }}\n                >\n                  <FontAwesomeIcon icon=\"share\" className=\"mr-2\" />\n                  Share\n                </Dropdown.Item>\n              )\n          )}\n          {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:publish-playlist') : permission?.Playlist?.includes('playlist:publish')) && (\n            <ShareLink\n              playlistId={playlist.id}\n              projectId={playlist.project_id}\n            />\n          )}\n          {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:delete-playlist') : permission?.Playlist?.includes('playlist:delete')) && (\n            <Dropdown.Item onClick={this.handleDelete}>\n              <FontAwesomeIcon icon=\"times-circle\" className=\"mr-2\" />\n              Delete\n            </Dropdown.Item>\n          )}\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n}\n\nPlaylistCardDropdown.propTypes = {\n  playlist: PropTypes.object.isRequired,\n  showDeletePopup: PropTypes.func.isRequired,\n  handleClickPlaylistTitle: PropTypes.func.isRequired,\n  setSelectedForEdit: PropTypes.func.isRequired,\n  organization: PropTypes.string.isRequired,\n  teamPermission: PropTypes.object.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  deletePlaylist: (projectId, id) => dispatch(deletePlaylistAction(projectId, id)),\n  showDeletePopup: (id, title, deleteType) => dispatch(showDeletePopupAction(id, title, deleteType)),\n  hideDeletePopup: () => dispatch(hideDeletePopupAction()),\n  changePlaylistTitle: (projectId, id, title) => dispatch(changePlaylistTitleAction(projectId, id, title)),\n});\n\nconst mapStateToProps = (state) => ({\n  // selectedProject: state.project.selectedProject,\n  organization: state.organization,\n});\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(PlaylistCardDropdown),\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ActivityPreviewCard from 'components/ActivityPreviewCard';\n\nfunction ActivitiesList(props) {\n  const {\n    showLti,\n    shared,\n    projectId,\n    playlistId,\n    activities,\n    playlist,\n    teamPermission,\n  } = props;\n\n  if (activities.length === 0) {\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"alert alert-info\" role=\"alert\">\n          No activity defined for this playlist.\n        </div>\n      </div>\n    );\n  }\n\n  return activities.map((activity) => (\n    <ActivityPreviewCard\n      key={activity.id}\n      showLti={showLti}\n      shared={shared}\n      projectId={projectId}\n      playlistId={playlistId}\n      activity={activity}\n      playlist={playlist}\n      teamPermission={teamPermission || {}}\n    />\n  ));\n}\n\nActivitiesList.propTypes = {\n  showLti: PropTypes.bool,\n  shared: PropTypes.bool,\n  projectId: PropTypes.number,\n  playlistId: PropTypes.number.isRequired,\n  activities: PropTypes.array,\n  playlist: PropTypes.object.isRequired,\n  teamPermission: PropTypes.object.isRequired,\n};\n\nActivitiesList.defaultProps = {\n  showLti: false,\n  shared: false,\n  projectId: null,\n  activities: [],\n};\n\nexport default ActivitiesList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport DropdownActivity from 'components/ResourceCard/dropdown';\n\nimport './style.scss';\nimport { useSelector } from 'react-redux';\n\nconst ActivityPreviewCard = (props) => {\n  const {\n    showLti,\n    shared,\n    activity,\n    projectId,\n    playlistId,\n    playlist,\n    teamPermission,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n  return (\n    <div className=\"preview-activity-dropdown\">\n      <Link\n        to={\n          shared\n            ? `/project/${projectId}/playlist/${playlistId}/activity/${activity.id}/preview/shared`\n            : (\n              showLti\n                ? `/playlist/${playlistId}/activity/${activity.id}/preview/lti`\n                : `/studio/org/${organization.currentOrganization?.domain}/project/${projectId}/playlist/${playlistId}/activity/${activity.id}/preview`\n            )\n        }\n      >\n        <li className=\"check\">\n          {activity.thumb_url && (\n            <div\n              className=\"bg-thumbnail\"\n              style={{\n                backgroundImage: activity.thumb_url.includes('pexels.com')\n                  ? `url(${activity.thumb_url})`\n                  : `url(${global.config.resourceUrl}${activity.thumb_url})`,\n              }}\n            />\n          )}\n          <div>\n            <div className=\"title\">{activity.title}</div>\n          </div>\n        </li>\n      </Link>\n      {!showLti\n        && (\n        <DropdownActivity\n          resource={activity}\n          playlist={playlist}\n          teamPermission={teamPermission || {}}\n        />\n        )}\n    </div>\n  );\n};\n\nActivityPreviewCard.propTypes = {\n  showLti: PropTypes.bool,\n  shared: PropTypes.bool,\n  activity: PropTypes.object.isRequired,\n  projectId: PropTypes.number,\n  playlistId: PropTypes.number.isRequired,\n  playlist: PropTypes.object.isRequired,\n  teamPermission: PropTypes.object.isRequired,\n};\n\nActivityPreviewCard.defaultProps = {\n  showLti: false,\n  shared: false,\n  projectId: null,\n};\n\nexport default ActivityPreviewCard;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect, useSelector } from 'react-redux';\nimport { withRouter, Link } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Dropdown } from 'react-bootstrap';\n\nimport { deleteResourceAction } from 'store/actions/resource';\nimport { cloneActivity } from 'store/actions/search';\nimport ResourceCardDropdownShare from './shareResource';\n\nimport './style.scss';\n\nconst ResourceCardDropdown = (props) => {\n  const {\n    resource,\n    deleteResource,\n    playlist,\n    match,\n    teamPermission,\n  } = props;\n  const organization = useSelector((state) => state.organization);\n  const { permission } = organization;\n  const handleDelete = (e) => {\n    e.preventDefault();\n    Swal.fire({\n      title: 'Are you sure you want to delete this activity?',\n      showDenyButton: true,\n      showCancelButton: true,\n      confirmButtonText: 'Yes',\n      denyButtonText: 'No',\n    }).then((result) => {\n      if (result.isConfirmed) {\n        deleteResource(resource.id, playlist.id);\n      }\n    });\n  };\n\n  return (\n    <Dropdown className=\"pull-right resource-dropdown check\">\n      <Dropdown.Toggle className=\"resource-dropdown-btn\">\n        <FontAwesomeIcon icon=\"ellipsis-v\" />\n      </Dropdown.Toggle>\n\n      <Dropdown.Menu>\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:view-activity') : permission?.Activity?.includes('activity:view')) && (\n          <Dropdown.Item\n            as={Link}\n            to={`/studio/org/${organization.currentOrganization?.domain}/project/${match.params.projectId}/playlist/${playlist.id}/activity/${resource.id}/preview`}\n          >\n            <FontAwesomeIcon icon=\"eye\" className=\"mr-2\" />\n            Preview\n          </Dropdown.Item>\n        )}\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:edit-activity') : permission?.Activity?.includes('activity:edit')) && (\n          <Dropdown.Item\n            as={Link}\n            to={`/studio/org/${organization.currentOrganization?.domain}/project/${match.params.projectId}/playlist/${playlist.id}/activity/${resource.id}/edit`}\n          >\n            <FontAwesomeIcon icon=\"pen\" className=\"mr-2\" />\n            Edit\n          </Dropdown.Item>\n        )}\n        {permission?.Activity?.includes('activity:duplicate') && (\n          <Dropdown.Item\n            to=\"#\"\n            onClick={() => {\n              Swal.showLoading();\n              cloneActivity(playlist.id, resource.id);\n            }}\n          >\n            <FontAwesomeIcon icon=\"clone\" className=\"mr-2\" />\n            Duplicate\n          </Dropdown.Item>\n        )}\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:share-activity') : permission?.Activity?.includes('activity:share')) && (\n          <ResourceCardDropdownShare resource={resource} />\n        )}\n        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:delete-activity') : permission?.Activity?.includes('activity:delete')) && (\n          <Dropdown.Item onClick={handleDelete}>\n            <FontAwesomeIcon icon=\"times-circle\" className=\"mr-2\" />\n            Delete\n          </Dropdown.Item>\n        )}\n\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n};\n\nResourceCardDropdown.propTypes = {\n  resource: PropTypes.object.isRequired,\n  playlist: PropTypes.object.isRequired,\n  match: PropTypes.object.isRequired,\n  deleteResource: PropTypes.func.isRequired,\n  teamPermission: PropTypes.object.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  deleteResource: (activityId, playlistId) => dispatch(deleteResourceAction(activityId, playlistId)),\n});\n\nexport default withRouter(connect(null, mapDispatchToProps)(ResourceCardDropdown));\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport { Helmet } from 'react-helmet';\nimport { useDispatch } from 'react-redux';\nimport TinCan from 'tincanjs';\n// import { Alert } from 'react-bootstrap';\nimport gifloader from 'assets/images/dotsloader.gif';\nimport { loadH5pResourceSettingsShared, loadH5pResourceSettingsEmbed, loadH5pResourceXapi } from 'store/actions/resource';\nimport * as xAPIHelper from 'helpers/xapi';\n\nimport './style.scss';\n\nlet counter = 1;\nlet lrs = null;\n\nconst ActivityShared = (props) => {\n  const { match, embed } = props;\n  const lrsEndpoint = new URLSearchParams(window.location.search).get('endpoint');\n  const lrsAuth = new URLSearchParams(window.location.search).get('auth');\n  const lrsRegistration = new URLSearchParams(window.location.search).get('registration');\n  const [authorized, setAuthorized] = useState(false);\n  // const [lrs, setLrs] = useState(null);\n  // const { orientation } = useSelector((state) => state.ui);\n  const dispatch = useDispatch();\n\n  const h5pInsertion = async (data) => {\n    window.H5PIntegration = data.h5p.settings;\n    const h5pWrapper = document.getElementById('curriki-h5p-wrapper');\n    h5pWrapper.innerHTML = data.h5p.embed_code.trim();\n    const newCss = data.h5p.settings.core.styles.concat(\n      data.h5p.settings.loadedCss,\n    );\n\n    await Promise.all(\n      newCss.map((value) => {\n        const link = document.createElement('link');\n        link.href = value;\n        link.type = 'text/css';\n        link.rel = 'stylesheet';\n        document.head.appendChild(link);\n        return true;\n      }),\n    );\n\n    const newScripts = data.h5p.settings.core.scripts.concat(\n      data.h5p.settings.loadedJs,\n    );\n\n    newScripts.forEach((value) => {\n      const script = document.createElement('script');\n      script.src = value;\n      script.async = false;\n      document.body.appendChild(script);\n    });\n  };\n\n  // Checking if in a tincan env\n  useEffect(() => {\n    if (!lrsEndpoint && !lrsAuth && lrs === null) return;\n\n    lrs = new TinCan.LRS({\n      endpoint: lrsEndpoint,\n      auth: lrsAuth,\n      allowFail: true,\n    });\n  }, [lrsEndpoint, lrsAuth]);\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n\n    if (match.params.activityId) {\n      if (embed) {\n        loadH5pResourceSettingsEmbed(match.params.activityId)\n          .then(async (data) => {\n            const embedSettings = {};\n            embedSettings.h5p = data;\n            h5pInsertion(embedSettings);\n          })\n          .catch(() => {\n            setAuthorized(true);\n          });\n      } else {\n        loadH5pResourceSettingsShared(match.params.activityId)\n          .then(async (data) => {\n            h5pInsertion(data);\n          })\n          .catch(() => {\n            setAuthorized(true);\n          });\n      }\n\n      const checkXapi = setInterval(() => {\n        try {\n          const x = document.getElementsByClassName('h5p-iframe')[0].contentWindow;\n          if (x.H5P) {\n            if (x.H5P.externalDispatcher && xAPIHelper.isxAPINeeded(props.match.path)) {\n              // eslint-disable-next-line no-use-before-define\n              stopXapi();\n\n              x.H5P.externalDispatcher.on('xAPI', (event) => {\n                if (counter > 0) {\n                  const extendedStatement = xAPIHelper.extendSharedActivityStatement(\n                    this,\n                    event.data.statement,\n                    { path: match.path, activityId: match.params.activityId },\n                  );\n                  dispatch(loadH5pResourceXapi(JSON.stringify(extendedStatement)));\n\n                  if (lrs) {\n                  // If an lrs has been defined, send tincanjs statement\n                    const doceboStatement = new TinCan.Statement({\n                          actor: {\n                            ...extendedStatement.actor,\n                            mbox: 'mailto:info@currikistudio.org',\n                          },\n                          verb: extendedStatement.verb,\n                          context: {\n                            ...extendedStatement.context,\n                            registration: lrsRegistration,\n                          },\n                          object: extendedStatement.object,\n                    });\n\n                    lrs.saveStatement(\n                      doceboStatement,\n                      {\n                        callback: (err, xhr) => {\n                            if (err !== null) {\n                                if (xhr !== null) {\n                                    console.log(`Failed to save statement: ${xhr.responseText} (${xhr.status})`);\n                                    // TODO: do something with error, didn't save statement\n                                    return;\n                                }\n\n                                console.log(`Failed to save statement: ${err}`);\n                                // TODO: do something with error, didn't save statement\n                                return;\n                            }\n\n                            console.log('Statement saved');\n                            // TOOO: do something with success (possibly ignore)\n                        },\n                      },\n                    );\n                  }\n                }\n                counter += 1;\n              });\n            }\n          }\n        } catch (e) {\n          console.log(e);\n        }\n      });\n\n      const stopXapi = () => clearInterval(checkXapi);\n    }\n  }, [dispatch, embed, match.params.activityId]);\n\n  return (\n    <>\n      <section className={embed ? 'embed main-page-content preview iframe-height-resource-shared defaultcontainer'\n      : 'main-page-content preview iframe-height-resource-shared defaultcontainer'}\n      >\n        {!!embed && (\n          <Helmet>\n            <script src=\"https://dev.currikistudio.org/api/storage/h5p/h5p-core/js/h5p-resizer.js\" charset=\"UTF-8\" />\n          </Helmet>\n        )}\n\n        <div className=\"flex-container previews\">\n          <div className=\"activity-bg left-vdo\">\n            <div className=\"main-item-wrapper desktop-view\">\n              <div className=\"item-container\">\n                {authorized ? (\n                  <div id=\"curriki-h5p-wrapper\">\n                    <div className=\"loader_gif\" style={{ color: 'black' }}>\n                      Activity is not sharable\n                    </div>\n                  </div>\n                ) : (\n                  <div id=\"curriki-h5p-wrapper\">\n                    <div className=\"loader_gif\">\n                      <img style={{ width: '50px' }} src={gifloader} alt=\"\" />\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n      {/* {(orientation >= 90)\n      && (\n      <div className=\"coverallareas\">\n        <Alert variant=\"warning\">Please use Portrait mode!</Alert>\n      </div>\n      )} */}\n    </>\n  );\n};\n\nActivityShared.propTypes = {\n  match: PropTypes.object.isRequired,\n  embed: PropTypes.string.isRequired,\n};\n\nexport default withRouter(ActivityShared);\n","\"0.50.0\";\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nvar CryptoJS=CryptoJS||function(e,m){var p={},j=p.lib={},l=function(){},f=j.Base={extend:function(a){l.prototype=this;var c=new l;a&&c.mixIn(a);c.hasOwnProperty(\"init\")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty(\"toString\")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},\nn=j.WordArray=f.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=m?c:4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var c=this.words,q=a.words,d=this.sigBytes;a=a.sigBytes;this.clamp();if(d%4)for(var b=0;b<a;b++)c[d+b>>>2]|=(q[b>>>2]>>>24-8*(b%4)&255)<<24-8*((d+b)%4);else if(65535<q.length)for(b=0;b<a;b+=4)c[d+b>>>2]=q[b>>>2];else c.push.apply(c,q);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<\n32-8*(c%4);a.length=e.ceil(c/4)},clone:function(){var a=f.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],b=0;b<a;b+=4)c.push(4294967296*e.random()|0);return new n.init(c,a)}}),b=p.enc={},h=b.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var b=[],d=0;d<a;d++){var f=c[d>>>2]>>>24-8*(d%4)&255;b.push((f>>>4).toString(16));b.push((f&15).toString(16))}return b.join(\"\")},parse:function(a){for(var c=a.length,b=[],d=0;d<c;d+=2)b[d>>>3]|=parseInt(a.substr(d,\n2),16)<<24-4*(d%8);return new n.init(b,c/2)}},g=b.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var b=[],d=0;d<a;d++)b.push(String.fromCharCode(c[d>>>2]>>>24-8*(d%4)&255));return b.join(\"\")},parse:function(a){for(var c=a.length,b=[],d=0;d<c;d++)b[d>>>2]|=(a.charCodeAt(d)&255)<<24-8*(d%4);return new n.init(b,c)}},r=b.Utf8={stringify:function(a){try{return decodeURIComponent(escape(g.stringify(a)))}catch(c){throw Error(\"Malformed UTF-8 data\");}},parse:function(a){return g.parse(unescape(encodeURIComponent(a)))}},\nk=j.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new n.init;this._nDataBytes=0},_append:function(a){\"string\"==typeof a&&(a=r.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,b=c.words,d=c.sigBytes,f=this.blockSize,h=d/(4*f),h=a?e.ceil(h):e.max((h|0)-this._minBufferSize,0);a=h*f;d=e.min(4*a,d);if(a){for(var g=0;g<a;g+=f)this._doProcessBlock(b,g);g=b.splice(0,a);c.sigBytes-=d}return new n.init(g,d)},clone:function(){var a=f.clone.call(this);\na._data=this._data.clone();return a},_minBufferSize:0});j.Hasher=k.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){k.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,b){return(new a.init(b)).finalize(c)}},_createHmacHelper:function(a){return function(b,f){return(new s.HMAC.init(a,\nf)).finalize(b)}}});var s=p.algo={};return p}(Math);\n(function(){var e=CryptoJS,m=e.lib,p=m.WordArray,j=m.Hasher,l=[],m=e.algo.SHA1=j.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(f,n){for(var b=this._hash.words,h=b[0],g=b[1],e=b[2],k=b[3],j=b[4],a=0;80>a;a++){if(16>a)l[a]=f[n+a]|0;else{var c=l[a-3]^l[a-8]^l[a-14]^l[a-16];l[a]=c<<1|c>>>31}c=(h<<5|h>>>27)+j+l[a];c=20>a?c+((g&e|~g&k)+1518500249):40>a?c+((g^e^k)+1859775393):60>a?c+((g&e|g&k|e&k)-1894007588):c+((g^e^\nk)-899497514);j=k;k=e;e=g<<30|g>>>2;g=h;h=c}b[0]=b[0]+h|0;b[1]=b[1]+g|0;b[2]=b[2]+e|0;b[3]=b[3]+k|0;b[4]=b[4]+j|0},_doFinalize:function(){var f=this._data,e=f.words,b=8*this._nDataBytes,h=8*f.sigBytes;e[h>>>5]|=128<<24-h%32;e[(h+64>>>9<<4)+14]=Math.floor(b/4294967296);e[(h+64>>>9<<4)+15]=b;f.sigBytes=4*e.length;this._process();return this._hash},clone:function(){var e=j.clone.call(this);e._hash=this._hash.clone();return e}});e.SHA1=j._createHelper(m);e.HmacSHA1=j._createHmacHelper(m)})();\n\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\nvar CryptoJS=CryptoJS||function(h,s){var f={},t=f.lib={},g=function(){},j=t.Base={extend:function(a){g.prototype=this;var c=new g;a&&c.mixIn(a);c.hasOwnProperty(\"init\")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty(\"toString\")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},\nq=t.WordArray=j.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=s?c:4*a.length},toString:function(a){return(a||u).stringify(this)},concat:function(a){var c=this.words,d=a.words,b=this.sigBytes;a=a.sigBytes;this.clamp();if(b%4)for(var e=0;e<a;e++)c[b+e>>>2]|=(d[e>>>2]>>>24-8*(e%4)&255)<<24-8*((b+e)%4);else if(65535<d.length)for(e=0;e<a;e+=4)c[b+e>>>2]=d[e>>>2];else c.push.apply(c,d);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<\n32-8*(c%4);a.length=h.ceil(c/4)},clone:function(){var a=j.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],d=0;d<a;d+=4)c.push(4294967296*h.random()|0);return new q.init(c,a)}}),v=f.enc={},u=v.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++){var e=c[b>>>2]>>>24-8*(b%4)&255;d.push((e>>>4).toString(16));d.push((e&15).toString(16))}return d.join(\"\")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b+=2)d[b>>>3]|=parseInt(a.substr(b,\n2),16)<<24-4*(b%8);return new q.init(d,c/2)}},k=v.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++)d.push(String.fromCharCode(c[b>>>2]>>>24-8*(b%4)&255));return d.join(\"\")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b++)d[b>>>2]|=(a.charCodeAt(b)&255)<<24-8*(b%4);return new q.init(d,c)}},l=v.Utf8={stringify:function(a){try{return decodeURIComponent(escape(k.stringify(a)))}catch(c){throw Error(\"Malformed UTF-8 data\");}},parse:function(a){return k.parse(unescape(encodeURIComponent(a)))}},\nx=t.BufferedBlockAlgorithm=j.extend({reset:function(){this._data=new q.init;this._nDataBytes=0},_append:function(a){\"string\"==typeof a&&(a=l.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,d=c.words,b=c.sigBytes,e=this.blockSize,f=b/(4*e),f=a?h.ceil(f):h.max((f|0)-this._minBufferSize,0);a=f*e;b=h.min(4*a,b);if(a){for(var m=0;m<a;m+=e)this._doProcessBlock(d,m);m=d.splice(0,a);c.sigBytes-=b}return new q.init(m,b)},clone:function(){var a=j.clone.call(this);\na._data=this._data.clone();return a},_minBufferSize:0});t.Hasher=x.extend({cfg:j.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){x.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,d){return(new a.init(d)).finalize(c)}},_createHmacHelper:function(a){return function(c,d){return(new w.HMAC.init(a,\nd)).finalize(c)}}});var w=f.algo={};return f}(Math);\n(function(h){for(var s=CryptoJS,f=s.lib,t=f.WordArray,g=f.Hasher,f=s.algo,j=[],q=[],v=function(a){return 4294967296*(a-(a|0))|0},u=2,k=0;64>k;){var l;a:{l=u;for(var x=h.sqrt(l),w=2;w<=x;w++)if(!(l%w)){l=!1;break a}l=!0}l&&(8>k&&(j[k]=v(h.pow(u,0.5))),q[k]=v(h.pow(u,1/3)),k++);u++}var a=[],f=f.SHA256=g.extend({_doReset:function(){this._hash=new t.init(j.slice(0))},_doProcessBlock:function(c,d){for(var b=this._hash.words,e=b[0],f=b[1],m=b[2],h=b[3],p=b[4],j=b[5],k=b[6],l=b[7],n=0;64>n;n++){if(16>n)a[n]=\nc[d+n]|0;else{var r=a[n-15],g=a[n-2];a[n]=((r<<25|r>>>7)^(r<<14|r>>>18)^r>>>3)+a[n-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+a[n-16]}r=l+((p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25))+(p&j^~p&k)+q[n]+a[n];g=((e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22))+(e&f^e&m^f&m);l=k;k=j;j=p;p=h+r|0;h=m;m=f;f=e;e=r+g|0}b[0]=b[0]+e|0;b[1]=b[1]+f|0;b[2]=b[2]+m|0;b[3]=b[3]+h|0;b[4]=b[4]+p|0;b[5]=b[5]+j|0;b[6]=b[6]+k|0;b[7]=b[7]+l|0},_doFinalize:function(){var a=this._data,d=a.words,b=8*this._nDataBytes,e=8*a.sigBytes;\nd[e>>>5]|=128<<24-e%32;d[(e+64>>>9<<4)+14]=h.floor(b/4294967296);d[(e+64>>>9<<4)+15]=b;a.sigBytes=4*d.length;this._process();return this._hash},clone:function(){var a=g.clone.call(this);a._hash=this._hash.clone();return a}});s.SHA256=g._createHelper(f);s.HmacSHA256=g._createHmacHelper(f)})(Math);\n\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\n(function () {\n    // Shortcuts\n    var C = CryptoJS;\n    var C_lib = C.lib;\n    var WordArray = C_lib.WordArray;\n    var C_enc = C.enc;\n\n    /**\n     * Base64 encoding strategy.\n     */\n    var Base64 = C_enc.Base64 = {\n        /**\n         * Converts a word array to a Base64 string.\n         *\n         * @param {WordArray} wordArray The word array.\n         *\n         * @return {string} The Base64 string.\n         *\n         * @static\n         *\n         * @example\n         *\n         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n         */\n        stringify: function (wordArray) {\n            // Shortcuts\n            var words = wordArray.words;\n            var sigBytes = wordArray.sigBytes;\n            var map = this._map;\n\n            // Clamp excess bits\n            wordArray.clamp();\n\n            // Convert\n            var base64Chars = [];\n            for (var i = 0; i < sigBytes; i += 3) {\n                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n                }\n            }\n\n            // Add padding\n            var paddingChar = map.charAt(64);\n            if (paddingChar) {\n                while (base64Chars.length % 4) {\n                    base64Chars.push(paddingChar);\n                }\n            }\n\n            return base64Chars.join('');\n        },\n\n        /**\n         * Converts a Base64 string to a word array.\n         *\n         * @param {string} base64Str The Base64 string.\n         *\n         * @return {WordArray} The word array.\n         *\n         * @static\n         *\n         * @example\n         *\n         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n         */\n        parse: function (base64Str) {\n            // Shortcuts\n            var base64StrLength = base64Str.length;\n            var map = this._map;\n\n            // Ignore padding\n            var paddingChar = map.charAt(64);\n            if (paddingChar) {\n                var paddingIndex = base64Str.indexOf(paddingChar);\n                if (paddingIndex != -1) {\n                    base64StrLength = paddingIndex;\n                }\n            }\n\n            // Convert\n            var words = [];\n            var nBytes = 0;\n            for (var i = 0; i < base64StrLength; i++) {\n                if (i % 4) {\n                    var bits1 = map.indexOf(base64Str.charAt(i - 1)) << ((i % 4) * 2);\n                    var bits2 = map.indexOf(base64Str.charAt(i)) >>> (6 - (i % 4) * 2);\n                    words[nBytes >>> 2] |= (bits1 | bits2) << (24 - (nBytes % 4) * 8);\n                    nBytes++;\n                }\n            }\n\n            return WordArray.create(words, nBytes);\n        },\n\n        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n    };\n}());\n\n/*\nCryptoJS v3.1.2\ncode.google.com/p/crypto-js\n(c) 2009-2013 by Jeff Mott. All rights reserved.\ncode.google.com/p/crypto-js/wiki/License\n*/\n(function () {\r\n    // Check if typed arrays are supported\r\n    if (typeof ArrayBuffer != 'function') {\r\n        return;\r\n    }\r\n\r\n    // Shortcuts\r\n    var C = CryptoJS;\r\n    var C_lib = C.lib;\r\n    var WordArray = C_lib.WordArray;\r\n\r\n    // Reference original init\r\n    var superInit = WordArray.init;\r\n\r\n    // Augment WordArray.init to handle typed arrays\r\n    var subInit = WordArray.init = function (typedArray) {\r\n        // Convert buffers to uint8\r\n        if (typedArray instanceof ArrayBuffer) {\r\n            typedArray = new Uint8Array(typedArray);\r\n        }\r\n\r\n        // Convert other array views to uint8\r\n        if (\r\n            typedArray instanceof Int8Array ||\r\n            typedArray instanceof Uint8ClampedArray ||\r\n            typedArray instanceof Int16Array ||\r\n            typedArray instanceof Uint16Array ||\r\n            typedArray instanceof Int32Array ||\r\n            typedArray instanceof Uint32Array ||\r\n            typedArray instanceof Float32Array ||\r\n            typedArray instanceof Float64Array\r\n        ) {\r\n            typedArray = new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength);\r\n        }\r\n\r\n        // Handle Uint8Array\r\n        if (typedArray instanceof Uint8Array) {\r\n            // Shortcut\r\n            var typedArrayByteLength = typedArray.byteLength;\r\n\r\n            // Extract bytes\r\n            var words = [];\r\n            for (var i = 0; i < typedArrayByteLength; i++) {\r\n                words[i >>> 2] |= typedArray[i] << (24 - (i % 4) * 8);\r\n            }\r\n\r\n            // Initialize this word array\r\n            superInit.call(this, words, typedArrayByteLength);\r\n        } else {\r\n            // Else call normal init\r\n            superInit.apply(this, arguments);\r\n        }\r\n    };\r\n\r\n    subInit.prototype = WordArray;\r\n}());\r\n\n/*!\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\nTODO:\n\n* Add statement queueing\n\n@module TinCan\n**/\nvar TinCan;\n\n(function () {\n    \"use strict\";\n    var _reservedQSParams = {\n        //\n        // these are TC spec reserved words that may end up in queries to the endpoint\n        //\n        statementId:       true,\n        voidedStatementId: true,\n        verb:              true,\n        object:            true,\n        registration:      true,\n        context:           true,\n        actor:             true,\n        since:             true,\n        until:             true,\n        limit:             true,\n        authoritative:     true,\n        sparse:            true,\n        instructor:        true,\n        ascending:         true,\n        continueToken:     true,\n        agent:             true,\n        activityId:        true,\n        stateId:           true,\n        profileId:         true,\n\n        //\n        // these are suggested by the LMS launch spec addition that TinCanJS consumes\n        //\n        activity_platform: true,\n        grouping:          true,\n        \"Accept-Language\": true\n    };\n\n    /**\n    @class TinCan\n    @constructor\n    @param {Object} [options] Configuration used to initialize.\n        @param {String} [options.url] URL for determining launch provided\n            configuration options\n        @param {Array} [options.recordStores] list of pre-configured LRSes\n        @param {Object|TinCan.Agent} [options.actor] default actor\n        @param {Object|TinCan.Activity} [options.activity] default activity\n        @param {String} [options.registration] default registration\n        @param {Object|TinCan.Context} [options.context] default context\n    **/\n    TinCan = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property recordStores\n        @type Array\n        */\n        this.recordStores = [];\n\n        /**\n        Default actor used when preparing statements that\n        don't yet have an actor set, and for saving state, etc.\n\n        @property actor\n        @type Object\n        */\n        this.actor = null;\n\n        /**\n        Default activity, may be used as a statement 'target'\n        or incorporated into 'context'\n\n        @property activity\n        @type Object\n        */\n        this.activity = null;\n\n        /**\n        Default registration, included in default context when\n        provided, otherwise used in statement queries\n\n        @property registration\n        @type String\n        */\n        this.registration = null;\n\n        /**\n        Default context used when preparing statements that\n        don't yet have a context set, or mixed in when one\n        has been provided, properties do NOT override on mixing\n\n        @property context\n        @type Object\n        */\n        this.context = null;\n\n        this.init(cfg);\n    };\n\n    TinCan.prototype = {\n        LOG_SRC: \"TinCan\",\n\n        /**\n        Safe version of logging, only displays when .DEBUG is true, and console.log\n        is available\n\n        @method log\n        @param {String} msg Message to output\n        */\n        log: function (msg, src) {\n            /* globals console */\n            if (TinCan.DEBUG && typeof console !== \"undefined\" && console.log) {\n                src = src || this.LOG_SRC || \"TinCan\";\n\n                console.log(\"TinCan.\" + src + \": \" + msg);\n            }\n        },\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize (see TinCan constructor).\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i;\n\n            cfg = cfg || {};\n\n            if (cfg.hasOwnProperty(\"url\") && cfg.url !== \"\") {\n                this._initFromQueryString(cfg.url);\n            }\n\n            if (cfg.hasOwnProperty(\"recordStores\") && cfg.recordStores !== undefined) {\n                for (i = 0; i < cfg.recordStores.length; i += 1) {\n                    this.addRecordStore(cfg.recordStores[i]);\n                }\n            }\n            if (cfg.hasOwnProperty(\"activity\")) {\n                if (cfg.activity instanceof TinCan.Activity) {\n                    this.activity = cfg.activity;\n                }\n                else {\n                    this.activity = new TinCan.Activity (cfg.activity);\n                }\n            }\n            if (cfg.hasOwnProperty(\"actor\")) {\n                if (cfg.actor instanceof TinCan.Agent) {\n                    this.actor = cfg.actor;\n                }\n                else {\n                    this.actor = new TinCan.Agent (cfg.actor);\n                }\n            }\n            if (cfg.hasOwnProperty(\"context\")) {\n                if (cfg.context instanceof TinCan.Context) {\n                    this.context = cfg.context;\n                }\n                else {\n                    this.context = new TinCan.Context (cfg.context);\n                }\n            }\n            if (cfg.hasOwnProperty(\"registration\")) {\n                this.registration = cfg.registration;\n            }\n        },\n\n        /**\n        @method _initFromQueryString\n        @param {String} url\n        @private\n        */\n        _initFromQueryString: function (url) {\n            this.log(\"_initFromQueryString\");\n\n            var i,\n                prop,\n                qsParams = TinCan.Utils.parseURL(url).params,\n                lrsProps = [\"endpoint\", \"auth\"],\n                lrsCfg = {},\n                contextCfg,\n                extended = null\n            ;\n\n            if (qsParams.hasOwnProperty(\"actor\")) {\n                this.log(\"_initFromQueryString - found actor: \" + qsParams.actor);\n                try {\n                    this.actor = TinCan.Agent.fromJSON(qsParams.actor);\n                    delete qsParams.actor;\n                }\n                catch (ex) {\n                    this.log(\"_initFromQueryString - failed to set actor: \" + ex);\n                }\n            }\n\n            if (qsParams.hasOwnProperty(\"activity_id\")) {\n                this.activity = new TinCan.Activity (\n                    {\n                        id: qsParams.activity_id\n                    }\n                );\n                delete qsParams.activity_id;\n            }\n\n            if (\n                qsParams.hasOwnProperty(\"activity_platform\") ||\n                qsParams.hasOwnProperty(\"registration\") ||\n                qsParams.hasOwnProperty(\"grouping\")\n            ) {\n                contextCfg = {};\n\n                if (qsParams.hasOwnProperty(\"activity_platform\")) {\n                    contextCfg.platform = qsParams.activity_platform;\n                    delete qsParams.activity_platform;\n                }\n                if (qsParams.hasOwnProperty(\"registration\")) {\n                    //\n                    // stored in two locations cause we always want it in the default\n                    // context, but we also want to be able to get to it for Statement\n                    // queries\n                    //\n                    contextCfg.registration = this.registration = qsParams.registration;\n                    delete qsParams.registration;\n                }\n                if (qsParams.hasOwnProperty(\"grouping\")) {\n                    contextCfg.contextActivities = {};\n                    contextCfg.contextActivities.grouping = qsParams.grouping;\n                    delete qsParams.grouping;\n                }\n\n                this.context = new TinCan.Context (contextCfg);\n            }\n\n            //\n            // order matters here, process the URL provided LRS last because it gets\n            // all the remaining parameters so that they get passed through\n            //\n            if (qsParams.hasOwnProperty(\"endpoint\")) {\n                for (i = 0; i < lrsProps.length; i += 1) {\n                    prop = lrsProps[i];\n                    if (qsParams.hasOwnProperty(prop)) {\n                        lrsCfg[prop] = qsParams[prop];\n                        delete qsParams[prop];\n                    }\n                }\n\n                // remove our reserved params so they don't end up  in the extended object\n                for (i in qsParams) {\n                    if (qsParams.hasOwnProperty(i)) {\n                        if (_reservedQSParams.hasOwnProperty(i)) {\n                            delete qsParams[i];\n                        } else {\n                            extended = extended || {};\n                            extended[i] = qsParams[i];\n                        }\n                    }\n                }\n                if (extended !== null) {\n                    lrsCfg.extended = extended;\n                }\n\n                lrsCfg.allowFail = false;\n\n                this.addRecordStore(lrsCfg);\n            }\n        },\n\n        /**\n        @method addRecordStore\n        @param {Object} Configuration data\n\n         * TODO:\n         * check endpoint for trailing '/'\n         * check for unique endpoints\n        */\n        addRecordStore: function (cfg) {\n            this.log(\"addRecordStore\");\n            var lrs;\n            if (cfg instanceof TinCan.LRS) {\n                lrs = cfg;\n            }\n            else {\n                lrs = new TinCan.LRS (cfg);\n            }\n            this.recordStores.push(lrs);\n        },\n\n        /**\n        @method prepareStatement\n        @param {Object|TinCan.Statement} Base statement properties or\n            pre-created TinCan.Statement instance\n        @return {TinCan.Statement}\n        */\n        prepareStatement: function (stmt) {\n            this.log(\"prepareStatement\");\n            if (! (stmt instanceof TinCan.Statement)) {\n                stmt = new TinCan.Statement (stmt);\n            }\n\n            if (stmt.actor === null && this.actor !== null) {\n                stmt.actor = this.actor;\n            }\n            if (stmt.target === null && this.activity !== null) {\n                stmt.target = this.activity;\n            }\n\n            if (this.context !== null) {\n                if (stmt.context === null) {\n                    stmt.context = this.context;\n                }\n                else {\n                    if (stmt.context.registration === null) {\n                        stmt.context.registration = this.context.registration;\n                    }\n                    if (stmt.context.platform === null) {\n                        stmt.context.platform = this.context.platform;\n                    }\n\n                    if (this.context.contextActivities !== null) {\n                        if (stmt.context.contextActivities === null) {\n                            stmt.context.contextActivities = this.context.contextActivities;\n                        }\n                        else {\n                            if (this.context.contextActivities.grouping !== null && stmt.context.contextActivities.grouping === null) {\n                                stmt.context.contextActivities.grouping = this.context.contextActivities.grouping;\n                            }\n                            if (this.context.contextActivities.parent !== null && stmt.context.contextActivities.parent === null) {\n                                stmt.context.contextActivities.parent = this.context.contextActivities.parent;\n                            }\n                            if (this.context.contextActivities.other !== null && stmt.context.contextActivities.other === null) {\n                                stmt.context.contextActivities.other = this.context.contextActivities.other;\n                            }\n                        }\n                    }\n                }\n            }\n\n            return stmt;\n        },\n\n        /**\n        Calls saveStatement on each configured LRS, provide callback to make it asynchronous\n\n        @method sendStatement\n        @param {TinCan.Statement|Object} statement Send statement to LRS\n        @param {Function} [callback] Callback function to execute on completion\n        */\n        sendStatement: function (stmt, callback) {\n            this.log(\"sendStatement\");\n\n            // would prefer to use .bind instead of 'self'\n            var self = this,\n                lrs,\n                statement = this.prepareStatement(stmt),\n                rsCount = this.recordStores.length,\n                i,\n                results = [],\n                callbackWrapper,\n                callbackResults = []\n            ;\n\n            if (rsCount > 0) {\n                /*\n                   if there is a callback that is a function then we need\n                   to wrap that function with a function that becomes\n                   the new callback that reduces a closure count of the\n                   requests that don't have allowFail set to true and\n                   when that number hits zero then the original callback\n                   is executed\n                */\n                if (typeof callback === \"function\") {\n                    callbackWrapper = function (err, xhr) {\n                        var args;\n\n                        self.log(\"sendStatement - callbackWrapper: \" + rsCount);\n                        if (rsCount > 1) {\n                            rsCount -= 1;\n                            callbackResults.push(\n                                {\n                                    err: err,\n                                    xhr: xhr\n                                }\n                            );\n                        }\n                        else if (rsCount === 1) {\n                            callbackResults.push(\n                                {\n                                    err: err,\n                                    xhr: xhr\n                                }\n                            );\n                            args = [\n                                callbackResults,\n                                statement\n                            ];\n                            callback.apply(this, args);\n                        }\n                        else {\n                            self.log(\"sendStatement - unexpected record store count: \" + rsCount);\n                        }\n                    };\n                }\n\n                for (i = 0; i < rsCount; i += 1) {\n                    lrs = this.recordStores[i];\n\n                    results.push(\n                        lrs.saveStatement(statement, { callback: callbackWrapper })\n                    );\n                }\n            }\n            else {\n                this.log(\"[warning] sendStatement: No LRSs added yet (statement not sent)\");\n                if (typeof callback === \"function\") {\n                    callback.apply(this, [ null, statement ]);\n                }\n            }\n\n            return {\n                statement: statement,\n                results: results\n            };\n        },\n\n        /**\n        Calls retrieveStatement on the first LRS, provide callback to make it asynchronous\n\n        @method getStatement\n        @param {String} [stmtId] Statement ID to get\n        @param {Function} [callback] Callback function to execute on completion\n        @param {Object} [cfg] Configuration data\n            @param {Object} [params] Query parameters\n                @param {Boolean} [attachments] Include attachments in multipart response or don't (defualt: false)\n        @return {Array|Result} Array of results, or single result\n\n        TODO: make TinCan track statements it has seen in a local cache to be returned easily\n        */\n        getStatement: function (stmtId, callback, cfg) {\n            this.log(\"getStatement\");\n\n            var lrs;\n\n            cfg = cfg || {};\n            cfg.params = cfg.params || {};\n\n            if (this.recordStores.length > 0) {\n                //\n                // for statements (for now) we only need to read from the first LRS\n                // in the future it may make sense to get all from all LRSes and\n                // compare to remove duplicates or allow inspection of them for differences?\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                return lrs.retrieveStatement(stmtId, { callback: callback, params: cfg.params });\n            }\n\n            this.log(\"[warning] getStatement: No LRSs added yet (statement not retrieved)\");\n        },\n\n        /**\n        Creates a statement used for voiding the passed statement/statement ID and calls\n        send statement with the voiding statement.\n\n        @method voidStatement\n        @param {TinCan.Statement|String} statement Statement or statement ID to void\n        @param {Function} [callback] Callback function to execute on completion\n        @param {Object} [options] Options used to build voiding statement\n            @param {TinCan.Agent} [options.actor] Agent to be used as 'actor' in voiding statement\n        */\n        voidStatement: function (stmt, callback, options) {\n            this.log(\"voidStatement\");\n\n            // would prefer to use .bind instead of 'self'\n            var self = this,\n                lrs,\n                actor,\n                voidingStatement,\n                rsCount = this.recordStores.length,\n                i,\n                results = [],\n                callbackWrapper,\n                callbackResults = []\n            ;\n\n            if (stmt instanceof TinCan.Statement) {\n                stmt = stmt.id;\n            }\n\n            if (typeof options.actor !== \"undefined\") {\n                actor = options.actor;\n            }\n            else if (this.actor !== null) {\n                actor = this.actor;\n            }\n\n            voidingStatement = new TinCan.Statement(\n                {\n                    actor: actor,\n                    verb: {\n                        id: \"http://adlnet.gov/expapi/verbs/voided\"\n                    },\n                    target: {\n                        objectType: \"StatementRef\",\n                        id: stmt\n                    }\n                }\n            );\n\n            if (rsCount > 0) {\n                /*\n                   if there is a callback that is a function then we need\n                   to wrap that function with a function that becomes\n                   the new callback that reduces a closure count of the\n                   requests that don't have allowFail set to true and\n                   when that number hits zero then the original callback\n                   is executed\n                */\n                if (typeof callback === \"function\") {\n                    callbackWrapper = function (err, xhr) {\n                        var args;\n\n                        self.log(\"voidStatement - callbackWrapper: \" + rsCount);\n                        if (rsCount > 1) {\n                            rsCount -= 1;\n                            callbackResults.push(\n                                {\n                                    err: err,\n                                    xhr: xhr\n                                }\n                            );\n                        }\n                        else if (rsCount === 1) {\n                            callbackResults.push(\n                                {\n                                    err: err,\n                                    xhr: xhr\n                                }\n                            );\n                            args = [\n                                callbackResults,\n                                voidingStatement\n                            ];\n                            callback.apply(this, args);\n                        }\n                        else {\n                            self.log(\"voidStatement - unexpected record store count: \" + rsCount);\n                        }\n                    };\n                }\n\n                for (i = 0; i < rsCount; i += 1) {\n                    lrs = this.recordStores[i];\n\n                    results.push(\n                        lrs.saveStatement(voidingStatement, { callback: callbackWrapper })\n                    );\n                }\n            }\n            else {\n                this.log(\"[warning] voidStatement: No LRSs added yet (statement not sent)\");\n                if (typeof callback === \"function\") {\n                    callback.apply(this, [ null, voidingStatement ]);\n                }\n            }\n\n            return {\n                statement: voidingStatement,\n                results: results\n            };\n        },\n\n        /**\n        Calls retrieveVoidedStatement on the first LRS, provide callback to make it asynchronous\n\n        @method getVoidedStatement\n        @param {String} statement Statement ID to get\n        @param {Function} [callback] Callback function to execute on completion\n        @return {Array|Result} Array of results, or single result\n\n        TODO: make TinCan track voided statements it has seen in a local cache to be returned easily\n        */\n        getVoidedStatement: function (stmtId, callback) {\n            this.log(\"getVoidedStatement\");\n\n            var lrs;\n\n            if (this.recordStores.length > 0) {\n                //\n                // for statements (for now) we only need to read from the first LRS\n                // in the future it may make sense to get all from all LRSes and\n                // compare to remove duplicates or allow inspection of them for differences?\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                return lrs.retrieveVoidedStatement(stmtId, { callback: callback });\n            }\n\n            this.log(\"[warning] getVoidedStatement: No LRSs added yet (statement not retrieved)\");\n        },\n\n        /**\n        Calls saveStatements with list of prepared statements\n\n        @method sendStatements\n        @param {Array} Array of statements to send\n        @param {Function} Callback function to execute on completion\n        */\n        sendStatements: function (stmts, callback) {\n            this.log(\"sendStatements\");\n            var self = this,\n                lrs,\n                statements = [],\n                rsCount = this.recordStores.length,\n                i,\n                results = [],\n                callbackWrapper,\n                callbackResults = []\n            ;\n            if (stmts.length === 0) {\n                if (typeof callback === \"function\") {\n                    callback.apply(this, [ null, statements ]);\n                }\n            }\n            else {\n                for (i = 0; i < stmts.length; i += 1) {\n                    statements.push(\n                        this.prepareStatement(stmts[i])\n                    );\n                }\n\n                if (rsCount > 0) {\n                    /*\n                       if there is a callback that is a function then we need\n                       to wrap that function with a function that becomes\n                       the new callback that reduces a closure count of the\n                       requests that don't have allowFail set to true and\n                       when that number hits zero then the original callback\n                       is executed\n                    */\n\n                    if (typeof callback === \"function\") {\n                        callbackWrapper = function (err, xhr) {\n                            var args;\n\n                            self.log(\"sendStatements - callbackWrapper: \" + rsCount);\n                            if (rsCount > 1) {\n                                rsCount -= 1;\n                                callbackResults.push(\n                                    {\n                                        err: err,\n                                        xhr: xhr\n                                    }\n                                );\n                            }\n                            else if (rsCount === 1) {\n                                callbackResults.push(\n                                    {\n                                        err: err,\n                                        xhr: xhr\n                                    }\n                                );\n                                args = [\n                                    callbackResults,\n                                    statements\n                                ];\n                                callback.apply(this, args);\n                            }\n                            else {\n                                self.log(\"sendStatements - unexpected record store count: \" + rsCount);\n                            }\n                        };\n                    }\n\n                    for (i = 0; i < rsCount; i += 1) {\n                        lrs = this.recordStores[i];\n\n                        results.push(\n                            lrs.saveStatements(statements, { callback: callbackWrapper })\n                        );\n                    }\n                }\n                else {\n                    this.log(\"[warning] sendStatements: No LRSs added yet (statements not sent)\");\n                    if (typeof callback === \"function\") {\n                        callback.apply(this, [ null, statements ]);\n                    }\n                }\n            }\n\n            return {\n                statements: statements,\n                results: results\n            };\n        },\n\n        /**\n        @method getStatements\n        @param {Object} [cfg] Configuration for request\n            @param {Boolean} [cfg.sendActor] Include default actor in query params\n            @param {Boolean} [cfg.sendActivity] Include default activity in query params\n            @param {Object} [cfg.params] Parameters used to filter.\n                            These are the same as those accepted by the\n                            <a href=\"TinCan.LRS.html#method_queryStatements\">LRS.queryStatements</a>\n                            method.\n\n            @param {Function} [cfg.callback] Function to run at completion\n\n        TODO: support multiple LRSs and flag to use single\n        */\n        getStatements: function (cfg) {\n            this.log(\"getStatements\");\n            var queryCfg = {},\n                lrs,\n                params\n            ;\n            if (this.recordStores.length > 0) {\n                //\n                // for get (for now) we only get from one (as they should be the same)\n                // but it may make sense to long term try to merge statements, perhaps\n                // by using statementId as unique\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                cfg = cfg || {};\n\n                // TODO: need a clone function?\n                params = cfg.params || {};\n\n                if (cfg.sendActor && this.actor !== null) {\n                    if (lrs.version === \"0.9\" || lrs.version === \"0.95\") {\n                        params.actor = this.actor;\n                    }\n                    else {\n                        params.agent = this.actor;\n                    }\n                }\n                if (cfg.sendActivity && this.activity !== null) {\n                    if (lrs.version === \"0.9\" || lrs.version === \"0.95\") {\n                        params.target = this.activity;\n                    }\n                    else {\n                        params.activity = this.activity;\n                    }\n                }\n                if (typeof params.registration === \"undefined\" && this.registration !== null) {\n                    params.registration = this.registration;\n                }\n\n                queryCfg = {\n                    params: params\n                };\n                if (typeof cfg.callback !== \"undefined\") {\n                    queryCfg.callback = cfg.callback;\n                }\n\n                return lrs.queryStatements(queryCfg);\n            }\n\n            this.log(\"[warning] getStatements: No LRSs added yet (statements not read)\");\n        },\n\n        /**\n        @method getState\n        @param {String} key Key to retrieve from the state\n        @param {Object} [cfg] Configuration for request\n            @param {Object} [cfg.agent] Agent used in query,\n                defaults to 'actor' property if empty\n            @param {Object} [cfg.activity] Activity used in query,\n                defaults to 'activity' property if empty\n            @param {Object} [cfg.registration] Registration used in query,\n                defaults to 'registration' property if empty\n            @param {Function} [cfg.callback] Function to run with state\n        */\n        getState: function (key, cfg) {\n            this.log(\"getState\");\n            var queryCfg,\n                lrs\n            ;\n\n            if (this.recordStores.length > 0) {\n                //\n                // for state (for now) we are only going to store to the first LRS\n                // so only get from there too\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                cfg = cfg || {};\n\n                queryCfg = {\n                    agent: (typeof cfg.agent !== \"undefined\" ? cfg.agent : this.actor),\n                    activity: (typeof cfg.activity !== \"undefined\" ? cfg.activity : this.activity)\n                };\n                if (typeof cfg.registration !== \"undefined\") {\n                    queryCfg.registration = cfg.registration;\n                }\n                else if (this.registration !== null) {\n                    queryCfg.registration = this.registration;\n                }\n                if (typeof cfg.callback !== \"undefined\") {\n                    queryCfg.callback = cfg.callback;\n                }\n\n                return lrs.retrieveState(key, queryCfg);\n            }\n\n            this.log(\"[warning] getState: No LRSs added yet (state not retrieved)\");\n        },\n\n        /**\n        @method setState\n        @param {String} key Key to store into the state\n        @param {String|Object} val Value to store into the state, objects will be stringified to JSON\n        @param {Object} [cfg] Configuration for request\n            @param {Object} [cfg.agent] Agent used in query,\n                defaults to 'actor' property if empty\n            @param {Object} [cfg.activity] Activity used in query,\n                defaults to 'activity' property if empty\n            @param {Object} [cfg.registration] Registration used in query,\n                defaults to 'registration' property if empty\n            @param {String} [cfg.lastSHA1] SHA1 of the previously seen existing state\n            @param {String} [cfg.contentType] Content-Type to specify in headers\n            @param {Boolean} [cfg.overwriteJSON] If the Content-Type is JSON, should a PUT be used? \n            @param {Function} [cfg.callback] Function to run with state\n        */\n        setState: function (key, val, cfg) {\n            this.log(\"setState\");\n            var queryCfg,\n                lrs\n            ;\n\n            if (this.recordStores.length > 0) {\n                //\n                // for state (for now) we are only going to store to the first LRS\n                // so only get from there too\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                cfg = cfg || {};\n\n                queryCfg = {\n                    agent: (typeof cfg.agent !== \"undefined\" ? cfg.agent : this.actor),\n                    activity: (typeof cfg.activity !== \"undefined\" ? cfg.activity : this.activity)\n                };\n                if (typeof cfg.registration !== \"undefined\") {\n                    queryCfg.registration = cfg.registration;\n                }\n                else if (this.registration !== null) {\n                    queryCfg.registration = this.registration;\n                }\n                if (typeof cfg.lastSHA1 !== \"undefined\") {\n                    queryCfg.lastSHA1 = cfg.lastSHA1;\n                }\n                if (typeof cfg.contentType !== \"undefined\") {\n                    queryCfg.contentType = cfg.contentType;\n                    if ((typeof cfg.overwriteJSON !== \"undefined\") && (! cfg.overwriteJSON) && (TinCan.Utils.isApplicationJSON(cfg.contentType))) {\n                        queryCfg.method = \"POST\";\n                    }\n                }\n                if (typeof cfg.callback !== \"undefined\") {\n                    queryCfg.callback = cfg.callback;\n                }\n\n                return lrs.saveState(key, val, queryCfg);\n            }\n\n            this.log(\"[warning] setState: No LRSs added yet (state not saved)\");\n        },\n\n        /**\n        @method deleteState\n        @param {String|null} key Key to remove from the state, or null to clear all\n        @param {Object} [cfg] Configuration for request\n            @param {Object} [cfg.agent] Agent used in query,\n                defaults to 'actor' property if empty\n            @param {Object} [cfg.activity] Activity used in query,\n                defaults to 'activity' property if empty\n            @param {Object} [cfg.registration] Registration used in query,\n                defaults to 'registration' property if empty\n            @param {Function} [cfg.callback] Function to run with state\n        */\n        deleteState: function (key, cfg) {\n            this.log(\"deleteState\");\n            var queryCfg,\n                lrs\n            ;\n\n            if (this.recordStores.length > 0) {\n                //\n                // for state (for now) we are only going to store to the first LRS\n                // so only get from there too\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                cfg = cfg || {};\n\n                queryCfg = {\n                    agent: (typeof cfg.agent !== \"undefined\" ? cfg.agent : this.actor),\n                    activity: (typeof cfg.activity !== \"undefined\" ? cfg.activity : this.activity)\n                };\n                if (typeof cfg.registration !== \"undefined\") {\n                    queryCfg.registration = cfg.registration;\n                }\n                else if (this.registration !== null) {\n                    queryCfg.registration = this.registration;\n                }\n                if (typeof cfg.callback !== \"undefined\") {\n                    queryCfg.callback = cfg.callback;\n                }\n\n                return lrs.dropState(key, queryCfg);\n            }\n\n            this.log(\"[warning] deleteState: No LRSs added yet (state not deleted)\");\n        },\n\n        /**\n        @method getActivityProfile\n        @param {String} key Key to retrieve from the profile\n        @param {Object} [cfg] Configuration for request\n            @param {Object} [cfg.activity] Activity used in query,\n                defaults to 'activity' property if empty\n            @param {Function} [cfg.callback] Function to run with activity profile\n        */\n        getActivityProfile: function (key, cfg) {\n            this.log(\"getActivityProfile\");\n            var queryCfg,\n                lrs\n            ;\n\n            if (this.recordStores.length > 0) {\n                //\n                // for activity profiles (for now) we are only going to store to the first LRS\n                // so only get from there too\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                cfg = cfg || {};\n\n                queryCfg = {\n                    activity: (typeof cfg.activity !== \"undefined\" ? cfg.activity : this.activity)\n                };\n                if (typeof cfg.callback !== \"undefined\") {\n                    queryCfg.callback = cfg.callback;\n                }\n\n                return lrs.retrieveActivityProfile(key, queryCfg);\n            }\n\n            this.log(\"[warning] getActivityProfile: No LRSs added yet (activity profile not retrieved)\");\n        },\n\n        /**\n        @method setActivityProfile\n        @param {String} key Key to store into the activity profile\n        @param {String|Object} val Value to store into the activity profile, objects will be stringified to JSON\n        @param {Object} [cfg] Configuration for request\n            @param {Object} [cfg.activity] Activity used in query,\n                defaults to 'activity' property if empty\n            @param {String} [cfg.lastSHA1] SHA1 of the previously seen existing profile\n            @param {String} [cfg.contentType] Content-Type to specify in headers\n            @param {Boolean} [cfg.overwriteJSON] If the Content-Type is JSON, should a PUT be used?\n            @param {Function} [cfg.callback] Function to run with activity profile\n        */\n        setActivityProfile: function (key, val, cfg) {\n            this.log(\"setActivityProfile\");\n            var queryCfg,\n                lrs\n            ;\n\n            if (this.recordStores.length > 0) {\n                //\n                // for activity profile (for now) we are only going to store to the first LRS\n                // so only get from there too\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                cfg = cfg || {};\n\n                queryCfg = {\n                    activity: (typeof cfg.activity !== \"undefined\" ? cfg.activity : this.activity)\n                };\n                if (typeof cfg.callback !== \"undefined\") {\n                    queryCfg.callback = cfg.callback;\n                }\n                if (typeof cfg.lastSHA1 !== \"undefined\") {\n                    queryCfg.lastSHA1 = cfg.lastSHA1;\n                }\n                if (typeof cfg.contentType !== \"undefined\") {\n                    queryCfg.contentType = cfg.contentType;\n                    if ((typeof cfg.overwriteJSON !== \"undefined\") && (! cfg.overwriteJSON) && (TinCan.Utils.isApplicationJSON(cfg.contentType))) {\n                        queryCfg.method = \"POST\";\n                    }\n                }\n\n                return lrs.saveActivityProfile(key, val, queryCfg);\n            }\n\n            this.log(\"[warning] setActivityProfile: No LRSs added yet (activity profile not saved)\");\n        },\n\n        /**\n        @method deleteActivityProfile\n        @param {String|null} key Key to remove from the activity profile, or null to clear all\n        @param {Object} [cfg] Configuration for request\n            @param {Object} [cfg.activity] Activity used in query,\n                defaults to 'activity' property if empty\n            @param {Function} [cfg.callback] Function to run with activity profile\n        */\n        deleteActivityProfile: function (key, cfg) {\n            this.log(\"deleteActivityProfile\");\n            var queryCfg,\n                lrs\n            ;\n\n            if (this.recordStores.length > 0) {\n                //\n                // for activity profile (for now) we are only going to store to the first LRS\n                // so only get from there too\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                cfg = cfg || {};\n\n                queryCfg = {\n                    activity: (typeof cfg.activity !== \"undefined\" ? cfg.activity : this.activity)\n                };\n                if (typeof cfg.callback !== \"undefined\") {\n                    queryCfg.callback = cfg.callback;\n                }\n\n                return lrs.dropActivityProfile(key, queryCfg);\n            }\n\n            this.log(\"[warning] deleteActivityProfile: No LRSs added yet (activity profile not deleted)\");\n        },\n\n        /**\n        @method getAgentProfile\n        @param {String} key Key to retrieve from the profile\n        @param {Object} [cfg] Configuration for request\n            @param {Object} [cfg.agent] Agent used in query,\n                defaults to 'actor' property if empty\n            @param {Function} [cfg.callback] Function to run with agent profile\n        */\n        getAgentProfile: function (key, cfg) {\n            this.log(\"getAgentProfile\");\n            var queryCfg,\n                lrs\n            ;\n\n            if (this.recordStores.length > 0) {\n                //\n                // for agent profiles (for now) we are only going to store to the first LRS\n                // so only get from there too\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                cfg = cfg || {};\n\n                queryCfg = {\n                    agent: (typeof cfg.agent !== \"undefined\" ? cfg.agent : this.actor)\n                };\n                if (typeof cfg.callback !== \"undefined\") {\n                    queryCfg.callback = cfg.callback;\n                }\n\n                return lrs.retrieveAgentProfile(key, queryCfg);\n            }\n\n            this.log(\"[warning] getAgentProfile: No LRSs added yet (agent profile not retrieved)\");\n        },\n\n        /**\n        @method setAgentProfile\n        @param {String} key Key to store into the agent profile\n        @param {String|Object} val Value to store into the agent profile, objects will be stringified to JSON\n        @param {Object} [cfg] Configuration for request\n            @param {Object} [cfg.agent] Agent used in query,\n                defaults to 'actor' property if empty\n            @param {String} [cfg.lastSHA1] SHA1 of the previously seen existing profile\n            @param {String} [cfg.contentType] Content-Type to specify in headers\n            @param {Boolean} [cfg.overwriteJSON] If the Content-Type is JSON, should a PUT be used?\n            @param {Function} [cfg.callback] Function to run with agent profile\n        */\n        setAgentProfile: function (key, val, cfg) {\n            this.log(\"setAgentProfile\");\n            var queryCfg,\n                lrs\n            ;\n\n            if (this.recordStores.length > 0) {\n                //\n                // for agent profile (for now) we are only going to store to the first LRS\n                // so only get from there too\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                cfg = cfg || {};\n\n                queryCfg = {\n                    agent: (typeof cfg.agent !== \"undefined\" ? cfg.agent : this.actor)\n                };\n                if (typeof cfg.callback !== \"undefined\") {\n                    queryCfg.callback = cfg.callback;\n                }\n                if (typeof cfg.lastSHA1 !== \"undefined\") {\n                    queryCfg.lastSHA1 = cfg.lastSHA1;\n                }\n                if (typeof cfg.contentType !== \"undefined\") {\n                    queryCfg.contentType = cfg.contentType;\n                    if ((typeof cfg.overwriteJSON !== \"undefined\") && (! cfg.overwriteJSON) && (TinCan.Utils.isApplicationJSON(cfg.contentType))) {\n                        queryCfg.method = \"POST\";\n                    }\n                }\n\n                return lrs.saveAgentProfile(key, val, queryCfg);\n            }\n\n            this.log(\"[warning] setAgentProfile: No LRSs added yet (agent profile not saved)\");\n        },\n\n        /**\n        @method deleteAgentProfile\n        @param {String|null} key Key to remove from the agent profile, or null to clear all\n        @param {Object} [cfg] Configuration for request\n            @param {Object} [cfg.agent] Agent used in query,\n                defaults to 'actor' property if empty\n            @param {Function} [cfg.callback] Function to run with agent profile\n        */\n        deleteAgentProfile: function (key, cfg) {\n            this.log(\"deleteAgentProfile\");\n            var queryCfg,\n                lrs\n            ;\n\n            if (this.recordStores.length > 0) {\n                //\n                // for agent profile (for now) we are only going to store to the first LRS\n                // so only get from there too\n                //\n                // TODO: make this the first non-allowFail LRS but for now it should\n                // be good enough to make it the first since we know the LMS provided\n                // LRS is the first\n                //\n                lrs = this.recordStores[0];\n\n                cfg = cfg || {};\n\n                queryCfg = {\n                    agent: (typeof cfg.agent !== \"undefined\" ? cfg.agent : this.actor)\n                };\n                if (typeof cfg.callback !== \"undefined\") {\n                    queryCfg.callback = cfg.callback;\n                }\n\n                return lrs.dropAgentProfile(key, queryCfg);\n            }\n\n            this.log(\"[warning] deleteAgentProfile: No LRSs added yet (agent profile not deleted)\");\n        }\n    };\n\n    /**\n    @property DEBUG\n    @static\n    @default false\n    */\n    TinCan.DEBUG = false;\n\n    /**\n    Turn on debug logging\n\n    @method enableDebug\n    @static\n    */\n    TinCan.enableDebug = function () {\n        TinCan.DEBUG = true;\n    };\n\n    /**\n    Turn off debug logging\n\n    @method disableDebug\n    @static\n    */\n    TinCan.disableDebug = function () {\n        TinCan.DEBUG = false;\n    };\n\n    /**\n    @method versions\n    @return {Array} Array of supported version numbers\n    @static\n    */\n    TinCan.versions = function () {\n        // newest first so we can use the first as the default\n        return [\n            \"1.0.2\",\n            \"1.0.1\",\n            \"1.0.0\",\n            \"0.95\",\n            \"0.9\"\n        ];\n    };\n\n    /*global module*/\n    // Support the CommonJS method for exporting our single global\n    if (typeof module === \"object\") {\n        module.exports = TinCan;\n    }\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Utils\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.Utils\n    */\n    TinCan.Utils = {\n        defaultEncoding: \"utf8\",\n\n        /**\n        Generates a UUIDv4 compliant string that should be reasonably unique\n\n        @method getUUID\n        @return {String} UUID\n        @static\n\n        Excerpt from: http://www.broofa.com/Tools/Math.uuid.js (v1.4)\n        http://www.broofa.com\n        mailto:robert@broofa.com\n        Copyright (c) 2010 Robert Kieffer\n        Dual licensed under the MIT and GPL licenses.\n        */\n        getUUID: function () {\n            /*jslint bitwise: true, eqeq: true */\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(\n                /[xy]/g,\n                function (c) {\n                    var r = Math.random() * 16|0, v = c == \"x\" ? r : (r&0x3|0x8);\n                    return v.toString(16);\n                }\n            );\n        },\n\n        /**\n        @method getISODateString\n        @static\n        @param {Date} date Date to stringify\n        @return {String} ISO date String\n        */\n        getISODateString: function (d) {\n            function pad (val, n) {\n                var padder,\n                    tempVal;\n                if (typeof val === \"undefined\" || val === null) {\n                    val = 0;\n                }\n                if (typeof n === \"undefined\" || n === null) {\n                    n = 2;\n                }\n                padder = Math.pow(10, n-1);\n                tempVal = val.toString();\n\n                while (val < padder && padder > 1) {\n                    tempVal = \"0\" + tempVal;\n                    padder = padder / 10;\n                }\n\n                return tempVal;\n            }\n\n            return d.getUTCFullYear() + \"-\" +\n                pad(d.getUTCMonth() + 1) + \"-\" +\n                pad(d.getUTCDate()) + \"T\" +\n                pad(d.getUTCHours()) + \":\" +\n                pad(d.getUTCMinutes()) + \":\" +\n                pad(d.getUTCSeconds()) + \".\" +\n                pad(d.getUTCMilliseconds(), 3) + \"Z\";\n        },\n\n        /**\n        @method convertISO8601DurationToMilliseconds\n        @static\n        @param {String} ISO8601Duration Duration in ISO8601 format\n        @return {Int} Duration in milliseconds\n\n        Note: does not handle input strings with years, months and days\n        */\n        convertISO8601DurationToMilliseconds: function (ISO8601Duration) {\n            var isValueNegative = (ISO8601Duration.indexOf(\"-\") >= 0),\n                indexOfT = ISO8601Duration.indexOf(\"T\"),\n                indexOfH = ISO8601Duration.indexOf(\"H\"),\n                indexOfM = ISO8601Duration.indexOf(\"M\"),\n                indexOfS = ISO8601Duration.indexOf(\"S\"),\n                hours,\n                minutes,\n                seconds,\n                durationInMilliseconds;\n\n            if ((indexOfT === -1) || ((indexOfM !== -1) && (indexOfM < indexOfT)) || (ISO8601Duration.indexOf(\"D\") !== -1) || (ISO8601Duration.indexOf(\"Y\") !== -1)) {\n                throw new Error(\"ISO 8601 timestamps including years, months and/or days are not currently supported\");\n            }\n\n            if (indexOfH === -1) {\n                indexOfH = indexOfT;\n                hours = 0;\n            }\n            else {\n                hours = parseInt(ISO8601Duration.slice(indexOfT + 1, indexOfH), 10);\n            }\n\n            if (indexOfM === -1) {\n                indexOfM = indexOfT;\n                minutes = 0;\n            }\n            else {\n                minutes = parseInt(ISO8601Duration.slice(indexOfH + 1, indexOfM), 10);\n            }\n\n            seconds = parseFloat(ISO8601Duration.slice(indexOfM + 1, indexOfS));\n\n            durationInMilliseconds = parseInt((((((hours * 60) + minutes) * 60) + seconds) * 1000), 10);\n            if (isNaN(durationInMilliseconds)){\n                durationInMilliseconds = 0;\n            }\n            if (isValueNegative) {\n                durationInMilliseconds = durationInMilliseconds * -1;\n            }\n\n            return durationInMilliseconds;\n        },\n\n        /**\n        @method convertMillisecondsToISO8601Duration\n        @static\n        @param {Int} inputMilliseconds Duration in milliseconds\n        @return {String} Duration in ISO8601 format\n        */\n        convertMillisecondsToISO8601Duration: function (inputMilliseconds) {\n            var hours,\n                minutes,\n                seconds,\n                i_inputMilliseconds = parseInt(inputMilliseconds, 10),\n                i_inputCentiseconds,\n                inputIsNegative = \"\",\n                rtnStr = \"\";\n\n            //round to nearest 0.01 seconds\n            i_inputCentiseconds = Math.round(i_inputMilliseconds / 10);\n\n            if (i_inputCentiseconds < 0) {\n                inputIsNegative = \"-\";\n                i_inputCentiseconds = i_inputCentiseconds * -1;\n            }\n\n            hours = parseInt(((i_inputCentiseconds) / 360000), 10);\n            minutes = parseInt((((i_inputCentiseconds) % 360000) / 6000), 10);\n            seconds = (((i_inputCentiseconds) % 360000) % 6000) / 100;\n\n            rtnStr = inputIsNegative + \"PT\";\n            if (hours > 0) {\n                rtnStr += hours + \"H\";\n            }\n\n            if (minutes > 0) {\n                rtnStr += minutes + \"M\";\n            }\n\n            rtnStr += seconds + \"S\";\n\n            return rtnStr;\n        },\n\n        /**\n        @method getSHA1String\n        @static\n        @param {String} str Content to hash\n        @return {String} SHA1 for contents\n        */\n        getSHA1String: function (str) {\n            /*global CryptoJS*/\n\n            return CryptoJS.SHA1(str).toString(CryptoJS.enc.Hex);\n        },\n\n        /**\n        @method getSHA256String\n        @static\n        @param {ArrayBuffer|String} content Content to hash\n        @return {String} SHA256 for contents\n        */\n        getSHA256String: function (content) {\n            /*global CryptoJS*/\n\n            if (Object.prototype.toString.call(content) === \"[object ArrayBuffer]\") {\n                content = CryptoJS.lib.WordArray.create(content);\n            }\n            return CryptoJS.SHA256(content).toString(CryptoJS.enc.Hex);\n        },\n\n        /**\n        @method getBase64String\n        @static\n        @param {String} str Content to encode\n        @return {String} Base64 encoded contents\n        */\n        getBase64String: function (str) {\n            /*global CryptoJS*/\n\n            return CryptoJS.enc.Base64.stringify(\n                CryptoJS.enc.Latin1.parse(str)\n            );\n        },\n\n        /**\n        Intended to be inherited by objects with properties that store\n        display values in a language based \"dictionary\"\n\n        @method getLangDictionaryValue\n        @param {String} prop Property name storing the dictionary\n        @param {String} [lang] Language to return\n        @return {String}\n        */\n        getLangDictionaryValue: function (prop, lang) {\n            var langDict = this[prop],\n                key;\n\n            if (typeof lang !== \"undefined\" && typeof langDict[lang] !== \"undefined\") {\n                return langDict[lang];\n            }\n            if (typeof langDict.und !== \"undefined\") {\n                return langDict.und;\n            }\n            if (typeof langDict[\"en-US\"] !== \"undefined\") {\n                return langDict[\"en-US\"];\n            }\n            for (key in langDict) {\n                if (langDict.hasOwnProperty(key)) {\n                    return langDict[key];\n                }\n            }\n\n            return \"\";\n        },\n\n        /**\n        @method parseURL\n        @param {String} url\n        @param {Object} [options]\n            @param {Boolean} [options.allowRelative] Option to allow relative URLs\n        @return {Object} Object of values\n        @private\n        */\n        parseURL: function (url, cfg) {\n            //\n            // see http://stackoverflow.com/a/21553982\n            // and http://stackoverflow.com/a/2880929\n            //\n            var isRelative = url.charAt(0) === \"/\",\n                _reURLInformation = [\n                    \"(/[^?#]*)\", // pathname\n                    \"(\\\\?[^#]*|)\", // search\n                    \"(#.*|)$\" // hash\n                ],\n                reURLInformation,\n                match,\n                result,\n                paramMatch,\n                pl     = /\\+/g,  // Regex for replacing addition symbol with a space\n                search = /([^&=]+)=?([^&]*)/g,\n                decode = function (s) { return decodeURIComponent(s.replace(pl, \" \")); };\n\n            cfg = cfg || {};\n\n            //\n            // this method in an earlier version supported relative URLs, mostly to provide\n            // support to the `LRS.moreStatements` method, that functionality was removed and\n            // subsequently restored but with the addition of the option for allowing relative\n            // URLs to be accepted which is the reason for the \"helpful\" exception message here\n            //\n            if (! isRelative) {\n                //\n                // not relative so make sure they have a scheme, host, etc.\n                //\n                _reURLInformation.unshift(\n                    \"^(https?:)//\", // scheme\n                    \"(([^:/?#]*)(?::([0-9]+))?)\" // host (hostname and port)\n                );\n\n                //\n                // our regex requires there to be a '/' for the detection of the start\n                // of the path, we can detect a '/' using indexOf beyond the part of the\n                // scheme, since we've restricted scheme to 'http' or 'https' and because\n                // a hostname is guaranteed to be there we can detect beyond the '://'\n                // based on position, then tack on a trailing '/' because it can't be\n                // part of the path\n                //\n                if (url.indexOf(\"/\", 8) === -1) {\n                    url = url + \"/\";\n                }\n            }\n            else {\n                //\n                // relative so make sure they allow that explicitly\n                //\n                if (typeof cfg.allowRelative === \"undefined\" || ! cfg.allowRelative) {\n                    throw new Error(\"Refusing to parse relative URL without 'allowRelative' option\");\n                }\n            }\n\n            reURLInformation = new RegExp(_reURLInformation.join(\"\"));\n            match = url.match(reURLInformation);\n            if (match === null) {\n                throw new Error(\"Unable to parse URL regular expression did not match: '\" + url + \"'\");\n            }\n\n            // 'path' is for backwards compatibility\n            if (isRelative) {\n                result = {\n                    protocol: null,\n                    host: null,\n                    hostname: null,\n                    port: null,\n                    path: null,\n                    pathname: match[1],\n                    search: match[2],\n                    hash: match[3],\n                    params: {}\n                };\n\n                result.path = result.pathname;\n            }\n            else {\n                result = {\n                    protocol: match[1],\n                    host: match[2],\n                    hostname: match[3],\n                    port: match[4],\n                    pathname: match[5],\n                    search: match[6],\n                    hash: match[7],\n                    params: {}\n                };\n\n                result.path = result.protocol + \"//\" + result.host + result.pathname;\n            }\n\n            if (result.search !== \"\") {\n                // extra parens to let jshint know this is an expression\n                while ((paramMatch = search.exec(result.search.substring(1)))) {\n                    result.params[decode(paramMatch[1])] = decode(paramMatch[2]);\n                }\n            }\n\n            return result;\n        },\n\n        /**\n        @method getServerRoot\n        @param {String} absoluteUrl\n        @return {String} server root of url\n        @private\n        */\n        getServerRoot: function (absoluteUrl) {\n            var urlParts = absoluteUrl.split(\"/\");\n            return urlParts[0] + \"//\" + urlParts[2];\n        },\n\n        /**\n        @method getContentTypeFromHeader\n        @static\n        @param {String} header Content-Type header value\n        @return {String} Primary value from Content-Type\n        */\n        getContentTypeFromHeader: function (header) {\n            return (String(header).split(\";\"))[0];\n        },\n\n        /**\n        @method isApplicationJSON\n        @static\n        @param {String} header Content-Type header value\n        @return {Boolean} whether \"application/json\" was matched\n        */\n        isApplicationJSON: function (header) {\n            return TinCan.Utils.getContentTypeFromHeader(header).toLowerCase().indexOf(\"application/json\") === 0;\n        },\n\n        /**\n        @method stringToArrayBuffer\n        @static\n        @param {String} content String of content to convert to an ArrayBuffer\n        @param {String} [encoding] Encoding to use for conversion\n        @return {ArrayBuffer} Converted content\n        */\n        stringToArrayBuffer: function () {\n            TinCan.prototype.log(\"stringToArrayBuffer not overloaded - no environment loaded?\");\n        },\n\n        /**\n        @method stringFromArrayBuffer\n        @static\n        @param {ArrayBuffer} content ArrayBuffer of content to convert to a String\n        @param {String} [encoding] Encoding to use for conversion\n        @return {String} Converted content\n        */\n        stringFromArrayBuffer: function () {\n            TinCan.prototype.log(\"stringFromArrayBuffer not overloaded - no environment loaded?\");\n        }\n    };\n}());\n\n/*\n    Copyright 2012-2013 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.LRS\n**/\n(function () {\n    \"use strict\";\n    /**\n    @class TinCan.LRS\n    @constructor\n    */\n    var LRS = TinCan.LRS = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property endpoint\n        @type String\n        */\n        this.endpoint = null;\n\n        /**\n        @property version\n        @type String\n        */\n        this.version = null;\n\n        /**\n        @property auth\n        @type String\n        */\n        this.auth = null;\n\n        /**\n        @property allowFail\n        @type Boolean\n        @default true\n        */\n        this.allowFail = true;\n\n        /**\n        @property extended\n        @type Object\n        */\n        this.extended = null;\n\n        this.init(cfg);\n    };\n    LRS.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"LRS\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n\n            var versions = TinCan.versions(),\n                versionMatch = false,\n                i\n            ;\n\n            cfg = cfg || {};\n\n            if (cfg.hasOwnProperty(\"alertOnRequestFailure\")) {\n                this.log(\"'alertOnRequestFailure' is deprecated (alerts have been removed) no need to set it now\");\n            }\n\n            if (! cfg.hasOwnProperty(\"endpoint\") || cfg.endpoint === null || cfg.endpoint === \"\") {\n                this.log(\"[error] LRS invalid: no endpoint\");\n                throw {\n                    code: 3,\n                    mesg: \"LRS invalid: no endpoint\"\n                };\n            }\n\n            this.endpoint = String(cfg.endpoint);\n            if (this.endpoint.slice(-1) !== \"/\") {\n                this.log(\"adding trailing slash to endpoint\");\n                this.endpoint += \"/\";\n            }\n\n            if (cfg.hasOwnProperty(\"allowFail\")) {\n                this.allowFail = cfg.allowFail;\n            }\n\n            if (cfg.hasOwnProperty(\"auth\")) {\n                this.auth = cfg.auth;\n            }\n            else if (cfg.hasOwnProperty(\"username\") && cfg.hasOwnProperty(\"password\")) {\n                this.auth = \"Basic \" + TinCan.Utils.getBase64String(cfg.username + \":\" + cfg.password);\n            }\n\n            if (cfg.hasOwnProperty(\"extended\")) {\n                this.extended = cfg.extended;\n            }\n\n            //\n            // provide a hook method that environments can override\n            // to handle anything necessary in the initialization\n            // process that is customized to them, such as cross domain\n            // setup in browsers, default implementation is empty\n            //\n            // this hook must run prior to version detection so that\n            // request handling can be set up before requesting the\n            // LRS version via the /about resource\n            //\n            this._initByEnvironment(cfg);\n\n            if (typeof cfg.version !== \"undefined\") {\n                this.log(\"version: \" + cfg.version);\n                for (i = 0; i < versions.length; i += 1) {\n                    if (versions[i] === cfg.version) {\n                        versionMatch = true;\n                        break;\n                    }\n                }\n                if (! versionMatch) {\n                    this.log(\"[error] LRS invalid: version not supported (\" + cfg.version + \")\");\n                    throw {\n                        code: 5,\n                        mesg: \"LRS invalid: version not supported (\" + cfg.version + \")\"\n                    };\n                }\n                this.version = cfg.version;\n            }\n            else {\n                //\n                // assume max supported when not specified,\n                // TODO: add detection of LRS from call to endpoint\n                //\n                this.version = versions[0];\n            }\n        },\n\n        /**\n        Creates and returns a boundary for separating parts in\n        requests where the statement has an attachment\n\n        @method _getBoundary\n        @private\n        */\n        _getBoundary: function () {\n            return TinCan.Utils.getUUID().replace(/-/g, \"\");\n        },\n\n        /**\n        Method should be overloaded by an environment to do per\n        environment specifics such that the LRS can make a call\n        to set the version if not provided\n\n        @method _initByEnvironment\n        @private\n        */\n        _initByEnvironment: function () {\n            this.log(\"_initByEnvironment not overloaded - no environment loaded?\");\n        },\n\n        /**\n        Method should be overloaded by an environment to do per\n        environment specifics for sending requests to the LRS\n\n        @method _makeRequest\n        @private\n        */\n        _makeRequest: function () {\n            this.log(\"_makeRequest not overloaded - no environment loaded?\");\n        },\n\n        /**\n        Method should be overloaded by an environment to do per\n        environment specifics for building multipart request data\n\n        @method _getMultipartRequestData\n        @private\n        */\n        _getMultipartRequestData: function () {\n            this.log(\"_getMultipartRequestData not overloaded - no environment loaded?\");\n        },\n\n        /**\n        Method is overloaded by the browser environment in order to test converting an\n        HTTP request that is greater than a defined length\n\n        @method _IEModeConversion\n        @private\n        */\n        _IEModeConversion: function () {\n            this.log(\"_IEModeConversion not overloaded - browser environment not loaded.\");\n        },\n\n        _processGetStatementResult: function (xhr, params) {\n            var boundary,\n                parsedResponse,\n                statement,\n                attachmentMap = {},\n                i;\n\n            if (! params.attachments) {\n                return TinCan.Statement.fromJSON(xhr.responseText);\n            }\n\n            boundary = xhr.getResponseHeader(\"Content-Type\").split(\"boundary=\")[1];\n\n            parsedResponse = this._parseMultipart(boundary, xhr.response);\n            statement = JSON.parse(parsedResponse[0].body);\n            for (i = 1; i < parsedResponse.length; i += 1) {\n                attachmentMap[parsedResponse[i].headers[\"X-Experience-API-Hash\"]] = parsedResponse[i].body;\n            }\n\n            this._assignAttachmentContent([statement], attachmentMap);\n\n            return new TinCan.Statement(statement);\n        },\n\n        /**\n        Method used to send a request via browser objects to the LRS\n\n        @method sendRequest\n        @param {Object} cfg Configuration for request\n            @param {String} cfg.url URL portion to add to endpoint\n            @param {String} [cfg.method] GET, PUT, POST, etc.\n            @param {Object} [cfg.params] Parameters to set on the querystring\n            @param {String|ArrayBuffer} [cfg.data] Body content as a String or ArrayBuffer\n            @param {Object} [cfg.headers] Additional headers to set in the request\n            @param {Function} [cfg.callback] Function to run at completion\n                @param {String|Null} cfg.callback.err If an error occurred, this parameter will contain the HTTP status code.\n                    If the operation succeeded, err will be null.\n                @param {Object} cfg.callback.xhr XHR object\n            @param {Boolean} [cfg.ignore404] Whether 404 status codes should be considered an error\n            @param {Boolean} [cfg.expectMultipart] Whether to expect the response to be a multipart response\n        @return {Object} XHR if called in a synchronous way (in other words no callback)\n        */\n        sendRequest: function (cfg) {\n            this.log(\"sendRequest\");\n            var fullUrl = this.endpoint + cfg.url,\n                headers = {},\n                prop\n            ;\n\n            // respect absolute URLs passed in\n            if (cfg.url.indexOf(\"http\") === 0) {\n                fullUrl = cfg.url;\n            }\n\n            // add extended LMS-specified values to the params\n            if (this.extended !== null) {\n                cfg.params = cfg.params || {};\n\n                for (prop in this.extended) {\n                    if (this.extended.hasOwnProperty(prop)) {\n                        // don't overwrite cfg.params values that have already been added to the request with our extended params\n                        if (! cfg.params.hasOwnProperty(prop)) {\n                            if (this.extended[prop] !== null) {\n                                cfg.params[prop] = this.extended[prop];\n                            }\n                        }\n                    }\n                }\n            }\n\n            // consolidate headers\n            headers.Authorization = this.auth;\n            if (this.version !== \"0.9\") {\n                headers[\"X-Experience-API-Version\"] = this.version;\n            }\n\n            for (prop in cfg.headers) {\n                if (cfg.headers.hasOwnProperty(prop)) {\n                    headers[prop] = cfg.headers[prop];\n                }\n            }\n\n            return this._makeRequest(fullUrl, headers, cfg);\n        },\n\n        /**\n        Method used to determine the LRS version\n\n        @method about\n        @param {Object} cfg Configuration object for the about request\n            @param {Function} [cfg.callback] Callback to execute upon receiving a response\n            @param {Object} [cfg.params] this is needed, but can be empty\n        @return {Object} About which holds the version, or asyncrhonously calls a specified callback\n        */\n        about: function (cfg) {\n            this.log(\"about\");\n            var requestCfg,\n                requestResult,\n                callbackWrapper;\n\n            cfg = cfg || {};\n\n            requestCfg = {\n                url: \"about\",\n                method: \"GET\",\n                params: {}\n            };\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err === null) {\n                        result = TinCan.About.fromJSON(xhr.responseText);\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n\n            if (callbackWrapper) {\n                return;\n            }\n\n            if (requestResult.err === null) {\n                requestResult.xhr = TinCan.About.fromJSON(requestResult.xhr.responseText);\n            }\n            return requestResult;\n        },\n\n        /**\n        Save a statement, when used from a browser sends to the endpoint using the RESTful interface.\n        Use a callback to make the call asynchronous.\n\n        @method saveStatement\n        @param {TinCan.Statement} statement to send\n        @param {Object} [cfg] Configuration used when saving\n            @param {Function} [cfg.callback] Callback to execute on completion\n        */\n        saveStatement: function (stmt, cfg) {\n            this.log(\"saveStatement\");\n            var requestCfg = {\n                    url: \"statements\",\n                    headers: {}\n                },\n                versionedStatement,\n                requestAttachments = [],\n                boundary,\n                i;\n\n            cfg = cfg || {};\n\n            try {\n                versionedStatement = stmt.asVersion( this.version );\n            }\n            catch (ex) {\n                if (this.allowFail) {\n                    this.log(\"[warning] statement could not be serialized in version (\" + this.version + \"): \" + ex);\n                    if (typeof cfg.callback !== \"undefined\") {\n                        cfg.callback(null, null);\n                        return;\n                    }\n                    return {\n                        err: null,\n                        xhr: null\n                    };\n                }\n\n                this.log(\"[error] statement could not be serialized in version (\" + this.version + \"): \" + ex);\n                if (typeof cfg.callback !== \"undefined\") {\n                    cfg.callback(ex, null);\n                    return;\n                }\n                return {\n                    err: ex,\n                    xhr: null\n                };\n            }\n\n            if (versionedStatement.hasOwnProperty(\"attachments\") && stmt.hasAttachmentWithContent()) {\n                boundary = this._getBoundary();\n\n                requestCfg.headers[\"Content-Type\"] = \"multipart/mixed; boundary=\" + boundary;\n\n                for (i = 0; i < stmt.attachments.length; i += 1) {\n                    if (stmt.attachments[i].content !== null) {\n                        requestAttachments.push(stmt.attachments[i]);\n                    }\n                }\n\n                try {\n                    requestCfg.data = this._getMultipartRequestData(boundary, versionedStatement, requestAttachments);\n                }\n                catch (ex) {\n                    if (this.allowFail) {\n                        this.log(\"[warning] multipart request data could not be created (attachments probably not supported): \" + ex);\n                        if (typeof cfg.callback !== \"undefined\") {\n                            cfg.callback(null, null);\n                            return;\n                        }\n                        return {\n                            err: null,\n                            xhr: null\n                        };\n                    }\n\n                    this.log(\"[error] multipart request data could not be created (attachments probably not supported): \" + ex);\n                    if (typeof cfg.callback !== \"undefined\") {\n                        cfg.callback(ex, null);\n                        return;\n                    }\n                    return {\n                        err: ex,\n                        xhr: null\n                    };\n                }\n            }\n            else {\n                requestCfg.headers[\"Content-Type\"] = \"application/json\";\n                requestCfg.data = JSON.stringify(versionedStatement);\n            }\n            if (stmt.id !== null) {\n                requestCfg.method = \"PUT\";\n                requestCfg.params = {\n                    statementId: stmt.id\n                };\n            }\n            else {\n                requestCfg.method = \"POST\";\n            }\n\n            if (typeof cfg.callback !== \"undefined\") {\n                requestCfg.callback = cfg.callback;\n            }\n\n            return this.sendRequest(requestCfg);\n        },\n\n        /**\n        Retrieve a statement, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method retrieveStatement\n        @param {String} ID of statement to retrieve\n        @param {Object} [cfg] Configuration options\n            @param {Object} [cfg.params] Query parameters\n                @param {Boolean} [cfg.params.attachments] Include attachments in multipart response or don't (default: false)\n            @param {Function} [cfg.callback] Callback to execute on completion\n        @return {TinCan.Statement} Statement retrieved\n        */\n        retrieveStatement: function (stmtId, cfg) {\n            this.log(\"retrieveStatement\");\n            var requestCfg,\n                requestResult,\n                callbackWrapper,\n                lrs = this;\n\n            cfg = cfg || {};\n            cfg.params = cfg.params || {};\n\n            requestCfg = {\n                url: \"statements\",\n                method: \"GET\",\n                params: {\n                    statementId: stmtId\n                }\n            };\n            if (cfg.params.attachments) {\n                requestCfg.params.attachments = true;\n                requestCfg.expectMultipart = true;\n            }\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err === null) {\n                        result = lrs._processGetStatementResult(xhr, cfg.params);\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            if (! callbackWrapper) {\n                requestResult.statement = null;\n                if (requestResult.err === null) {\n                    requestResult.statement = lrs._processGetStatementResult(requestResult.xhr, cfg.params);\n                }\n            }\n\n            return requestResult;\n        },\n\n        /**\n        Retrieve a voided statement, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method retrieveVoidedStatement\n        @param {String} ID of voided statement to retrieve\n        @param {Object} [cfg] Configuration options\n            @param {Object} [cfg.params] Query parameters\n                @param {Boolean} [cfg.params.attachments] Include attachments in multipart response or don't (default: false)\n            @param {Function} [cfg.callback] Callback to execute on completion\n        @return {TinCan.Statement} Statement retrieved\n        */\n        retrieveVoidedStatement: function (stmtId, cfg) {\n            this.log(\"retrieveVoidedStatement\");\n            var requestCfg,\n                requestResult,\n                callbackWrapper,\n                lrs = this;\n\n            cfg = cfg || {};\n            cfg.params = cfg.params || {};\n\n            requestCfg = {\n                url: \"statements\",\n                method: \"GET\",\n                params: {}\n            };\n            if (this.version === \"0.9\" || this.version === \"0.95\") {\n                requestCfg.params.statementId = stmtId;\n            }\n            else {\n                requestCfg.params.voidedStatementId = stmtId;\n                if (cfg.params.attachments) {\n                    requestCfg.params.attachments = true;\n                    requestCfg.expectMultipart = true;\n                }\n            }\n\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err === null) {\n                        result = lrs._processGetStatementResult(xhr, cfg.params);\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            if (! callbackWrapper) {\n                requestResult.statement = null;\n                if (requestResult.err === null) {\n                    requestResult.statement = lrs._processGetStatementResult(requestResult.xhr, cfg.params);\n                }\n            }\n\n            return requestResult;\n        },\n\n        /**\n        Save a set of statements, when used from a browser sends to the endpoint using the RESTful interface.\n        Use a callback to make the call asynchronous.\n\n        @method saveStatements\n        @param {Array} Array of statements or objects convertable to statements\n        @param {Object} [cfg] Configuration used when saving\n            @param {Function} [cfg.callback] Callback to execute on completion\n        */\n        saveStatements: function (stmts, cfg) {\n            this.log(\"saveStatements\");\n            var requestCfg = {\n                    url: \"statements\",\n                    method: \"POST\",\n                    headers: {}\n                },\n                versionedStatement,\n                versionedStatements = [],\n                requestAttachments = [],\n                boundary,\n                i,\n                j;\n\n            cfg = cfg || {};\n\n            if (stmts.length === 0) {\n                if (typeof cfg.callback !== \"undefined\") {\n                    cfg.callback(new Error(\"no statements\"), null);\n                    return;\n                }\n                return {\n                    err: new Error(\"no statements\"),\n                    xhr: null\n                };\n            }\n\n            for (i = 0; i < stmts.length; i += 1) {\n                try {\n                    versionedStatement = stmts[i].asVersion( this.version );\n                }\n                catch (ex) {\n                    if (this.allowFail) {\n                        this.log(\"[warning] statement could not be serialized in version (\" + this.version + \"): \" + ex);\n                        if (typeof cfg.callback !== \"undefined\") {\n                            cfg.callback(null, null);\n                            return;\n                        }\n                        return {\n                            err: null,\n                            xhr: null\n                        };\n                    }\n\n                    this.log(\"[error] statement could not be serialized in version (\" + this.version + \"): \" + ex);\n                    if (typeof cfg.callback !== \"undefined\") {\n                        cfg.callback(ex, null);\n                        return;\n                    }\n                    return {\n                        err: ex,\n                        xhr: null\n                    };\n                }\n\n                if (stmts[i].hasAttachmentWithContent()) {\n                    for (j = 0; j < stmts[i].attachments.length; j += 1) {\n                        if (stmts[i].attachments[j].content !== null) {\n                            requestAttachments.push(stmts[i].attachments[j]);\n                        }\n                    }\n                }\n\n                versionedStatements.push(versionedStatement);\n            }\n\n            if (requestAttachments.length !== 0) {\n                boundary = this._getBoundary();\n\n                requestCfg.headers[\"Content-Type\"] = \"multipart/mixed; boundary=\" + boundary;\n\n                try {\n                    requestCfg.data = this._getMultipartRequestData(boundary, versionedStatements, requestAttachments);\n                }\n                catch (ex) {\n                    if (this.allowFail) {\n                        this.log(\"[warning] multipart request data could not be created (attachments probably not supported): \" + ex);\n                        if (typeof cfg.callback !== \"undefined\") {\n                            cfg.callback(null, null);\n                            return;\n                        }\n                        return {\n                            err: null,\n                            xhr: null\n                        };\n                    }\n\n                    this.log(\"[error] multipart request data could not be created (attachments probably not supported): \" + ex);\n                    if (typeof cfg.callback !== \"undefined\") {\n                        cfg.callback(ex, null);\n                        return;\n                    }\n                    return {\n                        err: ex,\n                        xhr: null\n                    };\n                }\n            }\n            else {\n                requestCfg.headers[\"Content-Type\"] = \"application/json\";\n                requestCfg.data = JSON.stringify(versionedStatements);\n            }\n\n            if (typeof cfg.callback !== \"undefined\") {\n                requestCfg.callback = cfg.callback;\n            }\n\n            return this.sendRequest(requestCfg);\n        },\n\n        /**\n        Fetch a set of statements, when used from a browser sends to the endpoint using the\n        RESTful interface.  Use a callback to make the call asynchronous.\n\n        @method queryStatements\n        @param {Object} [cfg] Configuration used to query\n            @param {Object} [cfg.params] Query parameters\n                @param {TinCan.Agent|TinCan.Group} [cfg.params.agent] Agent matches 'actor' or 'object'\n                @param {TinCan.Verb|String} [cfg.params.verb] Verb (or verb ID) to query on\n                @param {TinCan.Activity|String} [cfg.params.activity] Activity (or activity ID) to query on\n                @param {String} [cfg.params.registration] Registration UUID\n                @param {Boolean} [cfg.params.related_activities] Match related activities\n                @param {Boolean} [cfg.params.related_agents] Match related agents\n                @param {String} [cfg.params.since] Match statements stored since specified timestamp\n                @param {String} [cfg.params.until] Match statements stored at or before specified timestamp\n                @param {Integer} [cfg.params.limit] Number of results to retrieve\n                @param {String} [cfg.params.format] One of \"ids\", \"exact\", \"canonical\" (default: \"exact\")\n                @param {Boolean} [cfg.params.ascending] Return results in ascending order of stored time\n\n                @param {TinCan.Agent} [cfg.params.actor] (Removed in 1.0.0, use 'agent' instead) Agent matches 'actor'\n                @param {TinCan.Activity|TinCan.Agent|TinCan.Statement} [cfg.params.target] (Removed in 1.0.0, use 'activity' or 'agent' instead) Activity, Agent, or Statement matches 'object'\n                @param {TinCan.Agent} [cfg.params.instructor] (Removed in 1.0.0, use 'agent' + 'related_agents' instead) Agent matches 'context:instructor'\n                @param {Boolean} [cfg.params.context] (Removed in 1.0.0, use 'activity' instead) When filtering on target, include statements with matching context\n                @param {Boolean} [cfg.params.authoritative] (Removed in 1.0.0) Get authoritative results\n                @param {Boolean} [cfg.params.sparse] (Removed in 1.0.0, use 'format' instead) Get sparse results\n\n            @param {Function} [cfg.callback] Callback to execute on completion\n                @param {String|null} cfg.callback.err Error status or null if succcess\n                @param {TinCan.StatementsResult|XHR} cfg.callback.response Receives a StatementsResult argument\n        @return {Object} Request result\n        */\n        queryStatements: function (cfg) {\n            this.log(\"queryStatements\");\n            var requestCfg,\n                requestResult,\n                callbackWrapper,\n                lrs = this;\n\n            cfg = cfg || {};\n            cfg.params = cfg.params || {};\n\n            //\n            // if they misconfigured (possibly due to version mismatches) the\n            // query then don't try to send a request at all, rather than give\n            // them invalid results\n            //\n            try {\n                requestCfg = this._queryStatementsRequestCfg(cfg);\n\n                if (cfg.params.attachments) {\n                    requestCfg.expectMultipart = true;\n                }\n            }\n            catch (ex) {\n                this.log(\"[error] Query statements failed - \" + ex);\n                if (typeof cfg.callback !== \"undefined\") {\n                    cfg.callback(ex, {});\n                }\n\n                return {\n                    err: ex,\n                    statementsResult: null\n                };\n            }\n\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr,\n                        parsedResponse,\n                        boundary,\n                        statements,\n                        attachmentMap = {},\n                        i;\n\n                    if (err === null) {\n                        if (! cfg.params.attachments) {\n                            result = TinCan.StatementsResult.fromJSON(xhr.responseText);\n                        }\n                        else {\n                            boundary = xhr.getResponseHeader(\"Content-Type\").split(\"boundary=\")[1];\n\n                            parsedResponse = lrs._parseMultipart(boundary, xhr.response);\n                            statements = JSON.parse(parsedResponse[0].body);\n                            for (i = 1; i < parsedResponse.length; i += 1) {\n                                attachmentMap[parsedResponse[i].headers[\"X-Experience-API-Hash\"]] = parsedResponse[i].body;\n                            }\n\n                            lrs._assignAttachmentContent(statements.statements, attachmentMap);\n                            result = new TinCan.StatementsResult({ statements: statements.statements });\n\n                            for (i = 0; i < result.statements.length; i += 1) {\n                                if (! (result.statements[i] instanceof TinCan.Statement)) {\n                                    result.statements[i] = new TinCan.Statement(result.statements[i]);\n                                }\n                            }\n                        }\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            requestResult.config = requestCfg;\n\n            if (! callbackWrapper) {\n                requestResult.statementsResult = null;\n                if (requestResult.err === null) {\n                    requestResult.statementsResult = TinCan.StatementsResult.fromJSON(requestResult.xhr.responseText);\n                }\n            }\n\n            return requestResult;\n        },\n\n        /**\n        Build a request config object that can be passed to sendRequest() to make a query request\n\n        @method _queryStatementsRequestCfg\n        @private\n        @param {Object} [cfg] See configuration for {{#crossLink \"TinCan.LRS/queryStatements\"}}{{/crossLink}}\n        @return {Object} Request configuration object\n        */\n        _queryStatementsRequestCfg: function (cfg) {\n            this.log(\"_queryStatementsRequestCfg\");\n            var params = {},\n                returnCfg = {\n                    url: \"statements\",\n                    method: \"GET\",\n                    params: params\n                },\n                jsonProps = [\n                    \"agent\",\n                    \"actor\",\n                    \"object\",\n                    \"instructor\"\n                ],\n                idProps = [\n                    \"verb\",\n                    \"activity\"\n                ],\n                valProps = [\n                    \"registration\",\n                    \"context\",\n                    \"since\",\n                    \"until\",\n                    \"limit\",\n                    \"authoritative\",\n                    \"sparse\",\n                    \"ascending\",\n                    \"related_activities\",\n                    \"related_agents\",\n                    \"format\",\n                    \"attachments\"\n                ],\n                i,\n                prop,\n                //\n                // list of parameters that are supported in all versions (supported by\n                // this library) of the spec\n                //\n                universal = {\n                    verb: true,\n                    registration: true,\n                    since: true,\n                    until: true,\n                    limit: true,\n                    ascending: true\n                },\n                //\n                // future proofing here, \"supported\" is an object so that\n                // in the future we can support a \"deprecated\" list to\n                // throw warnings, hopefully the spec uses deprecation phases\n                // for the removal of these things\n                //\n                compatibility = {\n                    \"0.9\": {\n                        supported: {\n                            actor: true,\n                            instructor: true,\n                            target: true,\n                            object: true,\n                            context: true,\n                            authoritative: true,\n                            sparse: true\n                        }\n                    },\n                    \"1.0.0\": {\n                        supported: {\n                            agent: true,\n                            activity: true,\n                            related_activities: true,\n                            related_agents: true,\n                            format: true,\n                            attachments: true\n                        }\n                    }\n                };\n\n            compatibility[\"0.95\"] = compatibility[\"0.9\"];\n            compatibility[\"1.0.1\"] = compatibility[\"1.0.0\"];\n            compatibility[\"1.0.2\"] = compatibility[\"1.0.0\"];\n\n            if (cfg.params.hasOwnProperty(\"target\")) {\n                cfg.params.object = cfg.params.target;\n            }\n\n            //\n            // check compatibility tables, either the configured parameter is in\n            // the universal list or the specific version, if not then throw an\n            // error which at least for .queryStatements will prevent the request\n            // and potentially alert the user\n            //\n            for (prop in cfg.params) {\n                if (cfg.params.hasOwnProperty(prop)) {\n                    if (typeof universal[prop] === \"undefined\" && typeof compatibility[this.version].supported[prop] === \"undefined\") {\n                        throw \"Unrecognized query parameter configured: \" + prop;\n                    }\n                }\n            }\n\n            //\n            // getting here means that all parameters are valid for this version\n            // to make handling the output formats easier\n            //\n\n            for (i = 0; i < jsonProps.length; i += 1) {\n                if (typeof cfg.params[jsonProps[i]] !== \"undefined\") {\n                    params[jsonProps[i]] = JSON.stringify(cfg.params[jsonProps[i]].asVersion(this.version));\n                }\n            }\n\n            for (i = 0; i < idProps.length; i += 1) {\n                if (typeof cfg.params[idProps[i]] !== \"undefined\") {\n                    if (typeof cfg.params[idProps[i]].id === \"undefined\") {\n                        params[idProps[i]] = cfg.params[idProps[i]];\n                    }\n                    else {\n                        params[idProps[i]] = cfg.params[idProps[i]].id;\n                    }\n                }\n            }\n\n            for (i = 0; i < valProps.length; i += 1) {\n                if (typeof cfg.params[valProps[i]] !== \"undefined\" && cfg.params[valProps[i]] !== null) {\n                    params[valProps[i]] = cfg.params[valProps[i]];\n                }\n            }\n\n            return returnCfg;\n        },\n\n        /**\n        Assigns attachment content to the correct attachment to create a StatementsResult object that is sent\n        to the callback of queryStatements()\n\n        @method _assignAttachmentContent\n        @private\n        @param {Array} [stmts] Array of TinCan.Statement JSON objects\n        @param {Object} [attachmentMap] Map of the content to place into its attachment\n        @return {Array} Array of TinCan.Statement JSON objects with correctly assigned attachment content\n        */\n        _assignAttachmentContent: function (stmts, attachmentMap) {\n            var i,\n                j;\n\n            for (i = 0; i < stmts.length; i += 1) {\n                if (stmts[i].hasOwnProperty(\"attachments\") && stmts[i].attachments !== null) {\n                    for (j = 0; j < stmts[i].attachments.length; j += 1) {\n                        if (attachmentMap.hasOwnProperty(stmts[i].attachments[j].sha2)) {\n                            stmts[i].attachments[j].content = attachmentMap[stmts[i].attachments[j].sha2];\n                        }\n                    }\n                }\n            }\n        },\n\n        /**\n        Parses the different sections of a multipart/mixed response\n\n        @method _parseMultipart\n        @private\n        @param {String} [boundary] Boundary used to mark off the sections of the response\n        @param {ArrayBuffer} [response] Body of the response\n        @return {Array} Array of objects containing the parsed headers and body of each part\n        */\n        _parseMultipart: function (boundary, response) {\n            /* global Uint8Array */\n            var __boundary = \"--\" + boundary,\n                byteArray,\n                bodyEncodedInString,\n                fullBodyEnd,\n                sliceStart,\n                sliceEnd,\n                headerStart,\n                headerEnd,\n                bodyStart,\n                bodyEnd,\n                headers,\n                body,\n                parts = [],\n                CRLF = 2;\n\n            //\n            // treating the reponse as a stream of bytes and assuming that headers\n            // and related mime boundaries are all US-ASCII (which is a safe assumption)\n            // allows us to treat the whole response as a string when looking for offsets\n            // but then slice on the raw array buffer\n            //\n            byteArray = new Uint8Array(response);\n            bodyEncodedInString = this.__uint8ToString(byteArray);\n\n            fullBodyEnd = bodyEncodedInString.indexOf(__boundary + \"--\");\n\n            sliceStart = bodyEncodedInString.indexOf(__boundary);\n            while (sliceStart !== -1) {\n                sliceEnd = bodyEncodedInString.indexOf(__boundary, sliceStart + __boundary.length);\n\n                headerStart = sliceStart + __boundary.length + CRLF;\n                headerEnd = bodyEncodedInString.indexOf(\"\\r\\n\\r\\n\", sliceStart);\n                bodyStart = headerEnd + CRLF + CRLF;\n                bodyEnd = sliceEnd - 2;\n\n                headers = this._parseHeaders(\n                    this.__uint8ToString(\n                        new Uint8Array( response.slice(headerStart, headerEnd) )\n                    )\n                );\n                body = response.slice(bodyStart, bodyEnd);\n\n                //\n                // we know the first slice is the statement, and we know it is a string in UTF-8 (spec requirement)\n                //\n                if (parts.length === 0) {\n                    body = TinCan.Utils.stringFromArrayBuffer(body);\n                }\n\n                parts.push(\n                    {\n                        headers: headers,\n                        body: body\n                    }\n                );\n\n                if (sliceEnd === fullBodyEnd) {\n                    sliceStart = -1;\n                }\n                else {\n                    sliceStart = sliceEnd;\n                }\n            }\n\n            return parts;\n        },\n\n        //\n        // implemented as a function to avoid 'RangeError: Maximum call stack size exceeded'\n        // when calling .fromCharCode on the full byteArray which results in a too long\n        // argument list for large arrays\n        //\n        __uint8ToString: function (byteArray) {\n            var result = \"\",\n                len = byteArray.byteLength,\n                i;\n\n            for (i = 0; i < len; i += 1) {\n                result += String.fromCharCode(byteArray[i]);\n            }\n            return result;\n        },\n\n        /**\n        Parses the headers of a multipart/mixed response section\n\n        @method _parseHeaders\n        @private\n        @param {String} [rawHeaders] String containing all the headers\n        @return {Object} Map of the headers\n        */\n        _parseHeaders: function (rawHeaders) {\n            var headers = {},\n                headerList,\n                key,\n                h,\n                i;\n\n            headerList = rawHeaders.split(\"\\n\");\n            for (i = 0; i < headerList.length; i += 1) {\n                h = headerList[i].split(\":\", 2);\n\n                if (h[1] !== null) {\n                    headers[h[0]] = h[1].replace(/^\\s+|\\s+$/g, \"\");\n\n                    key = h[0];\n                }\n                else {\n                    if (h[0].substring(0, 1) === \"\\t\") {\n                        headers[h[0]] = h[1].replace(/^\\s+|\\s+$/g, \"\");\n                    }\n                }\n            }\n\n            return headers;\n        },\n\n        /**\n        Fetch more statements from a previous query, when used from a browser sends to the endpoint using the\n        RESTful interface.  Use a callback to make the call asynchronous.\n\n        @method moreStatements\n        @param {Object} [cfg] Configuration used to query\n            @param {String} [cfg.url] More URL\n            @param {Function} [cfg.callback] Callback to execute on completion\n                @param {String|null} cfg.callback.err Error status or null if succcess\n                @param {TinCan.StatementsResult|XHR} cfg.callback.response Receives a StatementsResult argument\n        @return {Object} Request result\n        */\n        moreStatements: function (cfg) {\n            this.log(\"moreStatements: \" + cfg.url);\n            var requestCfg,\n                requestResult,\n                callbackWrapper,\n                parsedURL,\n                serverRoot;\n\n            cfg = cfg || {};\n\n            // to support our interface (to support IE) we need to break apart\n            // the more URL query params so that the request can be made properly later\n            parsedURL = TinCan.Utils.parseURL(cfg.url, { allowRelative: true });\n\n            // Respect a more URL that is relative to either the server root\n            // or endpoint (though only the former is allowed in the spec)\n            serverRoot = TinCan.Utils.getServerRoot(this.endpoint);\n            if (parsedURL.path.indexOf(\"/statements\") === 0){\n                parsedURL.path = this.endpoint.replace(serverRoot, \"\") + parsedURL.path;\n                this.log(\"converting non-standard more URL to \" + parsedURL.path);\n            }\n\n            // The more relative URL might not start with a slash, add it if not\n            if (parsedURL.path.indexOf(\"/\") !== 0) {\n                parsedURL.path = \"/\" + parsedURL.path;\n            }\n\n            requestCfg = {\n                method: \"GET\",\n                // For arbitrary more URLs to work, we need to make the URL absolute here\n                url: serverRoot + parsedURL.path,\n                params: parsedURL.params\n            };\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err === null) {\n                        result = TinCan.StatementsResult.fromJSON(xhr.responseText);\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            requestResult.config = requestCfg;\n\n            if (! callbackWrapper) {\n                requestResult.statementsResult = null;\n                if (requestResult.err === null) {\n                    requestResult.statementsResult = TinCan.StatementsResult.fromJSON(requestResult.xhr.responseText);\n                }\n            }\n\n            return requestResult;\n        },\n\n        /**\n        Retrieve a state value, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method retrieveState\n        @param {String} key Key of state to retrieve\n        @param {Object} cfg Configuration options\n            @param {TinCan.Activity} cfg.activity Activity in document identifier\n            @param {TinCan.Agent} cfg.agent Agent in document identifier\n            @param {String} [cfg.registration] Registration\n            @param {Function} [cfg.callback] Callback to execute on completion\n                @param {Object|Null} cfg.callback.error\n                @param {TinCan.State|null} cfg.callback.result null if state is 404\n            @param {Object} [cfg.requestHeaders] Object containing additional headers to add to request\n        @return {TinCan.State|Object} TinCan.State retrieved when synchronous, or result from sendRequest\n        */\n        retrieveState: function (key, cfg) {\n            this.log(\"retrieveState\");\n            var requestParams = {},\n                requestCfg = {},\n                requestResult,\n                callbackWrapper,\n                requestHeaders,\n                self = this;\n\n            requestHeaders = cfg.requestHeaders || {};\n\n            requestParams = {\n                stateId: key,\n                activityId: cfg.activity.id\n            };\n            if (this.version === \"0.9\") {\n                requestParams.actor = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            else {\n                requestParams.agent = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            if ((typeof cfg.registration !== \"undefined\") && (cfg.registration !== null)) {\n                if (this.version === \"0.9\") {\n                    requestParams.registrationId = cfg.registration;\n                }\n                else {\n                    requestParams.registration = cfg.registration;\n                }\n            }\n\n            requestCfg = {\n                url: \"activities/state\",\n                method: \"GET\",\n                params: requestParams,\n                ignore404: true,\n                headers: requestHeaders\n            };\n\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err === null) {\n                        if (xhr.status === 404) {\n                            result = null;\n                        }\n                        else {\n                            result = new TinCan.State(\n                                {\n                                    id: key,\n                                    contents: xhr.responseText\n                                }\n                            );\n                            if (typeof xhr.getResponseHeader !== \"undefined\" && xhr.getResponseHeader(\"ETag\") !== null && xhr.getResponseHeader(\"ETag\") !== \"\") {\n                                result.etag = xhr.getResponseHeader(\"ETag\");\n                            }\n                            else {\n                                //\n                                // either XHR didn't have getResponseHeader (probably cause it is an IE\n                                // XDomainRequest object which doesn't) or not populated by LRS so create\n                                // the hash ourselves\n                                //\n                                // the LRS is responsible for quoting the Etag value so we need to mimic\n                                // that behavior here as well\n                                //\n                                result.etag = \"\\\"\" + TinCan.Utils.getSHA1String(xhr.responseText) + \"\\\"\";\n                            }\n\n                            if (typeof xhr.contentType !== \"undefined\") {\n                                // most likely an XDomainRequest which has .contentType,\n                                // for the ones that it supports\n                                result.contentType = xhr.contentType;\n                            }\n                            else if (typeof xhr.getResponseHeader !== \"undefined\" && xhr.getResponseHeader(\"Content-Type\") !== null && xhr.getResponseHeader(\"Content-Type\") !== \"\") {\n                                result.contentType = xhr.getResponseHeader(\"Content-Type\");\n                            }\n\n                            if (TinCan.Utils.isApplicationJSON(result.contentType)) {\n                                try {\n                                    result.contents = JSON.parse(result.contents);\n                                } catch (ex) {\n                                    self.log(\"retrieveState - failed to deserialize JSON: \" + ex);\n                                }\n                            }\n                        }\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            if (! callbackWrapper) {\n                requestResult.state = null;\n                if (requestResult.err === null && requestResult.xhr.status !== 404) {\n                    requestResult.state = new TinCan.State(\n                        {\n                            id: key,\n                            contents: requestResult.xhr.responseText\n                        }\n                    );\n                    if (typeof requestResult.xhr.getResponseHeader !== \"undefined\" && requestResult.xhr.getResponseHeader(\"ETag\") !== null && requestResult.xhr.getResponseHeader(\"ETag\") !== \"\") {\n                        requestResult.state.etag = requestResult.xhr.getResponseHeader(\"ETag\");\n                    }\n                    else {\n                        //\n                        // either XHR didn't have getResponseHeader (probably cause it is an IE\n                        // XDomainRequest object which doesn't) or not populated by LRS so create\n                        // the hash ourselves\n                        //\n                        // the LRS is responsible for quoting the Etag value so we need to mimic\n                        // that behavior here as well\n                        //\n                        requestResult.state.etag = \"\\\"\" + TinCan.Utils.getSHA1String(requestResult.xhr.responseText) + \"\\\"\";\n                    }\n                    if (typeof requestResult.xhr.contentType !== \"undefined\") {\n                        // most likely an XDomainRequest which has .contentType\n                        // for the ones that it supports\n                        requestResult.state.contentType = requestResult.xhr.contentType;\n                    }\n                    else if (typeof requestResult.xhr.getResponseHeader !== \"undefined\" && requestResult.xhr.getResponseHeader(\"Content-Type\") !== null && requestResult.xhr.getResponseHeader(\"Content-Type\") !== \"\") {\n                        requestResult.state.contentType = requestResult.xhr.getResponseHeader(\"Content-Type\");\n                    }\n                    if (TinCan.Utils.isApplicationJSON(requestResult.state.contentType)) {\n                        try {\n                            requestResult.state.contents = JSON.parse(requestResult.state.contents);\n                        } catch (ex) {\n                            this.log(\"retrieveState - failed to deserialize JSON: \" + ex);\n                        }\n                    }\n                }\n            }\n\n            return requestResult;\n        },\n\n        /**\n        Retrieve the list of IDs for a state, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method retrieveStateIds\n        @param {Object} cfg Configuration options\n            @param {TinCan.Activity} cfg.activity Activity in document identifier\n            @param {TinCan.Agent} cfg.agent Agent in document identifier\n            @param {String} [cfg.registration] Registration\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {String} [cfg.since] Match activity profiles saved since given timestamp\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        @return {Object} requestResult Request result\n        */\n        retrieveStateIds: function (cfg) {\n            this.log(\"retrieveStateIds\");\n            var requestParams = {},\n                requestCfg,\n                requestHeaders,\n                requestResult,\n                callbackWrapper;\n\n            cfg = cfg || {};\n            requestHeaders = cfg.requestHeaders || {};\n\n            requestParams.activityId = cfg.activity.id;\n            if (this.version === \"0.9\") {\n                requestParams.actor = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            else {\n                requestParams.agent = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            if ((typeof cfg.registration !== \"undefined\") && (cfg.registration !== null)) {\n                if (this.version === \"0.9\") {\n                    requestParams.registrationId = cfg.registration;\n                }\n                else {\n                    requestParams.registration = cfg.registration;\n                }\n            }\n\n            requestCfg = {\n                url: \"activities/state\",\n                method: \"GET\",\n                params: requestParams,\n                headers: requestHeaders,\n                ignore404: true\n            };\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err !== null) {\n                        cfg.callback(err, result);\n                        return;\n                    }\n\n                    if (xhr.status === 404) {\n                        result = [];\n                    }\n                    else {\n                        try {\n                            result = JSON.parse(xhr.responseText);\n                        }\n                        catch (ex) {\n                            err = \"Response JSON parse error: \" + ex;\n                        }\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n            if (typeof cfg.since !== \"undefined\") {\n                requestCfg.params.since = cfg.since;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            if (! callbackWrapper) {\n                requestResult.profileIds = null;\n                if (requestResult.err !== null) {\n                    return requestResult;\n                }\n\n                if (requestResult.xhr.status === 404) {\n                    requestResult.profileIds = [];\n                }\n                else {\n                    try {\n                        requestResult.profileIds = JSON.parse(requestResult.xhr.responseText);\n                    }\n                    catch (ex) {\n                        requestResult.err = \"retrieveStateIds - JSON parse error: \" + ex;\n                    }\n                }\n            }\n            return requestResult;\n        },\n\n        /**\n        Save a state value, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method saveState\n        @param {String} key Key of state to save\n        @param val Value to be stored\n        @param {Object} cfg Configuration options\n            @param {TinCan.Activity} cfg.activity Activity in document identifier\n            @param {TinCan.Agent} cfg.agent Agent in document identifier\n            @param {String} [cfg.registration] Registration\n            @param {String} [cfg.lastSHA1] SHA1 of the previously seen existing state\n            @param {String} [cfg.contentType] Content-Type to specify in headers (defaults to 'application/octet-stream')\n            @param {String} [cfg.method] Method to use. Default: PUT\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        */\n        saveState: function (key, val, cfg) {\n            this.log(\"saveState\");\n            var requestParams,\n                requestCfg,\n                requestHeaders;\n\n            requestHeaders = cfg.requestHeaders || {};\n\n            if (typeof cfg.contentType === \"undefined\") {\n                cfg.contentType = \"application/octet-stream\";\n            }\n            requestHeaders[\"Content-Type\"] = cfg.contentType;\n\n            if (typeof val === \"object\" && TinCan.Utils.isApplicationJSON(cfg.contentType)) {\n                val = JSON.stringify(val);\n            }\n\n            if (typeof cfg.method === \"undefined\" || cfg.method !== \"POST\") {\n                cfg.method = \"PUT\";\n            }\n\n            requestParams = {\n                stateId: key,\n                activityId: cfg.activity.id\n            };\n            if (this.version === \"0.9\") {\n                requestParams.actor = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            else {\n                requestParams.agent = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            if ((typeof cfg.registration !== \"undefined\") && (cfg.registration !== null)) {\n                if (this.version === \"0.9\") {\n                    requestParams.registrationId = cfg.registration;\n                }\n                else {\n                    requestParams.registration = cfg.registration;\n                }\n            }\n\n            requestCfg = {\n                url: \"activities/state\",\n                method: cfg.method,\n                params: requestParams,\n                data: val,\n                headers: requestHeaders\n            };\n\n            if (typeof cfg.callback !== \"undefined\") {\n                requestCfg.callback = cfg.callback;\n            }\n            if (typeof cfg.lastSHA1 !== \"undefined\" && cfg.lastSHA1 !== null) {\n                requestCfg.headers[\"If-Match\"] = cfg.lastSHA1;\n            }\n\n            return this.sendRequest(requestCfg);\n        },\n\n        /**\n        Drop a state value or all of the state, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method dropState\n        @param {String|null} key Key of state to delete, or null for all\n        @param {Object} cfg Configuration options\n            @param {TinCan.Activity} cfg.activity Activity in document identifier\n            @param {TinCan.Agent} cfg.agent Agent in document identifier\n            @param {String} [cfg.registration] Registration\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        */\n        dropState: function (key, cfg) {\n            this.log(\"dropState\");\n            var requestParams,\n                requestCfg,\n                requestHeaders;\n\n            requestHeaders = cfg.requestHeaders || {};\n\n            requestParams = {\n                activityId: cfg.activity.id\n            };\n            if (this.version === \"0.9\") {\n                requestParams.actor = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            else {\n                requestParams.agent = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            if (key !== null) {\n                requestParams.stateId = key;\n            }\n            if ((typeof cfg.registration !== \"undefined\") && (cfg.registration !== null)) {\n                if (this.version === \"0.9\") {\n                    requestParams.registrationId = cfg.registration;\n                }\n                else {\n                    requestParams.registration = cfg.registration;\n                }\n            }\n\n            requestCfg = {\n                url: \"activities/state\",\n                method: \"DELETE\",\n                params: requestParams,\n                headers: requestHeaders\n            };\n\n            if (typeof cfg.callback !== \"undefined\") {\n                requestCfg.callback = cfg.callback;\n            }\n\n            return this.sendRequest(requestCfg);\n        },\n\n        /**\n        Retrieve an activity, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method retrieveActivity\n        @param {String} activityId id of the Activity to retrieve\n        @param {Object} cfg Configuration options\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        @return {Object} Value retrieved\n        */\n        retrieveActivity: function (activityId, cfg) {\n            this.log(\"retrieveActivity\");\n            var requestCfg = {},\n                requestResult,\n                callbackWrapper,\n                requestHeaders;\n\n            requestHeaders = cfg.requestHeaders || {};\n\n            requestCfg = {\n                url: \"activities\",\n                method: \"GET\",\n                params: {\n                    activityId: activityId\n                },\n                ignore404: true,\n                headers: requestHeaders\n            };\n\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err === null) {\n                        //\n                        // a 404 really shouldn't happen because the LRS can dynamically\n                        // build the response based on what has been passed to it, but\n                        // don't have the client fail in the condition that it does, because\n                        // we can do the same thing\n                        //\n                        if (xhr.status === 404) {\n                            result = new TinCan.Activity(\n                                {\n                                    id: activityId\n                                }\n                            );\n                        }\n                        else {\n                            result = TinCan.Activity.fromJSON(xhr.responseText);\n                        }\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            if (! callbackWrapper) {\n                requestResult.activity = null;\n                if (requestResult.err === null) {\n                    if (requestResult.xhr.status === 404) {\n                        requestResult.activity = new TinCan.Activity(\n                            {\n                                id: activityId\n                            }\n                        );\n                    }\n                    else {\n                        requestResult.activity = TinCan.Activity.fromJSON(requestResult.xhr.responseText);\n                    }\n                }\n            }\n\n            return requestResult;\n        },\n\n        /**\n        Retrieve an activity profile value, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method retrieveActivityProfile\n        @param {String} key Key of activity profile to retrieve\n        @param {Object} cfg Configuration options\n            @param {TinCan.Activity} cfg.activity Activity in document identifier\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        @return {Object} Value retrieved\n        */\n        retrieveActivityProfile: function (key, cfg) {\n            this.log(\"retrieveActivityProfile\");\n            var requestCfg = {},\n                requestResult,\n                callbackWrapper,\n                requestHeaders,\n                self = this;\n\n            requestHeaders = cfg.requestHeaders || {};\n\n            requestCfg = {\n                url: \"activities/profile\",\n                method: \"GET\",\n                params: {\n                    profileId: key,\n                    activityId: cfg.activity.id\n                },\n                ignore404: true,\n                headers: requestHeaders\n            };\n\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err === null) {\n                        if (xhr.status === 404) {\n                            result = null;\n                        }\n                        else {\n                            result = new TinCan.ActivityProfile(\n                                {\n                                    id: key,\n                                    activity: cfg.activity,\n                                    contents: xhr.responseText\n                                }\n                            );\n                            if (typeof xhr.getResponseHeader !== \"undefined\" && xhr.getResponseHeader(\"ETag\") !== null && xhr.getResponseHeader(\"ETag\") !== \"\") {\n                                result.etag = xhr.getResponseHeader(\"ETag\");\n                            }\n                            else {\n                                //\n                                // either XHR didn't have getResponseHeader (probably cause it is an IE\n                                // XDomainRequest object which doesn't) or not populated by LRS so create\n                                // the hash ourselves\n                                //\n                                // the LRS is responsible for quoting the Etag value so we need to mimic\n                                // that behavior here as well\n                                //\n                                result.etag = \"\\\"\" + TinCan.Utils.getSHA1String(xhr.responseText) + \"\\\"\";\n                            }\n                            if (typeof xhr.contentType !== \"undefined\") {\n                                // most likely an XDomainRequest which has .contentType\n                                // for the ones that it supports\n                                result.contentType = xhr.contentType;\n                            }\n                            else if (typeof xhr.getResponseHeader !== \"undefined\" && xhr.getResponseHeader(\"Content-Type\") !== null && xhr.getResponseHeader(\"Content-Type\") !== \"\") {\n                                result.contentType = xhr.getResponseHeader(\"Content-Type\");\n                            }\n                            if (TinCan.Utils.isApplicationJSON(result.contentType)) {\n                                try {\n                                    result.contents = JSON.parse(result.contents);\n                                } catch (ex) {\n                                    self.log(\"retrieveActivityProfile - failed to deserialize JSON: \" + ex);\n                                }\n                            }\n                        }\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            if (! callbackWrapper) {\n                requestResult.profile = null;\n                if (requestResult.err === null && requestResult.xhr.status !== 404) {\n                    requestResult.profile = new TinCan.ActivityProfile(\n                        {\n                            id: key,\n                            activity: cfg.activity,\n                            contents: requestResult.xhr.responseText\n                        }\n                    );\n                    if (typeof requestResult.xhr.getResponseHeader !== \"undefined\" && requestResult.xhr.getResponseHeader(\"ETag\") !== null && requestResult.xhr.getResponseHeader(\"ETag\") !== \"\") {\n                        requestResult.profile.etag = requestResult.xhr.getResponseHeader(\"ETag\");\n                    }\n                    else {\n                        //\n                        // either XHR didn't have getResponseHeader (probably cause it is an IE\n                        // XDomainRequest object which doesn't) or not populated by LRS so create\n                        // the hash ourselves\n                        //\n                        // the LRS is responsible for quoting the Etag value so we need to mimic\n                        // that behavior here as well\n                        //\n                        requestResult.profile.etag = \"\\\"\" + TinCan.Utils.getSHA1String(requestResult.xhr.responseText) + \"\\\"\";\n                    }\n                    if (typeof requestResult.xhr.contentType !== \"undefined\") {\n                        // most likely an XDomainRequest which has .contentType\n                        // for the ones that it supports\n                        requestResult.profile.contentType = requestResult.xhr.contentType;\n                    }\n                    else if (typeof requestResult.xhr.getResponseHeader !== \"undefined\" && requestResult.xhr.getResponseHeader(\"Content-Type\") !== null && requestResult.xhr.getResponseHeader(\"Content-Type\") !== \"\") {\n                        requestResult.profile.contentType = requestResult.xhr.getResponseHeader(\"Content-Type\");\n                    }\n                    if (TinCan.Utils.isApplicationJSON(requestResult.profile.contentType)) {\n                        try {\n                            requestResult.profile.contents = JSON.parse(requestResult.profile.contents);\n                        } catch (ex) {\n                            this.log(\"retrieveActivityProfile - failed to deserialize JSON: \" + ex);\n                        }\n                    }\n                }\n            }\n\n            return requestResult;\n        },\n\n        /**\n        Retrieve the list of IDs for an activity profile, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method retrieveActivityProfileIds\n        @param {Object} cfg Configuration options\n            @param {TinCan.Activity} cfg.activity Activity in document identifier\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {String} [cfg.since] Match activity profiles saved since given timestamp\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        @return {Array} List of ids for this Activity profile\n        */\n        retrieveActivityProfileIds: function (cfg) {\n            this.log(\"retrieveActivityProfileIds\");\n            var requestCfg,\n                requestHeaders,\n                requestResult,\n                callbackWrapper;\n\n            cfg = cfg || {};\n            requestHeaders = cfg.requestHeaders || {};\n\n            requestCfg = {\n                url: \"activities/profile\",\n                method: \"GET\",\n                params: {\n                    activityId: cfg.activity.id\n                },\n                headers: requestHeaders,\n                ignore404: true\n            };\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err !== null) {\n                        cfg.callback(err, result);\n                        return;\n                    }\n\n                    if (xhr.status === 404) {\n                        result = [];\n                    }\n                    else {\n                        try {\n                            result = JSON.parse(xhr.responseText);\n                        }\n                        catch (ex) {\n                            err = \"Response JSON parse error: \" + ex;\n                        }\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n            if (typeof cfg.since !== \"undefined\") {\n                requestCfg.params.since = cfg.since;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            if (! callbackWrapper) {\n                requestResult.profileIds = null;\n                if (requestResult.err !== null) {\n                    return requestResult;\n                }\n\n                if (requestResult.xhr.status === 404) {\n                    requestResult.profileIds = [];\n                }\n                else {\n                    try {\n                        requestResult.profileIds = JSON.parse(requestResult.xhr.responseText);\n                    }\n                    catch (ex) {\n                        requestResult.err = \"retrieveActivityProfileIds - JSON parse error: \" + ex;\n                    }\n                }\n            }\n            return requestResult;\n        },\n\n        /**\n        Save an activity profile value, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method saveActivityProfile\n        @param {String} key Key of activity profile to retrieve\n        @param val Value to be stored\n        @param {Object} cfg Configuration options\n            @param {TinCan.Activity} cfg.activity Activity in document identifier\n            @param {String} [cfg.lastSHA1] SHA1 of the previously seen existing profile\n            @param {String} [cfg.contentType] Content-Type to specify in headers (defaults to 'application/octet-stream')\n            @param {String} [cfg.method] Method to use. Default: PUT\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        */\n        saveActivityProfile: function (key, val, cfg) {\n            this.log(\"saveActivityProfile\");\n            var requestCfg,\n                requestHeaders;\n\n            requestHeaders = cfg.requestHeaders || {};\n\n            if (typeof cfg.contentType === \"undefined\") {\n                cfg.contentType = \"application/octet-stream\";\n            }\n            requestHeaders[\"Content-Type\"] = cfg.contentType;\n\n            if (typeof cfg.method === \"undefined\" || cfg.method !== \"POST\") {\n                cfg.method = \"PUT\";\n            }\n\n            if (typeof val === \"object\" && TinCan.Utils.isApplicationJSON(cfg.contentType)) {\n                val = JSON.stringify(val);\n            }\n\n            requestCfg = {\n                url: \"activities/profile\",\n                method: cfg.method,\n                params: {\n                    profileId: key,\n                    activityId: cfg.activity.id\n                },\n                data: val,\n                headers: requestHeaders\n            };\n\n            if (typeof cfg.callback !== \"undefined\") {\n                requestCfg.callback = cfg.callback;\n            }\n            if (typeof cfg.lastSHA1 !== \"undefined\" && cfg.lastSHA1 !== null) {\n                requestCfg.headers[\"If-Match\"] = cfg.lastSHA1;\n            }\n            else {\n                requestCfg.headers[\"If-None-Match\"] = \"*\";\n            }\n\n            return this.sendRequest(requestCfg);\n        },\n\n        /**\n        Drop an activity profile value, when used from a browser sends to the endpoint using the RESTful interface. Full activity profile\n        delete is not supported by the spec.\n\n        @method dropActivityProfile\n        @param {String|null} key Key of activity profile to delete\n        @param {Object} cfg Configuration options\n            @param {TinCan.Activity} cfg.activity Activity in document identifier\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        */\n        dropActivityProfile: function (key, cfg) {\n            this.log(\"dropActivityProfile\");\n            var requestParams,\n                requestCfg,\n                requestHeaders;\n\n            requestHeaders = cfg.requestHeaders || {};\n\n            requestParams = {\n                profileId: key,\n                activityId: cfg.activity.id\n            };\n\n            requestCfg = {\n                url: \"activities/profile\",\n                method: \"DELETE\",\n                params: requestParams,\n                headers: requestHeaders\n            };\n\n            if (typeof cfg.callback !== \"undefined\") {\n                requestCfg.callback = cfg.callback;\n            }\n\n            return this.sendRequest(requestCfg);\n        },\n\n        /**\n        Retrieve an agent profile value, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method retrieveAgentProfile\n        @param {String} key Key of agent profile to retrieve\n        @param {Object} cfg Configuration options\n            @param {TinCan.Agent} cfg.agent Agent in document identifier\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        @return {Object} Value retrieved\n        */\n        retrieveAgentProfile: function (key, cfg) {\n            this.log(\"retrieveAgentProfile\");\n            var requestCfg = {},\n                requestResult,\n                callbackWrapper,\n                requestHeaders,\n                self = this;\n\n            requestHeaders = cfg.requestHeaders || {};\n\n            requestCfg = {\n                method: \"GET\",\n                params: {\n                    profileId: key\n                },\n                ignore404: true,\n                headers: requestHeaders\n            };\n\n            if (this.version === \"0.9\") {\n                requestCfg.url = \"actors/profile\";\n                requestCfg.params.actor = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            else {\n                requestCfg.url = \"agents/profile\";\n                requestCfg.params.agent = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err === null) {\n                        if (xhr.status === 404) {\n                            result = null;\n                        }\n                        else {\n                            result = new TinCan.AgentProfile(\n                                {\n                                    id: key,\n                                    agent: cfg.agent,\n                                    contents: xhr.responseText\n                                }\n                            );\n                            if (typeof xhr.getResponseHeader !== \"undefined\" && xhr.getResponseHeader(\"ETag\") !== null && xhr.getResponseHeader(\"ETag\") !== \"\") {\n                                result.etag = xhr.getResponseHeader(\"ETag\");\n                            }\n                            else {\n                                //\n                                // either XHR didn't have getResponseHeader (probably cause it is an IE\n                                // XDomainRequest object which doesn't) or not populated by LRS so create\n                                // the hash ourselves\n                                //\n                                // the LRS is responsible for quoting the Etag value so we need to mimic\n                                // that behavior here as well\n                                //\n                                result.etag = \"\\\"\" + TinCan.Utils.getSHA1String(xhr.responseText) + \"\\\"\";\n                            }\n                            if (typeof xhr.contentType !== \"undefined\") {\n                                // most likely an XDomainRequest which has .contentType\n                                // for the ones that it supports\n                                result.contentType = xhr.contentType;\n                            }\n                            else if (typeof xhr.getResponseHeader !== \"undefined\" && xhr.getResponseHeader(\"Content-Type\") !== null && xhr.getResponseHeader(\"Content-Type\") !== \"\") {\n                                result.contentType = xhr.getResponseHeader(\"Content-Type\");\n                            }\n                            if (TinCan.Utils.isApplicationJSON(result.contentType)) {\n                                try {\n                                    result.contents = JSON.parse(result.contents);\n                                } catch (ex) {\n                                    self.log(\"retrieveAgentProfile - failed to deserialize JSON: \" + ex);\n                                }\n                            }\n                        }\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            if (! callbackWrapper) {\n                requestResult.profile = null;\n                if (requestResult.err === null && requestResult.xhr.status !== 404) {\n                    requestResult.profile = new TinCan.AgentProfile(\n                        {\n                            id: key,\n                            agent: cfg.agent,\n                            contents: requestResult.xhr.responseText\n                        }\n                    );\n                    if (typeof requestResult.xhr.getResponseHeader !== \"undefined\" && requestResult.xhr.getResponseHeader(\"ETag\") !== null && requestResult.xhr.getResponseHeader(\"ETag\") !== \"\") {\n                        requestResult.profile.etag = requestResult.xhr.getResponseHeader(\"ETag\");\n                    }\n                    else {\n                        //\n                        // either XHR didn't have getResponseHeader (probably cause it is an IE\n                        // XDomainRequest object which doesn't) or not populated by LRS so create\n                        // the hash ourselves\n                        //\n                        // the LRS is responsible for quoting the Etag value so we need to mimic\n                        // that behavior here as well\n                        //\n                        requestResult.profile.etag = \"\\\"\" + TinCan.Utils.getSHA1String(requestResult.xhr.responseText) + \"\\\"\";\n                    }\n                    if (typeof requestResult.xhr.contentType !== \"undefined\") {\n                        // most likely an XDomainRequest which has .contentType\n                        // for the ones that it supports\n                        requestResult.profile.contentType = requestResult.xhr.contentType;\n                    }\n                    else if (typeof requestResult.xhr.getResponseHeader !== \"undefined\" && requestResult.xhr.getResponseHeader(\"Content-Type\") !== null && requestResult.xhr.getResponseHeader(\"Content-Type\") !== \"\") {\n                        requestResult.profile.contentType = requestResult.xhr.getResponseHeader(\"Content-Type\");\n                    }\n                    if (TinCan.Utils.isApplicationJSON(requestResult.profile.contentType)) {\n                        try {\n                            requestResult.profile.contents = JSON.parse(requestResult.profile.contents);\n                        } catch (ex) {\n                            this.log(\"retrieveAgentProfile - failed to deserialize JSON: \" + ex);\n                        }\n                    }\n                }\n            }\n\n            return requestResult;\n        },\n\n        /**\n        Retrieve the list of profileIds for an agent profile, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method retrieveAgentProfileIds\n        @param {Object} cfg Configuration options\n            @param {TinCan.Agent} cfg.agent Agent in document identifier\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {String} [cfg.since] Match activity profiles saved since given timestamp\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        @return {Array} List of profileIds for this Agent\n\n        */\n        retrieveAgentProfileIds: function (cfg) {\n            this.log(\"retrieveAgentProfileIds\");\n            var requestParams = {},\n                requestCfg,\n                requestHeaders,\n                requestResult,\n                callbackWrapper;\n\n            cfg = cfg || {};\n            requestHeaders = cfg.requestHeaders || {};\n\n            requestCfg = {\n                method: \"GET\",\n                params: requestParams,\n                headers: requestHeaders,\n                ignore404: true\n            };\n\n            if (this.version === \"0.9\") {\n                requestCfg.url = \"actors/profile\";\n                requestParams.actor = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            else {\n                requestCfg.url = \"agents/profile\";\n                requestParams.agent = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            if (typeof cfg.callback !== \"undefined\") {\n                callbackWrapper = function (err, xhr) {\n                    var result = xhr;\n\n                    if (err !== null) {\n                        cfg.callback(err, result);\n                        return;\n                    }\n\n                    if (xhr.status === 404) {\n                        result = [];\n                    }\n                    else {\n                        try {\n                            result = JSON.parse(xhr.responseText);\n                        }\n                        catch (ex) {\n                            err = \"Response JSON parse error: \" + ex;\n                        }\n                    }\n\n                    cfg.callback(err, result);\n                };\n                requestCfg.callback = callbackWrapper;\n            }\n            if (typeof cfg.since !== \"undefined\") {\n                requestCfg.params.since = cfg.since;\n            }\n\n            requestResult = this.sendRequest(requestCfg);\n            if (! callbackWrapper) {\n                requestResult.profileIds = null;\n                if (requestResult.err !== null) {\n                    return requestResult;\n                }\n\n                if (requestResult.xhr.status === 404) {\n                    requestResult.profileIds = [];\n                }\n                else {\n                    try {\n                        requestResult.profileIds = JSON.parse(requestResult.xhr.responseText);\n                    }\n                    catch (ex) {\n                        requestResult.err = \"retrieveAgentProfileIds - JSON parse error: \" + ex;\n                    }\n                }\n            }\n            return requestResult;\n        },\n\n        /**\n        Save an agent profile value, when used from a browser sends to the endpoint using the RESTful interface.\n\n        @method saveAgentProfile\n        @param {String} key Key of agent profile to retrieve\n        @param val Value to be stored\n        @param {Object} cfg Configuration options\n            @param {TinCan.Agent} cfg.agent Agent in document identifier\n            @param {String} [cfg.lastSHA1] SHA1 of the previously seen existing profile\n            @param {String} [cfg.contentType] Content-Type to specify in headers (defaults to 'application/octet-stream')\n            @param {String} [cfg.method] Method to use. Default: PUT\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        */\n        saveAgentProfile: function (key, val, cfg) {\n            this.log(\"saveAgentProfile\");\n            var requestCfg,\n                requestHeaders;\n\n            requestHeaders = cfg.requestHeaders || {};\n\n            if (typeof cfg.contentType === \"undefined\") {\n                cfg.contentType = \"application/octet-stream\";\n            }\n            requestHeaders[\"Content-Type\"] = cfg.contentType;\n\n            if (typeof cfg.method === \"undefined\" || cfg.method !== \"POST\") {\n                cfg.method = \"PUT\";\n            }\n\n            if (typeof val === \"object\" && TinCan.Utils.isApplicationJSON(cfg.contentType)) {\n                val = JSON.stringify(val);\n            }\n\n            requestCfg = {\n                method: cfg.method,\n                params: {\n                    profileId: key\n                },\n                data: val,\n                headers: requestHeaders\n            };\n\n            if (this.version === \"0.9\") {\n                requestCfg.url = \"actors/profile\";\n                requestCfg.params.actor = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            else {\n                requestCfg.url = \"agents/profile\";\n                requestCfg.params.agent = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            if (typeof cfg.callback !== \"undefined\") {\n                requestCfg.callback = cfg.callback;\n            }\n            if (typeof cfg.lastSHA1 !== \"undefined\" && cfg.lastSHA1 !== null) {\n                requestCfg.headers[\"If-Match\"] = cfg.lastSHA1;\n            }\n            else {\n                requestCfg.headers[\"If-None-Match\"] = \"*\";\n            }\n\n            return this.sendRequest(requestCfg);\n        },\n\n        /**\n        Drop an agent profile value, when used from a browser sends to the endpoint using the RESTful interface. Full agent profile\n        delete is not supported by the spec.\n\n        @method dropAgentProfile\n        @param {String|null} key Key of agent profile to delete\n        @param {Object} cfg Configuration options\n            @param {TinCan.Agent} cfg.agent Agent in document identifier\n            @param {Function} [cfg.callback] Callback to execute on completion\n            @param {Object} [cfg.requestHeaders] Optional object containing additional headers to add to request\n        */\n        dropAgentProfile: function (key, cfg) {\n            this.log(\"dropAgentProfile\");\n            var requestParams,\n                requestCfg,\n                requestHeaders;\n\n            requestHeaders = cfg.requestHeaders || {};\n\n            requestParams = {\n                profileId: key\n            };\n            requestCfg = {\n                method: \"DELETE\",\n                params: requestParams,\n                headers: requestHeaders\n            };\n\n            if (this.version === \"0.9\") {\n                requestCfg.url = \"actors/profile\";\n                requestParams.actor = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            else {\n                requestCfg.url = \"agents/profile\";\n                requestParams.agent = JSON.stringify(cfg.agent.asVersion(this.version));\n            }\n            if (typeof cfg.callback !== \"undefined\") {\n                requestCfg.callback = cfg.callback;\n            }\n\n            return this.sendRequest(requestCfg);\n        }\n    };\n\n    /**\n    Allows client code to determine whether their environment supports synchronous xhr handling\n    @static this is a static property, set by the environment\n    */\n    LRS.syncEnabled = null;\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.AgentAccount\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.AgentAccount\n    @constructor\n    */\n    var AgentAccount = TinCan.AgentAccount = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property homePage\n        @type String\n        */\n        this.homePage = null;\n\n        /**\n        @property name\n        @type String\n        */\n        this.name = null;\n\n        this.init(cfg);\n    };\n    AgentAccount.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"AgentAccount\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"name\",\n                    \"homePage\"\n                ];\n\n            cfg = cfg || {};\n\n            // handle .9 name changes\n            if (typeof cfg.accountServiceHomePage !== \"undefined\") {\n                cfg.homePage = cfg.accountServiceHomePage;\n            }\n            if (typeof cfg.accountName !== \"undefined\") {\n                cfg.name = cfg.accountName;\n            }\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n        },\n\n        toString: function () {\n            this.log(\"toString\");\n            var result = \"\";\n\n            if (this.name !== null || this.homePage !== null) {\n                result += this.name !== null ? this.name : \"-\";\n                result += \":\";\n                result += this.homePage !== null ? this.homePage : \"-\";\n            }\n            else {\n                result = \"AgentAccount: unidentified\";\n            }\n\n            return result;\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion: \" + version);\n            var result = {};\n\n            version = version || TinCan.versions()[0];\n\n            if (version === \"0.9\") {\n                result.accountName = this.name;\n                result.accountServiceHomePage = this.homePage;\n            } else {\n                result.name = this.name;\n                result.homePage = this.homePage;\n            }\n\n            return result;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} AgentAccount\n    @static\n    */\n    AgentAccount.fromJSON = function (acctJSON) {\n        AgentAccount.prototype.log(\"fromJSON\");\n        var _acct = JSON.parse(acctJSON);\n\n        return new AgentAccount(_acct);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Agent\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.Agent\n    @constructor\n    */\n    var Agent = TinCan.Agent = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property name\n        @type String\n        */\n        this.name = null;\n\n        /**\n        @property mbox\n        @type String\n        */\n        this.mbox = null;\n\n        /**\n        @property mbox_sha1sum\n        @type String\n        */\n        this.mbox_sha1sum = null;\n\n        /**\n        @property openid\n        @type String\n        */\n        this.openid = null;\n\n        /**\n        @property account\n        @type TinCan.AgentAccount\n        */\n        this.account = null;\n\n        /**\n        @property degraded\n        @type Boolean\n        @default false\n        */\n        this.degraded = false;\n\n        this.init(cfg);\n    };\n    Agent.prototype = {\n        /**\n        @property objectType\n        @type String\n        @default Agent\n        */\n        objectType: \"Agent\",\n\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"Agent\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"name\",\n                    \"mbox\",\n                    \"mbox_sha1sum\",\n                    \"openid\"\n                ],\n                val\n            ;\n\n            cfg = cfg || {};\n\n            // handle .9 split names and array properties into single interface\n            if (typeof cfg.lastName !== \"undefined\" || typeof cfg.firstName !== \"undefined\") {\n                cfg.name = \"\";\n                if (typeof cfg.firstName !== \"undefined\" && cfg.firstName.length > 0) {\n                    cfg.name = cfg.firstName[0];\n                    if (cfg.firstName.length > 1) {\n                        this.degraded = true;\n                    }\n                }\n\n                if (cfg.name !== \"\") {\n                    cfg.name += \" \";\n                }\n\n                if (typeof cfg.lastName !== \"undefined\" && cfg.lastName.length > 0) {\n                    cfg.name += cfg.lastName[0];\n                    if (cfg.lastName.length > 1) {\n                        this.degraded = true;\n                    }\n                }\n            } else if (typeof cfg.familyName !== \"undefined\" || typeof cfg.givenName !== \"undefined\") {\n                cfg.name = \"\";\n                if (typeof cfg.givenName !== \"undefined\" && cfg.givenName.length > 0) {\n                    cfg.name = cfg.givenName[0];\n                    if (cfg.givenName.length > 1) {\n                        this.degraded = true;\n                    }\n                }\n\n                if (cfg.name !== \"\") {\n                    cfg.name += \" \";\n                }\n\n                if (typeof cfg.familyName !== \"undefined\" && cfg.familyName.length > 0) {\n                    cfg.name += cfg.familyName[0];\n                    if (cfg.familyName.length > 1) {\n                        this.degraded = true;\n                    }\n                }\n            }\n\n            if (typeof cfg.name === \"object\" && cfg.name !== null) {\n                if (cfg.name.length > 1) {\n                    this.degraded = true;\n                }\n                cfg.name = cfg.name[0];\n            }\n            if (typeof cfg.mbox === \"object\" && cfg.mbox !== null) {\n                if (cfg.mbox.length > 1) {\n                    this.degraded = true;\n                }\n                cfg.mbox = cfg.mbox[0];\n            }\n            if (typeof cfg.mbox_sha1sum === \"object\" && cfg.mbox_sha1sum !== null) {\n                if (cfg.mbox_sha1sum.length > 1) {\n                    this.degraded = true;\n                }\n                cfg.mbox_sha1sum = cfg.mbox_sha1sum[0];\n            }\n            if (typeof cfg.openid === \"object\" && cfg.openid !== null) {\n                if (cfg.openid.length > 1) {\n                    this.degraded = true;\n                }\n                cfg.openid = cfg.openid[0];\n            }\n            if (typeof cfg.account === \"object\" && cfg.account !== null && typeof cfg.account.homePage === \"undefined\" && typeof cfg.account.name === \"undefined\") {\n                if (cfg.account.length === 0) {\n                    delete cfg.account;\n                }\n                else {\n                    if (cfg.account.length > 1) {\n                        this.degraded = true;\n                    }\n                    cfg.account = cfg.account[0];\n                }\n            }\n\n            if (cfg.hasOwnProperty(\"account\")) {\n                if (cfg.account instanceof TinCan.AgentAccount) {\n                    this.account = cfg.account;\n                }\n                else {\n                    this.account = new TinCan.AgentAccount (cfg.account);\n                }\n            }\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    val = cfg[directProps[i]];\n                    if (directProps[i] === \"mbox\" && val.indexOf(\"mailto:\") === -1) {\n                        val = \"mailto:\" + val;\n                    }\n                    this[directProps[i]] = val;\n                }\n            }\n        },\n\n        toString: function () {\n            this.log(\"toString\");\n\n            if (this.name !== null) {\n                return this.name;\n            }\n            if (this.mbox !== null) {\n                return this.mbox.replace(\"mailto:\", \"\");\n            }\n            if (this.mbox_sha1sum !== null) {\n                return this.mbox_sha1sum;\n            }\n            if (this.openid !== null) {\n                return this.openid;\n            }\n            if (this.account !== null) {\n                return this.account.toString();\n            }\n\n            return this.objectType + \": unidentified\";\n        },\n\n        /**\n        While a TinCan.Agent instance can store more than one inverse functional identifier\n        this method will always only output one to be compliant with the statement sending\n        specification. Order of preference is: mbox, mbox_sha1sum, openid, account\n\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion: \" + version);\n            var result = {\n                objectType: this.objectType\n            };\n\n            version = version || TinCan.versions()[0];\n\n            if (version === \"0.9\") {\n                if (this.mbox !== null) {\n                    result.mbox = [ this.mbox ];\n                }\n                else if (this.mbox_sha1sum !== null) {\n                    result.mbox_sha1sum = [ this.mbox_sha1sum ];\n                }\n                else if (this.openid !== null) {\n                    result.openid = [ this.openid ];\n                }\n                else if (this.account !== null) {\n                    result.account = [ this.account.asVersion(version) ];\n                }\n\n                if (this.name !== null) {\n                    result.name = [ this.name ];\n                }\n            } else {\n                if (this.mbox !== null) {\n                    result.mbox = this.mbox;\n                }\n                else if (this.mbox_sha1sum !== null) {\n                    result.mbox_sha1sum = this.mbox_sha1sum;\n                }\n                else if (this.openid !== null) {\n                    result.openid = this.openid;\n                }\n                else if (this.account !== null) {\n                    result.account = this.account.asVersion(version);\n                }\n\n                if (this.name !== null) {\n                    result.name = this.name;\n                }\n            }\n\n            return result;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} Agent\n    @static\n    */\n    Agent.fromJSON = function (agentJSON) {\n        Agent.prototype.log(\"fromJSON\");\n        var _agent = JSON.parse(agentJSON);\n\n        return new Agent(_agent);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Group\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.Group\n    @constructor\n    */\n    var Group = TinCan.Group = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property name\n        @type String\n        */\n        this.name = null;\n\n        /**\n        @property mbox\n        @type String\n        */\n        this.mbox = null;\n\n        /**\n        @property mbox_sha1sum\n        @type String\n        */\n        this.mbox_sha1sum = null;\n\n        /**\n        @property openid\n        @type String\n        */\n        this.openid = null;\n\n        /**\n        @property account\n        @type TinCan.AgentAccount\n        */\n        this.account = null;\n\n        /**\n        @property member\n        @type Array\n        */\n        this.member = [];\n\n        this.init(cfg);\n    };\n    Group.prototype = {\n        /**\n        @property objectType\n        @type String\n        @default \"Group\"\n        @static\n        */\n        objectType: \"Group\",\n\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"Group\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i;\n\n            cfg = cfg || {};\n\n            TinCan.Agent.prototype.init.call(this, cfg);\n\n            if (typeof cfg.member !== \"undefined\") {\n                for (i = 0; i < cfg.member.length; i += 1) {\n                    if (cfg.member[i] instanceof TinCan.Agent) {\n                        this.member.push(cfg.member[i]);\n                    }\n                    else {\n                        this.member.push(new TinCan.Agent (cfg.member[i]));\n                    }\n                }\n            }\n        },\n\n        toString: function (lang) {\n            this.log(\"toString\");\n\n            var result = TinCan.Agent.prototype.toString.call(this, lang);\n            if (result !== this.objectType + \": unidentified\") {\n                result = this.objectType + \": \" + result;\n            }\n\n            return result;\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion: \" + version);\n            var result,\n                i\n            ;\n\n            version = version || TinCan.versions()[0];\n\n            result = TinCan.Agent.prototype.asVersion.call(this, version);\n\n            if (this.member.length > 0) {\n                result.member = [];\n                for (i = 0; i < this.member.length; i += 1) {\n                    result.member.push(this.member[i].asVersion(version));\n                }\n            }\n\n            return result;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} Group\n    @static\n    */\n    Group.fromJSON = function (groupJSON) {\n        Group.prototype.log(\"fromJSON\");\n        var _group = JSON.parse(groupJSON);\n\n        return new Group(_group);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Verb\n*/\n(function () {\n    \"use strict\";\n\n    //\n    // this represents the full set of verb values that were\n    // allowed by the .9 spec version, if an object is created with one of\n    // the short forms it will be upconverted to the matching long form,\n    // for local storage and use and if an object is needed in .9 version\n    // consequently down converted\n    //\n    // hopefully this list will never grow (or change) and only the exact\n    // ADL compatible URLs should be matched\n    //\n    var _downConvertMap = {\n        \"http://adlnet.gov/expapi/verbs/experienced\": \"experienced\",\n        \"http://adlnet.gov/expapi/verbs/attended\":    \"attended\",\n        \"http://adlnet.gov/expapi/verbs/attempted\":   \"attempted\",\n        \"http://adlnet.gov/expapi/verbs/completed\":   \"completed\",\n        \"http://adlnet.gov/expapi/verbs/passed\":      \"passed\",\n        \"http://adlnet.gov/expapi/verbs/failed\":      \"failed\",\n        \"http://adlnet.gov/expapi/verbs/answered\":    \"answered\",\n        \"http://adlnet.gov/expapi/verbs/interacted\":  \"interacted\",\n        \"http://adlnet.gov/expapi/verbs/imported\":    \"imported\",\n        \"http://adlnet.gov/expapi/verbs/created\":     \"created\",\n        \"http://adlnet.gov/expapi/verbs/shared\":      \"shared\",\n        \"http://adlnet.gov/expapi/verbs/voided\":      \"voided\"\n    },\n\n    /**\n    @class TinCan.Verb\n    @constructor\n    */\n    Verb = TinCan.Verb = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property id\n        @type String\n        */\n        this.id = null;\n\n        /**\n        @property display\n        @type Object\n        */\n        this.display = null;\n\n        this.init(cfg);\n    };\n    Verb.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"Verb\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"id\",\n                    \"display\"\n                ],\n                prop\n            ;\n\n            if (typeof cfg === \"string\") {\n                this.id = cfg;\n                this.display = {\n                    und: this.id\n                };\n\n                //If simple string like \"attempted\" was passed in (0.9 verbs), \n                //upconvert the ID to the 0.95 ADL version\n                for (prop in _downConvertMap) {\n                    if (_downConvertMap.hasOwnProperty(prop) && _downConvertMap[prop] === cfg) {\n                        this.id = prop;\n                        break;\n                    }\n                }\n            }\n            else {\n                cfg = cfg || {};\n\n                for (i = 0; i < directProps.length; i += 1) {\n                    if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                        this[directProps[i]] = cfg[directProps[i]];\n                    }\n                }\n\n                if (this.display === null && typeof _downConvertMap[this.id] !== \"undefined\") {\n                    this.display = {\n                        \"und\": _downConvertMap[this.id]\n                    };\n                }\n            }\n        },\n\n        /**\n        @method toString\n        @return {String} String representation of the verb\n        */\n        toString: function (lang) {\n            this.log(\"toString\");\n\n            if (this.display !== null) {\n                return this.getLangDictionaryValue(\"display\", lang);\n            }\n\n            return this.id;\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result;\n\n            version = version || TinCan.versions()[0];\n\n            if (version === \"0.9\") {\n                result = _downConvertMap[this.id];\n            }\n            else {\n                result = {\n                    id: this.id\n                };\n                if (this.display !== null) {\n                    result.display = this.display;\n                }\n            }\n\n            return result;\n        },\n\n        /**\n        See {{#crossLink \"TinCan.Utils/getLangDictionaryValue\"}}{{/crossLink}}\n\n        @method getLangDictionaryValue\n        */\n        getLangDictionaryValue: TinCan.Utils.getLangDictionaryValue\n    };\n\n    /**\n    @method fromJSON\n    @param {String} verbJSON String of JSON representing the verb\n    @return {Object} Verb\n    @static\n    */\n    Verb.fromJSON = function (verbJSON) {\n        Verb.prototype.log(\"fromJSON\");\n        var _verb = JSON.parse(verbJSON);\n\n        return new Verb(_verb);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Result\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.Result\n    @constructor\n    */\n    var Result = TinCan.Result = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property score\n        @type TinCan.Score|null\n        */\n        this.score = null;\n\n        /**\n        @property success\n        @type Boolean|null\n        */\n        this.success = null;\n\n        /**\n        @property completion\n        @type Boolean|null\n        */\n        this.completion = null;\n\n        /**\n        @property duration\n        @type String|null\n        */\n        this.duration = null;\n\n        /**\n        @property response\n        @type String|null\n        */\n        this.response = null;\n\n        /**\n        @property extensions\n        @type Object|null\n        */\n        this.extensions = null;\n\n        this.init(cfg);\n    };\n    Result.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"Result\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n\n            var i,\n                directProps = [\n                    \"completion\",\n                    \"duration\",\n                    \"extensions\",\n                    \"response\",\n                    \"success\"\n                ]\n            ;\n\n            cfg = cfg || {};\n\n            if (cfg.hasOwnProperty(\"score\") && cfg.score !== null) {\n                if (cfg.score instanceof TinCan.Score) {\n                    this.score = cfg.score;\n                }\n                else {\n                    this.score = new TinCan.Score (cfg.score);\n                }\n            }\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n\n            // 0.9 used a string, store it internally as a bool\n            if (this.completion === \"Completed\") {\n                this.completion = true;\n            }\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result = {},\n                optionalDirectProps = [\n                    \"success\",\n                    \"duration\",\n                    \"response\",\n                    \"extensions\"\n                ],\n                optionalObjProps = [\n                    \"score\"\n                ],\n                i;\n\n            version = version || TinCan.versions()[0];\n\n            for (i = 0; i < optionalDirectProps.length; i += 1) {\n                if (this[optionalDirectProps[i]] !== null) {\n                    result[optionalDirectProps[i]] = this[optionalDirectProps[i]];\n                }\n            }\n            for (i = 0; i < optionalObjProps.length; i += 1) {\n                if (this[optionalObjProps[i]] !== null) {\n                    result[optionalObjProps[i]] = this[optionalObjProps[i]].asVersion(version);\n                }\n            }\n            if (this.completion !== null) {\n                if (version === \"0.9\") {\n                    if (this.completion) {\n                        result.completion = \"Completed\";\n                    }\n                }\n                else {\n                    result.completion = this.completion;\n                }\n            }\n\n            return result;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} Result\n    @static\n    */\n    Result.fromJSON = function (resultJSON) {\n        Result.prototype.log(\"fromJSON\");\n        var _result = JSON.parse(resultJSON);\n\n        return new Result(_result);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Score\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.Score\n    @constructor\n    */\n    var Score = TinCan.Score = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property scaled\n        @type String\n        */\n        this.scaled = null;\n\n        /**\n        @property raw\n        @type String\n        */\n        this.raw = null;\n\n        /**\n        @property min\n        @type String\n        */\n        this.min = null;\n\n        /**\n        @property max\n        @type String\n        */\n        this.max = null;\n\n        this.init(cfg);\n    };\n    Score.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"Score\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n\n            var i,\n                directProps = [\n                    \"scaled\",\n                    \"raw\",\n                    \"min\",\n                    \"max\"\n                ]\n            ;\n\n            cfg = cfg || {};\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result = {},\n                optionalDirectProps = [\n                    \"scaled\",\n                    \"raw\",\n                    \"min\",\n                    \"max\"\n                ],\n                i;\n\n            version = version || TinCan.versions()[0];\n\n            for (i = 0; i < optionalDirectProps.length; i += 1) {\n                if (this[optionalDirectProps[i]] !== null) {\n                    result[optionalDirectProps[i]] = this[optionalDirectProps[i]];\n                }\n            }\n\n            return result;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} Score\n    @static\n    */\n    Score.fromJSON = function (scoreJSON) {\n        Score.prototype.log(\"fromJSON\");\n        var _score = JSON.parse(scoreJSON);\n\n        return new Score(_score);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.InteractionComponent\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.InteractionComponent\n    @constructor\n    */\n    var InteractionComponent = TinCan.InteractionComponent = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property id\n        @type String\n        */\n        this.id = null;\n\n        /**\n        @property description\n        @type Object\n        */\n        this.description = null;\n\n        this.init(cfg);\n    };\n    InteractionComponent.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"InteractionComponent\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"id\",\n                    \"description\"\n                ]\n            ;\n\n            cfg = cfg || {};\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result = {\n                    id: this.id\n                },\n                optionalDirectProps = [\n                    \"description\"\n                ],\n                i,\n                prop;\n\n            version = version || TinCan.versions()[0];\n\n            for (i = 0; i < optionalDirectProps.length; i += 1) {\n                prop = optionalDirectProps[i];\n                if (this[prop] !== null) {\n                    result[prop] = this[prop];\n                }\n            }\n\n            return result;\n        },\n\n        /**\n        See {{#crossLink \"TinCan.Utils/getLangDictionaryValue\"}}{{/crossLink}}\n\n        @method getLangDictionaryValue\n        */\n        getLangDictionaryValue: TinCan.Utils.getLangDictionaryValue\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} InteractionComponent\n    @static\n    */\n    InteractionComponent.fromJSON = function (icJSON) {\n        InteractionComponent.prototype.log(\"fromJSON\");\n        var _ic = JSON.parse(icJSON);\n\n        return new InteractionComponent(_ic);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.ActivityDefinition\n**/\n(function () {\n    \"use strict\";\n\n    //\n    // this represents the full set of activity definition types that were\n    // allowed by the .9 spec version, if an object is created with one of\n    // the short forms it will be upconverted to the matching long form,\n    // for local storage and use and if an object is needed in .9 version\n    // consequently down converted\n    //\n    // hopefully this list will never grow (or change) and only the exact\n    // ADL compatible URLs should be matched\n    //\n    var _downConvertMap = {\n        \"http://adlnet.gov/expapi/activities/course\": \"course\",\n        \"http://adlnet.gov/expapi/activities/module\": \"module\",\n        \"http://adlnet.gov/expapi/activities/meeting\": \"meeting\",\n        \"http://adlnet.gov/expapi/activities/media\": \"media\",\n        \"http://adlnet.gov/expapi/activities/performance\": \"performance\",\n        \"http://adlnet.gov/expapi/activities/simulation\": \"simulation\",\n        \"http://adlnet.gov/expapi/activities/assessment\": \"assessment\",\n        \"http://adlnet.gov/expapi/activities/interaction\": \"interaction\",\n        \"http://adlnet.gov/expapi/activities/cmi.interaction\": \"cmi.interaction\",\n        \"http://adlnet.gov/expapi/activities/question\": \"question\",\n        \"http://adlnet.gov/expapi/activities/objective\": \"objective\",\n        \"http://adlnet.gov/expapi/activities/link\": \"link\"\n    },\n\n    /**\n    @class TinCan.ActivityDefinition\n    @constructor\n    */\n    ActivityDefinition = TinCan.ActivityDefinition = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property name\n        @type Object\n        */\n        this.name = null;\n\n        /**\n        @property description\n        @type Object\n        */\n        this.description = null;\n\n        /**\n        @property type\n        @type String\n        */\n        this.type = null;\n\n        /**\n        @property moreInfo\n        @type String\n        */\n        this.moreInfo = null;\n\n        /**\n        @property extensions\n        @type Object\n        */\n        this.extensions = null;\n\n        /**\n        @property interactionType\n        @type String\n        */\n        this.interactionType = null;\n\n        /**\n        @property correctResponsesPattern\n        @type Array\n        */\n        this.correctResponsesPattern = null;\n\n        /**\n        @property choices\n        @type Array\n        */\n        this.choices = null;\n\n        /**\n        @property scale\n        @type Array\n        */\n        this.scale = null;\n\n        /**\n        @property source\n        @type Array\n        */\n        this.source = null;\n\n        /**\n        @property target\n        @type Array\n        */\n        this.target = null;\n\n        /**\n        @property steps\n        @type Array\n        */\n        this.steps = null;\n\n        this.init(cfg);\n    };\n    ActivityDefinition.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"ActivityDefinition\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n\n            var i,\n                j,\n                prop,\n                directProps = [\n                    \"name\",\n                    \"description\",\n                    \"moreInfo\",\n                    \"extensions\",\n                    \"correctResponsesPattern\"\n                ],\n                interactionComponentProps = []\n            ;\n\n            cfg = cfg || {};\n\n            if (cfg.hasOwnProperty(\"type\") && cfg.type !== null) {\n                // TODO: verify type is URI?\n                for (prop in _downConvertMap) {\n                    if (_downConvertMap.hasOwnProperty(prop) && _downConvertMap[prop] === cfg.type) {\n                        cfg.type = _downConvertMap[prop];\n                    }\n                }\n                this.type = cfg.type;\n            }\n\n            if (cfg.hasOwnProperty(\"interactionType\") && cfg.interactionType !== null) {\n                // TODO: verify interaction type in acceptable set?\n                this.interactionType = cfg.interactionType;\n                if (cfg.interactionType === \"choice\" || cfg.interactionType === \"sequencing\") {\n                    interactionComponentProps.push(\"choices\");\n                }\n                else if (cfg.interactionType === \"likert\") {\n                    interactionComponentProps.push(\"scale\");\n                }\n                else if (cfg.interactionType === \"matching\") {\n                    interactionComponentProps.push(\"source\");\n                    interactionComponentProps.push(\"target\");\n                }\n                else if (cfg.interactionType === \"performance\") {\n                    interactionComponentProps.push(\"steps\");\n                }\n\n                if (interactionComponentProps.length > 0) {\n                    for (i = 0; i < interactionComponentProps.length; i += 1) {\n                        prop = interactionComponentProps[i];\n                        if (cfg.hasOwnProperty(prop) && cfg[prop] !== null) {\n                            this[prop] = [];\n                            for (j = 0; j < cfg[prop].length; j += 1) {\n                                if (cfg[prop][j] instanceof TinCan.InteractionComponent) {\n                                    this[prop].push(cfg[prop][j]);\n                                } else {\n                                    this[prop].push(\n                                        new TinCan.InteractionComponent (\n                                            cfg[prop][j]\n                                        )\n                                    );\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n        },\n\n        /**\n        @method toString\n        @return {String} String representation of the definition\n        */\n        toString: function (lang) {\n            this.log(\"toString\");\n\n            if (this.name !== null) {\n                return this.getLangDictionaryValue(\"name\", lang);\n            }\n\n            if (this.description !== null) {\n                return this.getLangDictionaryValue(\"description\", lang);\n            }\n\n            return \"\";\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result = {},\n                directProps = [\n                    \"name\",\n                    \"description\",\n                    \"interactionType\",\n                    \"correctResponsesPattern\",\n                    \"extensions\"\n                ],\n                interactionComponentProps = [\n                    \"choices\",\n                    \"scale\",\n                    \"source\",\n                    \"target\",\n                    \"steps\"\n                ],\n                i,\n                j,\n                prop\n            ;\n\n            version = version || TinCan.versions()[0];\n\n            if (this.type !== null) {\n                if (version === \"0.9\") {\n                    result.type = _downConvertMap[this.type];\n                }\n                else {\n                    result.type = this.type;\n                }\n            }\n\n            for (i = 0; i < directProps.length; i += 1) {\n                prop = directProps[i];\n                if (this[prop] !== null) {\n                    result[prop] = this[prop];\n                }\n            }\n\n            for (i = 0; i < interactionComponentProps.length; i += 1) {\n                prop = interactionComponentProps[i];\n                if (this[prop] !== null) {\n                    result[prop] = [];\n                    for (j = 0; j < this[prop].length; j += 1) {\n                        result[prop].push(\n                            this[prop][j].asVersion(version)\n                        );\n                    }\n                }\n            }\n\n            if (version.indexOf(\"0.9\") !== 0) {\n                if (this.moreInfo !== null) {\n                    result.moreInfo = this.moreInfo;\n                }\n            }\n\n            return result;\n        },\n\n        /**\n        See {{#crossLink \"TinCan.Utils/getLangDictionaryValue\"}}{{/crossLink}}\n\n        @method getLangDictionaryValue\n        */\n        getLangDictionaryValue: TinCan.Utils.getLangDictionaryValue\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} ActivityDefinition\n    @static\n    */\n    ActivityDefinition.fromJSON = function (definitionJSON) {\n        ActivityDefinition.prototype.log(\"fromJSON\");\n        var _definition = JSON.parse(definitionJSON);\n\n        return new ActivityDefinition(_definition);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Activity\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.Activity\n    @constructor\n    */\n    var Activity = TinCan.Activity = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property objectType\n        @type String\n        @default Activity\n        */\n        this.objectType = \"Activity\";\n\n        /**\n        @property id\n        @type String\n        */\n        this.id = null;\n\n        /**\n        @property definition\n        @type TinCan.ActivityDefinition\n        */\n        this.definition = null;\n\n        this.init(cfg);\n    };\n    Activity.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"Activity\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n\n            var i,\n                directProps = [\n                    \"id\"\n                ]\n            ;\n\n            cfg = cfg || {};\n\n            if (cfg.hasOwnProperty(\"definition\")) {\n                if (cfg.definition instanceof TinCan.ActivityDefinition) {\n                    this.definition = cfg.definition;\n                } else {\n                    this.definition = new TinCan.ActivityDefinition (cfg.definition);\n                }\n            }\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n        },\n\n        /**\n        @method toString\n        @return {String} String representation of the activity\n        */\n        toString: function (lang) {\n            this.log(\"toString\");\n            var defString = \"\";\n\n            if (this.definition !== null) {\n                defString = this.definition.toString(lang);\n                if (defString !== \"\") {\n                    return defString;\n                }\n            }\n\n            if (this.id !== null) {\n                return this.id;\n            }\n\n            return \"Activity: unidentified\";\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result = {\n                id: this.id,\n                objectType: this.objectType\n            };\n\n            version = version || TinCan.versions()[0];\n\n            if (this.definition !== null) {\n                result.definition = this.definition.asVersion(version);\n            }\n\n            return result;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} Activity\n    @static\n    */\n    Activity.fromJSON = function (activityJSON) {\n        Activity.prototype.log(\"fromJSON\");\n        var _activity = JSON.parse(activityJSON);\n\n        return new Activity(_activity);\n    };\n}());\n\n/*\n    Copyright 2013 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.ContextActivities\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.ContextActivities\n    @constructor\n    */\n    var ContextActivities = TinCan.ContextActivities = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property category\n        @type Array\n        */\n        this.category = null;\n\n        /**\n        @property parent\n        @type Array\n        */\n        this.parent = null;\n\n        /**\n        @property grouping\n        @type Array\n        */\n        this.grouping = null;\n\n        /**\n        @property other\n        @type Array\n        */\n        this.other = null;\n\n        this.init(cfg);\n    };\n    ContextActivities.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"ContextActivities\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n\n            var i,\n                j,\n                objProps = [\n                    \"category\",\n                    \"parent\",\n                    \"grouping\",\n                    \"other\"\n                ],\n                prop,\n                val\n            ;\n\n            cfg = cfg || {};\n\n            for (i = 0; i < objProps.length; i += 1) {\n                prop = objProps[i];\n                if (cfg.hasOwnProperty(prop) && cfg[prop] !== null) {\n                    if (Object.prototype.toString.call(cfg[prop]) === \"[object Array]\") {\n                        for (j = 0; j < cfg[prop].length; j += 1) {\n                            this.add(prop, cfg[prop][j]);\n                        }\n                    }\n                    else {\n                        val = cfg[prop];\n\n                        this.add(prop, val);\n                    }\n                }\n            }\n        },\n\n        /**\n        @method add\n        @param String key Property to add value to one of \"category\", \"parent\", \"grouping\", \"other\"\n        @return Number index where the value was added\n        */\n        add: function (key, val) {\n            if (key !== \"category\" && key !== \"parent\" && key !== \"grouping\" && key !== \"other\") {\n                return;\n            }\n\n            if (this[key] === null) {\n                this[key] = [];\n            }\n\n            if (! (val instanceof TinCan.Activity)) {\n                val = typeof val === \"string\" ? { id: val } : val;\n                val = new TinCan.Activity (val);\n            }\n\n            this[key].push(val);\n\n            return this[key].length - 1;\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result = {},\n                optionalObjProps = [\n                    \"parent\",\n                    \"grouping\",\n                    \"other\"\n                ],\n                i,\n                j;\n\n            version = version || TinCan.versions()[0];\n\n            for (i = 0; i < optionalObjProps.length; i += 1) {\n                if (this[optionalObjProps[i]] !== null && this[optionalObjProps[i]].length > 0) {\n                    if (version === \"0.9\" || version === \"0.95\") {\n                        if (this[optionalObjProps[i]].length > 1) {\n                            // TODO: exception?\n                            this.log(\"[warning] version does not support multiple values in: \" + optionalObjProps[i]);\n                        }\n\n                        result[optionalObjProps[i]] = this[optionalObjProps[i]][0].asVersion(version);\n                    }\n                    else {\n                        result[optionalObjProps[i]] = [];\n                        for (j = 0; j < this[optionalObjProps[i]].length; j += 1) {\n                            result[optionalObjProps[i]].push(\n                                this[optionalObjProps[i]][j].asVersion(version)\n                            );\n                        }\n                    }\n                }\n            }\n            if (this.category !== null && this.category.length > 0) {\n                if (version === \"0.9\" || version === \"0.95\") {\n                    this.log(\"[error] version does not support the 'category' property: \" + version);\n                    throw new Error(version + \" does not support the 'category' property\");\n                }\n                else {\n                    result.category = [];\n                    for (i = 0; i < this.category.length; i += 1) {\n                        result.category.push(this.category[i].asVersion(version));\n                    }\n                }\n            }\n\n            return result;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} ContextActivities\n    @static\n    */\n    ContextActivities.fromJSON = function (contextActivitiesJSON) {\n        ContextActivities.prototype.log(\"fromJSON\");\n        var _contextActivities = JSON.parse(contextActivitiesJSON);\n\n        return new ContextActivities(_contextActivities);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Context\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.Context\n    @constructor\n    */\n    var Context = TinCan.Context = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property registration\n        @type String|null\n        */\n        this.registration = null;\n\n        /**\n        @property instructor\n        @type TinCan.Agent|TinCan.Group|null\n        */\n        this.instructor = null;\n\n        /**\n        @property team\n        @type TinCan.Agent|TinCan.Group|null\n        */\n        this.team = null;\n\n        /**\n        @property contextActivities\n        @type ContextActivities|null\n        */\n        this.contextActivities = null;\n\n        /**\n        @property revision\n        @type String|null\n        */\n        this.revision = null;\n\n        /**\n        @property platform\n        @type Object|null\n        */\n        this.platform = null;\n\n        /**\n        @property language\n        @type String|null\n        */\n        this.language = null;\n\n        /**\n        @property statement\n        @type StatementRef|null\n        */\n        this.statement = null;\n\n        /**\n        @property extensions\n        @type String\n        */\n        this.extensions = null;\n\n        this.init(cfg);\n    };\n    Context.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"Context\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n\n            var i,\n                directProps = [\n                    \"registration\",\n                    \"revision\",\n                    \"platform\",\n                    \"language\",\n                    \"extensions\"\n                ],\n                agentGroupProps = [\n                    \"instructor\",\n                    \"team\"\n                ],\n                prop,\n                val\n            ;\n\n            cfg = cfg || {};\n\n            for (i = 0; i < directProps.length; i += 1) {\n                prop = directProps[i];\n                if (cfg.hasOwnProperty(prop) && cfg[prop] !== null) {\n                    this[prop] = cfg[prop];\n                }\n            }\n            for (i = 0; i < agentGroupProps.length; i += 1) {\n                prop = agentGroupProps[i];\n                if (cfg.hasOwnProperty(prop) && cfg[prop] !== null) {\n                    val = cfg[prop];\n\n                    if (typeof val.objectType === \"undefined\" || val.objectType === \"Person\") {\n                        val.objectType = \"Agent\";\n                    }\n\n                    if (val.objectType === \"Agent\" && ! (val instanceof TinCan.Agent)) {\n                        val = new TinCan.Agent (val);\n                    } else if (val.objectType === \"Group\" && ! (val instanceof TinCan.Group)) {\n                        val = new TinCan.Group (val);\n                    }\n\n                    this[prop] = val;\n                }\n            }\n\n            if (cfg.hasOwnProperty(\"contextActivities\") && cfg.contextActivities !== null) {\n                if (cfg.contextActivities instanceof TinCan.ContextActivities) {\n                    this.contextActivities = cfg.contextActivities;\n                }\n                else {\n                    this.contextActivities = new TinCan.ContextActivities(cfg.contextActivities);\n                }\n            }\n\n            if (cfg.hasOwnProperty(\"statement\") && cfg.statement !== null) {\n                if (cfg.statement instanceof TinCan.StatementRef) {\n                    this.statement = cfg.statement;\n                }\n                else if (cfg.statement instanceof TinCan.SubStatement) {\n                    this.statement = cfg.statement;\n                }\n                else if (cfg.statement.objectType === \"StatementRef\") {\n                    this.statement = new TinCan.StatementRef(cfg.statement);\n                }\n                else if (cfg.statement.objectType === \"SubStatement\") {\n                    this.statement = new TinCan.SubStatement(cfg.statement);\n                }\n                else {\n                    this.log(\"Unable to parse statement.context.statement property.\");\n                }\n            }\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result = {},\n                optionalDirectProps = [\n                    \"registration\",\n                    \"revision\",\n                    \"platform\",\n                    \"language\",\n                    \"extensions\"\n                ],\n                optionalObjProps = [\n                    \"instructor\",\n                    \"team\",\n                    \"contextActivities\",\n                    \"statement\"\n                ],\n                i;\n\n            version = version || TinCan.versions()[0];\n\n            if (this.statement instanceof TinCan.SubStatement && version !== \"0.9\" && version !== \"0.95\") {\n                this.log(\"[error] version does not support SubStatements in the 'statement' property: \" + version);\n                throw new Error(version + \" does not support SubStatements in the 'statement' property\");\n            }\n\n            for (i = 0; i < optionalDirectProps.length; i += 1) {\n                if (this[optionalDirectProps[i]] !== null) {\n                    result[optionalDirectProps[i]] = this[optionalDirectProps[i]];\n                }\n            }\n            for (i = 0; i < optionalObjProps.length; i += 1) {\n                if (this[optionalObjProps[i]] !== null) {\n                    result[optionalObjProps[i]] = this[optionalObjProps[i]].asVersion(version);\n                }\n            }\n\n            return result;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} Context\n    @static\n    */\n    Context.fromJSON = function (contextJSON) {\n        Context.prototype.log(\"fromJSON\");\n        var _context = JSON.parse(contextJSON);\n\n        return new Context(_context);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.StatementRef\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.StatementRef\n    @constructor\n    @param {Object} [cfg] Configuration used to initialize.\n        @param {Object} [cfg.id] ID of statement to reference\n    **/\n    var StatementRef = TinCan.StatementRef = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property id\n        @type String\n        */\n        this.id = null;\n\n        this.init(cfg);\n    };\n\n    StatementRef.prototype = {\n        /**\n        @property objectType\n        @type String\n        @default Agent\n        */\n        objectType: \"StatementRef\",\n\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"StatementRef\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize (see constructor)\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"id\"\n                ];\n\n            cfg = cfg || {};\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n        },\n\n        /**\n        @method toString\n        @return {String} String representation of the statement\n        */\n        toString: function () {\n            this.log(\"toString\");\n            return this.id;\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result = {\n                objectType: this.objectType,\n                id: this.id\n            };\n\n            if (version === \"0.9\") {\n                result.objectType = \"Statement\";\n            }\n\n            return result;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} StatementRef\n    @static\n    */\n    StatementRef.fromJSON = function (stRefJSON) {\n        StatementRef.prototype.log(\"fromJSON\");\n        var _stRef = JSON.parse(stRefJSON);\n\n        return new StatementRef(_stRef);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.SubStatement\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.SubStatement\n    @constructor\n    @param {Object} [cfg] Configuration used to initialize.\n        @param {TinCan.Agent} [cfg.actor] Actor of statement\n        @param {TinCan.Verb} [cfg.verb] Verb of statement\n        @param {TinCan.Activity|TinCan.Agent} [cfg.object] Alias for 'target'\n        @param {TinCan.Activity|TinCan.Agent} [cfg.target] Object of statement\n        @param {TinCan.Result} [cfg.result] Statement Result\n        @param {TinCan.Context} [cfg.context] Statement Context\n    **/\n    var SubStatement = TinCan.SubStatement = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property actor\n        @type Object\n        */\n        this.actor = null;\n\n        /**\n        @property verb\n        @type Object\n        */\n        this.verb = null;\n\n        /**\n        @property target\n        @type Object\n        */\n        this.target = null;\n\n        /**\n        @property result\n        @type Object\n        */\n        this.result = null;\n\n        /**\n        @property context\n        @type Object\n        */\n        this.context = null;\n\n        /**\n        @property timestamp\n        @type Date\n        */\n        this.timestamp = null;\n\n        this.init(cfg);\n    };\n\n    SubStatement.prototype = {\n        /**\n        @property objectType\n        @type String\n        @default Agent\n        */\n        objectType: \"SubStatement\",\n\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"SubStatement\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize (see constructor)\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"timestamp\"\n                ];\n\n            cfg = cfg || {};\n\n            if (cfg.hasOwnProperty(\"object\")) {\n                cfg.target = cfg.object;\n            }\n\n            if (cfg.hasOwnProperty(\"actor\")) {\n                if (typeof cfg.actor.objectType === \"undefined\" || cfg.actor.objectType === \"Person\") {\n                    cfg.actor.objectType = \"Agent\";\n                }\n\n                if (cfg.actor.objectType === \"Agent\") {\n                    if (cfg.actor instanceof TinCan.Agent) {\n                        this.actor = cfg.actor;\n                    } else {\n                        this.actor = new TinCan.Agent (cfg.actor);\n                    }\n                } else if (cfg.actor.objectType === \"Group\") {\n                    if (cfg.actor instanceof TinCan.Group) {\n                        this.actor = cfg.actor;\n                    } else {\n                        this.actor = new TinCan.Group (cfg.actor);\n                    }\n                }\n            }\n            if (cfg.hasOwnProperty(\"verb\")) {\n                if (cfg.verb instanceof TinCan.Verb) {\n                    this.verb = cfg.verb;\n                } else {\n                    this.verb = new TinCan.Verb (cfg.verb);\n                }\n            }\n            if (cfg.hasOwnProperty(\"target\")) {\n                if (cfg.target instanceof TinCan.Activity ||\n                    cfg.target instanceof TinCan.Agent ||\n                    cfg.target instanceof TinCan.Group ||\n                    cfg.target instanceof TinCan.SubStatement ||\n                    cfg.target instanceof TinCan.StatementRef\n                ) {\n                    this.target = cfg.target;\n                } else {\n                    if (typeof cfg.target.objectType === \"undefined\") {\n                        cfg.target.objectType = \"Activity\";\n                    }\n\n                    if (cfg.target.objectType === \"Activity\") {\n                        this.target = new TinCan.Activity (cfg.target);\n                    } else if (cfg.target.objectType === \"Agent\") {\n                        this.target = new TinCan.Agent (cfg.target);\n                    } else if (cfg.target.objectType === \"Group\") {\n                        this.target = new TinCan.Group (cfg.target);\n                    } else if (cfg.target.objectType === \"SubStatement\") {\n                        this.target = new TinCan.SubStatement (cfg.target);\n                    } else if (cfg.target.objectType === \"StatementRef\") {\n                        this.target = new TinCan.StatementRef (cfg.target);\n                    } else {\n                        this.log(\"Unrecognized target type: \" + cfg.target.objectType);\n                    }\n                }\n            }\n            if (cfg.hasOwnProperty(\"result\")) {\n                if (cfg.result instanceof TinCan.Result) {\n                    this.result = cfg.result;\n                } else {\n                    this.result = new TinCan.Result (cfg.result);\n                }\n            }\n            if (cfg.hasOwnProperty(\"context\")) {\n                if (cfg.context instanceof TinCan.Context) {\n                    this.context = cfg.context;\n                } else {\n                    this.context = new TinCan.Context (cfg.context);\n                }\n            }\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n        },\n\n        /**\n        @method toString\n        @return {String} String representation of the statement\n        */\n        toString: function (lang) {\n            this.log(\"toString\");\n            return (this.actor !== null ? this.actor.toString(lang) : \"\") +\n                    \" \" +\n                    (this.verb !== null ? this.verb.toString(lang) : \"\") +\n                    \" \" +\n                    (this.target !== null ? this.target.toString(lang) : \"\");\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result,\n                optionalDirectProps = [\n                    \"timestamp\"\n                ],\n                optionalObjProps = [\n                    \"actor\",\n                    \"verb\",\n                    \"result\",\n                    \"context\"\n                ],\n                i;\n\n            result = {\n                objectType: this.objectType\n            };\n            version = version || TinCan.versions()[0];\n\n            for (i = 0; i < optionalDirectProps.length; i += 1) {\n                if (this[optionalDirectProps[i]] !== null) {\n                    result[optionalDirectProps[i]] = this[optionalDirectProps[i]];\n                }\n            }\n            for (i = 0; i < optionalObjProps.length; i += 1) {\n                if (this[optionalObjProps[i]] !== null) {\n                    result[optionalObjProps[i]] = this[optionalObjProps[i]].asVersion(version);\n                }\n            }\n            if (this.target !== null) {\n                result.object = this.target.asVersion(version);\n            }\n\n            if (version === \"0.9\") {\n                result.objectType = \"Statement\";\n            }\n\n            return result;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} SubStatement\n    @static\n    */\n    SubStatement.fromJSON = function (subStJSON) {\n        SubStatement.prototype.log(\"fromJSON\");\n        var _subSt = JSON.parse(subStJSON);\n\n        return new SubStatement(_subSt);\n    };\n}());\n\n/*\n    Copyright 2012-3 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Statement\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.Statement\n    @constructor\n    @param {Object} [cfg] Values to set in properties\n        @param {String} [cfg.id] Statement ID (UUID)\n        @param {TinCan.Agent} [cfg.actor] Actor of statement\n        @param {TinCan.Verb} [cfg.verb] Verb of statement\n        @param {TinCan.Activity|TinCan.Agent|TinCan.Group|TinCan.StatementRef|TinCan.SubStatement} [cfg.object] Alias for 'target'\n        @param {TinCan.Activity|TinCan.Agent|TinCan.Group|TinCan.StatementRef|TinCan.SubStatement} [cfg.target] Object of statement\n        @param {TinCan.Result} [cfg.result] Statement Result\n        @param {TinCan.Context} [cfg.context] Statement Context\n        @param {TinCan.Agent} [cfg.authority] Statement Authority\n        @param {TinCan.Attachment} [cfg.attachments] Statement Attachments\n        @param {String} [cfg.timestamp] ISO8601 Date/time value\n        @param {String} [cfg.stored] ISO8601 Date/time value\n        @param {String} [cfg.version] Version of the statement (post 0.95)\n    @param {Object} [initCfg] Configuration of initialization process\n        @param {Integer} [initCfg.storeOriginal] Whether to store a JSON stringified version\n            of the original options object, pass number of spaces used for indent\n        @param {Boolean} [initCfg.doStamp] Whether to automatically set the 'id' and 'timestamp'\n            properties (default: true)\n    **/\n    var Statement = TinCan.Statement = function (cfg, initCfg) {\n        this.log(\"constructor\");\n\n        // check for true value for API backwards compat\n        if (typeof initCfg === \"number\") {\n            initCfg = {\n                storeOriginal: initCfg\n            };\n        } else {\n            initCfg = initCfg || {};\n        }\n        if (typeof initCfg.storeOriginal === \"undefined\") {\n            initCfg.storeOriginal = null;\n        }\n        if (typeof initCfg.doStamp === \"undefined\") {\n            initCfg.doStamp = true;\n        }\n\n        /**\n        @property id\n        @type String\n        */\n        this.id = null;\n\n        /**\n        @property actor\n        @type TinCan.Agent|TinCan.Group|null\n        */\n        this.actor = null;\n\n        /**\n        @property verb\n        @type TinCan.Verb|null\n        */\n        this.verb = null;\n\n        /**\n        @property target\n        @type TinCan.Activity|TinCan.Agent|TinCan.Group|TinCan.StatementRef|TinCan.SubStatement|null\n        */\n        this.target = null;\n\n        /**\n        @property result\n        @type Object\n        */\n        this.result = null;\n\n        /**\n        @property context\n        @type Object\n        */\n        this.context = null;\n\n        /**\n        @property timestamp\n        @type String\n        */\n        this.timestamp = null;\n\n        /**\n        @property stored\n        @type String\n        */\n        this.stored = null;\n\n        /**\n        @property authority\n        @type TinCan.Agent|null\n        */\n        this.authority = null;\n\n        /**\n        @property attachments\n        @type Array of TinCan.Attachment\n        */\n        this.attachments = null;\n\n        /**\n        @property version\n        @type String\n        */\n        this.version = null;\n\n        /**\n        @property degraded\n        @type Boolean\n        @default false\n        */\n        this.degraded = false;\n\n        /**\n        @property voided\n        @type Boolean\n        @default null\n        @deprecated\n        */\n        this.voided = null;\n\n        /**\n        @property inProgress\n        @type Boolean\n        @deprecated\n        */\n        this.inProgress = null;\n\n        /**\n        @property originalJSON\n        @type String\n        */\n        this.originalJSON = null;\n\n        this.init(cfg, initCfg);\n    };\n\n    Statement.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"Statement\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [properties] Configuration used to set properties (see constructor)\n        @param {Object} [cfg] Configuration used to initialize (see constructor)\n        */\n        init: function (cfg, initCfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"id\",\n                    \"stored\",\n                    \"timestamp\",\n                    \"version\",\n                    \"inProgress\",\n                    \"voided\"\n                ];\n\n            cfg = cfg || {};\n\n            if (initCfg.storeOriginal) {\n                this.originalJSON = JSON.stringify(cfg, null, initCfg.storeOriginal);\n            }\n\n            if (cfg.hasOwnProperty(\"object\")) {\n                cfg.target = cfg.object;\n            }\n\n            if (cfg.hasOwnProperty(\"actor\")) {\n                if (typeof cfg.actor.objectType === \"undefined\" || cfg.actor.objectType === \"Person\") {\n                    cfg.actor.objectType = \"Agent\";\n                }\n\n                if (cfg.actor.objectType === \"Agent\") {\n                    if (cfg.actor instanceof TinCan.Agent) {\n                        this.actor = cfg.actor;\n                    } else {\n                        this.actor = new TinCan.Agent (cfg.actor);\n                    }\n                } else if (cfg.actor.objectType === \"Group\") {\n                    if (cfg.actor instanceof TinCan.Group) {\n                        this.actor = cfg.actor;\n                    } else {\n                        this.actor = new TinCan.Group (cfg.actor);\n                    }\n                }\n            }\n            if (cfg.hasOwnProperty(\"authority\")) {\n                if (typeof cfg.authority.objectType === \"undefined\" || cfg.authority.objectType === \"Person\") {\n                    cfg.authority.objectType = \"Agent\";\n                }\n\n                if (cfg.authority.objectType === \"Agent\") {\n                    if (cfg.authority instanceof TinCan.Agent) {\n                        this.authority = cfg.authority;\n                    } else {\n                        this.authority = new TinCan.Agent (cfg.authority);\n                    }\n                } else if (cfg.authority.objectType === \"Group\") {\n                    if (cfg.actor instanceof TinCan.Group) {\n                        this.authority = cfg.authority;\n                    } else {\n                        this.authority = new TinCan.Group (cfg.authority);\n                    }\n                }\n            }\n            if (cfg.hasOwnProperty(\"verb\")) {\n                if (cfg.verb instanceof TinCan.Verb) {\n                    this.verb = cfg.verb;\n                } else {\n                    this.verb = new TinCan.Verb (cfg.verb);\n                }\n            }\n            if (cfg.hasOwnProperty(\"target\")) {\n                if (cfg.target instanceof TinCan.Activity ||\n                    cfg.target instanceof TinCan.Agent ||\n                    cfg.target instanceof TinCan.Group ||\n                    cfg.target instanceof TinCan.SubStatement ||\n                    cfg.target instanceof TinCan.StatementRef\n                ) {\n                    this.target = cfg.target;\n                } else {\n                    if (typeof cfg.target.objectType === \"undefined\") {\n                        cfg.target.objectType = \"Activity\";\n                    }\n\n                    if (cfg.target.objectType === \"Activity\") {\n                        this.target = new TinCan.Activity (cfg.target);\n                    } else if (cfg.target.objectType === \"Agent\") {\n                        this.target = new TinCan.Agent (cfg.target);\n                    } else if (cfg.target.objectType === \"Group\") {\n                        this.target = new TinCan.Group (cfg.target);\n                    } else if (cfg.target.objectType === \"SubStatement\") {\n                        this.target = new TinCan.SubStatement (cfg.target);\n                    } else if (cfg.target.objectType === \"StatementRef\") {\n                        this.target = new TinCan.StatementRef (cfg.target);\n                    } else {\n                        this.log(\"Unrecognized target type: \" + cfg.target.objectType);\n                    }\n                }\n            }\n            if (cfg.hasOwnProperty(\"result\")) {\n                if (cfg.result instanceof TinCan.Result) {\n                    this.result = cfg.result;\n                } else {\n                    this.result = new TinCan.Result (cfg.result);\n                }\n            }\n            if (cfg.hasOwnProperty(\"context\")) {\n                if (cfg.context instanceof TinCan.Context) {\n                    this.context = cfg.context;\n                } else {\n                    this.context = new TinCan.Context (cfg.context);\n                }\n            }\n            if (cfg.hasOwnProperty(\"attachments\") && cfg.attachments !== null) {\n                this.attachments = [];\n                for (i = 0; i < cfg.attachments.length; i += 1) {\n                    if (! (cfg.attachments[i] instanceof TinCan.Attachment)) {\n                        this.attachments.push(new TinCan.Attachment (cfg.attachments[i]));\n                    }\n                    else {\n                        this.attachments.push(cfg.attachments[i]);\n                    }\n                }\n            }\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n\n            if (initCfg.doStamp) {\n                this.stamp();\n            }\n        },\n\n        /**\n        @method toString\n        @return {String} String representation of the statement\n        */\n        toString: function (lang) {\n            this.log(\"toString\");\n            return (this.actor !== null ? this.actor.toString(lang) : \"\") +\n                    \" \" +\n                    (this.verb !== null ? this.verb.toString(lang) : \"\") +\n                    \" \" +\n                    (this.target !== null ? this.target.toString(lang) : \"\");\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result = {},\n                optionalDirectProps = [\n                    \"id\",\n                    \"timestamp\"\n                ],\n                optionalObjProps = [\n                    \"actor\",\n                    \"verb\",\n                    \"result\",\n                    \"context\",\n                    \"authority\"\n                ],\n                i;\n\n            version = version || TinCan.versions()[0];\n\n            for (i = 0; i < optionalDirectProps.length; i += 1) {\n                if (this[optionalDirectProps[i]] !== null) {\n                    result[optionalDirectProps[i]] = this[optionalDirectProps[i]];\n                }\n            }\n            for (i = 0; i < optionalObjProps.length; i += 1) {\n                if (this[optionalObjProps[i]] !== null) {\n                    result[optionalObjProps[i]] = this[optionalObjProps[i]].asVersion(version);\n                }\n            }\n            if (this.target !== null) {\n                result.object = this.target.asVersion(version);\n            }\n\n            if (version === \"0.9\" || version === \"0.95\") {\n                if (this.voided !== null) {\n                    result.voided = this.voided;\n                }\n            }\n            if (version === \"0.9\" && this.inProgress !== null) {\n                result.inProgress = this.inProgress;\n            }\n            if (this.attachments !== null) {\n                if (! (version === \"0.9\" || version === \"0.95\")) {\n                    result.attachments = [];\n                    for (i = 0; i < this.attachments.length; i += 1) {\n                        if (this.attachments[i] instanceof TinCan.Attachment) {\n                            result.attachments.push(this.attachments[i].asVersion(version));\n                        }\n                        else {\n                            result.attachments.push(new TinCan.Attachment(this.attachments[i]).asVersion(version));\n                        }\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        /**\n        Sets 'id' and 'timestamp' properties if not already set\n\n        @method stamp\n        */\n        stamp: function () {\n            this.log(\"stamp\");\n            if (this.id === null) {\n                this.id = TinCan.Utils.getUUID();\n            }\n            if (this.timestamp === null) {\n                this.timestamp = TinCan.Utils.getISODateString(new Date());\n            }\n        },\n\n        /**\n        Checks if the Statement has at least one attachment with content\n\n        @method hasAttachmentsWithContent\n        */\n        hasAttachmentWithContent: function () {\n            this.log(\"hasAttachmentWithContent\");\n            var i;\n\n            if (this.attachments === null) {\n                return false;\n            }\n\n            for (i = 0; i < this.attachments.length; i += 1) {\n                if (this.attachments[i].content !== null) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} Statement\n    @static\n    */\n    Statement.fromJSON = function (stJSON) {\n        Statement.prototype.log(\"fromJSON\");\n        var _st = JSON.parse(stJSON);\n\n        return new Statement(_st);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.StatementsResult\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.StatementsResult\n    @constructor\n    @param {Object} options Configuration used to initialize.\n        @param {Array} options.statements Actor of statement\n        @param {String} options.more URL to fetch more data\n    **/\n    var StatementsResult = TinCan.StatementsResult = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property statements\n        @type Array\n        */\n        this.statements = null;\n\n        /**\n        @property more\n        @type String\n        */\n        this.more = null;\n\n        this.init(cfg);\n    };\n\n    StatementsResult.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"StatementsResult\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n\n            cfg = cfg || {};\n\n            if (cfg.hasOwnProperty(\"statements\")) {\n                this.statements = cfg.statements;\n            }\n            if (cfg.hasOwnProperty(\"more\")) {\n                this.more = cfg.more;\n            }\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} Agent\n    @static\n    */\n    StatementsResult.fromJSON = function (resultJSON) {\n        StatementsResult.prototype.log(\"fromJSON\");\n        var _result,\n            stmts = [],\n            stmt,\n            i\n        ;\n\n        try {\n            _result = JSON.parse(resultJSON);\n        } catch (parseError) {\n            StatementsResult.prototype.log(\"fromJSON - JSON.parse error: \" + parseError);\n        }\n\n        if (_result) {\n            for (i = 0; i < _result.statements.length; i += 1) {\n                try {\n                    stmt = new TinCan.Statement (_result.statements[i], 4);\n                } catch (error) {\n                    StatementsResult.prototype.log(\"fromJSON - statement instantiation failed: \" + error + \" (\" + JSON.stringify(_result.statements[i]) + \")\");\n\n                    stmt = new TinCan.Statement (\n                        {\n                            id: _result.statements[i].id\n                        },\n                        4\n                    );\n                }\n\n                stmts.push(stmt);\n            }\n            _result.statements = stmts;\n        }\n\n        return new StatementsResult (_result);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.State\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.State\n    @constructor\n    */\n    var State = TinCan.State = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property id\n        @type String\n        */\n        this.id = null;\n\n        /**\n        @property updated\n        @type Boolean\n        */\n        this.updated = null;\n\n        /**\n        @property contents\n        @type String\n        */\n        this.contents = null;\n\n        /**\n        @property etag\n        @type String\n        */\n        this.etag = null;\n\n        /**\n        @property contentType\n        @type String\n        */\n        this.contentType = null;\n\n        this.init(cfg);\n    };\n    State.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"State\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"id\",\n                    \"contents\",\n                    \"etag\",\n                    \"contentType\"\n                ];\n\n            cfg = cfg || {};\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n\n            this.updated = false;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} State\n    @static\n    */\n    State.fromJSON = function (stateJSON) {\n        State.prototype.log(\"fromJSON\");\n        var _state = JSON.parse(stateJSON);\n\n        return new State(_state);\n    };\n}());\n\n/*\n    Copyright 2012 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.ActivityProfile\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.ActivityProfile\n    @constructor\n    */\n    var ActivityProfile = TinCan.ActivityProfile = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property id\n        @type String\n        */\n        this.id = null;\n\n        /**\n        @property activity\n        @type TinCan.Activity\n        */\n        this.activity = null;\n\n        /**\n        @property updated\n        @type String\n        */\n        this.updated = null;\n\n        /**\n        @property contents\n        @type String\n        */\n        this.contents = null;\n\n        /**\n        SHA1 of contents as provided by the server during last fetch,\n        this should be passed through to saveActivityProfile\n\n        @property etag\n        @type String\n        */\n        this.etag = null;\n\n        /**\n        @property contentType\n        @type String\n        */\n        this.contentType = null;\n\n        this.init(cfg);\n    };\n    ActivityProfile.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"ActivityProfile\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"id\",\n                    \"contents\",\n                    \"etag\",\n                    \"contentType\"\n                ];\n\n            cfg = cfg || {};\n\n            if (cfg.hasOwnProperty(\"activity\")) {\n                if (cfg.activity instanceof TinCan.Activity) {\n                    this.activity = cfg.activity;\n                }\n                else {\n                    this.activity = new TinCan.Activity (cfg.activity);\n                }\n            }\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n\n            this.updated = false;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} ActivityProfile\n    @static\n    */\n    ActivityProfile.fromJSON = function (stateJSON) {\n        ActivityProfile.prototype.log(\"fromJSON\");\n        var _state = JSON.parse(stateJSON);\n\n        return new ActivityProfile(_state);\n    };\n}());\n\n/*\n    Copyright 2013 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.AgentProfile\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.AgentProfile\n    @constructor\n    */\n    var AgentProfile = TinCan.AgentProfile = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property id\n        @type String\n        */\n        this.id = null;\n\n        /**\n        @property agent\n        @type TinCan.Agent\n        */\n        this.agent = null;\n\n        /**\n        @property updated\n        @type String\n        */\n        this.updated = null;\n\n        /**\n        @property contents\n        @type String\n        */\n        this.contents = null;\n\n        /**\n        SHA1 of contents as provided by the server during last fetch,\n        this should be passed through to saveAgentProfile\n\n        @property etag\n        @type String\n        */\n        this.etag = null;\n\n        /**\n        @property contentType\n        @type String\n        */\n        this.contentType = null;\n\n        this.init(cfg);\n    };\n    AgentProfile.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"AgentProfile\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"id\",\n                    \"contents\",\n                    \"etag\",\n                    \"contentType\"\n                ];\n\n            cfg = cfg || {};\n\n            if (cfg.hasOwnProperty(\"agent\")) {\n                if (cfg.agent instanceof TinCan.Agent) {\n                    this.agent = cfg.agent;\n                }\n                else {\n                    this.agent = new TinCan.Agent (cfg.agent);\n                }\n            }\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n\n            this.updated = false;\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} AgentProfile\n    @static\n    */\n    AgentProfile.fromJSON = function (stateJSON) {\n        AgentProfile.prototype.log(\"fromJSON\");\n        var _state = JSON.parse(stateJSON);\n\n        return new AgentProfile(_state);\n    };\n}());\n\n/*\n    Copyright 2014 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.About\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.About\n    @constructor\n    */\n    var About = TinCan.About = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property version\n        @type {String[]}\n        */\n        this.version = null;\n\n        this.init(cfg);\n    };\n    About.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"About\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"version\"\n                ];\n\n            cfg = cfg || {};\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} About\n    @static\n    */\n    About.fromJSON = function (aboutJSON) {\n        About.prototype.log(\"fromJSON\");\n        var _about = JSON.parse(aboutJSON);\n\n        return new About(_about);\n    };\n}());\n\n/*\n    Copyright 2016 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Attachment\n**/\n(function () {\n    \"use strict\";\n\n    /**\n    @class TinCan.Attachment\n    @constructor\n    */\n    var Attachment = TinCan.Attachment = function (cfg) {\n        this.log(\"constructor\");\n\n        /**\n        @property usageType\n        @type String\n        */\n        this.usageType = null;\n\n        /**\n        @property display\n        @type Object\n        */\n        this.display = null;\n\n        /**\n        @property contentType\n        @type String\n        */\n        this.contentType = null;\n\n        /**\n        @property length\n        @type int\n        */\n        this.length = null;\n\n        /**\n        @property sha2\n        @type String\n        */\n        this.sha2 = null;\n\n        /**\n        @property description\n        @type Object\n        */\n        this.description = null;\n\n        /**\n        @property fileUrl\n        @type String\n        */\n        this.fileUrl = null;\n\n        /**\n        @property content\n        @type ArrayBuffer\n        */\n        this.content = null;\n\n        this.init(cfg);\n    };\n    Attachment.prototype = {\n        /**\n        @property LOG_SRC\n        */\n        LOG_SRC: \"Attachment\",\n\n        /**\n        @method log\n        */\n        log: TinCan.prototype.log,\n\n        /**\n        @method init\n        @param {Object} [options] Configuration used to initialize\n        */\n        init: function (cfg) {\n            this.log(\"init\");\n            var i,\n                directProps = [\n                    \"contentType\",\n                    \"length\",\n                    \"sha2\",\n                    \"usageType\",\n                    \"display\",\n                    \"description\",\n                    \"fileUrl\"\n                ]\n            ;\n\n            cfg = cfg || {};\n\n            for (i = 0; i < directProps.length; i += 1) {\n                if (cfg.hasOwnProperty(directProps[i]) && cfg[directProps[i]] !== null) {\n                    this[directProps[i]] = cfg[directProps[i]];\n                }\n            }\n\n            if (cfg.hasOwnProperty(\"content\") && cfg.content !== null) {\n                if (typeof cfg.content === \"string\") {\n                    this.setContentFromString(cfg.content);\n                }\n                else {\n                    this.setContent(cfg.content);\n                }\n            }\n        },\n\n        /**\n        @method asVersion\n        @param {String} [version] Version to return (defaults to newest supported)\n        */\n        asVersion: function (version) {\n            this.log(\"asVersion\");\n            var result;\n\n            version = version || TinCan.versions()[0];\n\n            if (version === \"0.9\" || version === \"0.95\") {\n                result = null;\n            }\n            else {\n                result = {\n                    contentType: this.contentType,\n                    display: this.display,\n                    length: this.length,\n                    sha2: this.sha2,\n                    usageType: this.usageType\n                };\n\n                if (this.fileUrl !== null) {\n                    result.fileUrl = this.fileUrl;\n                }\n                if (this.description !== null) {\n                    result.description = this.description;\n                }\n            }\n\n            return result;\n        },\n\n        /**\n        See {{#crossLink \"TinCan.Utils/getLangDictionaryValue\"}}{{/crossLink}}\n\n        @method getLangDictionaryValue\n        */\n        getLangDictionaryValue: TinCan.Utils.getLangDictionaryValue,\n\n        /**\n        @method setContent\n        @param {ArrayBuffer} content Sets content from ArrayBuffer\n        */\n        setContent: function (content) {\n            this.content = content;\n            this.length = content.byteLength;\n            this.sha2 = TinCan.Utils.getSHA256String(content);\n        },\n\n        /**\n        @method setContentFromString\n        @param {String} content Sets the content property of the attachment from a string\n        */\n        setContentFromString: function (content) {\n            var _content = content;\n\n            _content = TinCan.Utils.stringToArrayBuffer(content);\n\n            this.setContent(_content);\n        },\n\n        /**\n        @method getContentAsString\n        @return {String} Value of content property as a string\n        */\n        getContentAsString: function () {\n            return TinCan.Utils.stringFromArrayBuffer(this.content);\n        }\n    };\n\n    /**\n    @method fromJSON\n    @return {Object} Attachment\n    @static\n    */\n    Attachment.fromJSON = function (attachmentJSON) {\n        Attachment.prototype.log(\"fromJSON\");\n        var _attachment = JSON.parse(attachmentJSON);\n\n        return new Attachment(_attachment);\n    };\n\n    Attachment._defaultEncoding = \"utf-8\";\n}());\n\n/*\n    Copyright 2012-2013 Rustici Software\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n*/\n\n/**\nTinCan client library\n\n@module TinCan\n@submodule TinCan.Environment.Node\n**/\n(function () {\n    /* globals require,Buffer,ArrayBuffer,Uint8Array */\n    \"use strict\";\n    var LOG_SRC = \"Environment.Node\",\n        log = TinCan.prototype.log,\n        querystring = require(\"querystring\"),\n        XMLHttpRequest = require(\"xhr2\"),\n        requestComplete,\n        __createJSONSegment,\n        __createAttachmentSegment;\n\n    requestComplete = function (xhr, cfg) {\n        log(\"requestComplete - xhr.status: \" + xhr.status, LOG_SRC);\n        log(\"requestComplete - xhr.responseText: \" + xhr.responseText, LOG_SRC);\n        var requestCompleteResult,\n            httpStatus = xhr.status,\n            notFoundOk = (cfg.ignore404 && httpStatus === 404);\n\n        if ((httpStatus >= 200 && httpStatus < 400) || notFoundOk) {\n            if (cfg.callback) {\n                cfg.callback(null, xhr);\n                return;\n            }\n\n            requestCompleteResult = {\n                err: null,\n                xhr: xhr\n            };\n            return requestCompleteResult;\n        }\n\n        requestCompleteResult = {\n            err: httpStatus,\n            xhr: xhr\n        };\n        if (httpStatus === 0) {\n            log(\"[warning] There was a problem communicating with the Learning Record Store. Aborted, offline, or invalid CORS endpoint (\" + httpStatus + \")\", LOG_SRC);\n        }\n        else {\n            log(\"[warning] There was a problem communicating with the Learning Record Store. (\" + httpStatus + \" | \" + xhr.responseText+ \")\", LOG_SRC);\n        }\n        if (cfg.callback) {\n            cfg.callback(httpStatus, xhr);\n        }\n        return requestCompleteResult;\n    };\n\n    //\n    // Override LRS' init method to set up our request handling\n    // capabilities, basically empty implementation here so that\n    // we don't get a no-env loaded message\n    //\n    TinCan.LRS.prototype._initByEnvironment = function () {};\n\n    //\n    // use XMLHttpRequest module instead of standard Node.js http/https\n    // modules since we have to support both, and because the callbacks\n    // provided via the methods calling _makeRequest expect the xhr to\n    // have a certain interface, that interface happens to be the browser\n    // version of XHR since that's where it started, so rather than\n    // changing them to use a different wrapped request/response object\n    // set just use a wrapped version of the node objects which is what\n    // XMLHttpRequest module provides\n    //\n    TinCan.LRS.prototype._makeRequest = function (fullUrl, headers, cfg) {\n        log(\"_makeRequest using http/https\", LOG_SRC);\n        var xhr,\n            url = fullUrl,\n            async = typeof cfg.callback !== \"undefined\",\n            prop\n        ;\n        if (typeof cfg.params !== \"undefined\" && Object.keys(cfg.params).length > 0) {\n            url += \"?\" + querystring.stringify(cfg.params);\n        }\n\n        xhr = new XMLHttpRequest();\n        xhr.open(cfg.method, url, async);\n\n        if (cfg.expectMultipart) {\n            xhr.responseType = \"arraybuffer\";\n        }\n\n        for (prop in headers) {\n            if (headers.hasOwnProperty(prop)) {\n                xhr.setRequestHeader(prop, headers[prop]);\n            }\n        }\n\n        if (typeof cfg.data !== \"undefined\") {\n            cfg.data += \"\";\n        }\n\n        if (async) {\n            xhr.onreadystatechange = function () {\n                log(\"xhr.onreadystatechange - xhr.readyState: \" + xhr.readyState, LOG_SRC);\n                if (xhr.readyState === 4) {\n                    requestComplete(xhr, cfg);\n                }\n            };\n        }\n\n        xhr.send(cfg.data);\n\n        if (async) {\n            return xhr;\n        }\n\n        return requestComplete(xhr, cfg);\n    };\n\n    //\n    // Synchronos xhr handling is unsupported in node\n    //\n    TinCan.LRS.syncEnabled = false;\n\n    TinCan.LRS.prototype._getMultipartRequestData = function (boundary, jsonContent, requestAttachments) {\n        var parts = [],\n            i;\n\n        parts.push(\n            __createJSONSegment(\n                boundary,\n                jsonContent\n            )\n        );\n        for (i = 0; i < requestAttachments.length; i += 1) {\n            if (requestAttachments[i].content !== null) {\n                parts.push(\n                    __createAttachmentSegment(\n                        boundary,\n                        requestAttachments[i].content,\n                        requestAttachments[i].sha2,\n                        requestAttachments[i].contentType\n                    )\n                );\n            }\n        }\n        if (typeof Buffer.from === \"undefined\") {\n            parts.push( new Buffer(\"\\r\\n--\" + boundary + \"--\\r\\n\") );\n        }\n        else {\n            parts.push( Buffer.from(\"\\r\\n--\" + boundary + \"--\\r\\n\") );\n        }\n\n        return Buffer.concat(parts);\n    };\n\n    __createJSONSegment = function (boundary, jsonContent) {\n        var content = [\n                \"--\" + boundary,\n                \"Content-Type: application/json\",\n                \"\",\n                JSON.stringify(jsonContent)\n            ].join(\"\\r\\n\");\n\n        content += \"\\r\\n\";\n\n        if (typeof Buffer.from === \"undefined\") {\n            return new Buffer(content);\n        }\n        return Buffer.from(content);\n    };\n\n    __createAttachmentSegment = function (boundary, content, sha2, contentType) {\n        var bufferParts = [],\n            header = [\n                \"--\" + boundary,\n                \"Content-Type: \" + contentType,\n                \"Content-Transfer-Encoding: binary\",\n                \"X-Experience-API-Hash: \" + sha2\n            ].join(\"\\r\\n\");\n\n        header += \"\\r\\n\\r\\n\";\n\n        if (typeof Buffer.from === \"undefined\") {\n            bufferParts.push( new Buffer(header) );\n            bufferParts.push( new Buffer(content) );\n        }\n        else {\n            bufferParts.push(Buffer.from(header));\n            bufferParts.push(Buffer.from(content));\n        }\n\n        return Buffer.concat(bufferParts);\n    };\n\n    TinCan.Utils.stringToArrayBuffer = function (content, encoding) {\n        var b,\n            ab,\n            view,\n            i;\n\n        if (! encoding) {\n            encoding = TinCan.Utils.defaultEncoding;\n        }\n\n        if (typeof Buffer.from === \"undefined\") {\n            // for Node.js prior to v4.x\n            b = new Buffer(content, encoding);\n\n            ab = new ArrayBuffer(b.length);\n            view = new Uint8Array(ab);\n            for (i = 0; i < b.length; i += 1) {\n                view[i] = b[i];\n            }\n\n            return ab;\n        }\n\n        b = Buffer.from(content, encoding);\n        ab = b.buffer;\n\n        //\n        // this .slice is required because of the internals of how Buffer is\n        // implemented, it uses a shared ArrayBuffer underneath for small buffers\n        // see http://stackoverflow.com/a/31394257/1464957\n        //\n        return ab.slice(b.byteOffset, b.byteOffset + b.byteLength);\n    };\n\n    TinCan.Utils.stringFromArrayBuffer = function (content, encoding) {\n        var b,\n            view,\n            i;\n\n        if (! encoding) {\n            encoding = TinCan.Utils.defaultEncoding;\n        }\n\n        if (typeof Buffer.from === \"undefined\") {\n            // for Node.js prior to v4.x\n            b = new Buffer(content.byteLength);\n\n            view = new Uint8Array(content);\n            for (i = 0; i < b.length; i += 1) {\n                b[i] = view[i];\n            }\n        }\n        else {\n            b = Buffer.from(content);\n        }\n\n        return b.toString(encoding);\n    };\n}());\n","// Generated by CoffeeScript 1.6.3\n(function() {\n  var InvalidStateError, NetworkError, SecurityError, XMLHttpRequest, XMLHttpRequestEventTarget, XMLHttpRequestProgressEvent, XMLHttpRequestUpload, http, https, os, url, _ref,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  XMLHttpRequestEventTarget = (function() {\n    function XMLHttpRequestEventTarget() {\n      this.onloadstart = null;\n      this.onprogress = null;\n      this.onabort = null;\n      this.onerror = null;\n      this.onload = null;\n      this.ontimeout = null;\n      this.onloadend = null;\n      this._listeners = {};\n    }\n\n    XMLHttpRequestEventTarget.prototype.onloadstart = null;\n\n    XMLHttpRequestEventTarget.prototype.onprogress = null;\n\n    XMLHttpRequestEventTarget.prototype.onabort = null;\n\n    XMLHttpRequestEventTarget.prototype.onerror = null;\n\n    XMLHttpRequestEventTarget.prototype.onload = null;\n\n    XMLHttpRequestEventTarget.prototype.ontimeout = null;\n\n    XMLHttpRequestEventTarget.prototype.onloadend = null;\n\n    XMLHttpRequestEventTarget.prototype.addEventListener = function(eventType, listener) {\n      var _base;\n      eventType = eventType.toLowerCase();\n      (_base = this._listeners)[eventType] || (_base[eventType] = []);\n      this._listeners[eventType].push(listener);\n      return void 0;\n    };\n\n    XMLHttpRequestEventTarget.prototype.removeEventListener = function(eventType, listener) {\n      var index;\n      eventType = eventType.toLowerCase();\n      if (this._listeners[eventType]) {\n        index = this._listeners[eventType].indexOf(listener);\n        if (index !== -1) {\n          this._listeners.splice(index, 1);\n        }\n      }\n      return void 0;\n    };\n\n    XMLHttpRequestEventTarget.prototype.dispatchEvent = function(event) {\n      var eventType, listener, listeners, _i, _len;\n      eventType = event.type;\n      if (listeners = this._listeners[eventType]) {\n        for (_i = 0, _len = listeners.length; _i < _len; _i++) {\n          listener = listeners[_i];\n          listener(event);\n        }\n      }\n      if (listener = this[\"on\" + eventType]) {\n        listener(event);\n      }\n      return void 0;\n    };\n\n    return XMLHttpRequestEventTarget;\n\n  })();\n\n  http = require('http');\n\n  https = require('https');\n\n  os = require('os');\n\n  url = require('url');\n\n  XMLHttpRequest = (function(_super) {\n    __extends(XMLHttpRequest, _super);\n\n    function XMLHttpRequest(options) {\n      XMLHttpRequest.__super__.constructor.call(this);\n      this.onreadystatechange = null;\n      this._anonymous = options && options.anon;\n      this.readyState = XMLHttpRequest.UNSENT;\n      this.response = null;\n      this.responseText = '';\n      this.responseType = '';\n      this.status = 0;\n      this.statusText = '';\n      this.timeout = 0;\n      this.upload = new XMLHttpRequestUpload(this);\n      this._method = null;\n      this._url = null;\n      this._sync = false;\n      this._headers = null;\n      this._loweredHeaders = null;\n      this._mimeOverride = null;\n      this._request = null;\n      this._response = null;\n      this._responseParts = null;\n      this._responseHeaders = null;\n      this._aborting = null;\n      this._error = null;\n      this._loadedBytes = 0;\n      this._totalBytes = 0;\n      this._lengthComputable = false;\n    }\n\n    XMLHttpRequest.prototype.onreadystatechange = null;\n\n    XMLHttpRequest.prototype.readyState = null;\n\n    XMLHttpRequest.prototype.response = null;\n\n    XMLHttpRequest.prototype.responseText = null;\n\n    XMLHttpRequest.prototype.responseType = null;\n\n    XMLHttpRequest.prototype.status = null;\n\n    XMLHttpRequest.prototype.timeout = null;\n\n    XMLHttpRequest.prototype.upload = null;\n\n    XMLHttpRequest.prototype.open = function(method, url, async, user, password) {\n      var xhrUrl;\n      method = method.toUpperCase();\n      if (method in this._restrictedMethods) {\n        throw new SecurityError(\"HTTP method \" + method + \" is not allowed in XHR\");\n      }\n      xhrUrl = this._parseUrl(url);\n      if (async === void 0) {\n        async = true;\n      }\n      switch (this.readyState) {\n        case XMLHttpRequest.UNSENT:\n        case XMLHttpRequest.OPENED:\n        case XMLHttpRequest.DONE:\n          null;\n          break;\n        case XMLHttpRequest.HEADERS_RECEIVED:\n        case XMLHttpRequest.LOADING:\n          null;\n      }\n      this._method = method;\n      this._url = xhrUrl;\n      this._sync = !async;\n      this._headers = {};\n      this._loweredHeaders = {};\n      this._mimeOverride = null;\n      this._setReadyState(XMLHttpRequest.OPENED);\n      this._request = null;\n      this._response = null;\n      this.status = 0;\n      this.statusText = '';\n      this._responseParts = [];\n      this._responseHeaders = null;\n      this._loadedBytes = 0;\n      this._totalBytes = 0;\n      this._lengthComputable = false;\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.setRequestHeader = function(name, value) {\n      var loweredName;\n      if (this.readyState !== XMLHttpRequest.OPENED) {\n        throw new InvalidStateError(\"XHR readyState must be OPENED\");\n      }\n      loweredName = name.toLowerCase();\n      if (this._restrictedHeaders[loweredName] || /^sec\\-/.test(loweredName) || /^proxy-/.test(loweredName)) {\n        console.warn(\"Refused to set unsafe header \\\"\" + name + \"\\\"\");\n        return void 0;\n      }\n      value = value.toString();\n      if (loweredName in this._loweredHeaders) {\n        name = this._loweredHeaders[loweredName];\n        this._headers[name] = this._headers[name] + ', ' + value;\n      } else {\n        this._loweredHeaders[loweredName] = name;\n        this._headers[name] = value;\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.send = function(data) {\n      if (this.readyState !== XMLHttpRequest.OPENED) {\n        throw new InvalidStateError(\"XHR readyState must be OPENED\");\n      }\n      if (this._request) {\n        throw new InvalidStateError(\"send() already called\");\n      }\n      switch (this._url.protocol) {\n        case 'file:':\n          this._sendFile(data);\n          break;\n        case 'http:':\n        case 'https:':\n          this._sendHttp(data);\n          break;\n        default:\n          throw new NetworkError(\"Unsupported protocol \" + this._url.protocol);\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.abort = function() {\n      if (!this._request) {\n        return;\n      }\n      this._request.abort();\n      this._setError();\n      this._dispatchProgress('abort');\n      this._dispatchProgress('loadend');\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.getResponseHeader = function(name) {\n      var loweredName;\n      if (!this._responseHeaders) {\n        return null;\n      }\n      loweredName = name.toLowerCase();\n      if (loweredName in this._responseHeaders) {\n        return this._responseHeaders[loweredName];\n      } else {\n        return null;\n      }\n    };\n\n    XMLHttpRequest.prototype.getAllResponseHeaders = function() {\n      var lines, name, value;\n      if (!this._responseHeaders) {\n        return '';\n      }\n      lines = (function() {\n        var _ref, _results;\n        _ref = this._responseHeaders;\n        _results = [];\n        for (name in _ref) {\n          value = _ref[name];\n          _results.push(\"\" + name + \": \" + value);\n        }\n        return _results;\n      }).call(this);\n      return lines.join(\"\\r\\n\");\n    };\n\n    XMLHttpRequest.prototype.overrideMimeType = function(newMimeType) {\n      if (this.readyState === XMLHttpRequest.LOADING || this.readyState === XMLHttpRequest.DONE) {\n        throw new InvalidStateError(\"overrideMimeType() not allowed in LOADING or DONE\");\n      }\n      this._mimeOverride = newMimeType.toLowerCase();\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.nodejsSet = function(options) {\n      if ('httpAgent' in options) {\n        this.nodejsHttpAgent = options.httpAgent;\n      }\n      if ('httpsAgent' in options) {\n        this.nodejsHttpsAgent = options.httpsAgent;\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.nodejsSet = function(options) {\n      XMLHttpRequest.prototype.nodejsSet(options);\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.UNSENT = 0;\n\n    XMLHttpRequest.UNSENT = 0;\n\n    XMLHttpRequest.prototype.OPENED = 1;\n\n    XMLHttpRequest.OPENED = 1;\n\n    XMLHttpRequest.prototype.HEADERS_RECEIVED = 2;\n\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\n\n    XMLHttpRequest.prototype.LOADING = 3;\n\n    XMLHttpRequest.LOADING = 3;\n\n    XMLHttpRequest.prototype.DONE = 4;\n\n    XMLHttpRequest.DONE = 4;\n\n    XMLHttpRequest.prototype.nodejsHttpAgent = http.globalAgent;\n\n    XMLHttpRequest.prototype.nodejsHttpsAgent = https.globalAgent;\n\n    XMLHttpRequest.prototype._restrictedMethods = {\n      CONNECT: true,\n      TRACE: true,\n      TRACK: true\n    };\n\n    XMLHttpRequest.prototype._restrictedHeaders = {\n      'accept-charset': true,\n      'accept-encoding': true,\n      'access-control-request-headers': true,\n      'access-control-request-method': true,\n      connection: true,\n      'content-length': true,\n      cookie: true,\n      cookie2: true,\n      date: true,\n      dnt: true,\n      expect: true,\n      host: true,\n      'keep-alive': true,\n      origin: true,\n      referer: true,\n      te: true,\n      trailer: true,\n      'transfer-encoding': true,\n      upgrade: true,\n      'user-agent': true,\n      via: true\n    };\n\n    XMLHttpRequest.prototype._privateHeaders = {\n      'set-cookie': true,\n      'set-cookie2': true\n    };\n\n    XMLHttpRequest.prototype._userAgent = (\"Mozilla/5.0 (\" + (os.type()) + \" \" + (os.arch()) + \") \") + (\"node.js/\" + process.versions.node + \" v8/\" + process.versions.v8);\n\n    XMLHttpRequest.prototype._setReadyState = function(newReadyState) {\n      var event;\n      this.readyState = newReadyState;\n      event = new XMLHttpRequestProgressEvent('readystatechange', this);\n      this.dispatchEvent(event);\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._sendFile = function() {\n      if (this._url.method !== 'GET') {\n        throw new NetworkError('The file protocol only supports GET');\n      }\n      throw new Error(\"Protocol file: not implemented\");\n    };\n\n    XMLHttpRequest.prototype._sendHttp = function(data) {\n      if (this._sync) {\n        throw new Error(\"Synchronous XHR processing not implemented\");\n      }\n      if ((data != null) && (this._method === 'GET' || this._method === 'HEAD')) {\n        console.warn(\"Discarding entity body for \" + this._method + \" requests\");\n        data = null;\n      } else {\n        data || (data = '');\n      }\n      this.upload._setData(data);\n      this._finalizeHeaders();\n      this._sendHxxpRequest();\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._sendHxxpRequest = function() {\n      var agent, hxxp, request,\n        _this = this;\n      if (this._url.protocol === 'http:') {\n        hxxp = http;\n        agent = this.nodejsHttpAgent;\n      } else {\n        hxxp = https;\n        agent = this.nodejsHttpsAgent;\n      }\n      request = hxxp.request({\n        hostname: this._url.hostname,\n        port: this._url.port,\n        path: this._url.path,\n        auth: this._url.auth,\n        method: this._method,\n        headers: this._headers,\n        agent: agent\n      });\n      this._request = request;\n      if (this.timeout) {\n        request.setTimeout(this.timeout, function() {\n          return _this._onHttpTimeout(request);\n        });\n      }\n      request.on('response', function(response) {\n        return _this._onHttpResponse(request, response);\n      });\n      request.on('error', function(error) {\n        return _this._onHttpRequestError(request, error);\n      });\n      this.upload._startUpload(request);\n      if (this._request === request) {\n        this._dispatchProgress('loadstart');\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._finalizeHeaders = function() {\n      this._headers['Connection'] = 'keep-alive';\n      this._headers['Host'] = this._url.host;\n      if (this._anonymous) {\n        this._headers['Referer'] = 'about:blank';\n      }\n      this._headers['User-Agent'] = this._userAgent;\n      this.upload._finalizeHeaders(this._headers, this._loweredHeaders);\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._onHttpResponse = function(request, response) {\n      var lengthString,\n        _this = this;\n      if (this._request !== request) {\n        return;\n      }\n      switch (response.statusCode) {\n        case 301:\n        case 302:\n        case 303:\n        case 307:\n        case 308:\n          this._url = this._parseUrl(response.headers['location']);\n          this._method = 'GET';\n          if ('content-type' in this._loweredHeaders) {\n            delete this._headers[this._loweredHeaders['content-type']];\n            delete this._loweredHeaders['content-type'];\n          }\n          if ('Content-Type' in this._headers) {\n            delete this._headers['Content-Type'];\n          }\n          delete this._headers['Content-Length'];\n          this.upload._reset();\n          this._finalizeHeaders();\n          this._sendHxxpRequest();\n          return;\n      }\n      this._response = response;\n      this._response.on('data', function(data) {\n        return _this._onHttpResponseData(response, data);\n      });\n      this._response.on('end', function() {\n        return _this._onHttpResponseEnd(response);\n      });\n      this._response.on('close', function() {\n        return _this._onHttpResponseClose(response);\n      });\n      this.status = this._response.statusCode;\n      this.statusText = http.STATUS_CODES[this.status];\n      this._parseResponseHeaders(response);\n      if (lengthString = this._responseHeaders['content-length']) {\n        this._totalBytes = parseInt(lengthString);\n        this._lengthComputable = true;\n      } else {\n        this._lengthComputable = false;\n      }\n      return this._setReadyState(XMLHttpRequest.HEADERS_RECEIVED);\n    };\n\n    XMLHttpRequest.prototype._onHttpResponseData = function(response, data) {\n      if (this._response !== response) {\n        return;\n      }\n      this._responseParts.push(data);\n      this._loadedBytes += data.length;\n      if (this.readyState !== XMLHttpRequest.LOADING) {\n        this._setReadyState(XMLHttpRequest.LOADING);\n      }\n      return this._dispatchProgress('progress');\n    };\n\n    XMLHttpRequest.prototype._onHttpResponseEnd = function(response) {\n      if (this._response !== response) {\n        return;\n      }\n      this._parseResponse();\n      this._request = null;\n      this._response = null;\n      this._setReadyState(XMLHttpRequest.DONE);\n      this._dispatchProgress('load');\n      return this._dispatchProgress('loadend');\n    };\n\n    XMLHttpRequest.prototype._onHttpResponseClose = function(response) {\n      var request;\n      if (this._response !== response) {\n        return;\n      }\n      request = this._request;\n      this._setError();\n      request.abort();\n      this._setReadyState(XMLHttpRequest.DONE);\n      this._dispatchProgress('error');\n      return this._dispatchProgress('loadend');\n    };\n\n    XMLHttpRequest.prototype._onHttpTimeout = function(request) {\n      if (this._request !== request) {\n        return;\n      }\n      this._setError();\n      request.abort();\n      this._setReadyState(XMLHttpRequest.DONE);\n      this._dispatchProgress('timeout');\n      return this._dispatchProgress('loadend');\n    };\n\n    XMLHttpRequest.prototype._onHttpRequestError = function(request, error) {\n      if (this._request !== request) {\n        return;\n      }\n      this._setError();\n      request.abort();\n      this._setReadyState(XMLHttpRequest.DONE);\n      this._dispatchProgress('error');\n      return this._dispatchProgress('loadend');\n    };\n\n    XMLHttpRequest.prototype._dispatchProgress = function(eventType) {\n      var event;\n      event = new XMLHttpRequestProgressEvent(eventType, this);\n      event.lengthComputable = this._lengthComputable;\n      event.loaded = this._loadedBytes;\n      event.total = this._totalBytes;\n      this.dispatchEvent(event);\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._setError = function() {\n      this._request = null;\n      this._response = null;\n      this._responseHeaders = null;\n      this._responseParts = null;\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._parseUrl = function(urlString) {\n      var index, password, user, xhrUrl;\n      xhrUrl = url.parse(urlString, false, true);\n      xhrUrl.hash = null;\n      if (xhrUrl.auth && ((typeof user !== \"undefined\" && user !== null) || (typeof password !== \"undefined\" && password !== null))) {\n        index = xhrUrl.auth.indexOf(':');\n        if (index === -1) {\n          if (!user) {\n            user = xhrUrl.auth;\n          }\n        } else {\n          if (!user) {\n            user = xhrUrl.substring(0, index);\n          }\n          if (!password) {\n            password = xhrUrl.substring(index + 1);\n          }\n        }\n      }\n      if (user || password) {\n        xhrUrl.auth = \"\" + user + \":\" + password;\n      }\n      return xhrUrl;\n    };\n\n    XMLHttpRequest.prototype._parseResponseHeaders = function(response) {\n      var loweredName, name, value, _ref;\n      this._responseHeaders = {};\n      _ref = response.headers;\n      for (name in _ref) {\n        value = _ref[name];\n        loweredName = name.toLowerCase();\n        if (this._privateHeaders[loweredName]) {\n          continue;\n        }\n        if (this._mimeOverride !== null && loweredName === 'content-type') {\n          value = this._mimeOverride;\n        }\n        this._responseHeaders[loweredName] = value;\n      }\n      if (this._mimeOverride !== null && !('content-type' in this._responseHeaders)) {\n        this._responseHeaders['content-type'] = this._mimeOverride;\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._parseResponse = function() {\n      var arrayBuffer, buffer, i, jsonError, view, _i, _ref;\n      if (Buffer.concat) {\n        buffer = Buffer.concat(this._responseParts);\n      } else {\n        buffer = this._concatBuffers(this._responseParts);\n      }\n      this._responseParts = null;\n      switch (this.responseType) {\n        case 'text':\n          this._parseTextResponse(buffer);\n          break;\n        case 'json':\n          this.responseText = null;\n          try {\n            this.response = JSON.parse(buffer.toString('utf-8'));\n          } catch (_error) {\n            jsonError = _error;\n            this.response = null;\n          }\n          break;\n        case 'buffer':\n          this.responseText = null;\n          this.response = buffer;\n          break;\n        case 'arraybuffer':\n          this.responseText = null;\n          arrayBuffer = new ArrayBuffer(buffer.length);\n          view = new Uint8Array(arrayBuffer);\n          for (i = _i = 0, _ref = buffer.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n            view[i] = buffer[i];\n          }\n          this.response = arrayBuffer;\n          break;\n        default:\n          this._parseTextResponse(buffer);\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._parseTextResponse = function(buffer) {\n      var e;\n      try {\n        this.responseText = buffer.toString(this._parseResponseEncoding());\n      } catch (_error) {\n        e = _error;\n        this.responseText = buffer.toString('binary');\n      }\n      this.response = this.responseText;\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._parseResponseEncoding = function() {\n      var contentType, encoding, match;\n      encoding = null;\n      if (contentType = this._responseHeaders['content-type']) {\n        if (match = /\\;\\s*charset\\=(.*)$/.exec(contentType)) {\n          return match[1];\n        }\n      }\n      return 'utf-8';\n    };\n\n    XMLHttpRequest.prototype._concatBuffers = function(buffers) {\n      var buffer, length, target, _i, _j, _len, _len1;\n      if (buffers.length === 0) {\n        return new Buffer(0);\n      }\n      if (buffers.length === 1) {\n        return buffers[0];\n      }\n      length = 0;\n      for (_i = 0, _len = buffers.length; _i < _len; _i++) {\n        buffer = buffers[_i];\n        length += buffer.length;\n      }\n      target = new Buffer(length);\n      length = 0;\n      for (_j = 0, _len1 = buffers.length; _j < _len1; _j++) {\n        buffer = buffers[_j];\n        buffer.copy(target, length);\n        length += buffer.length;\n      }\n      return target;\n    };\n\n    return XMLHttpRequest;\n\n  })(XMLHttpRequestEventTarget);\n\n  module.exports = XMLHttpRequest;\n\n  XMLHttpRequest.XMLHttpRequest = XMLHttpRequest;\n\n  SecurityError = (function(_super) {\n    __extends(SecurityError, _super);\n\n    function SecurityError() {\n      SecurityError.__super__.constructor.apply(this, arguments);\n    }\n\n    return SecurityError;\n\n  })(Error);\n\n  XMLHttpRequest.SecurityError = SecurityError;\n\n  InvalidStateError = (function(_super) {\n    __extends(InvalidStateError, _super);\n\n    function InvalidStateError() {\n      InvalidStateError.__super__.constructor.apply(this, arguments);\n    }\n\n    return InvalidStateError;\n\n  })(Error);\n\n  InvalidStateError = (function(_super) {\n    __extends(InvalidStateError, _super);\n\n    function InvalidStateError() {\n      _ref = InvalidStateError.__super__.constructor.apply(this, arguments);\n      return _ref;\n    }\n\n    return InvalidStateError;\n\n  })(Error);\n\n  XMLHttpRequest.InvalidStateError = InvalidStateError;\n\n  NetworkError = (function(_super) {\n    __extends(NetworkError, _super);\n\n    function NetworkError() {\n      NetworkError.__super__.constructor.apply(this, arguments);\n    }\n\n    return NetworkError;\n\n  })(Error);\n\n  XMLHttpRequest.NetworkError = NetworkError;\n\n  XMLHttpRequestProgressEvent = (function() {\n    function XMLHttpRequestProgressEvent(type, target) {\n      this.type = type;\n      this.target = target;\n      this.currentTarget = this.target;\n      this.lengthComputable = false;\n      this.loaded = 0;\n      this.total = 0;\n    }\n\n    XMLHttpRequestProgressEvent.prototype.bubbles = false;\n\n    XMLHttpRequestProgressEvent.prototype.cancelable = false;\n\n    XMLHttpRequestProgressEvent.prototype.target = null;\n\n    XMLHttpRequestProgressEvent.prototype.loaded = null;\n\n    XMLHttpRequestProgressEvent.prototype.lengthComputable = null;\n\n    XMLHttpRequestProgressEvent.prototype.total = null;\n\n    return XMLHttpRequestProgressEvent;\n\n  })();\n\n  XMLHttpRequest.XMLHttpRequestProgressEvent = XMLHttpRequestProgressEvent;\n\n  XMLHttpRequestUpload = (function(_super) {\n    __extends(XMLHttpRequestUpload, _super);\n\n    function XMLHttpRequestUpload(request) {\n      XMLHttpRequestUpload.__super__.constructor.call(this);\n      this._request = request;\n      this._reset();\n    }\n\n    XMLHttpRequestUpload.prototype._reset = function() {\n      this._contentType = null;\n      this._body = null;\n      return void 0;\n    };\n\n    XMLHttpRequestUpload.prototype._setData = function(data) {\n      var body, i, offset, view, _i, _j, _ref1, _ref2;\n      if (typeof data === 'undefined' || data === null) {\n        return;\n      }\n      if (typeof data === 'string') {\n        if (data.length !== 0) {\n          this._contentType = 'text/plain;charset=UTF-8';\n        }\n        this._body = new Buffer(data, 'utf8');\n      } else if (Buffer.isBuffer(data)) {\n        this._body = data;\n      } else if (data instanceof ArrayBuffer) {\n        body = new Buffer(data.byteLength);\n        view = new Uint8Array(data);\n        for (i = _i = 0, _ref1 = data.byteLength; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {\n          body[i] = view[i];\n        }\n        this._body = body;\n      } else if (data.buffer && data.buffer instanceof ArrayBuffer) {\n        body = new Buffer(data.byteLength);\n        offset = data.byteOffset;\n        view = new Uint8Array(data.buffer);\n        for (i = _j = 0, _ref2 = data.byteLength; 0 <= _ref2 ? _j < _ref2 : _j > _ref2; i = 0 <= _ref2 ? ++_j : --_j) {\n          body[i] = view[i + offset];\n        }\n        this._body = body;\n      } else {\n        throw new Error(\"Unsupported send() data \" + data);\n      }\n      return void 0;\n    };\n\n    XMLHttpRequestUpload.prototype._finalizeHeaders = function(headers, loweredHeaders) {\n      if (this._contentType) {\n        if (!('content-type' in loweredHeaders)) {\n          headers['Content-Type'] = this._contentType;\n        }\n      }\n      if (this._body) {\n        headers['Content-Length'] = this._body.length.toString();\n      }\n      return void 0;\n    };\n\n    XMLHttpRequestUpload.prototype._startUpload = function(request) {\n      if (this._body) {\n        request.write(this._body);\n      }\n      request.end();\n      return void 0;\n    };\n\n    return XMLHttpRequestUpload;\n\n  })(XMLHttpRequestEventTarget);\n\n  XMLHttpRequest.XMLHttpRequestUpload = XMLHttpRequestUpload;\n\n}).call(this);\n","exports.endianness = function () { return 'LE' };\n\nexports.hostname = function () {\n    if (typeof location !== 'undefined') {\n        return location.hostname\n    }\n    else return '';\n};\n\nexports.loadavg = function () { return [] };\n\nexports.uptime = function () { return 0 };\n\nexports.freemem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.totalmem = function () {\n    return Number.MAX_VALUE;\n};\n\nexports.cpus = function () { return [] };\n\nexports.type = function () { return 'Browser' };\n\nexports.release = function () {\n    if (typeof navigator !== 'undefined') {\n        return navigator.appVersion;\n    }\n    return '';\n};\n\nexports.networkInterfaces\n= exports.getNetworkInterfaces\n= function () { return {} };\n\nexports.arch = function () { return 'javascript' };\n\nexports.platform = function () { return 'browser' };\n\nexports.tmpdir = exports.tmpDir = function () {\n    return '/tmp';\n};\n\nexports.EOL = '\\n';\n\nexports.homedir = function () {\n\treturn '/'\n};\n","import React, { useEffect, useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link, withRouter } from 'react-router-dom';\nimport Slider from 'react-slick';\nimport { connect, useDispatch, useSelector } from 'react-redux';\nimport Switch from 'react-switch';\nimport Swal from 'sweetalert2';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { changePlaylistTitleAction, deletePlaylistAction, loadProjectPlaylistsAction } from 'store/actions/playlist';\nimport {\n  loadMyProjectsActionPreview,\n  toggleProjectShareAction,\n  toggleProjectShareRemovedAction,\n  deleteProjectAction,\n} from 'store/actions/project';\nimport SharePreviewPopup from 'components/SharePreviewPopup';\nimport ActivityCard from 'components/ActivityCard';\nimport DropdownProject from 'containers/Projects/ProjectCard/ProjectCardDropdown';\nimport PlaylistCardDropdown from 'containers/Playlists/PlaylistCard/PlaylistCardDropdown';\nimport GoogleModel from 'components/models/GoogleLoginModal';\nimport DeletePopup from 'components/DeletePopup';\nimport { hideDeletePopupAction, showDeletePopupAction } from 'store/actions/ui';\n\nimport './style.scss';\nimport { getTeamPermission } from 'store/actions/team';\n\nfunction ProjectPreview(props) {\n  const { match, history, changePlaylistTitle } = props;\n\n  const dispatch = useDispatch();\n  const [editTitle, setEditTitle] = useState(false);\n  const editFieldRef = useRef();\n  const organization = useSelector((state) => state.organization);\n  const projectState = useSelector((state) => state.project);\n  const playlistState = useSelector((state) => state.playlist);\n  const ui = useSelector((state) => state.ui);\n  const accordion = useRef([]);\n  const { permission } = organization;\n  const team = useSelector((state) => state.team);\n  const { teamPermission } = team;\n  const { showDeletePlaylistPopup } = ui;\n  const [currentProject, setCurrentProject] = useState(null);\n  const [activeShared, setActiveShared] = useState(true);\n  const [collapsed, setCollapsed] = useState([true]);\n  const [show, setShow] = useState(false);\n  const [selectedProjectId, setSelectedProjectId] = useState(0);\n  const [selectedForEdit, setSelectedForEdit] = useState(null);\n\n  useEffect(() => {\n    setCurrentProject(projectState.projectSelect);\n    setActiveShared(projectState.projectSelect.shared);\n  }, [projectState.projectSelect]);\n  useEffect(() => {\n    if (Object.keys(teamPermission).length === 0 && currentProject?.team?.id && organization?.currentOrganization?.id) {\n      dispatch(getTeamPermission(organization?.currentOrganization?.id, currentProject.team.id));\n    }\n  }, [teamPermission, organization?.currentOrganization, currentProject]);\n  useEffect(() => {\n    if (playlistState.playlists.length === 0) {\n      dispatch(loadProjectPlaylistsAction(match.params.projectId, true));\n    }\n  }, []);\n\n  const handleShow = () => {\n    setShow(true); //! state.show\n  };\n\n  const deletePlaylist = (projectId, id) => {\n    dispatch(deletePlaylistAction(projectId, id)); //! state.show\n  };\n\n  const deleteProject = async (projectId) => {\n    await dispatch(deleteProjectAction(projectId)); //! state.show\n    history.push('/studio');\n  };\n\n  const hideDeletePopup = () => {\n    dispatch(hideDeletePopupAction()); //! state.show\n  };\n\n  const showDeletePopup = (id, title, deleteType) => {\n    dispatch(showDeletePopupAction(id, title, deleteType)); //! state.show\n  };\n\n  const setProjectId = (projectId) => {\n    setSelectedProjectId(projectId);\n  };\n\n  const handleClose = () => {\n    setShow(false);\n  };\n\n  const handleClickPlaylistTitle = () => {\n    setEditTitle(true);\n  };\n  const settings = {\n    dots: false,\n    arrows: true,\n    infinite: false,\n    speed: 500,\n    slidesToShow: 5.5,\n    slidesToScroll: 1,\n  };\n\n  useEffect(() => {\n    if (organization?.currentOrganization?.id) dispatch(loadMyProjectsActionPreview(match.params.projectId));\n  }, [dispatch, match.params.projectId, organization?.currentOrganization?.id]);\n\n  let playlists;\n\n  if (currentProject) {\n    playlists = playlistState.playlists && playlistState.playlists.map((playlist, counter) => {\n      let activities;\n      if (playlist.activities && playlist.activities.length > 0) {\n        activities = playlist.activities.map((activity) => (\n          (Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:view-activity') : permission?.Activity?.includes('activity:view'))\n          && (\n            <ActivityCard\n              activity={activity}\n              projectId={parseInt(match.params.projectId, 10)}\n              playlistId={playlist.id}\n              key={activity.id}\n              playlist={playlist}\n              teamPermission={teamPermission || {}}\n            />\n          )\n        ));\n      } else {\n        activities = (\n          <div className=\"col-md-12\">\n            <div className=\"alert alert-info\" role=\"alert\">\n              No activity defined for this playlist.\n            </div>\n          </div>\n        );\n      }\n      console.log(editTitle);\n      return (\n        (Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:view-playlist') : permission?.Playlist?.includes('playlist:view'))\n        && (\n          <div className=\"check-each\" key={playlist.id}>\n            {(Object.keys(teamPermission).length\n            ? teamPermission?.Team?.includes('team:add-activity') : (permission?.Activity?.includes('activity:create') || permission?.Activity?.includes('activity:upload'))) && (\n              <div className=\"add-btn-activity\">\n                <button\n                  type=\"button\"\n                  className=\"add-resource-to-playlist-btn\"\n                  onClick={() => {\n                    // dispatch(clearSearch());\n                    history.push(`/studio/org/${organization.currentOrganization?.domain}/project/${playlist.project_id}/playlist/${playlist.id}/activity/create`);\n                  }}\n                >\n                  <FontAwesomeIcon icon=\"plus-circle\" className=\"mr-2\" />\n                  Add new activity\n                </button>\n              </div>\n            )}\n            <button\n              type=\"button\"\n              ref={(el) => {\n                accordion.current[counter] = el;\n              }}\n              className={counter === 0 ? 'active accordion' : ' accordion'}\n              onClick={() => {\n                if (!editTitle) {\n                  accordion.current[counter].classList.toggle('active');\n                  const tempCollapsed = [...collapsed];\n                  tempCollapsed[counter] = !tempCollapsed[counter];\n                  setCollapsed(tempCollapsed);\n                }\n              }}\n            >\n              <FontAwesomeIcon icon={collapsed[counter] ? 'minus' : 'plus'} className=\"mr-2\" />\n              {(editTitle && playlist === selectedForEdit)\n                ? (\n                  <>\n                    <input\n                      name=\"playlist-title\"\n                      defaultValue={playlist.title}\n                      ref={editFieldRef}\n                    />\n                    &nbsp;\n                    <FontAwesomeIcon\n                      icon=\"edit\"\n                      className=\"mr-4\"\n                      onClick={() => {\n                        if (playlist.title !== editFieldRef.current.value && editFieldRef.current.value) {\n                          changePlaylistTitle(projectState?.projectSelect?.id, playlist.id, editFieldRef.current.value);\n                        }\n                        setEditTitle(false);\n                      }}\n                    />\n\n                  </>\n                ) : playlist.title }\n            </button>\n\n            <div className=\"panel\">\n              <ul>\n                <Slider {...settings}>{activities}</Slider>\n              </ul>\n            </div>\n            <PlaylistCardDropdown\n              playlist={playlist}\n              projectId={playlist.project_id}\n              selectedProject={playlist.project}\n              setSelectedForEdit={setSelectedForEdit}\n              handleClickPlaylistTitle={handleClickPlaylistTitle}\n              teamPermission={teamPermission || {}}\n            />\n          </div>\n        )\n      );\n    });\n  } else {\n    playlists = (\n      <div className=\"col-md-12\">\n        <div className=\"alert alert-info\" role=\"alert\">\n          No playlists defined for this project.\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {currentProject && (\n        <>\n          <div className=\"container\">\n            <div className=\"scene flex-wrap\">\n              <div className=\"scene-img\">\n                <div id=\"content\" />\n                <Link to={`/studio/org/${organization.currentOrganization?.domain}/project/${currentProject.id}`}>\n                  {!!currentProject.thumb_url && currentProject.thumb_url.includes('pexels.com') ? (\n                    <img src={currentProject.thumb_url} alt=\"thumbnail\" />\n                  ) : (\n                    <img src={global.config.resourceUrl + currentProject.thumb_url} alt=\"thumbnail\" />\n                  )}\n                </Link>\n              </div>\n              <div className=\"sce_cont\">\n                <ul className=\"bar_list flex-div check\">\n                  <li>\n                    <div className=\"team-name\">\n                      {currentProject?.team?.name ? `Team Name: ${currentProject?.team?.name}` : null}\n                    </div>\n                    <div className=\"title_lg check\">\n                      <div>{currentProject.name}</div>\n                      <div className=\"configuration\">\n                        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:view-project') : permission?.Project?.includes('project:view')) && (\n                          <DropdownProject\n                            project={currentProject}\n                            handleShow={handleShow}\n                            setProjectId={setProjectId}\n                            showDeletePopup={showDeletePopup}\n                            teamPermission={teamPermission || {}}\n                            previewMode\n                          />\n                        )}\n                        <Link to={`/studio/org/${organization.currentOrganization?.domain}`} onClick={history.goBack} className=\"go-back-button-preview\">\n                          <FontAwesomeIcon icon=\"undo\" className=\"mr-2\" />\n                          Exit Preview Mode\n                        </Link>\n                        {(Object.keys(teamPermission).length ? teamPermission?.Team?.includes('team:share-project') : permission?.Project?.includes('project:share')) && (\n                        <div className=\"share-button\">\n                          Share Project\n                          <Switch\n                            onColor=\"#5952c6\"\n                            onChange={() => {\n                              if (activeShared) {\n                                Swal.fire({\n                                  icon: 'warning',\n                                  title: `You are about to stop sharing <strong>\"${currentProject.name}\"</strong>`,\n                                  html: `Please remember that anyone you have shared this project\n                                    with will no longer have access its contents. Do you want to continue?`,\n                                  showCloseButton: true,\n                                  showCancelButton: true,\n                                  focusConfirm: false,\n                                  confirmButtonText: 'Stop Sharing!',\n                                  confirmButtonAriaLabel: 'Stop Sharing!',\n                                  cancelButtonText: 'Cancel',\n                                  cancelButtonAriaLabel: 'Cancel',\n                                }).then((resp) => {\n                                  if (resp.isConfirmed) {\n                                    dispatch(toggleProjectShareRemovedAction(\n                                      currentProject.id,\n                                      currentProject.name,\n                                    ));\n                                  }\n                                });\n                              } else {\n                                dispatch(toggleProjectShareAction(currentProject?.id, currentProject.name));\n                              }\n                            }}\n                            checked={activeShared || false}\n                            className=\"react-switch\"\n                            handleDiameter={30}\n                            uncheckedIcon={false}\n                            checkedIcon={false}\n                          />\n                        </div>\n                        )}\n\n                        {activeShared && (\n                          <div\n                            className=\"shared-link\"\n                            onClick={() => {\n                              if (window.gapi && window.gapi.sharetoclassroom) {\n                                window.gapi.sharetoclassroom.go('croom');\n                              }\n                              const protocol = `${window.location.href.split('/')[0]}//`;\n                              const url = `${protocol}${window.location.host}/studio/project/${match.params.projectId}/shared`;\n                              return SharePreviewPopup(url, currentProject.name);\n                            }}\n                          >\n                            <FontAwesomeIcon icon=\"external-link-alt\" className=\"mr-2\" />\n                            View Shared Link\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </li>\n                  <li />\n                  <li />\n                  <li />\n                </ul>\n\n                <ul className=\"rating flex-div\" />\n\n                <p className=\"expandiv\">{currentProject.description}</p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"container\">\n            <div className=\"playlist-div\">\n              <div className=\"playlist-title-div\">\n                <div className=\"title-md\">Playlists</div>\n              </div>\n              <div className=\"all-playlist check-custom\">\n                <div className=\"playlist-accordion\" id=\"custom_accordion\">\n                  {playlists}\n                </div>\n              </div>\n            </div>\n          </div>\n          <GoogleModel\n            projectId={selectedProjectId}\n            show={show} // {props.show}\n            onHide={handleClose}\n          />\n          {showDeletePlaylistPopup && (\n            <DeletePopup\n              ui={ui}\n              selectedProject={currentProject}\n              deletePlaylist={deletePlaylist}\n              hideDeletePopup={hideDeletePopup}\n              deleteProject={deleteProject}\n              // deleteType=\"project\"\n              // showDeletePopup={showDeletePopup}\n            />\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n\nProjectPreview.propTypes = {\n  match: PropTypes.object.isRequired,\n  history: PropTypes.object.isRequired,\n  changePlaylistTitle: PropTypes.func.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  changePlaylistTitle: (projectId, id, title) => dispatch(changePlaylistTitleAction(projectId, id, title)),\n});\n\nexport default withRouter(connect(null, mapDispatchToProps)(ProjectPreview));\n"],"sourceRoot":""}